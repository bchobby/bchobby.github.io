<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android入门教程之Activity（生命周期，启动...） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android入门教程之Activity（生命周期，启动...）" />
<meta property="og:description" content="Activity 是一个应用组件，用户可与其提供的屏幕进行交互，以执行拨打电话、拍摄照片、发送电子邮件或查看地图等操作。 每个 Activity 都会获得一个用于绘制其用户界面的窗口。窗口通常会充满屏幕，但也可小于屏幕并浮动在其他窗口之上。
Activity 1. Activity 的使用 我们新建的工程中带有一个基础 activity。
新建工程中，需要注意3个文件。
MainActivity.java 在src/main/java里，对应的包名目录下。activity_main.xml 在res/layout里。AndroidManifest.xml 在src/main里。这里叫做“清单文件”。 这3个文件分布在不同的地方。简单来说，java文件可以控制界面逻辑。 layout文件（这里指的是activity_main.xml）预设了UI如何摆放。 清单文件告诉系统，我这个app有哪些组件，申请了什么权限。
2. layout - 界面布局 新建的 layout 中，as 一般会默认给一个ConstraintLayout。比如 activity_main.xml。
activity_main.xml
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34; xmlns:tools=&#34;http://schemas.android.com/tools&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; tools:context=&#34;.MainActivity&#34;&gt; &lt;!-- 省略默认的TextView --&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; 这里为了用起来方便，我们把它换成LinearLayout 有的朋友会问，都2021年了，为什么不直接用 ConstraintLayout？
现在不做什么功能，先用LinearLayout，就是为了方便。 换成LinearLayout后，layout文件长这样。
换成LinearLayout后的activity_main.xml
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34; xmlns:tools=&#34;http://schemas.android.com/tools&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; tools:context=&#34;.MainActivity&#34;&gt; &lt;!-- 省略默认的TextView --&gt; &lt;/LinearLayout&gt; 可以看到，标签的开头和结尾都换成了LinearLayout。其他地方暂时不修改。
as功能强大，非常便利。我们可以用鼠标选中标签开始的androidx...Layout，然后直接键盘输入LinearLayout的前几位字母。
as会自动弹出选择框，在里面双击选择LinearLayout或者回车选择，标签就替换完成了。
3. Java - 控制界面 layout文件设计的是界面的初始布局。它决定了初始界面上放着什么UI组件以及组件是怎么组织安排的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/0d367e1607e733ccf4eec61e598faad0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-22T07:00:00+08:00" />
<meta property="article:modified_time" content="2023-08-22T07:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android入门教程之Activity（生命周期，启动...）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/5e/a9/CCrKg6Yq_o.png" alt="在这里插入图片描述"></p> 
<p>Activity 是一个应用组件，用户可与其提供的屏幕进行交互，以执行拨打电话、拍摄照片、发送电子邮件或查看地图等操作。 每个 Activity 都会获得一个用于绘制其用户界面的窗口。窗口通常会充满屏幕，但也可小于屏幕并浮动在其他窗口之上。</p> 
<h4><a id="Activity_7"></a>Activity</h4> 
<h6><a id="1_Activity__9"></a>1. Activity 的使用</h6> 
<p>我们新建的工程中带有一个基础 activity。</p> 
<p>新建工程中，需要注意3个文件。</p> 
<ul><li><strong>MainActivity.java</strong> 在src/main/java里，对应的包名目录下。</li><li><strong>activity_main.xml</strong> 在res/layout里。</li><li><strong>AndroidManifest.xml</strong> 在src/main里。这里叫做“清单文件”。</li></ul> 
<p>这3个文件分布在不同的地方。简单来说，java文件可以控制界面逻辑。 layout文件（这里指的是<strong>activity_main.xml</strong>）预设了UI如何摆放。 清单文件告诉系统，我这个app有哪些组件，申请了什么权限。</p> 
<h6><a id="2_layout___21"></a>2. layout - 界面布局</h6> 
<p>新建的 layout 中，as 一般会默认给一个<code>ConstraintLayout</code>。比如 <strong>activity_main.xml</strong>。</p> 
<p><strong>activity_main.xml</strong></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>androidx<span class="token punctuation">.</span>constraintlayout<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>ConstraintLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>
    <span class="token literal-property property">xmlns</span><span class="token operator">:</span>app<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res-auto"</span>
    <span class="token literal-property property">xmlns</span><span class="token operator">:</span>tools<span class="token operator">=</span><span class="token string">"http://schemas.android.com/tools"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
    <span class="token literal-property property">tools</span><span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">".MainActivity"</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 省略默认的TextView <span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>androidx<span class="token punctuation">.</span>constraintlayout<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>ConstraintLayout<span class="token operator">&gt;</span>
</code></pre> 
<p>这里为了用起来方便，我们把它换成LinearLayout 有的朋友会问，都2021年了，为什么不直接用 ConstraintLayout？</p> 
<p>现在不做什么功能，先用LinearLayout，就是为了方便。 换成LinearLayout后，layout文件长这样。</p> 
<p><strong>换成LinearLayout后的activity_main.xml</strong></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>
    <span class="token literal-property property">xmlns</span><span class="token operator">:</span>app<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res-auto"</span>
    <span class="token literal-property property">xmlns</span><span class="token operator">:</span>tools<span class="token operator">=</span><span class="token string">"http://schemas.android.com/tools"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
    <span class="token literal-property property">tools</span><span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">".MainActivity"</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 省略默认的TextView <span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p>可以看到，标签的开头和结尾都换成了<code>LinearLayout</code>。其他地方暂时不修改。</p> 
<p>as功能强大，非常便利。我们可以用鼠标选中标签开始的<code>androidx...Layout</code>，然后直接键盘输入<code>LinearLayout</code>的前几位字母。</p> 
<p>as会自动弹出选择框，在里面双击选择<code>LinearLayout</code>或者回车选择，标签就替换完成了。</p> 
<h6><a id="3_Java___71"></a>3. Java - 控制界面</h6> 
<p>layout文件设计的是界面的初始布局。它决定了初始界面上放着什么UI组件以及组件是怎么组织安排的。</p> 
<p>这里我们说的是「初始界面」或者「初始布局」。也就是说，我们可以控制界面上的UI元素。</p> 
<p>先看默认的 <strong>MainActivity.java</strong>。在<code>onCreate</code>方法里，<code>R.layout.activity_main</code>指的就是<strong>activity_main.xml</strong>。</p> 
<p>现在layout中有一个TextView，它可以用来显示文字。我们想在<code>MainActivity</code>中控制它，该怎么做呢？</p> 
<p>现在改一下这个TextView。删掉原来ConstraintLayout用到的那些属性。</p> 
<p>给它添加一个id。这个id在这个layout文件中必须是独一无二的。给它分配一个id叫做<code>tv1</code>，就像下面。</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>TextView
    <span class="token literal-property property">android</span><span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/tv1"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"Hello World!"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<p>现在TextView有了身份证，我们在activity中就可以找到它。用的是<code>findViewById</code>方法。</p> 
<pre><code class="prism language-javascript">TextView tv1 <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>现在我们就拿到了界面上的这个TextView对象。可以对它进行操作了。 比如改变它显示的文字。</p> 
<pre><code class="prism language-javascript">TextView tv1 <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿到textView的对象</span>
tv1<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Today is a good day."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 改变文字</span>
</code></pre> 
<h6><a id="4_AndroidManifestxml___112"></a>4. AndroidManifest.xml - 清单文件</h6> 
<p>也可以简称为「manifest文件」。清单文件非常重要，它告诉系统我们的app有哪些activity，用到了什么权限等等信息。</p> 
<p>如果要新建activity，需要在清单中注册。</p> 
<p><strong>AndroidManifest.xml</strong></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>application
    <span class="token literal-property property">android</span><span class="token operator">:</span>allowBackup<span class="token operator">=</span><span class="token string">"true"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">"@mipmap/ic_launcher"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"@string/app_name"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>roundIcon<span class="token operator">=</span><span class="token string">"@mipmap/ic_launcher_round"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>supportsRtl<span class="token operator">=</span><span class="token string">"true"</span>
    <span class="token literal-property property">android</span><span class="token operator">:</span>theme<span class="token operator">=</span><span class="token string">"@style/AppTheme"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>activity android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".MainActivity"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.action.MAIN"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>category android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.category.LAUNCHER"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>activity<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>application<span class="token operator">&gt;</span>
</code></pre> 
<p>从这个默认的清单文件中我们可以得知，activity 是属于 application 的。application 就是我们的应用。</p> 
<p>application 标签中也指定了各种元素，例如应用的图标，名字，主题等等。</p> 
<p>MainActivity 是应用启动的第一个 activity。可以观察到它设置了 action 和category 属性。</p> 
<ul><li><code>android.intent.action.MAIN</code> 决定应用程序最先启动的Activity。</li><li><code>android.intent.category.LAUNCHER</code> 表示可以在手机“桌面”上看到应用图标。</li></ul> 
<p>设置了这 2 个标签，决定了这个 activity 是用户点击应用图标时第一个启动的界面。</p> 
<p><strong>小结</strong> activity是应用重要的组件之一。纷繁复杂的内容需要activity来承载。</p> 
<p>之后我们会在activity中控制各种各样的UI组件，处理用户的操作，申请权限等等。还要了解activity的生命周期，启动方式和跳转方法。</p> 
<hr> 
<h4><a id="Activity__157"></a>Activity 生命周期</h4> 
<p><strong>生命周期图示</strong></p> 
<p><img src="https://images2.imgbox.com/e2/e4/LGnUgZcs_o.png" alt="img"></p> 
<h6><a id="1__163"></a>1. 生命周期变化</h6> 
<p>执行一些常见的操作，打log看一下生命周期的变化。测试机型：RedMi。</p> 
<p><strong>启动然后退出</strong></p> 
<pre><code class="prism language-javascript">onCreate
onStart
onResume
<span class="token literal-property property">onWindowFocusChanged</span><span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token literal-property property">onWindowFocusChanged</span><span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
onPause
onStop
onDestroy
</code></pre> 
<p><strong>启动后按home键</strong></p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">Act1</span><span class="token operator">:</span> onCreate
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStart
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onResume
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token comment">// 按home键</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onPause
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStop

<span class="token comment">// 再回来</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onRestart
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStart
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onResume
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token comment">// 按返回键退出act</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onPause
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStop
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onDestroy
</code></pre> 
<p><strong>旋转手机</strong> activity 在切换横竖屏的时候的生命周期。</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onCreate
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStart
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onResume
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token comment">// 横屏</span>
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onPause
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStop
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onDestroy
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onCreate
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStart
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onResume
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token comment">// 竖屏</span>
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onPause
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStop
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onDestroy
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onCreate
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStart
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onResume
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token comment">// 返回</span>
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onPause
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStop
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onDestroy
</code></pre> 
<p><strong>来回切换的生命周期变化</strong> 以2个Activity启动为例。</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">Act1</span><span class="token operator">:</span> onCreate
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStart
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onResume
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onPause
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onCreate
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onStart
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onResume
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStop
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onPause
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onRestart
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStart
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onResume
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onStop
<span class="token literal-property property">Act2</span><span class="token operator">:</span> onDestroy
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onPause
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onStop
<span class="token literal-property property">Act1</span><span class="token operator">:</span> onDestroy
</code></pre> 
<p><strong>弹出 AlertDialog</strong> 点击按钮弹出一个<code>AlertDialog</code>。观察发现调用 <code>onWindowFocusChanged</code>。</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">onWindowFocusChanged</span><span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token literal-property property">onWindowFocusChanged</span><span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre> 
<p>这里也可以用 DialogFragment 来做测试。</p> 
<p><strong>recreate</strong> 调用 recreate() 方法</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onCreate
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStart
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onResume
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onWindowFocusChanged<span class="token operator">:</span> hasFocus<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> click <span class="token punctuation">[</span>recreate<span class="token punctuation">]</span>
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onPause
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStop
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onDestroy
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onCreate
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onStart
<span class="token punctuation">[</span>Life<span class="token punctuation">]</span><span class="token operator">:</span> onResume
</code></pre> 
<p>可以看到，调用<code>recreate()</code>方法后并没有走<code>onWindowFocusChanged</code>回调。</p> 
<h6><a id="2_onCreate__onStart__307"></a>2. onCreate 和 onStart 的区别</h6> 
<p><strong>activity的状态区别</strong></p> 
<ul><li><code>onCreate</code>在系统首次创建 Activity 时触发。Activity会在创建后进入<em>已创建</em>状态。</li><li>当 Activity 进入“已开始”状态时，系统会调用此回调。<code>onStart()</code> 调用使 Activity 对用户可见，因为应用会为 Activity 进入前台并支持交互做准备。</li></ul> 
<p><code>onStart()</code> 方法会非常快速地完成，并且与“已创建”状态一样，Activity 不会一直处于“已开始”状态。一旦此回调结束，Activity 便会进入已恢复状态，系统将调用 <code>onResume()</code> 方法。</p> 
<h6><a id="3_onPause__onStop__316"></a>3. onPause 和 onStop 的区别</h6> 
<p><code>onPause()</code> 执行非常简单，而且不一定要有足够的时间来执行保存操作。 因此，您不应使用 <code>onPause()</code> 来保存应用或用户数据、进行网络调用，或执行<a href="https://cloud.tencent.com/solution/database?from_column=20065&amp;from=20065" rel="nofollow">数据库</a>事务。因为在该方法完成之前，此类工作可能无法完成。</p> 
<p>已进入已停止状态，因此系统将调用 <code>onStop()</code> 回调。举例而言，如果新启动的 Activity 覆盖整个屏幕，就可能会发生这种情况。</p> 
<p>在 <code>onStop()</code> 方法中，应用应释放或调整应用对用户不可见时的无用资源。例如，应用可以暂停动画效果，或从细粒度位置更新切换到粗粒度位置更新。 使用 <code>onStop()</code> 而非 <code>onPause()</code> 可确保与界面相关的工作继续进行，即使用户在多窗口模式下查看您的 Activity 也能如此。 您还应该使用 <code>onStop()</code> 执行 CPU 相对密集的关闭操作。</p> 
<hr> 
<h4><a id="Activity__326"></a>Activity 启动，携带参数启动</h4> 
<p>前面大致了解了Activity是一个应用组件，能为用户提供一个界面。以及如何新增activity。 一个App中，通常有多个界面。假设每一个界面对应一个activity，不同界面之间怎么跳转呢？</p> 
<h6><a id="1_Intent_330"></a>1. Intent</h6> 
<p>通常activity之间的跳转离不开Intent这个类。 Intent，直译为“意图”。我们把信息包裹在intent对象中，然后执行。 比如启动<code>RelativeLayoutGuideAct</code>这个activity。</p> 
<pre><code class="prism language-javascript"><span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> RelativeLayoutGuideAct<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这里用到一个很常见的方法<code>startActivity (Intent intent)</code>。 <code>startActivity</code>属于Context类，Activity是Context的子类。</p> 
<pre><code class="prism language-javascript">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object
android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Context
android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>ContextWrapper
android<span class="token punctuation">.</span>view<span class="token punctuation">.</span>ContextThemeWrapper
android<span class="token punctuation">.</span>app<span class="token punctuation">.</span>Activity
</code></pre> 
<p>现在我们知道了，启动activity需要使用Intent，调用<code>startActivity</code>方法。</p> 
<h6><a id="2__354"></a>2. 带参数的跳转</h6> 
<p>在跳转去下一个页面时，我们可能会想携带一些信息到下一个界面去。例如携带一些文本，数字等等。 或者是一个对象。 这些信息我们可以交给Intent，传递到下一个activity去。下一个activity中拿到我们传入的Intent。</p> 
<p><strong>携带基本类型和String</strong></p> 
<p>我们直接看intent的方法。</p> 
<pre><code class="prism language-javascript">Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SendParamsDemo<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span>SendParamsDemo<span class="token punctuation">.</span><span class="token constant">K_INT</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span>SendParamsDemo<span class="token punctuation">.</span><span class="token constant">K_BOOL</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span>SendParamsDemo<span class="token punctuation">.</span><span class="token constant">K_STR</span><span class="token punctuation">,</span> <span class="token string">"Input string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>intent的<code>putExtra</code>方法，可以传入参数。它接受1个String作为key，然后是具体参数。 例子中我们跳转去了SendParamsDemo。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendParamsDemo</span> <span class="token keyword">extends</span> <span class="token class-name">AbsActivity</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> final String <span class="token constant">K_INT</span> <span class="token operator">=</span> <span class="token string">"k_int"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> final String <span class="token constant">K_BOOL</span> <span class="token operator">=</span> <span class="token string">"k_bool"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> final String <span class="token constant">K_STR</span> <span class="token operator">=</span> <span class="token string">"k_str"</span><span class="token punctuation">;</span>

    @Override
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token parameter">Bundle savedInstanceState</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">gotInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">gotInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Intent intent <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            int i <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getIntExtra</span><span class="token punctuation">(</span><span class="token constant">K_INT</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            boolean b <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getBooleanExtra</span><span class="token punctuation">(</span><span class="token constant">K_BOOL</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String str <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token constant">K_STR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"gotInput: i:"</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">", b: "</span> <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token string">", str: "</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"gotInput: input null."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// log:</span>
<span class="token comment">// com.rustfisher.tutorial2020 D/rustAppSendParamsDemo: gotInput: i:100, b: true, str: Input string</span>
</code></pre> 
<p>在这个activity中我们接收到了传入的参数。</p> 
<p>观察intent的<code>putExtra</code>方法，我们发现它支持传入很多种参数。</p> 
<p>int，byte, char, float, double, long, boolean，string，CharSequence或是它们的数组。 也可以传入Parcelable，Serializable对象或是对象数组。</p> 
<p><strong>传入Serializable对象</strong></p> 
<p>除了基本类型和String，可以传送对象吗？ 答案是肯定的。Intent可以携带<code>Serializable</code>对象。 <code>Serializable</code>本身是一个接口，自定义的对象实现这个接口后，就可以被Intent携带。 比如我们改造一下DataTest类，让它实现<code>Serializable</code>接口。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataTest</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 实现接口</span>
</code></pre> 
<p>然后将对象送给intent，再启动activity。</p> 
<pre><code class="prism language-javascript">Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> RecyclerViewDemo2Act<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
DataTest out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataTest</span><span class="token punctuation">(</span><span class="token string">"input time"</span><span class="token punctuation">,</span> <span class="token number">233</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"startInputData: sending object: "</span> <span class="token operator">+</span> out<span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span>RecyclerViewDemo2Act<span class="token punctuation">.</span><span class="token constant">K_INPUT_DATA</span><span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>被启动的activity接受传入的intent并取出对象。</p> 
<pre><code class="prism language-javascript">Intent intent <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    DataTest d <span class="token operator">=</span> <span class="token punctuation">(</span>DataTest<span class="token punctuation">)</span> intent<span class="token punctuation">.</span><span class="token function">getSerializableExtra</span><span class="token punctuation">(</span><span class="token constant">K_INPUT_DATA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 取出了对象，拿去显示</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>Serializable</code>接口不含任何方法。实现了这个接口的类，系统会自动将其序列化。</p> 
<p>我们打印出发送和接收到的对象。</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">startInputData</span><span class="token operator">:</span> sending object<span class="token operator">:</span> com<span class="token punctuation">.</span>rustfisher<span class="token punctuation">.</span>tutorial2020<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataTest@fb43df5
<span class="token literal-property property">getInputData</span><span class="token operator">:</span> input data object<span class="token operator">:</span> com<span class="token punctuation">.</span>rustfisher<span class="token punctuation">.</span>tutorial2020<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataTest@a588b5c
</code></pre> 
<p>可以发现这2个对象并不是同一个引用。但它们的“内容”是一样的。对象经历了序列化和反序列化的过程。</p> 
<p>值得注意的是，Intent 能携带的对象大小并不是无限制的。实际开发中，需要开发者自己预估传输的数据大小。</p> 
<p>传送 Parcelable 对象和传送 Serializable 对象类似，用同样的存入和取出操作。</p> 
<hr> 
<h4><a id="Activity__464"></a>Activity 相关面试题</h4> 
<h6><a id="1__466"></a>1. 谈一下返回栈</h6> 
<p>首先理解android是使用Task来管理活动，一个Task就是一组存放在栈里的活动的集合，这个栈就叫做返回栈，每启动一个新的活动，就会将其放入栈顶，当我们点击back回退或调用activity的finish函数处于栈顶的活动就会出栈，前一个入栈的活动就会到栈顶，系统总是显示处于栈顶的活动。</p> 
<h6><a id="2_Activity_470"></a>2. 说下Activity的生命周期？</h6> 
<ul><li>onCreate()方法：活动第一次创建的时候被调用，常做初始化的操作，比如加载布局（setContentView），绑定事件（findViewById）。表示Activity正在创建。</li><li>onStart()方法：活动由不可见到可见的时候被调用，表示Activity正在启动，此时Activity可见但不在前台。</li><li>onResume（）方法：活动准备好和用户进行交互时调用。表示Acitivity获得焦点，此时Activity可见且在前台。</li><li>onPause（）方法：系统准备去启动或恢复另一个活动时调用。表示Activity正在停止，此时可做存储数据，停止动画等操作。</li><li>onStop（）方法：在活动完全不可见的时候调用。表示Activity即将停止。</li><li>onDestory（）方法：在活动被销毁之前调用，表示Activity即将销毁，常做回收工作、资源释放。</li><li>onRestart（）方法：在活动由停止状态变为运行状态之前调用。表示Activity即将重启。</li></ul> 
<h6><a id="3__480"></a>3. 说下活动的生存期</h6> 
<p>活动的生存期分为三个：</p> 
<ul><li>完整生存期</li><li>可见生存期</li><li>前台生存期</li></ul> 
<p><strong>完整生存期</strong>：onCreate（）方法与onDestory（）都处于完整生存期，一般情况下，Activity会在onCreate（）方法中完成各种初始化操作，而在onDestory（）方法中完成释放内存的操作。</p> 
<p>**可见生存期：**onStart（）方法与onStop（）方法就是可见生存期，Activity对于用户是可见的，但无法与用户交互。onStart（）方法中对资源进行加载，onStop（）方法中对资源进行释放。</p> 
<p>**前台生存期：**onResume方法与onPause方法就是前台生存期，在前台生存期内，活动处于运行状态，此时可以与用户交互。</p> 
<h6><a id="4_ActivityonPasue_494"></a>4. 说下Activity处于onPasue（）下可以执行那些操作？</h6> 
<ul><li>用户返回该Activity，调用onResume（）方法，重新running</li><li>用户打开了其他Activity，就会调用onStop（）方法</li><li>系统内存不足，拥有更高权限的应用需要内存，该Activity就会被系统回收</li><li>如果用户返回到onStop（）的Activity又显示在前台了，系统会调用</li></ul> 
<pre><code class="prism language-javascript"><span class="token function">onRestart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 然后重新running
</code></pre> 
<p>当Activity结束（调用finish（）方法）就会调用onDestory（）方法释放所有占用的资源。</p> 
<p><strong>生命周期的切换过程</strong></p> 
<ol><li>启动一个Activity onCreate-&gt;onStart-&gt;onResume</li><li>当一个Activity打开另一个Activity都会回调哪些方法，如果ActivityB是完全透明的呢，如果启动的是一个对话框Activity呢？ A：onPause-&gt;B:onCreate-&gt;B:onStart-&gt;B:onResume-&gt;A:onStop 如果ActivityB是完全透明的或对话框Activity则不会调用onStop。</li><li>启动新Activity后，又返回到旧的Activity B：onPause-&gt;A：onRestart-&gt;A：onStart-&gt;A：onResume-&gt;B：onStop-&gt;B：onDestory</li><li>关闭屏幕/按Home键： onPause-&gt;onStop</li><li>当一个Activity按Home键切换到桌面后又回到该Activity回调哪些方法。 onPause-&gt;onStop-&gt;onRestart-&gt;onStart-&gt;onResume</li><li>当一个Activity按back键回退时回调哪些方法 onPause-&gt;onStop-&gt;onDestory</li></ol> 
<p><strong>Activity的优先级</strong></p> 
<ol><li>可见且可以交互（前台Acitivity）：正在和用户交互，优先级最高。</li><li>可见但不可以交互（可见但非前台Activity）：比如当前Activity启动了一个对话框Activity，当前Activity就是可见但不可以交互。</li><li>后台Activity：已经被暂停的Activity，比如执行了onStop，优先级最低。 当系统内存不足，会按照优先级顺序从低到高去杀死目标Activity所在的进程。</li></ol> 
<h6><a id="5_Activity_524"></a>5. 优先级低的Activity在内存不足被回收后怎样做可以恢复到销毁前状态？</h6> 
<p>优先级低的 Activity 在内存不足被回收后重新打开（横竖屏切换的过程中）会引发Activity重建。</p> 
<p>在 Activity 由于异常情况被终止时，系统会调用 <code>onSaveInstanceState</code> 方法来保存当前 Activity 的状态，该方法调用于 onStop 之前，与 onPause 方法没有时序关系。</p> 
<p>当异常终止的 Activity 被重建时，会调用 <code>onRestoreInstanceState</code> 方法（该方法在 onStart 之后），并且把 Activity 销毁时 <code>onSaveInstanceState</code> 保存的 Bundle 对象参数同时传递给 <code>onCreate</code> 方法和<code>onRestoreInstanceState</code> 方法。该方法的调用是在 <code>onStart</code> 之前。</p> 
<p>因此可通过 <code>onRestoreInstanceState(Bundle savedInstanceState)</code> 和 <code>onCreate((Bundle savedInstanceState)</code> 来判断 <code>Activity</code> 是否被重建，并取出数据进行恢复。但需要注意的是，在 <code>onCreate</code> 取出数据时一定要先判断<code>savedInstanceState</code> 是否为空。</p> 
<p>补充：其中 onCreate 和 <code>onRestoreInstanceState</code> 方法来恢复 Activity 的状态的区别： <code>onRestoreInstanceState</code> 方法回调则说明 bundle 对象非空，不需要加非空判断，而 onCreate 需要非空判断。</p> 
<h5><a id="6__onSaveInstanceState__onRestoreIntanceState_536"></a>6. 谈谈 <code>onSaveInstanceState()</code> 与 <code>onRestoreIntanceState()</code></h5> 
<p><strong>onSaveInstanceState（）</strong> 这两个方法并不是生命周期方法，它们并不一定会被触发。当应用遇到意外情况（如：内存不足、用户直接按Home键）由系统销毁一个Activity时，onSaveInstanceState() 会被调用，该方法的调用在onStop之前，与onPause没有时序关系。但是当用户主动去销毁一个Activity时，例如在应用中按返回键，onSaveInstanceState()就不会被调用。因为在这种情况下，用户的行为决定了不需要保存Activity的状态。</p> 
<p><code>onSaveInstanceState()</code>时机： （1）用户按下Home键 （2）横竖屏切换 （3）按下电源按钮（关闭屏幕显示） （4）内存不足导致优先级的Activity被杀死</p> 
<p><strong>onRestoreIntanceState()</strong> 当被系统异常销毁的 Activity 被重建时，会调用 onRestoreIntanceState 或 onCreate 方法来恢复，而 onRestoreInstance 与 Oncreate 方法中传入的 Bundle 对象是销毁时 onSaveInstanceState 保存的，onRestoreIntanceState 在 onStart之后。</p> 
<h5><a id="7_onSaveInstanceStateonPause_544"></a>7. onSaveInstanceState()与onPause()的区别？</h5> 
<p><code>onSaveInstanceState()</code> 只适合用于保存一些临时性的状态，而<code>onPause()</code>适合用于数据的持久化保存。</p> 
<h5><a id="8__548"></a>8. 谈谈横竖屏切换过程中调用的函数</h5> 
<p>要切记这里活动已经被销毁了。 onPause-&gt;onSaveInstanceState-&gt;onStop-&gt;onDestory()-&gt;onCreate-&gt;onStart-&gt;onRestoreIntanceState-&gt;onResume</p> 
<h5><a id="9_Activity_552"></a>9. 如何防止横竖屏切换（配置改变）时Activity销毁并切换</h5> 
<p>通过对AndroidManifest文件的Activity中指定（configChanges）属性：</p> 
<pre><code class="prism language-javascript">android：configChanges <span class="token operator">=</span> “orientation<span class="token operator">|</span> screensize”
</code></pre> 
<p>来避免横竖屏切换时，Activity的销毁和重建，而是回调了onCofigurationChanged（）方法</p> 
<pre><code class="prism language-javascript">@Override
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onConfigurationChanged</span><span class="token punctuation">(</span><span class="token parameter">Configuration newConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onConfigurationChanged</span><span class="token punctuation">(</span>newConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>这里附上android configChanges 的所有属性解释</p> 
<pre><code class="prism language-javascript">“mcc“ 移动国家号码，由三位数字组成，每个国家都有自己独立的<span class="token constant">MCC</span>，可以识别手机用户所属国家。
“mnc“ 移动网号，在一个国家或者地区中，用于区分手机用户的服务商。
“locale“ 所在地区发生变化。
“touchscreen“ 触摸屏已经改变。（这不应该常发生。）
“keyboard“ 键盘模式发生变化，例如：用户接入外部键盘输入。
“keyboardHidden“ 用户打开手机硬件键盘
“navigation“ 导航型发生了变化。（这不应该常发生。）
“orientation“ 设备旋转，横向显示和竖向显示模式切换。
“fontScale“ 全局字体大小缩放发生改变
</code></pre> 
<h5><a id="10_Activity_589"></a>10. 说下Activity的四种启动模式？</h5> 
<ol><li>standard模式（标准模式）：普通启动模式，每次启动Activity时，就会创建一个实例。</li><li>singletop模式（栈顶模式）：当启动Activity时，会判断任务栈的栈顶是否为该Activity，如果是该Activity则不会创建实例，去回调onNewIntent（intent）方法，否则会创建实例</li><li>singletask模式（栈内模式）：当启动Activity时，只要该Activity在指定的栈中，就不会创建实例，去回调onNewIntent（intent）**方法。如果不存在，会判断是否指定的栈不存在，就创建一个栈并将Activity的实例压入，如果指定的栈存在，就直接压入该栈中。</li><li>singleInstance模式（单实例模式）：该模式下，创建Activity实例时，直接创建一个栈，栈中只有该Activity实例。之后无论哪个应用程序启动该Activity，都只会调用栈中该实例。</li></ol> 
<h5><a id="11__singleTop__singleTask__596"></a>11. 谈谈 singleTop 和 singleTask 的区别以及应用场景</h5> 
<p>singleTop 模式的含义是（参考上面问题），singleTask 模式的含义是（参考上面问题）</p> 
<p>因此二者的差别为：</p> 
<ul><li>singleTop 模式：该模式下，任务栈中可能有多个相同 Activity 实例，因为它只是判断当前启动的 Activity 是否在栈顶。 该模式的 Activity 会默认进入启动它所属的任务栈，不涉及任务栈的转换。常用于防止快速连续点击而创建多个 Activity 实例。</li><li>singleTask 模式：该模式向，任务栈中只会有一个Activity实例，因为它会判断当前启动的Activity是否在当前指定的栈中。该模式下Activity可以通过taskAffinity去指定需要的任务栈，可能涉及任务栈的转换，常用于首页或登录页。因为不论我们在进入首页后进入了多少个Activity，当我们返回首页后，还是希望退出首页直接可以退出应用。该模式下会把栈中位于要启动的Activity上面的Activity都出栈。</li></ul> 
<h5><a id="12_onNewIntent_605"></a>12. onNewIntent()调用时机？</h5> 
<p>有两个调用时机，分别是singleTop模式下与singleTask模式下启动Activity。 singleTop模式：当启动的Activity是在任务栈的栈顶时，会回调onNewIntent方法。 singleTask模式：当启动的Activity存在于任务栈中，会回调onNewIntent方法。</p> 
<h5><a id="13_Activity_609"></a>13. 了解哪些Activity启动模式的标记位？</h5> 
<ul><li>FLAG_ACTIVITY_SINGLE_TOP:对应singleTop启动模式</li><li>FLAG_ACTIVITY_NEW_TASK：对应singleTask模式</li></ul> 
<p><strong>更多Android零基础入门到精通的资料完整资料可以扫码免费领取！！！</strong></p> 
<img src="https://images2.imgbox.com/68/64/jOkOWLAz_o.png"> 
<h3><a id="AndroidAndroid_Studio_620"></a>【腾讯技术团队出品】Android零基础入门到精通，Android Studio安装教程+全套安卓基础教程</h3> 
<h3><a id="Android_626"></a>Android编程入门教程</h3> 
<h4><a id="Java_628"></a>Java语言基础从入门到熟悉</h4> 
<p><img src="https://images2.imgbox.com/10/ab/RLlBQDkv_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Kotlin_631"></a>Kotlin语言基础从入门到熟悉</h4> 
<p><img src="https://images2.imgbox.com/95/57/x6iwW1fK_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Android__635"></a>Android 技术栈从入门到熟悉</h4> 
<p><img src="https://images2.imgbox.com/00/a7/v6WIGpj0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Android_Jetpack__638"></a>Android Jetpack 全家桶全面学习</h4> 
<p><img src="https://images2.imgbox.com/ae/c3/el67sb0k_o.png" alt="在这里插入图片描述"></p> 
<p><strong>对于新手来说可能安装Android Studio存在一定困难你可以看着以下视频，一步步的跟着学习安装运行</strong></p> 
<h3><a id="Android_Studio__647"></a>Android Studio 安装教程</h3> 
<p><img src="https://images2.imgbox.com/7c/d8/e5SA79vn_o.png" alt="在这里插入图片描述"></p> 
<p>有了Java阶段的学习，这一阶段建议以视频学习为主辅以图书查漏补缺。如果以图书为主，可以根据图书讲解敲代码，辅以教学视频查漏补缺。遇到问题可以去百度，入门的问题一般会有很多人遇到，并且给出比较好的解答。</p> 
<p>需要掌握基本知识点，比如四大组件如何使用、如何创建Service、如何进行布局、简单的自定义View、动画、网络通信等常见技术。</p> 
<p>全套零基础教程已经为你们准备好了，需要的可以添加下方二维码免费领取</p> 
<img src="https://images2.imgbox.com/a8/06/hrPpMPBT_o.png"> 
<p>全套安卓基础教程</p> 
<p><img src="https://images2.imgbox.com/5d/ef/3HBj19zE_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/37/13/yXAo462P_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/4b/a3/we5J9o57_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e1/5c/7NunTiUc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3a/64/qZs1CpSx_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e1/29/JzRP1gMG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e6/a9/v7b0qh0q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/33/f5/FeJyxocb_o.png"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5811d8a5e5b9bdb2984b08859a37ab21/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">base64格式的图片字符串和图片文件相互转换的代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/de74b27de00bd58206c1c421beb5eab9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言学习笔记 —— 转换函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>