<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HTML5 实现小车动画效果(Canvas/CSS3/JQuery) - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HTML5 实现小车动画效果(Canvas/CSS3/JQuery)" />
<meta property="og:description" content="HTML5正在变得越来越流行。在这个移动设备日益增长的时代，对来自Adobe的Flash插件的改造需求也正在快速增长。因为就在最近，Adobe宣布Flash将不再支持移动设备。这意味着，Adobe自身也认为对移动设备来讲HTML5是一项重要的技术。而桌面系统的改变也是迟早的事。
HTML的一大劣势就是对于多媒体技术支持的缺乏。在HTML中，你无法直接显示一个视频或在屏幕上绘画。在HTML5中，随着&lt;video&gt;与&lt;canvas&gt;元素的引进。这些元素给予开发者直接使用“纯粹的”HTML来实现多媒体技术的可能性——仅需要写一些Javascript代码来配合HTML。在多媒体技术中，有一个基本的技术应该被支持——动画。在HTML5中，有不少方式能够实现该功能。
在这篇文章中，我仅将最新的&lt;canvas&gt;元素与即将到来的CSS3动画技术进行比较。其他的可能性包括DOM元素或SVG元素的创建和动画。这些可能性将不在本文中进行讨论。从开始就应该注意到canvas技术在当前发布的大部分主流浏览器都给予了支持，而CSS3动画仅在最新的FireFox与Chrome浏览器中才有实现的可能，下一个版本的IE也将提供对CSS3动画的支持。（所以本文中所有演示代码的效果，在Win 7系统下当前最新版的Chrome浏览器中都可实现，但在其他操作系统与其他浏览器中，并不一定能看到所有演示代码的效果）。
这里我选择了一个比较简单的动画：
PS：由于显卡、录制的帧间隔，以及可能你电脑处理器的原因，播放过程可能有些不太流畅或者失真！
分三种方式实现：
(1) canvas元素结合JS
(2) 纯粹的CSS3动画（暂不被所有主流浏览器支持，比如IE）
(3) CSS3结合Jquery实现
知道如何使用CSS3动画比知道如何使用&lt;canvas&gt;元素更重要：因为浏览器能够优化那些元素的性能(通常是他们的样式，比如CSS)，而我们使用canvas自定义画出来的效果却不能被优化。原因又在于，浏览器使用的硬件主要取决于显卡的能力。目前，浏览器没有给予我们直接访问显卡的权力，比如，每一个绘画操作都不得不在浏览器中先调用某些函数。
让我们从Canvas开始
HTML代码：
&lt;html&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34; /&gt; &lt;title&gt;Animation in HTML5 using the canvas element&lt;/title&gt; &lt;/head&gt; &lt;body οnlοad=&#34;init();&#34;&gt; &lt;canvas id=&#34;canvas&#34; width=&#34;1000&#34; height=&#34;600&#34;&gt;Your browser does not support the &lt;code&gt;&lt;canvas&gt;&lt;/code&gt;-element.Please think about updating your brower!&lt;/canvas&gt; &lt;div id=&#34;controls&#34;&gt; &lt;button type=&#34;button&#34; οnclick=&#34;speed(-0.1);&#34;&gt;Slower&lt;/button&gt; &lt;button type=&#34;button&#34; οnclick=&#34;play(this);&#34;&gt;Play&lt;/button&gt; &lt;button type=&#34;button&#34; οnclick=&#34;speed(&#43;0.1)&#34;&gt;Faster&lt;/button&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; JS代码：
定义一些变量：
var dx=5,	//当前速率 rate=1,	//当前播放速度 ani,	//当前动画循环 c,	//画图(Canvas Context) w,	//汽车[隐藏的](Canvas Context) grassHeight=130,	//背景高度 carAlpha=0,	//轮胎的旋转角度 carX=-400,	//x轴方向上汽车的位置(将被改变) carY=300,	//y轴方向上汽车的位置(将保持为常量) carWidth=400,	//汽车的宽度 carHeight=130,	//汽车的高度 tiresDelta=15,	//从一个轮胎到最接近的汽车底盘的距离 axisDelta=20,	//汽车底部底盘的轴与轮胎的距离 radius=60;	//轮胎的半径 为了实例化汽车canvas(初始时被隐藏)，我们使用下面的自执行的匿名函数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/0eee1c0a507bc5fc407dc5f3a13aa2ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-02-03T19:14:08+08:00" />
<meta property="article:modified_time" content="2012-02-03T19:14:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HTML5 实现小车动画效果(Canvas/CSS3/JQuery)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>HTML5正在变得越来越流行。在这个移动设备日益增长的时代，对来自Adobe的Flash插件的改造需求也正在快速增长。因为就在最近，Adobe宣布Flash将不再支持移动设备。这意味着，Adobe自身也认为对移动设备来讲HTML5是一项重要的技术。而桌面系统的改变也是迟早的事。</p> 
<p><br> </p> 
<p>HTML的一大劣势就是对于多媒体技术支持的缺乏。在HTML中，你无法直接显示一个视频或在屏幕上绘画。在HTML5中，随着&lt;video&gt;与&lt;canvas&gt;元素的引进。这些元素给予开发者直接使用“纯粹的”HTML来实现多媒体技术的可能性——仅需要写一些Javascript代码来配合HTML。在多媒体技术中，有一个基本的技术应该被支持——动画。在HTML5中，有不少方式能够实现该功能。</p> 
<p><br> </p> 
<p>在这篇文章中，我仅将最新的&lt;canvas&gt;元素与即将到来的CSS3动画技术进行比较。其他的可能性包括DOM元素或SVG元素的创建和动画。这些可能性将不在本文中进行讨论。从开始就应该注意到canvas技术在当前发布的大部分主流浏览器都给予了支持，而CSS3动画仅在最新的FireFox与Chrome浏览器中才有实现的可能，下一个版本的IE也将提供对CSS3动画的支持。（所以本文中所有演示代码的效果，在Win 7系统下当前最新版的Chrome浏览器中都可实现，但在其他操作系统与其他浏览器中，并不一定能看到所有演示代码的效果）。</p> 
<p><br> </p> 
<p>这里我选择了一个比较简单的动画：</p> 
<p><img src="https://images2.imgbox.com/98/d3/zn5wLWn6_o.gif" alt=""></p> 
<p>PS：<span style="color:rgb(255,0,0)">由于显卡、录制的帧间隔，以及可能你电脑处理器的原因，播放过程可能有些不太流畅或者失真！</span></p> 
<p></p> 
<p>分三种方式实现：</p> 
<p>(1)   canvas元素结合JS</p> 
<p>(2)   纯粹的CSS3动画（暂不被所有主流浏览器支持，比如IE）</p> 
<p>(3)   CSS3结合Jquery实现</p> 
<p>知道如何使用CSS3动画比知道如何使用&lt;canvas&gt;元素更重要：因为浏览器能够优化那些元素的性能(通常是他们的样式，比如CSS)，而我们使用canvas自定义画出来的效果却不能被优化。原因又在于，浏览器使用的硬件主要取决于显卡的能力。目前，浏览器没有给予我们直接访问显卡的权力，比如，每一个绘画操作都不得不在浏览器中先调用某些函数。</p> 
<p> </p> 
<p><span style="font-size:18px"><strong>让我们从Canvas开始</strong></span></p> 
<p>HTML代码：</p> 
<p></p> 
<pre><code class="language-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="UTF-8" /&gt;
         &lt;title&gt;Animation in HTML5 using the canvas element&lt;/title&gt;
    &lt;/head&gt;
   &lt;body οnlοad="init();"&gt;
      &lt;canvas id="canvas" width="1000" height="600"&gt;Your browser does not support the &lt;code&gt;&lt;canvas&gt;&lt;/code&gt;-element.Please think about updating your brower!&lt;/canvas&gt;
      &lt;div id="controls"&gt;
         &lt;button type="button" οnclick="speed(-0.1);"&gt;Slower&lt;/button&gt;
         &lt;button type="button" οnclick="play(this);"&gt;Play&lt;/button&gt;
	 &lt;button type="button" οnclick="speed(+0.1)"&gt;Faster&lt;/button&gt;
      &lt;/div&gt;
   &lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>JS代码：</p> 
<p>定义一些变量：</p> 
<p></p> 
<pre><code class="language-javascript">var dx=5,			//当前速率
		    rate=1,			//当前播放速度
		    ani,			//当前动画循环
		    c,				//画图(Canvas Context)
		    w,				//汽车[隐藏的](Canvas Context)
		    grassHeight=130,		//背景高度
		    carAlpha=0,			//轮胎的旋转角度
		    carX=-400,			//x轴方向上汽车的位置(将被改变)
		    carY=300,			//y轴方向上汽车的位置(将保持为常量)
		    carWidth=400,		//汽车的宽度
		    carHeight=130,		//汽车的高度
		    tiresDelta=15,		//从一个轮胎到最接近的汽车底盘的距离
		    axisDelta=20,		//汽车底部底盘的轴与轮胎的距离
		    radius=60;			//轮胎的半径</code></pre> 
<br> 
<p>为了实例化汽车canvas(初始时被隐藏)，我们使用下面的自执行的匿名函数</p> 
<p></p> 
<pre><code class="language-javascript">(function(){
		   var car=document.createElement('canvas');	//创建元素
		   car.height=carHeight+axisDelta+radius;	//设置高度
		   car.width=carWidth;				//设置宽度
		   w=car.getContext('2d');
		})();	</code></pre> 
<br> 点击“Play”按钮，通过定时重复执行“画汽车”操作，来模拟“帧播放”功能： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">function play(s){				//参数s是一个button
		   if(ani){					//如果ani不为null，则代表我们当前已经有了一个动画
		      clearInterval(ani);			//所以我们需要清除它(停止动画)
		      ani=null;					
		      s.innerHTML='Play';			//重命名该按钮为“播放”
		   }else{
		      ani=setInterval(drawCanvas,40);		//我们将设置动画为25fps[帧每秒]，40/1000，即为二十五分之一
		      s.innerHTML='Pause';			//重命名该按钮为“暂停”
		   }
		}</code></pre> 
<br> 加速，减速，通过以下方法，改变移动距离的大小来实现： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">function speed(delta){
		   var newRate=Math.max(rate+delta,0.1);
		   dx=newRate/rate*dx;
		   rate=newRate;
		}</code></pre> 
<br> 页面加载的初始化方法： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">//init
	    	function init(){
		   c=document.getElementById('canvas').getContext('2d');
		   drawCanvas();
		}</code></pre> 
<br> 主调方法： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">function drawCanvas(){
		   c.clearRect(0,0,c.canvas.width, c.canvas.height);	//清除Canvas(已显示的)，避免产生错误
		   c.save();						//保存当前坐标值以及状态，对应的类似“push”操作

		   drawGrass();						//画背景
		   c.translate(carX,0);					//移动起点坐标
		   drawCar();						//画汽车(隐藏的canvas)
		   c.drawImage(w.canvas,0,carY);			//画最终显示的汽车
		   c.restore();						//恢复Canvas的状态，对应的是类似“pop”操作
		   carX+=dx;						//重置汽车在X轴方向的位置，以模拟向前走
		   carAlpha+=dx/radius;					//按比例增加轮胎角度

		   if(carX&gt;c.canvas.width){				//设置某些定期的边界条件
		      carX=-carWidth-10;				//也可以将速度反向为dx*=-1;
		   }
		}</code></pre> 
<br> 画背景： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">function drawGrass(){
		   //创建线性渐变，前两个参数为渐变开始点坐标，后两个为渐变结束点坐标
		   var grad=c.createLinearGradient(0,c.canvas.height-grassHeight,0,c.canvas.height);
		   //为线性渐变指定渐变色，0表示渐变起始色，1表示渐变终止色
		   grad.addColorStop(0,'#33CC00');
		   grad.addColorStop(1,'#66FF22');
		   c.fillStyle=grad;
  	 	   c.lineWidth=0;
		   c.fillRect(0,c.canvas.height-grassHeight,c.canvas.width,grassHeight);
		   
		}</code></pre> 
<br> 画车身： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">function drawCar(){
		   w.clearRect(0,0,w.canvas.width,w.canvas.height);		//清空隐藏的画板
		   w.strokeStyle='#FF6600';					//设置边框色
  		   w.lineWidth=2;						//设置边框的宽度，单位为像素
		   w.fillStyle='#FF9900';					//设置填充色
		   w.beginPath();						//开始绘制新路径
		   w.rect(0,0,carWidth,carHeight);				//绘制一个矩形
		   w.stroke();							//画边框
		   w.fill();							//填充背景
		   w.closePath();						//关闭绘制的新路径
		   drawTire(tiresDelta+radius,carHeight+axisDelta);		//我们开始画第一个轮子
		   drawTire(carWidth-tiresDelta-radius,carHeight+axisDelta);	//同样的，第二个
		   
		}</code></pre> 
<br> 画轮胎： 
<p></p> 
<p></p> 
<pre><code class="language-javascript">function drawTire(x,y){
		   w.save();
		   w.translate(x,y);
		   w.rotate(carAlpha);
		   w.strokeStyle='#3300FF';
		   w.lineWidth=1;
		   w.fillStyle='#0099FF';
		   w.beginPath();
		   w.arc(0,0,radius,0,2*Math.PI,false);
		   w.fill();
		   w.closePath();
		   w.beginPath();
		   w.moveTo(radius,0);
		   w.lineTo(-radius,0);
		   w.stroke();
		   w.closePath();
		   w.beginPath();
		   w.moveTo(0,radius);
		   w.lineTo(0,-radius);
		   w.stroke();
		   w.closePath();
		   w.restore();

		}</code></pre>由于原理简单，并且代码中作了详细注释，这里就不一一讲解！ 
<p></p> 
<p><br> </p> 
<p></p> 
<p><span style="font-size:18px; font-weight:bold">该是CSS3出场了</span></p> 
<p><span style="font-size:10px">你将看到我们未通过一句JS代码就完全实现了和上面一样的动画效果：</span></p> 
<p><span style="font-size:10px">HTML代码：</span></p> 
<p><span style="font-size:10px"></span></p> 
<pre><code class="language-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="UTF-8" /&gt;
      &lt;title&gt;Animations in HTML5 using CSS3 animations&lt;/title&gt;
       &lt;/head&gt;
   &lt;body&gt;
      &lt;div id="container"&gt;
	  &lt;div id="car"&gt;
	     &lt;div id="chassis"&gt;&lt;/div&gt;
	     &lt;div id="backtire" class="tire"&gt;
		 &lt;div class="hr"&gt;&lt;/div&gt;
		 &lt;div class="vr"&gt;&lt;/div&gt;
	     &lt;/div&gt;
	     &lt;div id="fronttire" class="tire"&gt;
		 &lt;div class="hr"&gt;&lt;/div&gt;
		 &lt;div class="vr"&gt;&lt;/div&gt;
	     &lt;/div&gt;	
	  &lt;/div&gt;
	  &lt;div id="grass"&gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;footer&gt;&lt;/footer&gt;
   &lt;/body&gt;
&lt;/html&gt;</code></pre> 
<br> CSS代码： 
<p></p> 
<p><span style="font-size:10px"></span></p> 
<pre><code class="language-css"> body
	 {
	    padding:0;
	    margin:0;
	 }</code></pre> 
<br> 定义车身与轮胎转到的动画（你会看到基本每一个动画都有四个版本的定义：原生版本/webkit【Chrome|Safari】/ms【为了向后兼容IE10】/moz【FireFox】） 
<p></p> 
<p></p> 
<pre><code class="language-css"> /*定义动画：从-400px的位置移动到1600px的位置 */
	 @keyframes carAnimation
	 {
	    0% { left:-400px; }		/* 指定初始位置，0%等同于from*/
	    100% { left:1600px; }	/* 指定最终位置,100%等同于to*/
	 }

	 /* Safari and Chrome */
	 @-webkit-keyframes carAnimation
	 {
	    0% {left:-400px; }
	    100% {left:1600px; }
	 }

	 /* Firefox */
	 @-moz-keyframes carAnimation
	 {
	    0% {left:-400; }
	    100% {left:1600px; } 
	 }

	 /*IE暂不支持,此处定义是为了向后兼容IE10*/
	 @-ms-keyframes carAnimation
	 {
	    0% {left:-400px; }
	    100%{left:1600px; }
	 }</code></pre> 
<p></p> 
<p style="font-size:10px"><span style="font-size:10px"><br> </span></p> 
<pre><code class="language-css"> @keyframes tyreAnimation
	 {
	    0% {transform: rotate(0); }
	    100% {transform: rotate(1800deg); }
	 }

	 @-webkit-keyframes tyreAnimation
	 {
	    0% { -webkit-transform: rotate(0); }
	    100% { -webkit-transform: rotate(1800deg); }
	 }

	 @-moz-keyframes tyreAnimation
	 {
	    0% { -moz-transform: rotate(0); }
	    100% { -moz-transform: rotate(1800deg); }
	 }

	 @-ms-keyframes tyreAnimation
	 {
	    0% { -ms-transform: rotate(0); }
	    100% { -ms-transform: rotate(1800deg); }
	 }</code></pre> 
<br> 
<pre><code class="language-css"> #container
	 {
	    position:relative;
	    width:100%;
	    height:600px;
	    overflow:hidden;		/*这个很重要*/
	 }

	 #car
	 {
	    position:absolute; 		/*汽车在容器中采用绝对定位*/
	    width:400px;
	    height:210px;		/*汽车的总高度，包括轮胎和底盘*/
	    z-index:1;			/*让汽车在背景的上方*/
	    top:300px;			/*距顶端的距离(y轴)*/
	    left:50px;			/*距左侧的距离(x轴)*/

	    /*以下内容赋予该元素预先定义的动画及相关属性*/
	    -webkit-animation-name:carAnimation;		/*名称*/
	    -webkit-animation-duration:10s;			/*持续时间*/
	    -webkit-animation-iteration-count:infinite;		/*迭代次数-无限次*/
	    -webkit-animation-timing-function:linear;		/*播放动画时从头到尾都以相同的速度*/

	    -moz-animation-name:carAnimation;		/*名称*/
	    -moz-animation-duration:10s;			/*持续时间*/
	    -moz-animation-iteration-count:infinite;		/*迭代次数-无限次*/
	    -moz-animation-timing-function:linear;		/*播放动画时从头到尾都以相同的速度*/

	    -ms-animation-name:carAnimation;		/*名称*/
	    -ms-animation-duration:10s;			/*持续时间*/
	    -ms-animation-iteration-count:infinite;		/*迭代次数-无限次*/
	    -ms-animation-timing-function:linear;		/*播放动画时从头到尾都以相同的速度*/

	    animation-name:carAnimation;		/*名称*/
	    animation-duration:10s;			/*持续时间*/
	    animation-iteration-count:infinite;		/*迭代次数-无限次*/
	    animation-timing-function:linear;		/*播放动画时从头到尾都以相同的速度*/
	 }

	 /*车身*/
	 #chassis
	 {
	    position:absolute;
	    width:400px;
	    height:130px;
	    background:#FF9900;
	    border: 2px solid #FF6600;
	 }
	
	 /*轮胎*/
	 .tire
	 {
	    z-index:1;			/*同上，轮胎也应置于背景的上方*/
	    position:absolute;
	    bottom:0;
	    border-radius:60px;		/*圆半径*/
	    height:120px;		/* 2*radius=height */
	    width:120px;		/* 2*radius=width */
	    background:#0099FF;		/*填充色*/
	    border:1px solid #3300FF;

	    -webkit-animation-name:tyreAnimation;
	    -webkit-animation-duration:10s;
	    -webkit-animation-iteration-count:infinite;
	    -webkit-animation-timing-function:linear;

	    -moz-animation-name:tyreAnimation;
	    -moz-animation-duration:10s;
	    -moz-animation-iteration-count:infinite;
	    -moz-animation-timing-function:linear;

	    -ms-animation-name:tyreAnimation;
	    -ms-animation-duration:10s;
	    -ms-animation-iteration-count:infinite;
	    -ms-animation-timing-function:linear;	    

	    animation-name:tyreAnimation;
	    animation-duration:10s;
	    animation-iteration-count:infinite;
	    animation-timing-function:linear;
	 }

	 #fronttire
	 {
	    right:20px;		/*设置右边的轮胎距离边缘的距离为20*/
	 }

	 #backtire
	 {
	    left:20px;		/*设置左边的轮胎距离边缘的距离为20*/
	 }

	 #grass
	 {
	    position:absolute;	/*背景绝对定位在容器中*/
	    width:100%;
	    height:130px;
	    bottom:0;
	    /*让背景色线性渐变,bottom,表示渐变的起始处，第一个颜色值是渐变的起始值，第二个颜色值是终止值 */
	    background:linear-grdaient(bottom,#33CC00,#66FF22);
	    background:-webkit-linear-gradient(bottom,#33CC00,#66FF22);
	    background:-moz-linear-gradient(bottom,#33CC00,#66FF22);
	    background:-ms-linear-gradient(bottom,#33CC00,#66FF22);	
	 }

	 .hr,.vr
	 {
	    position:absolute;
	    background:#3300FF;
	 }

	 .hr
	 {
	    height:1px;
	    width:100%;		/*轮胎的水平线*/
	    left:0;
	    top:60px;
	 }

	 .vr
	 {
	    width:1px;
	    height:100%;	/*轮胎的垂直线*/
	    left:60px;
	    top:0;
	 }</code></pre> 
<br> 
<span style="font-size:18px"><strong>JQuery与CSS3合体</strong></span> 
<p><span style="font-size:10px">这是一个效果与兼容性俱佳的方式（特别对于IE9暂不支持CSS3而言）</span></p> 
<p><span style="font-size:10px">HTML代码（可以看到与CSS3中的HTML代码并无不同）：</span></p> 
<p><span style="font-size:10px"></span></p> 
<pre><code class="language-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="UTF-8" /&gt;
      &lt;title&gt;Animations in HTML5 using CSS3 animations&lt;/title&gt;
       &lt;/head&gt;
   &lt;body&gt;
      &lt;div id="container"&gt;
	  &lt;div id="car"&gt;
	     &lt;div id="chassis"&gt;&lt;/div&gt;
	     &lt;div id="backtire" class="tire"&gt;
		 &lt;div class="hr"&gt;&lt;/div&gt;
		 &lt;div class="vr"&gt;&lt;/div&gt;
	     &lt;/div&gt;
	     &lt;div id="fronttire" class="tire"&gt;
		 &lt;div class="hr"&gt;&lt;/div&gt;
		 &lt;div class="vr"&gt;&lt;/div&gt;
	     &lt;/div&gt;	
	  &lt;/div&gt;
	  &lt;div id="grass"&gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;footer&gt;&lt;/footer&gt;
   &lt;/body&gt;
&lt;/html&gt; 
</code></pre> 
<br> CSS: 
<p></p> 
<p><span style="font-size:10px"></span></p> 
<pre><code class="language-css">&lt;style&gt;
         body
	 {
	    padding:0;
	    margin:0;
         }

	  #container
	 {
	    position:relative;
	    width:100%;
	    height:600px;
	    overflow:hidden;		/*这个很重要*/
	 }

	 #car
	 {
	    position:absolute; 		/*汽车在容器中采用绝对定位*/
	    width:400px;
	    height:210px;		/*汽车的总高度，包括轮胎和底盘*/
	    z-index:1;			/*让汽车在背景的上方*/
	    top:300px;			/*距顶端的距离(y轴)*/
	    left:50px;			/*距左侧的距离(x轴)*/
	 }

	  /*车身*/
	 #chassis
	 {
	    position:absolute;
	    width:400px;
	    height:130px;
	    background:#FF9900;
	    border: 2px solid #FF6600;
	 }
	
	 /*轮胎*/
	 .tire
	 {
	    z-index:1;			/*同上，轮胎也应置于背景的上方*/
	    position:absolute;
	    bottom:0;
	    border-radius:60px;		/*圆半径*/
	    height:120px;		/* 2*radius=height */
	    width:120px;		/* 2*radius=width */
	    background:#0099FF;		/*填充色*/
	    border:1px solid #3300FF;
	    -o-transform:rotate(0deg);	/*旋转(单位：度)*/
	    -ms-transform:rotate(0deg);
	    -webkit-transform:rotate(0deg);
	    -moz-transform:rotate(0deg);
	 }

	 #fronttire
	 {
	    right:20px;		/*设置右边的轮胎距离边缘的距离为20*/
	 }

	 #backtire
	 {
	    left:20px;		/*设置左边的轮胎距离边缘的距离为20*/
	 }

	 #grass
	 {
	    position:absolute;	/*背景绝对定位在容器中*/
	    width:100%;
	    height:130px;
	    bottom:0;
	    /*让背景色线性渐变,bottom,表示渐变的起始处，第一个颜色值是渐变的起始值，第二个颜色值是终止值 */
	    background:linear-grdaient(bottom,#33CC00,#66FF22);
	    background:-webkit-linear-gradient(bottom,#33CC00,#66FF22);
	    background:-moz-linear-gradient(bottom,#33CC00,#66FF22);
	    background:-ms-linear-gradient(bottom,#33CC00,#66FF22);	
	 }

	 .hr,.vr
	 {
	    position:absolute;
	    background:#3300FF;
	 }

	 .hr
	 {
	    height:1px;
	    width:100%;		/*水平线*/
	    left:0;
	    top:60px;
	 }

	 .vr
	 {
	    width:1px;
	    height:100%;	/*垂直线*/
	    left:60px;
	    top:0;
	 }

      &lt;/style&gt;</code></pre> 
<br> JS代码： 
<p></p> 
<p><span style="font-size:10px">首先引入在线API：</span></p> 
<p><span style="font-size:10px"></span></p> 
<pre><code class="language-javascript">&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"&gt;&lt;/script&gt;</code></pre> 
<p></p> 
<p><br> </p> 
<p>实现动画代码（相当简洁）：</p> 
<p></p> 
<pre><code class="language-javascript">&lt;script&gt;
         $(function(){
	     var rot=0;
	     var prefix=$('.tire').css('-o-transform')?'-o-transform':($('.tire').css('-ms-transform')?'-ms-transform':($('.tire').css('-moz-transform')?'-moz-transform':($('.tire').css('-webkit-transform')?'-webkit-transform':'transform')));

	     var origin={		/*设置我们的起始点*/
		 left:-400
	     };

	     var animation={		/*该动画由jQuery执行*/
		 left:1600		/*设置我们将移动到的最终位置*/
	 };

	     var rotate=function(){	/*该方法将被旋转的轮子调用*/
		 rot+=2;
		 $('.tire').css(prefix,'rotate('+rot+'deg)');
	 };

	     var options={		/*将要被jQuery使用的参数*/
		 easing:'linear',	/*指定速度，此处只是线性，即为匀速*/
		 duration:10000,	/*指定动画持续时间*/
		 complete:function(){
		    $('#car').css(origin).animate(animation,options);
		 },
		 step:rotate
	 };

	     options.complete();
	  });
      &lt;/script&gt;</code></pre> 
<br> 简单讲解：prefix首先识别出当前是哪个定义被采用了（-o?-moz?-webkit?-ms?），然后定义了动画的起点位置和终点位置。接着，定义了设置旋转角度的函数（该函数将在在动画的每一步(step)中执行）。然后，定义了一个动画，该定义方式导致了无限自循环调用！ 
<p></p> 
<p><br> </p> 
<p>本文，通过一个简单的动画实例，演示了HTML5下，实现动画的几种常见方式。</p> 
<br> 
<a href="http://download.csdn.net/detail/yanghua_kobe/4041823"><span style="font-size:18px"><strong>源码下载</strong></span></a> 
<br> 
<br>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e80c9477dd498764a4cdd3d4956c568/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">获得文件头编辑框中多行文本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ffc77377841cc30cb6cabdd8c56217fe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Matlab Figure 调整大小、字号、线宽</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>