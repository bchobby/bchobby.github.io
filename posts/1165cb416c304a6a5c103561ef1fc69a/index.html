<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HIve安装配置（超详细） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HIve安装配置（超详细）" />
<meta property="og:description" content="文章目录 Hive安装配置一、Hive安装地址二、Hive安装部署1. 把 `apache-hive-3.1.2-bin.tar.gz`上传到Linux的/export/software目录下2. 解压`apache-hive-3.1.2-bin.tar.gz`到/export/servers/目录下面3. 修改`apache-hive-3.1.2-bin.tar.gz`的名称为hive4. 修改/etc/profile，添加环境变量5. 初始化元数据库（默认是derby数据库） 三、MySQL安装1. 安装MySQL1）上传MySQL安装包以及MySQL驱动jar包2）解压MySQL安装包3）卸载系统自带的mariadb4）安装MySQL依赖5）安装mysql-client6）安装mysql-server7）启动MySQL8）查看MySQL密码 2. 配置MySQL1）用刚刚查到的密码进入MySQL2）设置复杂密码3）更改MySQL密码策略4）设置简单好记的密码5）进入MySQL库6）查询user表7）修改user表，把Host表内容修改为%8）刷新9）退出 四、配置Hive元数据存储到MySQL1. 配置元数据到MySQL1）新建Hive元数据库2）将MySQL的JDBC驱动拷贝到Hive的lib目录下。3）在$HIVE_HOME/conf目录下新建hive-site.xml文件4）初始化Hive元数据库（修改为采用MySQL存储元数据） 2. 验证元数据是否配置成功1）启动hadoop集群和MySQL服务2）启动Hive3）使用Hive 3. 查看MySQL中的元数据1）登录MySQL2）查看元数据库metastore 五、Hive服务部署1. hiveserver2服务1）用户说明2）`hiveserver2`部署3）测试4）配置DataGrip连接 2. metastore服务1）metastore运行模式2）metastore部署3）测试 3. 编写Hive服务启动脚本1）前台启动的方式导致需要打开多个窗口，可以使用如下方式后台方式启动2）为了方便使用，可以直接编写脚本来管理服务的启动和关闭3）添加执行权限4）启动Hive后台服务 六、其他配置1. 解决hive打印大量INFO日志1）进入到hive安装路径下的conf目录下2）新建`log4j.properties`文件3）重新执行启动hive的命令 2.Hive卸载1）卸载MySQL说明2）卸载Hive 3. 修改Hive运⾏⽇志的存放位置1）创建hivelog4j2.properties2）在 `hive-log4j2.properties` ⽂件中修改 log 存放位置3）⽤hive-script.sh restart重启服务后，查看`$HIVE_HOME/hive/logs`⽬录 4. 打印当前库和表头5. Hive的JVM堆内存设置1）新建hive-env.sh2）修改 hive-env.sh其中的参数 6. 关闭Hadoop虚拟内存检查7.出现这个问题 Hive安装配置 一、Hive安装地址 1）Hive官网地址
http://hive.apache.org/
2）文档查看地址
https://cwiki.apache.org/confluence/display/Hive/GettingStarted
3）下载地址
http://archive.apache.org/dist/hive/
4）github地址
https://github.com/apache/hive
二、Hive安装部署 1. 把 apache-hive-3.1.2-bin.tar.gz上传到Linux的/export/software目录下 2. 解压apache-hive-3.1.2-bin.tar.gz到/export/servers/目录下面 tar -zxvf apache-hive-3.1.2-bin.tar.gz -C ../servers/ 3. 修改apache-hive-3.1.2-bin.tar.gz的名称为hive 4. 修改/etc/profile，添加环境变量 vi /etc/profile （1）添加内容
#HIVE_HOME export HIVE_HOME=/export/servers/hive export PATH=$PATH:$HIVE_HOME/bin （2）source一下" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/1165cb416c304a6a5c103561ef1fc69a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-06T22:43:11+08:00" />
<meta property="article:modified_time" content="2023-11-06T22:43:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HIve安装配置（超详细）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Hive_3" rel="nofollow">Hive安装配置</a></li><li><ul><li><a href="#Hive_5" rel="nofollow">一、Hive安装地址</a></li><li><a href="#Hive_16" rel="nofollow">二、Hive安装部署</a></li><li><ul><li><a href="#1__apachehive312bintargzLinuxexportsoftware_18" rel="nofollow">1. 把 `apache-hive-3.1.2-bin.tar.gz`上传到Linux的/export/software目录下</a></li><li><a href="#2_apachehive312bintargzexportservers_22" rel="nofollow">2. 解压`apache-hive-3.1.2-bin.tar.gz`到/export/servers/目录下面</a></li><li><a href="#3_apachehive312bintargzhive_30" rel="nofollow">3. 修改`apache-hive-3.1.2-bin.tar.gz`的名称为hive</a></li><li><a href="#4_etcprofile_34" rel="nofollow">4. 修改/etc/profile，添加环境变量</a></li><li><a href="#5_derby_56" rel="nofollow">5. 初始化元数据库（默认是derby数据库）</a></li></ul> 
   </li><li><a href="#MySQL_89" rel="nofollow">三、MySQL安装</a></li><li><ul><li><a href="#1_MySQL_91" rel="nofollow">1. 安装MySQL</a></li><li><ul><li><a href="#1MySQLMySQLjar_93" rel="nofollow">1）上传MySQL安装包以及MySQL驱动jar包</a></li><li><a href="#2MySQL_102" rel="nofollow">2）解压MySQL安装包</a></li><li><a href="#3mariadb_113" rel="nofollow">3）卸载系统自带的mariadb</a></li><li><a href="#4MySQL_121" rel="nofollow">4）安装MySQL依赖</a></li><li><a href="#5mysqlclient_131" rel="nofollow">5）安装mysql-client</a></li><li><a href="#6mysqlserver_140" rel="nofollow">6）安装mysql-server</a></li><li><a href="#7MySQL_162" rel="nofollow">7）启动MySQL</a></li><li><a href="#8MySQL_212" rel="nofollow">8）查看MySQL密码</a></li></ul> 
    </li><li><a href="#2_MySQL_220" rel="nofollow">2. 配置MySQL</a></li><li><ul><li><a href="#1MySQL_224" rel="nofollow">1）用刚刚查到的密码进入MySQL</a></li><li><a href="#2_237" rel="nofollow">2）设置复杂密码</a></li><li><a href="#3MySQL_247" rel="nofollow">3）更改MySQL密码策略</a></li><li><a href="#4_258" rel="nofollow">4）设置简单好记的密码</a></li><li><a href="#5MySQL_266" rel="nofollow">5）进入MySQL库</a></li><li><a href="#6user_274" rel="nofollow">6）查询user表</a></li><li><a href="#7userHost_282" rel="nofollow">7）修改user表，把Host表内容修改为%</a></li><li><a href="#8_290" rel="nofollow">8）刷新</a></li><li><a href="#9_298" rel="nofollow">9）退出</a></li></ul> 
   </li></ul> 
   </li><li><a href="#HiveMySQL_306" rel="nofollow">四、配置Hive元数据存储到MySQL</a></li><li><ul><li><a href="#1_MySQL_310" rel="nofollow">1. 配置元数据到MySQL</a></li><li><ul><li><a href="#1Hive_312" rel="nofollow">1）新建Hive元数据库</a></li><li><a href="#2MySQLJDBCHivelib_325" rel="nofollow">2）将MySQL的JDBC驱动拷贝到Hive的lib目录下。</a></li><li><a href="#3HIVE_HOMEconfhivesitexml_333" rel="nofollow">3）在$HIVE_HOME/conf目录下新建hive-site.xml文件</a></li><li><a href="#4HiveMySQL_380" rel="nofollow">4）初始化Hive元数据库（修改为采用MySQL存储元数据）</a></li></ul> 
    </li><li><a href="#2__388" rel="nofollow">2. 验证元数据是否配置成功</a></li><li><ul><li><a href="#1hadoopMySQL_390" rel="nofollow">1）启动hadoop集群和MySQL服务</a></li><li><a href="#2Hive_396" rel="nofollow">2）启动Hive</a></li><li><a href="#3Hive_404" rel="nofollow">3）使用Hive</a></li></ul> 
    </li><li><a href="#3_MySQL_418" rel="nofollow">3. 查看MySQL中的元数据</a></li><li><ul><li><a href="#1MySQL_420" rel="nofollow">1）登录MySQL</a></li><li><a href="#2metastore_428" rel="nofollow">2）查看元数据库metastore</a></li></ul> 
   </li></ul> 
   </li><li><a href="#Hive_464" rel="nofollow">五、Hive服务部署</a></li><li><ul><li><a href="#1_hiveserver2_466" rel="nofollow">1. hiveserver2服务</a></li><li><ul><li><a href="#1_472" rel="nofollow">1）用户说明</a></li><li><a href="#2hiveserver2_490" rel="nofollow">2）`hiveserver2`部署</a></li><li><a href="#3_537" rel="nofollow">3）测试</a></li><li><a href="#4DataGrip_575" rel="nofollow">4）配置DataGrip连接</a></li></ul> 
    </li><li><a href="#2_metastore_594" rel="nofollow">2. metastore服务</a></li><li><ul><li><a href="#1metastore_598" rel="nofollow">1）metastore运行模式</a></li><li><a href="#2metastore_615" rel="nofollow">2）metastore部署</a></li><li><a href="#3_693" rel="nofollow">3）测试</a></li></ul> 
    </li><li><a href="#3_Hive_718" rel="nofollow">3. 编写Hive服务启动脚本</a></li><li><ul><li><a href="#1_720" rel="nofollow">1）前台启动的方式导致需要打开多个窗口，可以使用如下方式后台方式启动</a></li><li><a href="#2_734" rel="nofollow">2）为了方便使用，可以直接编写脚本来管理服务的启动和关闭</a></li><li><a href="#3_803" rel="nofollow">3）添加执行权限</a></li><li><a href="#4Hive_811" rel="nofollow">4）启动Hive后台服务</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_821" rel="nofollow">六、其他配置</a></li><li><ul><li><a href="#1_hiveINFO_823" rel="nofollow">1. 解决hive打印大量INFO日志</a></li><li><ul><li><a href="#1hiveconf_831" rel="nofollow">1）进入到hive安装路径下的conf目录下</a></li><li><a href="#2log4jproperties_837" rel="nofollow">2）新建`log4j.properties`文件</a></li><li><a href="#3hive_852" rel="nofollow">3）重新执行启动hive的命令</a></li></ul> 
    </li><li><a href="#2Hive_860" rel="nofollow">2.Hive卸载</a></li><li><ul><li><a href="#1MySQL_862" rel="nofollow">1）卸载MySQL说明</a></li><li><a href="#2Hive_910" rel="nofollow">2）卸载Hive</a></li></ul> 
    </li><li><a href="#3_Hive_914" rel="nofollow">3. 修改Hive运⾏⽇志的存放位置</a></li><li><ul><li><a href="#1hivelog4j2properties_922" rel="nofollow">1）创建hivelog4j2.properties</a></li><li><a href="#2_hivelog4j2properties__log__938" rel="nofollow">2）在 `hive-log4j2.properties` ⽂件中修改 log 存放位置</a></li><li><a href="#3hivescriptsh_restartHIVE_HOMEhivelogs_942" rel="nofollow">3）⽤hive-script.sh restart重启服务后，查看`$HIVE_HOME/hive/logs`⽬录</a></li></ul> 
    </li><li><a href="#4__950" rel="nofollow">4. 打印当前库和表头</a></li><li><a href="#5_HiveJVM_979" rel="nofollow">5. Hive的JVM堆内存设置</a></li><li><ul><li><a href="#1hiveenvsh_983" rel="nofollow">1）新建hive-env.sh</a></li><li><a href="#2_hiveenvsh_987" rel="nofollow">2）修改 hive-env.sh其中的参数</a></li></ul> 
    </li><li><a href="#6_Hadoop_993" rel="nofollow">6. 关闭Hadoop虚拟内存检查</a></li><li><a href="#7_1012" rel="nofollow">7.出现这个问题</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/c1/7d/255hdc7k_o.jpg" alt=""> 
<p></p> 
<h2><a id="Hive_3"></a>Hive安装配置</h2> 
<h3><a id="Hive_5"></a>一、Hive安装地址</h3> 
<p>1）Hive官网地址<br> http://hive.apache.org/<br> 2）文档查看地址<br> https://cwiki.apache.org/confluence/display/Hive/GettingStarted<br> 3）下载地址<br> http://archive.apache.org/dist/hive/<br> 4）github地址<br> https://github.com/apache/hive</p> 
<h3><a id="Hive_16"></a>二、Hive安装部署</h3> 
<h4><a id="1__apachehive312bintargzLinuxexportsoftware_18"></a>1. 把 <code>apache-hive-3.1.2-bin.tar.gz</code>上传到Linux的/export/software目录下</h4> 
<p><img src="https://images2.imgbox.com/e7/a6/nlgNLQnY_o.png" alt="image-20230331164639208"></p> 
<h4><a id="2_apachehive312bintargzexportservers_22"></a>2. 解压<code>apache-hive-3.1.2-bin.tar.gz</code>到/export/servers/目录下面</h4> 
<pre><code class="prism language-shell"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> apache-hive-3.1.2-bin.tar.gz <span class="token parameter variable">-C</span> <span class="token punctuation">..</span>/servers/
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/50/tpfJKwBF_o.png" alt="image-20230331165118362"></p> 
<h4><a id="3_apachehive312bintargzhive_30"></a>3. 修改<code>apache-hive-3.1.2-bin.tar.gz</code>的名称为hive</h4> 
<p><img src="https://images2.imgbox.com/a9/b3/mkUibC3h_o.png" alt="image-20230331165215374"></p> 
<h4><a id="4_etcprofile_34"></a>4. 修改/etc/profile，添加环境变量</h4> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/profile
</code></pre> 
<p>（1）添加内容</p> 
<pre><code class="prism language-shell"><span class="token comment">#HIVE_HOME</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HIVE_HOME</span><span class="token operator">=</span>/export/servers/hive
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HIVE_HOME</span>/bin
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/72/qGAOKp31_o.png" alt="image-20230331165325200"></p> 
<p>（2）source一下</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<h4><a id="5_derby_56"></a>5. 初始化元数据库（默认是derby数据库）</h4> 
<pre><code class="prism language-shell">bin/schematool <span class="token parameter variable">-dbType</span> derby <span class="token parameter variable">-initSchema</span>
</code></pre> 
<p>报以下错误：</p> 
<pre><code class="prism language-shell">Exception <span class="token keyword">in</span> thread <span class="token string">"main"</span> java.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument<span class="token punctuation">(</span>ZLjava/lang/String<span class="token punctuation">;</span>Ljava/lang/Object<span class="token punctuation">;</span><span class="token punctuation">)</span>V
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/a5/stmwCp0M_o.png" alt="image-20230331170110128"></p> 
<p>原因是hadoop和hive的两个guava.jar版本不一致，两个jar位置分别位于下面两个目录：</p> 
<pre><code>/export/servers/hive/lib/guava-19.0.jar 
/export/servers/hadoop-3.1.4/share/hadoop/common/lib/guava-27.0-jre.jar
</code></pre> 
<p>解决办法是删除低版本的那个，将高版本的复制到低版本目录下。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/servers/hive/lib
<span class="token function">rm</span> <span class="token parameter variable">-f</span> guava-19.0.jar
<span class="token function">cp</span> /export/servers/hadoop-3.1.4/share/hadoop/common/lib/guava-27.0-jre.jar <span class="token builtin class-name">.</span>
</code></pre> 
<p>再次运行<code>schematool -dbType derby -initSchema</code>，即可成功初始化元数据库。</p> 
<p><img src="https://images2.imgbox.com/ec/d1/lawR6TlF_o.png" alt="image-20230331171334295"></p> 
<h3><a id="MySQL_89"></a>三、MySQL安装</h3> 
<h4><a id="1_MySQL_91"></a>1. 安装MySQL</h4> 
<h5><a id="1MySQLMySQLjar_93"></a>1）上传MySQL安装包以及MySQL驱动jar包</h5> 
<pre><code class="prism language-shell">mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar
mysql-connector-java-5.1.37.jar
</code></pre> 
<p><img src="https://images2.imgbox.com/c3/33/w48l9ygm_o.png" alt="image-20230331172459060"></p> 
<h5><a id="2MySQL_102"></a>2）解压MySQL安装包</h5> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> /export/software/mysql_lib
<span class="token function">tar</span> <span class="token parameter variable">-xf</span> mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar <span class="token parameter variable">-C</span> /export/software/mysql_lib/
</code></pre> 
<p><img src="https://images2.imgbox.com/ec/2d/BvadNWdU_o.png" alt="image-20230331172918560"></p> 
<p><img src="https://images2.imgbox.com/f1/9c/tYVFKm7u_o.png" alt="image-20230331173000688"></p> 
<h5><a id="3mariadb_113"></a>3）卸载系统自带的mariadb</h5> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> mariadb <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">--nodeps</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3d/50/a7NMThTX_o.png" alt="image-20230331173051740"></p> 
<h5><a id="4MySQL_121"></a>4）安装MySQL依赖</h5> 
<pre><code class="prism language-shell"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-common-5.7.28-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-5.7.28-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/96/b3/vCGWoGzO_o.png" alt="image-20230331173244894"></p> 
<h5><a id="5mysqlclient_131"></a>5）安装mysql-client</h5> 
<pre><code class="prism language-shell"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-5.7.28-1.el7.x86_64.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/62/0a/IWjYTRyM_o.png" alt="image-20230331173347042"></p> 
<h5><a id="6mysqlserver_140"></a>6）安装mysql-server</h5> 
<pre><code class="prism language-shell"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-server-5.7.28-1.el7.x86_64.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/a5/FRWQ27Hf_o.png" alt="image-20230331173537349"></p> 
<p>注意：若出现以下错误</p> 
<pre><code class="prism language-shell">warning: 05_mysql-community-server-5.7.16-1.el7.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY
error: Failed dependencies:
libaio.so.1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>64bit<span class="token punctuation">)</span> is needed by mysql-community-server-5.7.16-1.el7.x86_64
</code></pre> 
<p>解决办法：</p> 
<pre><code class="prism language-shell">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> libaio
</code></pre> 
<h5><a id="7MySQL_162"></a>7）启动MySQL</h5> 
<pre><code class="prism language-shell">systemctl start mysqld 	<span class="token comment">#启动mysql服务器</span>
systemctl status mysqld	<span class="token comment">#查看服务器状态</span>
systemctl <span class="token builtin class-name">enable</span> mysqld	<span class="token comment">#设置虚拟机开机mysql服务自动启动</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b6/96/ggYOSUh2_o.png" alt="image-20230331173859671"></p> 
<p>查看MySQL状态，没有启动成功：</p> 
<p><img src="https://images2.imgbox.com/3b/d2/kESMMAP9_o.png" alt="image-20230331174245900"></p> 
<p>经过查找，我发现是这个问题：</p> 
<pre><code class="prism language-shell"><span class="token parameter variable">--initialize</span> specified but the data directory has files <span class="token keyword">in</span> it. Aborting.
</code></pre> 
<p>意思是初始化数据目录时发现目录里面有文件，可能原因是之前运行过命令目录中已生成文件。只要我们找到MySQL的数据目录并删除里面的文件即可解决。</p> 
<pre><code class="prism language-shell">查看MySQL指定的数据目录存放路径
<span class="token comment"># cat /etc/my.cnf</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>省略内容<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/var/lib/mysql
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/var/lib/mysql/mysql.sock
</code></pre> 
<p><code>datadir</code>是我们安装MySQL时默认指定的存放文件的数据目录，进入文件中删除里面的目录即可。</p> 
<p><img src="https://images2.imgbox.com/0a/82/XkHbk4KZ_o.png" alt="image-20230331182441476"></p> 
<p>再次查看，文件夹中出现了文件：</p> 
<p><img src="https://images2.imgbox.com/d6/76/XUyLgICY_o.png" alt="image-20230331182644955"></p> 
<p>我们查看一下MySQL的状态：</p> 
<p><img src="https://images2.imgbox.com/44/ce/XHS837f2_o.png" alt="image-20230331182753550"></p> 
<p>设置开机自启动：</p> 
<pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> mysqld
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/57/srRDugHU_o.png" alt="image-20230331183352312"></p> 
<h5><a id="8MySQL_212"></a>8）查看MySQL密码</h5> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">cat</span> /var/log/mysqld.log <span class="token operator">|</span> <span class="token function">grep</span> password
</code></pre> 
<p><img src="https://images2.imgbox.com/f2/ae/IHAzoS20_o.png" alt="image-20230331183900841"></p> 
<h4><a id="2_MySQL_220"></a>2. 配置MySQL</h4> 
<p>配置主要是root用户 + 密码，在任何主机上都能登录MySQL数据库。</p> 
<h5><a id="1MySQL_224"></a>1）用刚刚查到的密码进入MySQL</h5> 
<pre><code class="prism language-shell">mysql <span class="token parameter variable">-uroot</span> -p<span class="token string">'_K&gt;)_Rg!k6d:'</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/75/f9/JRisQ0J5_o.png" alt="image-20230331184126160"></p> 
<blockquote> 
 <p>注意：</p> 
 <ul><li>如果报错，给密码加单引号</li><li>不要把空格给复制上，不然是登不上的</li></ul> 
</blockquote> 
<h5><a id="2_237"></a>2）设置复杂密码</h5> 
<blockquote> 
 <p>注意：由于MySQL密码策略，此密码必须足够复杂，需要大小写字母，数字，特殊字符。</p> 
</blockquote> 
<pre><code class="prism language-mysql">set password=password("Qs23=zs32");
</code></pre> 
<p><img src="https://images2.imgbox.com/71/a3/pV7G6K9Y_o.png" alt="image-20230331184344930"></p> 
<h5><a id="3MySQL_247"></a>3）更改MySQL密码策略</h5> 
<p>但是如果使用刚才那个密码，比较复杂，我们不容易记住，所以我们想把密码设置的简单一些，需要先进行设置。</p> 
<pre><code class="prism language-mysql">set global validate_password_policy=0;
set global validate_password_length=4;
</code></pre> 
<p><img src="https://images2.imgbox.com/36/0d/AcRNTnE0_o.png" alt="image-20230331184552318"></p> 
<h5><a id="4_258"></a>4）设置简单好记的密码</h5> 
<pre><code class="prism language-shell"><span class="token builtin class-name">set</span> <span class="token assign-left variable">password</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/de/71/lih4PzBE_o.png" alt="image-20230331185042781"></p> 
<h5><a id="5MySQL_266"></a>5）进入MySQL库</h5> 
<pre><code class="prism language-mysql">use mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/cd/6r2VEuYx_o.png" alt="image-20230331185116480"></p> 
<h5><a id="6user_274"></a>6）查询user表</h5> 
<pre><code class="prism language-mysql">select user, host from user;
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/6e/zGpMjPK5_o.png" alt="image-20230331185202920"></p> 
<h5><a id="7userHost_282"></a>7）修改user表，把Host表内容修改为%</h5> 
<pre><code class="prism language-mysql">update user set host="%" where user="root";
</code></pre> 
<p><img src="https://images2.imgbox.com/93/73/R2cq8HSO_o.png" alt="image-20230331185247695"></p> 
<h5><a id="8_290"></a>8）刷新</h5> 
<pre><code class="prism language-shell">flush privileges<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/1e/ANGi8HxE_o.png" alt="image-20230331185405260"></p> 
<h5><a id="9_298"></a>9）退出</h5> 
<pre><code class="prism language-mysql">exit
</code></pre> 
<p><img src="https://images2.imgbox.com/22/19/FdZWCfSg_o.png" alt="image-20230331185428060"></p> 
<h3><a id="HiveMySQL_306"></a>四、配置Hive元数据存储到MySQL</h3> 
<p><img src="https://images2.imgbox.com/06/b9/iB6IgZib_o.png" alt=""></p> 
<h4><a id="1_MySQL_310"></a>1. 配置元数据到MySQL</h4> 
<h5><a id="1Hive_312"></a>1）新建Hive元数据库</h5> 
<pre><code class="prism language-mysql">#登录MySQL
mysql -uroot -p123456

#创建Hive元数据库
mysql&gt; create database metastore;
mysql&gt; quit;
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/83/qvngr84i_o.png" alt="image-20230331185708022"></p> 
<h5><a id="2MySQLJDBCHivelib_325"></a>2）将MySQL的JDBC驱动拷贝到Hive的lib目录下。</h5> 
<pre><code class="prism language-shell"><span class="token function">cp</span> mysql-connector-java-5.1.37.jar <span class="token variable">$HIVE_HOME</span>/lib
</code></pre> 
<p><img src="https://images2.imgbox.com/2b/6e/5FeR4ZhO_o.png" alt="image-20230331185818478"></p> 
<h5><a id="3HIVE_HOMEconfhivesitexml_333"></a>3）在$HIVE_HOME/conf目录下新建hive-site.xml文件</h5> 
<pre><code class="prism language-shell"><span class="token function">vi</span> <span class="token variable">$HIVE_HOME</span>/conf/hive-site.xml
</code></pre> 
<p>添加如下内容：</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0"?&gt;</span>
<span class="token prolog">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- jdbc连接的URL --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://hadoop001:3306/metastore?useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- jdbc连接的Driver--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!-- jdbc连接的username--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- jdbc连接的password --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- Hive默认在HDFS的工作目录 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/user/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f5/1a/ZhXGMmf2_o.png" alt="image-20230331190443332"></p> 
<h5><a id="4HiveMySQL_380"></a>4）初始化Hive元数据库（修改为采用MySQL存储元数据）</h5> 
<pre><code class="prism language-shell">bin/schematool <span class="token parameter variable">-dbType</span> mysql <span class="token parameter variable">-initSchema</span> <span class="token parameter variable">-verbose</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c5/80/KoPFZyCQ_o.png" alt="image-20230331190510596"></p> 
<h4><a id="2__388"></a>2. 验证元数据是否配置成功</h4> 
<h5><a id="1hadoopMySQL_390"></a>1）启动hadoop集群和MySQL服务</h5> 
<p><img src="https://images2.imgbox.com/43/7b/iuNGFUMG_o.png" alt="image-20230331190810115"></p> 
<p><img src="https://images2.imgbox.com/de/56/06QxA8CQ_o.png" alt="image-20230331190839428"></p> 
<h5><a id="2Hive_396"></a>2）启动Hive</h5> 
<pre><code class="prism language-shell">bin/hive
</code></pre> 
<p><img src="https://images2.imgbox.com/4e/f5/yoWJi1vQ_o.png" alt="image-20230331190913569"></p> 
<h5><a id="3Hive_404"></a>3）使用Hive</h5> 
<pre><code class="prism language-hive">hive&gt; show databases;
hive&gt; show tables;
hive&gt; create table stu(id int, name string);
hive&gt; insert into stu values(1,"ss");
hive&gt; select * from stu;
</code></pre> 
<p>查看数据库：</p> 
<p><img src="https://images2.imgbox.com/f0/fa/zx7hA9aC_o.png" alt="image-20230331222451600"></p> 
<h4><a id="3_MySQL_418"></a>3. 查看MySQL中的元数据</h4> 
<h5><a id="1MySQL_420"></a>1）登录MySQL</h5> 
<pre><code class="prism language-shell">mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p123456</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3a/ce/0GnMe56M_o.png" alt="image-20230331225609491"></p> 
<h5><a id="2metastore_428"></a>2）查看元数据库metastore</h5> 
<pre><code class="prism language-mysql">mysql&gt; show databases;
mysql&gt; use metastore;
mysql&gt; show tables;
</code></pre> 
<p><img src="https://images2.imgbox.com/90/e7/bd4KcItR_o.png" alt="image-20230331225758266"></p> 
<p><img src="https://images2.imgbox.com/73/64/KwKPVW9i_o.png" alt="image-20230331225904567"></p> 
<p>（1）查看元数据库中存储的库信息</p> 
<pre><code class="prism language-mysql">select * from DBS;
</code></pre> 
<p><img src="https://images2.imgbox.com/d7/e3/509zHwQk_o.png" alt="image-20230331230411895"></p> 
<p>（2）查看元数据库中存储的表信息</p> 
<pre><code class="prism language-mysql">select * from TBLS;
</code></pre> 
<p><img src="https://images2.imgbox.com/f1/5f/CvM4TkC7_o.png" alt="image-20230331230338242"></p> 
<p>（3）查看元数据库中存储的表中列相关信息</p> 
<pre><code class="prism language-mysql">select * from COLUMNS_V2;
</code></pre> 
<p><img src="https://images2.imgbox.com/fa/3f/ZCT9HLwb_o.png" alt="image-20230331230501860"></p> 
<h3><a id="Hive_464"></a>五、Hive服务部署</h3> 
<h4><a id="1_hiveserver2_466"></a>1. hiveserver2服务</h4> 
<p>Hive的<code>hiveserver2</code>服务的作用是提供<code>jdbc/odbc</code>接口，为用户提供远程访问Hive数据的功能，例如用户期望在个人电脑中访问远程服务中的Hive数据，就需要用到<code>Hiveserver2</code>。</p> 
<p><img src="https://images2.imgbox.com/97/2d/tcXmB9ZZ_o.png" alt="image-20230331230624547"></p> 
<h5><a id="1_472"></a>1）用户说明</h5> 
<p>​ 在远程访问Hive数据时，客户端并未直接访问Hadoop集群，而是由<code>Hivesever2</code>代理访问。由于Hadoop集群中的数据具备访问权限控制，所以此时需考虑一个问题：那就是访问Hadoop集群的用户身份是谁？是<code>Hiveserver2</code>的启动用户？还是客户端的登录用户？</p> 
<p>​ 答案是都有可能，具体是谁，由<code>Hiveserver2</code>的<code>hive.server2.enable.doAs</code>参数决定，该参数的含义是是否启用<code>Hiveserver2</code>用户模拟的功能。若启用，则<code>Hiveserver2</code>会模拟成客户端的登录用户去访问Hadoop集群的数据，不启用，则<code>Hivesever2</code>会直接使用启动用户访问Hadoop集群数据。模拟用户的功能，默认是开启的。</p> 
<p>​ 具体逻辑如下：</p> 
<p>未开启用户模拟功能：</p> 
<p><img src="https://images2.imgbox.com/98/da/uKHpTI7q_o.png" alt="image-20230331230831000"></p> 
<p>开启用户模拟功能：</p> 
<p><img src="https://images2.imgbox.com/83/0d/tMkO6GBU_o.png" alt="image-20230331230855368"></p> 
<p>生产环境，推荐开启用户模拟功能，因为开启后才能保证各用户之间的权限隔离。</p> 
<h5><a id="2hiveserver2_490"></a>2）<code>hiveserver2</code>部署</h5> 
<p>（1）Hadoop端配置</p> 
<p>​ <code>hivesever2</code>的模拟用户功能，依赖于Hadoop提供的<code>proxy user</code>（代理用户功能），只有Hadoop中的代理用户才能模拟其他用户的身份访问Hadoop集群。因此，需要将<code>hiveserver2</code>的启动用户设置为Hadoop的代理用户，配置方式如下：</p> 
<p>修改配置文件core-site.xml，然后记得分发三台机器:</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> <span class="token variable">$HADOOP_HOME</span>/etc/hadoop
<span class="token function">vi</span> core-site.xml
</code></pre> 
<p>增加如下配置：</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 配置访问hadoop的权限，能够让hive访问到 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.proxyuser.root.hosts<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.proxyuser.root.users<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>（2）Hive端配置</p> 
<p>在hive-site.xml文件中添加如下配置信息:</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 指定hiveserver2连接的host --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.server2.thrift.bind.host<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hadoop001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 指定hiveserver2连接的端口号 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.server2.thrift.port<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>10000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6f/d2/q5TkyDcP_o.png" alt="image-20230331231603166"></p> 
<h5><a id="3_537"></a>3）测试</h5> 
<p>（1）启动hiveserver2</p> 
<pre><code class="prism language-shell">bin/hive <span class="token parameter variable">--service</span> hiveserver2
</code></pre> 
<p>出现问题：</p> 
<p><img src="https://images2.imgbox.com/9e/5d/JCTun7nI_o.png" alt="image-20230331231948682"></p> 
<p>在 hive-site.xml 中添加如下配置：</p> 
<pre><code class="prism language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.server2.active.passive.ha.enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Whether HiveServer2 Active/Passive High Availability be enabled when Hive Interactive sessions are enabled.This will also require hive.server2.support.dynamic.service.discovery to be enabled.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>重新启动hiveserver2服务：</p> 
<p><img src="https://images2.imgbox.com/69/27/AE7yRRxS_o.png" alt="image-20230331232752861"></p> 
<p>（2）使用命令行客户端beeline进行远程访问</p> 
<p>启动beeline客户端</p> 
<pre><code>bin/beeline -u jdbc:hive2://hadoop001:10000 -n root
</code></pre> 
<p>看到如下界面</p> 
<p><img src="https://images2.imgbox.com/e0/d9/TwdV68mS_o.png" alt="image-20230331233006916"></p> 
<h5><a id="4DataGrip_575"></a>4）配置DataGrip连接</h5> 
<p>（1）创建连接</p> 
<p><img src="https://images2.imgbox.com/69/9a/mtFt1Ddi_o.png" alt="image-20230331233243324"></p> 
<p>（2）配置连接属性<br> 所有属性配置，和Hive的beeline客户端配置一致即可。初次使用，配置过程会提示缺少JDBC驱动，按照提示下载即可。</p> 
<p><img src="https://images2.imgbox.com/56/84/MzYQEwnk_o.png" alt="image-20230331233438976"></p> 
<p>（3）界面介绍</p> 
<p><img src="https://images2.imgbox.com/8d/5d/7FlDiEBu_o.png" alt="image-20230331233549586"></p> 
<p>（4）测试sql执行</p> 
<p><img src="https://images2.imgbox.com/f6/8c/Bl1Kd2DC_o.png" alt="image-20230331233648354"></p> 
<h4><a id="2_metastore_594"></a>2. metastore服务</h4> 
<p>Hive的metastore服务的作用是为Hive CLI或者Hiveserver2提供元数据访问接口。</p> 
<h5><a id="1metastore_598"></a>1）metastore运行模式</h5> 
<p>metastore有两种运行模式，分别为嵌入式模式和独立服务模式。下面分别对两种模式进行说明：</p> 
<p>（1）嵌入式模式</p> 
<p><img src="https://images2.imgbox.com/f7/79/4BzwqoOc_o.png" alt="image-20230331233800219"></p> 
<p>（2）独立服务模式</p> 
<p><img src="https://images2.imgbox.com/ed/01/Qv7gh4O0_o.png" alt="image-20230331233842988"></p> 
<p>生产环境中，不推荐使用嵌入式模式。因为其存在以下两个问题：<br> （1）嵌入式模式下，每个Hive CLI都需要直接连接元数据库，当Hive CLI较多时，数据库压力会比较大。</p> 
<p>（2）每个客户端都需要用户元数据库的读写权限，元数据库的安全得不到很好的保证。</p> 
<h5><a id="2metastore_615"></a>2）metastore部署</h5> 
<p>（1）嵌入式模式</p> 
<p>嵌入式模式下，只需保证Hiveserver2和每个Hive CLI的配置文件hive-site.xml中包含连接元数据库所需要的以下参数即可：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- jdbc连接的URL --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://hadoop001:3306/metastore?useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- jdbc连接的Driver--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!-- jdbc连接的username--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- jdbc连接的password --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>（2）独立服务模式<br> 独立服务模式需做以下配置：<br> 首先，保证metastore服务的配置文件hive-site.xml中包含连接元数据库所需的以下参数：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- jdbc连接的URL --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://hadoop001:3306/metastore?useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- jdbc连接的Driver--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!-- jdbc连接的username--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- jdbc连接的password --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>其次，保证Hiveserver2和每个Hive CLI的配置文件hive-site.xml中包含访问metastore服务所需的以下参数：</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 指定metastore服务的地址 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.uris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>thrift://hadoop001:9083<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>注意：主机名需要改为metastore服务所在节点，端口号无需修改，metastore服务的默认端口就是9083。</p> 
<h5><a id="3_693"></a>3）测试</h5> 
<p>此时启动Hive CLI，执行shou databases语句，会出现一下错误提示信息：</p> 
<pre><code class="prism language-shell">hive <span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token operator">&gt;</span> show databases<span class="token punctuation">;</span>
FAILED: HiveException java.lang.RuntimeException: Unable to instantiate org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient
</code></pre> 
<p>这是因为我们在Hive CLI的配置文件中配置了hive.metastore.uris参数，此时Hive CLI会去请求我们执行的metastore服务地址，所以必须启动metastore服务才能正常使用。</p> 
<p>metastore服务的启动命令如下：</p> 
<pre><code class="prism language-shell">hive <span class="token parameter variable">--service</span> metastore
</code></pre> 
<p><img src="https://images2.imgbox.com/47/76/t3SYNPuS_o.png" alt="image-20230331234623836"></p> 
<p>注意：启动后该窗口不能再操作，需打开一个新的Xshell窗口来对Hive操作。</p> 
<p>重新启动 Hive CLI，并执行shou databases语句，就能正常访问了</p> 
<p><img src="https://images2.imgbox.com/d9/c6/WKQOVDHZ_o.png" alt="image-20230331234646124"></p> 
<h4><a id="3_Hive_718"></a>3. 编写Hive服务启动脚本</h4> 
<h5><a id="1_720"></a>1）前台启动的方式导致需要打开多个窗口，可以使用如下方式后台方式启动</h5> 
<ul><li>nohup：放在命令开头，表示不挂起，也就是关闭终端进程也继续保持运行状态</li><li>/dev/null：是Linux文件系统中的一个文件，被称为黑洞，所有写入该文件的内容都会被自动丢弃</li><li>2&gt;&amp;1：表示将错误重定向到标准输出上</li><li>&amp;：放在命令结尾，表示后台运行</li></ul> 
<p>一般会组合使用：nohup [xxx命令操作]&gt; file 2&gt;&amp;1 &amp;，表示将xxx命令运行的结果输出到file中，并保持命令启动的进程在后台运行。</p> 
<pre><code class="prism language-shell"><span class="token function">nohup</span> hive <span class="token parameter variable">--service</span> metastore <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token function">nohup</span> hive <span class="token parameter variable">--service</span> hiveserver2 <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre> 
<h5><a id="2_734"></a>2）为了方便使用，可以直接编写脚本来管理服务的启动和关闭</h5> 
<pre><code class="prism language-shell"><span class="token function">vi</span> <span class="token variable">$HIVE_HOME</span>/bin/hive-script.sh
</code></pre> 
<p>内容如下：</p> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">HIVE_LOG_DIR</span><span class="token operator">=</span><span class="token variable">$HIVE_HOME</span>/logs
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token variable">$HIVE_LOG_DIR</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
	<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$HIVE_LOG_DIR</span>
<span class="token keyword">fi</span>

<span class="token comment">#检查进程是否运行正常，参数1为进程名，参数2为进程端口</span>
<span class="token keyword">function</span> <span class="token function-name function">check_process</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> $1 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $2}'</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">ppid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">netstat</span> <span class="token parameter variable">-nltp</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">|</span> <span class="token function">grep</span> $2 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $7}'</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-d</span> <span class="token string">'/'</span> <span class="token parameter variable">-f</span> <span class="token number">1</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$pid</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$pid</span>"</span> <span class="token operator">=~</span> <span class="token string">"<span class="token variable">$ppid</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$ppid</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">return</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token builtin class-name">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">hive_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token assign-left variable">metapid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>check_process HiveMetastore <span class="token number">9083</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">cmd</span><span class="token operator">=</span><span class="token string">"nohup hive --service metastore &gt;<span class="token variable">$HIVE_LOG_DIR</span>/metastore.log 2&gt;&amp;1 &amp;"</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$metapid</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">eval</span> <span class="token variable">$cmd</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"Metastroe服务已启动"</span>
    <span class="token assign-left variable">server2pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>check_process HiveServer2 <span class="token number">10000</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">cmd</span><span class="token operator">=</span><span class="token string">"nohup hive --service hiveserver2 &gt;<span class="token variable">$HIVE_LOG_DIR</span>/hiveServer2.log 2&gt;&amp;1 &amp;"</span>
    <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$server2pid</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">eval</span> <span class="token variable">$cmd</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"HiveServer2服务已启动"</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">hive_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token assign-left variable">metapid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>check_process HiveMetastore <span class="token number">9083</span><span class="token variable">)</span></span>
    <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$metapid</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">kill</span> <span class="token variable">$metapid</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"Metastore服务未启动"</span>
    <span class="token assign-left variable">server2pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>check_process HiveServer2 <span class="token number">10000</span><span class="token variable">)</span></span>
    <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$server2pid</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">kill</span> <span class="token variable">$server2pid</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"HiveServer2服务未启动"</span>
<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
<span class="token string">"start"</span><span class="token punctuation">)</span>
    hive_start
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">"stop"</span><span class="token punctuation">)</span>
    hive_stop
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">"restart"</span><span class="token punctuation">)</span>
    hive_stop
    <span class="token function">sleep</span> <span class="token number">2</span>
    hive_start
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">"status"</span><span class="token punctuation">)</span>
    check_process HiveMetastore <span class="token number">9083</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">"Metastore服务运行正常"</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"Metastore服务运行异常"</span>
    check_process HiveServer2 <span class="token number">10000</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">"HiveServer2服务运行正常"</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"HiveServer2服务运行异常"</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> Invalid Args<span class="token operator">!</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'Usage: '</span><span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $0<span class="token variable">)</span></span><span class="token string">' start|stop|restart|status'</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d5/5f/yTAAa5Bd_o.png" alt="image-20230331235158482"></p> 
<h5><a id="3_803"></a>3）添加执行权限</h5> 
<pre><code class="prism language-shell"><span class="token function">chmod</span> +x <span class="token variable">$HIVE_HOME</span>/bin/hive-script.sh
</code></pre> 
<p><img src="https://images2.imgbox.com/89/ba/lIr1kjJ9_o.png" alt="image-20230331235413927"></p> 
<h5><a id="4Hive_811"></a>4）启动Hive后台服务</h5> 
<pre><code class="prism language-shell">hive-script.sh start
hive-script.sh status
hive-script.sh stop
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/08/dT9hR40w_o.png" alt="image-20230401001426098"></p> 
<h3><a id="_821"></a>六、其他配置</h3> 
<h4><a id="1_hiveINFO_823"></a>1. 解决hive打印大量INFO日志</h4> 
<p>配置好hive的环境之后，无论输入bin/hive还是输入hive，都依然打印大量INFO日志。</p> 
<p><img src="https://images2.imgbox.com/3d/54/HyDcNfXK_o.png" alt="image-20230331191404203"></p> 
<p>这样不利于我们观察信息。</p> 
<h5><a id="1hiveconf_831"></a>1）进入到hive安装路径下的conf目录下</h5> 
<p>可以看到目录下现有的文件：</p> 
<p><img src="https://images2.imgbox.com/a4/8a/FgqNTxk1_o.png" alt="image-20230331221132048"></p> 
<h5><a id="2log4jproperties_837"></a>2）新建<code>log4j.properties</code>文件</h5> 
<p>文件内容如下：</p> 
<pre><code class="prism language-shell"><span class="token assign-left variable">log4j.rootLogger</span><span class="token operator">=</span>WARN,CA
<span class="token assign-left variable">log4j.appender.CA</span><span class="token operator">=</span>org.apache.log4j.ConsoleAppender
<span class="token assign-left variable">log4j.appender.CA.layout</span><span class="token operator">=</span>org.apache.log4j.PatternLayout
<span class="token assign-left variable">log4j.appender.CA.layout.ConversionPattern</span><span class="token operator">=</span>%-4r <span class="token punctuation">[</span>%t<span class="token punctuation">]</span> %-5p %c %x - %m%n
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/dd/4Xyc7DUF_o.png" alt="image-20230331221335951"></p> 
<blockquote> 
 <p>如果，还是有WARN信息，可以吧WARN改成ERROR级别。</p> 
</blockquote> 
<h5><a id="3hive_852"></a>3）重新执行启动hive的命令</h5> 
<p><img src="https://images2.imgbox.com/8b/9a/DemvVtnp_o.png" alt="image-20230331221506439"></p> 
<p>我们发现没有日志输出了。</p> 
<h4><a id="2Hive_860"></a>2.Hive卸载</h4> 
<h5><a id="1MySQL_862"></a>1）卸载MySQL说明</h5> 
<p>若因为安装失败或者其他原因，MySQL需要卸载重装，可参考以下内容。</p> 
<p>（1）先关闭MySQL服务</p> 
<pre><code class="prism language-shell">systemctl stop mysqld
systemctl disable mysqld
</code></pre> 
<p>（2）清空原有数据</p> 
<p>①通过/etc/my.cnf查看MySQL数据的存储位置</p> 
<pre><code class="prism language-shell"><span class="token function">cat</span> /etc/my.cnf
</code></pre> 
<p><img src="https://images2.imgbox.com/35/87/z4m49ook_o.png" alt="image-20230331163415725"></p> 
<p>②去往/var/lib/mysql路径需要root权限</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@hadoop001 ~<span class="token punctuation">]</span><span class="token comment"># cd /var/lib/mysql</span>
<span class="token punctuation">[</span>root@hadoop001 mysql<span class="token punctuation">]</span><span class="token comment"># rm -rf *	#（注意敲击命令的位置）</span>
</code></pre> 
<p>（3）卸载MySQL相关包</p> 
<p>①查看安装过的MySQL相关包</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-E</span> mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/0e/3a/DSNDuvFY_o.png" alt="image-20230331163741842"></p> 
<p>②一键卸载命令</p> 
<pre><code>rpm -qa | grep -i -E mysql\|mariadb | xargs -n1 sudo rpm -e --nodeps
</code></pre> 
<p><img src="https://images2.imgbox.com/b1/90/26YHQaIZ_o.png" alt="image-20230331164002631"></p> 
<h5><a id="2Hive_910"></a>2）卸载Hive</h5> 
<p><img src="https://images2.imgbox.com/e3/3a/v3agxS0I_o.png" alt="image-20230331164910610"></p> 
<h4><a id="3_Hive_914"></a>3. 修改Hive运⾏⽇志的存放位置</h4> 
<p>默认情况下，Hive的运⾏⽇志存放在/tmp/root/hive.log ⽬录下（root是当前⽤户登录⽤户名）。修改hive的⽇志存放到<code>$HIVE_HOME/logs</code>⽬录下。</p> 
<p><img src="https://images2.imgbox.com/6e/c2/tOoLM7YH_o.png" alt="image-20230401094741472"></p> 
<p><img src="https://images2.imgbox.com/74/23/dRqNtQiT_o.png" alt="image-20230401094753583"></p> 
<h5><a id="1hivelog4j2properties_922"></a>1）创建hivelog4j2.properties</h5> 
<p>修改<code>hive-log4j2.properties.template</code>⽂件名称为<code>hive-log4j2.properties</code>:</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> <span class="token variable">$HIVE_HOME</span>/conf
</code></pre> 
<p><img src="https://images2.imgbox.com/69/b1/28rFSv1U_o.png" alt="image-20230401095338255"></p> 
<pre><code class="prism language-shell"> <span class="token function">cp</span> hive-log4j2.properties.template hive-log4j2.properties
</code></pre> 
<p><img src="https://images2.imgbox.com/ee/54/DGs7n1sJ_o.png" alt="image-20230401095438862"></p> 
<h5><a id="2_hivelog4j2properties__log__938"></a>2）在 <code>hive-log4j2.properties</code> ⽂件中修改 log 存放位置</h5> 
<p><img src="https://images2.imgbox.com/64/8e/69mWB1le_o.png" alt="image-20230401121702205"></p> 
<h5><a id="3hivescriptsh_restartHIVE_HOMEhivelogs_942"></a>3）⽤hive-script.sh restart重启服务后，查看<code>$HIVE_HOME/hive/logs</code>⽬录</h5> 
<p><img src="https://images2.imgbox.com/a7/ac/PTM9cLTp_o.png" alt="image-20230401121830241"></p> 
<p><img src="https://images2.imgbox.com/ee/2d/Q0o6CeFc_o.png" alt="image-20230401121900504"></p> 
<p>已有新⽣成的⽇志。</p> 
<h4><a id="4__950"></a>4. 打印当前库和表头</h4> 
<p>在 hive-site.xml 中加⼊如下两个配置:</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 打印表头 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.cli.print.header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 开启这个属性可以在CLI提示符前打印出当前所在数据库名，默认数据库名为default --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.cli.print.current.db<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/bb/Ei17782l_o.png" alt="image-20230401122434461"></p> 
<p>也可以⽤set命令进⾏设置:</p> 
<pre><code class="prism language-hive">hive&gt; set hive.cli.print.header=true;
hive&gt; set hive.cli.print.current.db=true;
</code></pre> 
<p>set命令的设置仅本次⽣效，Hive CLI重启后失效。 ⽽配置⽂件是永久有效。</p> 
<h4><a id="5_HiveJVM_979"></a>5. Hive的JVM堆内存设置</h4> 
<p>新版本的Hive启动的时候，默认申请的JVM堆内存大小为256M，JVM堆内存申请的太小，导致后期开启本地模式，执行复杂的SQL时经常会报错：<code>java.lang.OutOfMemoryError: Java heap space</code>，因此最好提前调整一下HADOOP_HEAPSIZE这个参数。</p> 
<h5><a id="1hiveenvsh_983"></a>1）新建hive-env.sh</h5> 
<p><img src="https://images2.imgbox.com/c3/5d/MWYsnLDo_o.png" alt="image-20230401122931775"></p> 
<h5><a id="2_hiveenvsh_987"></a>2）修改 hive-env.sh其中的参数</h5> 
<p>将hive-env.sh其中的参数 export HADOOP_HEAPSIZE修改为2048，重启Hive。</p> 
<p><img src="https://images2.imgbox.com/cd/33/22hFVxEk_o.png" alt="image-20230401123144554"></p> 
<h4><a id="6_Hadoop_993"></a>6. 关闭Hadoop虚拟内存检查</h4> 
<p>在yarn-site.xml中关闭虚拟内存检查（虚拟内存校验，如果已经关闭了，就不需要配了）。</p> 
<p>（1）修改前记得先停Hadoop</p> 
<p>（2）添加如下配置</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.vmem-check-enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/f7/br0kFc5K_o.png" alt="image-20230401123815359"></p> 
<p>（3）修改完后记得分发yarn-site.xml，并重启yarn。</p> 
<h4><a id="7_1012"></a>7.出现这个问题</h4> 
<p><code>Error while processing statement: FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.StatsTask</code></p> 
<p>执行以下命令没有问题：</p> 
<pre><code>show databases;
show tables;
select * from 表名;
</code></pre> 
<p>插入第一条数据没有问题，但是插入第二条数据出现问题：</p> 
<pre><code class="prism language-shell">Error <span class="token keyword">while</span> processing statement: FAILED: Execution Error, <span class="token builtin class-name">return</span> code <span class="token number">1</span> from org.apache.hadoop.hive.ql.exec.StatsTask
</code></pre> 
<p>问题原因：可能是因为MySQL数据库和元数据库在同一台虚拟机上。</p> 
<p>解决方案：不配置元数据服务即可。</p> 
<p>参考文章：</p> 
<p><a href="http://t.csdn.cn/hTqBO" rel="nofollow">MySQL启动时出现initialize specified but the data directory has files in it. Aborting问题</a></p> 
<p><a href="http://t.csdn.cn/X9U3a" rel="nofollow">Centos7安装hive3.1.2遇到报错</a></p> 
<p><a href="http://t.csdn.cn/O1KXt" rel="nofollow">hive启动日志关闭解决方法</a></p> 
<p><a href="http://t.csdn.cn/qVitk" rel="nofollow">Hive数据仓库的安装配置</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cab2707d3aa6000b9098673cacaa1199/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Qt对Opengl的支持情况</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/325addd0262e628ee93ddf7d442ca355/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">仓库管理系统设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>