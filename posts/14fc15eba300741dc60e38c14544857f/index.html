<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>k8s容器编排(使用kubeadm部署) - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="k8s容器编排(使用kubeadm部署)" />
<meta property="og:description" content="一。基础 kuberbete就是管理这些应用程序所在的小运行环境（container）而生，集群调度的最小单元就是一个pod，一个pod可以是一个容器，也可以是多个容器。k8s不是直接管理容器，而是管理pod。
1
一个K8S系统，通常称为一个K8S集群（Cluster）。kubectl 是k8s的客户端程序，也是k8s的命令行工具，提供的大量的子命令可以让用户可以和集群进行交互。
这个集群主要包括两个部分：
一个Master节点（主节点）
一群Node节点（计算节点）
2
Master节点包括API Server、Scheduler、Controller manager、etcd。
API Server是整个系统的对外接口，供客户端和其它组件调用，所有的指令请求都要经过apiserver 。
Scheduler使用调度算法，负责对集群内部的资源进行调度，把请求资源调度到某一个node节点，相当于“调度室”。
Controller manager维护k8s资源对象，负责管理控制器，控制平面，用于调度程序以及节点状态检测。
eted存储资源对象。
3
3.1
Node节点是实际部署容器运行的地方，包括Docker、kubelet、kube-proxy、Fluentd、kube-dns（可选），pods。
3.2
详细介绍：
Pod是Kubernetes最基本的操作单元。一个Pod代表着集群中运行的一个进程，它内部封装了一个或多个紧密相关的容器。
Service，一个Service可以看作一组提供相同服务的Pod的对外访问接口。
Docker，创建容器的。
Kubelet，在每一个node节点都存在一份，在node节点上的资源操作指令由kubelet来执行，主要负责监视指派到它所在Node上的Pod，包括创建、修改、监控、删除等。
Kube-proxy，主要负责为Pod对象提供代理，处理服务器间负载均衡。
Fluentd，主要负责日志收集、存储与查询。
3.3
Node包含的信息：
· Node地址：主机的IP地址，或Node ID。
· Node的运行状态：Pending、Running、Terminated三种状态。
· Node Condition：…
· Node系统容量：描述Node可用的系统资源，包括CPU、内存、最大可调度Pod数量等。
· 其他：内核版本号、Kubernetes版本等。
3.4
查看Node信息：
kubectl describe node
3.5
Pod的生命周期通过Replication Controller来管理；通过模板进行定义，然后分配到一个Node上运行，在Pod所包含容器运行结束后，Pod结束。
3.6
在Kubernetes的世界里，虽然每个Pod都会被分配一个单独的IP地址，但这个IP地址会随着Pod的销毁而消失，这就引出一个问题：如果有一组Pod组成一个集群来提供服务，那么如何来访问它呢？Service！
一个Service可以看作一组提供相同服务的Pod的对外访问接口，Service作用于哪些Pod是通过Label Selector来定义的。
· 拥有一个指定的名字（比如my-mysql-server）；
· 拥有一个虚拟IP（ClusterIP、ServiceIP或VIP）和端口号，销毁之前不会改变，只能内网访问；
· 能够提供某种远程服务能力；
· 被映射到了提供这种服务能力的一组容器应用上；
如果Service要提供外网服务，需指定公共IP和NodePort，或外部负载均衡器；
4
二。目的 k8s是一个编排容器的工具，创建应用，应用的部署，应用提供服务，扩容缩容应用，应用更新，故障自愈（一个服务器挂了，可以自动将这个服务器上的服务调度到另外一个主机上进行运行，无需进行人工干涉），更新的时候可以做到不用中断服务，服务器故障不用停机，从开发环境到测试环境到生产环境的迁移极其方便，一个配置文件搞定，一次生成image，到处运行
三。安装步骤 1" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/14fc15eba300741dc60e38c14544857f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-18T20:48:59+08:00" />
<meta property="article:modified_time" content="2022-11-18T20:48:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">k8s容器编排(使用kubeadm部署)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>一。基础</h3> 
<p>kuberbete就是管理这些应用程序所在的小运行环境（container）而生，集群调度的最小单元就是一个pod，一个pod可以是一个容器，也可以是多个容器。k8s不是直接管理容器，而是管理pod。<br> 1<br> 一个K8S系统，通常称为一个K8S集群（Cluster）。kubectl 是k8s的客户端程序，也是k8s的命令行工具，提供的大量的子命令可以让用户可以和集群进行交互。<br> 这个集群主要包括两个部分：<br> 一个Master节点（主节点）<br> 一群Node节点（计算节点）<br> 2<br> Master节点包括API Server、Scheduler、Controller manager、etcd。<br> API Server是整个系统的对外接口，供客户端和其它组件调用，所有的指令请求都要经过apiserver 。<br> Scheduler使用调度算法，负责对集群内部的资源进行调度，把请求资源调度到某一个node节点，相当于“调度室”。<br> Controller manager维护k8s资源对象，负责管理控制器，控制平面，用于调度程序以及节点状态检测。<br> eted存储资源对象。<br> 3<br> 3.1<br> Node节点是实际部署容器运行的地方，包括Docker、kubelet、kube-proxy、Fluentd、kube-dns（可选），pods。<br> 3.2<br> 详细介绍：<br> Pod是Kubernetes最基本的操作单元。一个Pod代表着集群中运行的一个进程，它内部封装了一个或多个紧密相关的容器。<br> Service，一个Service可以看作一组提供相同服务的Pod的对外访问接口。<br> Docker，创建容器的。<br> Kubelet，在每一个node节点都存在一份，在node节点上的资源操作指令由kubelet来执行，主要负责监视指派到它所在Node上的Pod，包括创建、修改、监控、删除等。<br> Kube-proxy，主要负责为Pod对象提供代理，处理服务器间负载均衡。<br> Fluentd，主要负责日志收集、存储与查询。<br> 3.3<br> Node包含的信息：<br> · Node地址：主机的IP地址，或Node ID。<br> · Node的运行状态：Pending、Running、Terminated三种状态。<br> · Node Condition：…<br> · Node系统容量：描述Node可用的系统资源，包括CPU、内存、最大可调度Pod数量等。<br> · 其他：内核版本号、Kubernetes版本等。<br> 3.4<br> 查看Node信息：<br> kubectl describe node<br> 3.5<br> Pod的生命周期通过Replication Controller来管理；通过模板进行定义，然后分配到一个Node上运行，在Pod所包含容器运行结束后，Pod结束。<br> 3.6<br> 在Kubernetes的世界里，虽然每个Pod都会被分配一个单独的IP地址，但这个IP地址会随着Pod的销毁而消失，这就引出一个问题：如果有一组Pod组成一个集群来提供服务，那么如何来访问它呢？Service！<br> 一个Service可以看作一组提供相同服务的Pod的对外访问接口，Service作用于哪些Pod是通过Label Selector来定义的。<br> · 拥有一个指定的名字（比如my-mysql-server）；<br> · 拥有一个虚拟IP（ClusterIP、ServiceIP或VIP）和端口号，销毁之前不会改变，只能内网访问；<br> · 能够提供某种远程服务能力；<br> · 被映射到了提供这种服务能力的一组容器应用上；<br> 如果Service要提供外网服务，需指定公共IP和NodePort，或外部负载均衡器；<br> 4</p> 
<h3><a id="_47"></a>二。目的</h3> 
<p>k8s是一个编排容器的工具，创建应用，应用的部署，应用提供服务，扩容缩容应用，应用更新，故障自愈（一个服务器挂了，可以自动将这个服务器上的服务调度到另外一个主机上进行运行，无需进行人工干涉），更新的时候可以做到不用中断服务，服务器故障不用停机，从开发环境到测试环境到生产环境的迁移极其方便，一个配置文件搞定，一次生成image，到处运行</p> 
<h3><a id="_51"></a>三。安装步骤</h3> 
<p>1<br> 关闭防火墙和selinux（三）<br> <img src="https://images2.imgbox.com/8a/89/qSUhduf4_o.png" alt="在这里插入图片描述"><br> sed -i ‘s/enforcing/disabled/’是将enforcing 替换为disabled<br> <img src="https://images2.imgbox.com/e7/15/CmoxXeNG_o.png" alt="在这里插入图片描述"></p> 
<p>2<br> 关闭swap分区（三）<br> 因为K8s安装的时候会去检测swap分区有无关闭，如果开启了话可能会把pod放在虚拟内存运行，大大降低工作效率<br> <img src="https://images2.imgbox.com/9b/07/kFNj6WKU_o.png" alt="在这里插入图片描述"><br> 模糊匹配swap注释掉该行sed -ri ‘s/.<em>swap.</em>/#&amp;/’ /etc/fstab<br> sed 中 -r标识regular expressions 正则表达式<br> sed中可以使用&amp;符号，&amp;可以理解为当前查找到的值（值为.<em>swap.</em>）<br> @符号标识sed命令的分割符，也可以使用# 或者/代替，看你写的语句如果包含不同符号的时候用另一种分割符号会规避与要操作的文本冲突避免转义的麻烦看着更简洁。</p> 
<p>3<br> 设置静态ip（三）<br> vim /etc/network-scripts/ip名称<br> 添加：<br> BOOTPROTO=static<br> IPADDR=10.0.100.11<br> NETMASK=255.255.255.0<br> GATEWAY=10.0.100.8<br> DNS=8.8.8.8</p> 
<p>4<br> 修改主机名并且修改hosts文件（三）<br> <img src="https://images2.imgbox.com/0c/0c/I7OQ0TyN_o.png" alt="在这里插入图片描述"><br> 设置完后可每台机器都运行如下命令，检测下是否能ping通<br> ping m<br> ping w1<br> ping w2<br> 可以ping通<br> <img src="https://images2.imgbox.com/88/8b/qKf4qvSK_o.png" alt="在这里插入图片描述"><br> 可以查看：<br> <img src="https://images2.imgbox.com/9e/08/Qdx147Mc_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li></ol> 
<p>确认linux系统内核<br> kubernetes基础环境需要2核<br> 6</p> 
<h3><a id="_94"></a>待定</h3> 
<ul><li class="task-list-item"> <p><input type="checkbox" class="task-list-item-checkbox" disabled> 在命令行中输入modprobe br_netfilter ，使修改生效<br> 禁止iptables对bridge数据进行处理（kubeadm初始化时会检测该选项）</p> <pre><code>报错1：显示/proc/sys/net/bridge/bridge-nf-call-iptables：没有这个文件或者目录
modprobe br_netfilter 报错2：显示sysctl: cannot stat
/proc/sys/net/netfilter/nf_conntrack_max: 没有那个文件或目录 modprobe
ip_conntrack
</code></pre> </li></ul> 
<p>7（三）<br> 在/etc/sysctl.d/下，新建文件kubernetes.conf<br> 开启bridge网桥模式,设置系统参数（三）<br> <img src="https://images2.imgbox.com/fb/72/Y8KUK39L_o.png" alt="在这里插入图片描述"><br> 或者</p> 
<p><img src="https://images2.imgbox.com/10/0d/svkdTVsh_o.png" alt="在这里插入图片描述"><br> 第一次没有写到.conf文件，报错了。<br> cat &gt; 写入该文件<br> &lt;&lt; EOF 代表写入完毕，退出<br> <img src="https://images2.imgbox.com/ff/0a/OWnhPniQ_o.png" alt="在这里插入图片描述"></p> 
<p>8（三）<br> 时间同步<br> <img src="https://images2.imgbox.com/bc/0f/wZQXRCT8_o.png" alt="在这里插入图片描述"><br> 9（三）<br> 安装docker<br> 9.1<br> docker配置修改，设置cgroup驱动，这里用systemted ，配置修改<br> vim .etc/docker/daemon.json<br> 加入以下内容：<br> 驱动：exec-opts:[native.cgroupdriver-systemd]<br> 配置镜像下载加速器（阿里云镜像加速器需要注册，单独分配一个地址）：<br> registry-mirrors:[https://140o2406.mirror.aliyuncs.com]<br> 说明：<br> cgroup用来管控资源分配的，本身可以有不同的driver，kubernetes在启动的时候会做一些检查，在启动kubelet的时候，去判断docker使用了哪一个cgroup driver，如果docker本身不是使用systemd，那么它就会默认报错不启动。<br> <img src="https://images2.imgbox.com/6c/27/di2SJy1s_o.png" alt="在这里插入图片描述"><br> 9.2<br> 重启docker ：systemctl restart docker<br> 重启docker 失败，提示/etc/systemd/system/docker.service的配置native.cgroupdriver=systemd和/etc/docker/daemon.json有冲突<br> 放弃/etc/docker/daemon.json的配置：native.cgroupdriver=systemd<br> <img src="https://images2.imgbox.com/8f/b4/FSOytepI_o.png" alt="在这里插入图片描述"></p> 
<p>10（三）<br> 10.1<br> 安装/kubeadm/kubelet/kubectl （三）<br> 在/etc/yum.repo.d目录下创建kubernetes.repo文件。<br> 配置安装源：/etc/yum.repo.d/kubernetes.repo<br> 镜像源修改为国内的：<br> <img src="https://images2.imgbox.com/1f/bb/ugxd2pgg_o.png" alt="在这里插入图片描述"></p> 
<p>10.2<br> 安装<br> yum install -y --setopt=obsoletes=0 kubelet-1.17.4-0 kubeadm-1.17.4-0 kubectl-1.17.4-0<br> 必须制定–setopt=obsoletes=0,否则yum会自动安装更高版本<br> 10.3<br> kubelet是与容器接口进行交互，而k8s通过kubeadm安装以后都是以pod方式存在，底层是以容器容器的方式运行，所以一定要开机自启，不然启动不了k8s集群。<br> 设置kubelet自启动<br> systemctl enable kubelet<br> systemctl start kubelet<br> 确认以下kubelet状态是否正常：systemctl status kubelet</p> 
<p>11<br> docker和k8s设置同一个cgroup<br> kubelet,这边如果发现输出directory not exist,也说明没问题的，继续进行。</p> 
<p>/etc/systemd/system/kubelet.service.d/10-kubeadm.conf或者vim /etc/sysconfig/kubelet<br> 编辑vim /etc/sysconfig/kubelet<br> <img src="https://images2.imgbox.com/be/aa/Ua3fKLXt_o.png" alt="在这里插入图片描述"><br> ipvs是什么(暂时没有设置）</p> 
<p>12（三）<br> 在安装kubernetes集群之前，必须要提前准备好集群需要的镜像，所需镜像可以通过下面命令查看。<br> 12.1<br> 查看kubeadm使用的镜像：kubeadm config images list<br> <img src="https://images2.imgbox.com/ca/c4/DZZhA0PK_o.png" alt="在这里插入图片描述"><br> 试一下直接拉取：docker pull k8s.gcr.io/kube-apiserver:v1.17.17<br> 连接被拒绝<br> 12.2<br> 针对部分国外镜像仓库无法访问问题，国内阿里云或dockerhub可能有转存镜像可用，拉取后需自行修改tag：<br> #示例：<br> docker pull k8s.gcr.io/pause:3.2<br> #改为：<br> docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2<br> 12.3<br> 任意位置创建kubeadm.sh脚本，该脚本作用是：<br> 拉取阿里云对应镜像<br> 打tag，将拉取的镜像改名为k8s开头的名称<br> 删除原有镜像</p> 
<p>12.4<br> 脚本内容如下：<br> <img src="https://images2.imgbox.com/49/c4/gSg9whHM_o.png" alt="在这里插入图片描述"><br> 12.5<br> 运行脚本和查看镜像</p> 
<p><img src="https://images2.imgbox.com/9e/be/M3dV1hKt_o.png" alt="在这里插入图片描述"><br> 以下表示成功（tag版本跟自己的kubeadm依赖有关系）。<br> <img src="https://images2.imgbox.com/27/7c/gfTWtScc_o.png" alt="在这里插入图片描述"></p> 
<p>9<br> 部署k8s-master【master执行】<br> 9.1 kubeadm部署【master节点 】<br> kubernetes-version和ignore-preflight-errors是否必须要配置。<br> <img src="https://images2.imgbox.com/dc/e3/D6fkacEg_o.png" alt="在这里插入图片描述"><br> –apiserver-advertise-address 集群通告地址，在 Master执行(apiserver-advertise-address的值为master的ip)。<br> （不需要配置）–image-repository 由于默认拉取镜像地址k8s.gcr.io国内无法访问，这里指定阿里云镜像仓库地址。默认值："k8s.gcr.io"选择用于拉取控制平面镜像的容器仓库 由于已经把镜像加载到本地了,所以不需要配置, 优先取本地的镜像。<br> –kubernetes-version K8s版本，与上面安装的一致<br> –service-cidr 集群内部虚拟网络，Pod统一访问入口<br> –pod-network-cidr Pod网络，与下面部署的CNI网络组件yaml中保持一致，10.244.0.0、16是kube-flannel.yml文件配置的默认网段，如果pod-network-cidr默认使用的是192.168.0.0/16,而当集群节点的IP段也为192.168.0.0/16时,必然导致IP段冲突 当Pod子网和主机网络出现冲突的情况下就会出现问题。<br> 初始化之后，会输出一个join命令，先复制出来，node节点加入master会使用。<br> <img src="https://images2.imgbox.com/7f/ce/igc4rzC6_o.png" alt="在这里插入图片描述"></p> 
<p>记得保存好最后kubeadm init 生成的token 和 discovery-token-ca-cert-hash<br> kubeadm join的信息。<br> 注：<br> 查看token<br> kubeadm token list<br> 超过24小时过期。kubeadm token create --print-join-command<br> 删除token ：kubeadm token delete abcdef.0123456789abcdef<br> #创建永久的token：kubeadm token create --ttl=0 <br> 提示错误也没关系<br> <img src="https://images2.imgbox.com/bf/5c/oROTsUEL_o.png" alt="在这里插入图片描述"></p> 
<p>#获取token_hash值 ：openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der |openssl dgst -sha256 -hex</p> 
<p>9.2【master结点】<br> 根据日志提示，创建相关目录以及授权，拷贝k8s认证文件<br> 将当前用户配置为集群管理员（如果不配置，下次连接时会无法使用kubectl）<br> <img src="https://images2.imgbox.com/c1/51/UhzUH923_o.png" alt="在这里插入图片描述"><br> mkdir -p $HOME/.kube意思在~目录下创建一个.kube文件。<br> 执行后ls -a可以查看.kube文件。<br> chown <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
       
         i 
        
       
         d 
        
       
         − 
        
       
         u 
        
       
         ) 
        
       
         : 
        
       
      
        (id -u): 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">u</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span></span></span></span></span>(id -g) config 意思切换config的所属用户</p> 
<p>10<br> 查看pod工作节点是否运行成功。<br> kubectl get nodes 或者kubectl get nodes -n kube-system<br> 原因：<br> kubectl是命令行管理工具，get获取pod状态，-n是指定名称空间为kube-system。因为所有的系统组件都被安装在kube-system<br> 报错一：执行后状态不对notready<br> <img src="https://images2.imgbox.com/48/0e/lJH1Ieeg_o.png" alt="在这里插入图片描述"><br> 主机中k8s的master启动顺序为：systemd &gt; kubelet &gt; 容器组件 &gt; kubernetes<br> 查看kubelet 状态（可以先跳过）：systemctl status kubelet<br> 查看docker 状态：systemctl status docker<br> <img src="https://images2.imgbox.com/1e/59/CgRJOJnU_o.png" alt="在这里插入图片描述"><br> 应该是版本问题。<br> 使用kubectl version 命令，输出的信息会显示client和server的版本信息，client代表kubectl版本信息，server代表的是master节点的k8s版本信息<br> kubectl version获取的client版本和server版本数据来自：<br> client版本是kubectl执行文件的版本.<br> server版本是kube-apiserver执行文件的版本.<br> <img src="https://images2.imgbox.com/26/83/yMyWoCQH_o.png" alt="在这里插入图片描述"><br> 报错一：<br> kube-controller-manager-master和Kube-scheduler-master 状态是 crashloopbackoff<br> 原因：如果容器无法启动，则Kubernetes将显示错误状态为：CrashLoopBackOff。<br> <img src="https://images2.imgbox.com/9b/05/bv8l49VR_o.png" alt="在这里插入图片描述"></p> 
<p>注意：<br> kubectl语句不管执行什么都报拒绝连接，大概率是接口调用有问题<br> <img src="https://images2.imgbox.com/c8/ba/kQJoyXtO_o.png" alt="在这里插入图片描述"><br> 正在运行的容器：docker ps<br> <img src="https://images2.imgbox.com/24/02/yH6S2tc4_o.png" alt="在这里插入图片描述"></p> 
<p>找到kube-apiserver重启：docker restart 05d412caabf8<br> <img src="https://images2.imgbox.com/fc/17/1anLtRis_o.png" alt="在这里插入图片描述"><br> 重启后正常<br> <img src="https://images2.imgbox.com/ee/06/EfTMFNLp_o.png" alt="在这里插入图片描述"><br> 或者是因为虚拟机内存不足，可以free执行一下看，添加一下内存<br> <img src="https://images2.imgbox.com/cc/96/KqPVQq5H_o.png" alt="在这里插入图片描述"></p> 
<p>11<br> 重新安装了一遍k8s获取pod工作节点正常（我是因为电脑故障重新安装了）<br> kubectl get pod -n kube-system<br> <img src="https://images2.imgbox.com/ed/f3/sC60XbGx_o.png" alt="在这里插入图片描述"><br> 发现像etc，controller，scheduler等组件都以pod的方式安装成功了，但是可以发现coredns没有启动，因为需要安装网络插件，插件有很多种，本次搭建选用calico。</p> 
<p>12<br> 部署calico网络插件（在master节点服务器上运行）<br> 健康检查：curl -k https://localhost:6443/healthz<br> <img src="https://images2.imgbox.com/c0/9d/jj1yxW9N_o.png" alt="在这里插入图片描述"></p> 
<p>Calico是一个纯三层的数据中心网络方案，是目前Kubernetes主流的网络方案。<br> 12.1<br> （1）<br> 在k8s中安装calico（不建议这种）<br> kubectl apply -f https://docs.projectcalico.org/v3.20/manifests/calico.yaml<br> v3.20 v3.21 v3.22是网页版的报错 v3.19 V3.18 V3.17 V3.16<br> k1.14 v3.9<br> k1.23 v3.14<br> 用v3.14<br> 安装报错，提示连接被拒绝dial tcp localhost:6443 connect: connection refused<br> <img src="https://images2.imgbox.com/82/75/QuEzoDaK_o.png" alt="在这里插入图片描述"><br> 这种报错是因为calico的网络接口配置和kubernete不一致，换成v3.14版本的就可以了（各个kubernete版本不一致，可以一个个改版本号试试kubectl apply -f https://docs.projectcalico.org/v3.20/manifests/calico.yaml）<br> <img src="https://images2.imgbox.com/9c/81/od3z09DJ_o.png" alt="在这里插入图片描述"><br> 成功后，执行kubectl get pod -n kube-system 可以一直执行，因为它是一直更新着的。<br> <img src="https://images2.imgbox.com/4c/04/YimbzvMl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7c/bf/WgvnkIqd_o.png" alt="在这里插入图片描述"><br> 其他的都正常了，只有执行kubectl get nodes 时master 是notready和 calico-node-vgsl6有问题<br> 查看日志：journalctl -u kubelet | tail -n 200<br> <img src="https://images2.imgbox.com/e3/5b/hXhxzRfU_o.png" alt="在这里插入图片描述"><br> kubectl get cs查看组件状态controller-manager 显示unhealthy<br> <img src="https://images2.imgbox.com/41/e6/NBGiZa03_o.png" alt="在这里插入图片描述"><br> 这两个pod的非安全端口没有开启，健康检查时报错，但是由于本身服务是正常的，只是健康检查的端口没启，所以不影响正常使用。<br> 解决方法：<br> 查找kubelet的配置文件位置 systemctl cat kubelet<br> <img src="https://images2.imgbox.com/8e/a2/n2ZwRWT4_o.png" alt="在这里插入图片描述"><br> 找到kublet的配置文件<br> 添加如下红笔标注内容：–pod-manifests-path=/etc/kubernetes/manifests<br> <img src="https://images2.imgbox.com/cf/c9/79973wZL_o.png" alt="在这里插入图片描述"></p> 
<p>重新加载启动kubelet<br> [root@cka-node01 ~]# systemctl daemon-reload<br> [root@cka-node01 ~]# systemctl restart kubelet</p> 
<p>再次获取状态就是health<br> <img src="https://images2.imgbox.com/97/11/ySIvWxd1_o.png" alt="在这里插入图片描述"><br> 再次执行kubectl get nodes 状态已经正常<br> <img src="https://images2.imgbox.com/e8/d8/ZFP1zRT2_o.png" alt="在这里插入图片描述"></p> 
<p>（2）先下载，提示颁发的证书已经过期<br> wget https://docs.projectcalico.org/manifests/calico.yaml<br> <img src="https://images2.imgbox.com/ae/f3/CnrYaSdz_o.png" alt="在这里插入图片描述"><br> 执行命令“yum install -y ca-certificates”更新下证书。<br> 再下载就正常了。<br> （3）<br> 设置为ipip模式<br> 下载完后还需要修改里面定义Pod网络（CALICO_IPV4POOL_CIDR），与前面kubeadm init的 --pod-network-cidr指定的一样。<br> 下载calico.yaml存放地址：/etc/kubernetes/manifests/<br> <img src="https://images2.imgbox.com/2b/ef/6UFnHaop_o.png" alt="在这里插入图片描述"><br> 在DaemonSet部分 calico-node的pod的变量中，修改CALICO_IPV4POOL_IPIP值为Always<br> <img src="https://images2.imgbox.com/8a/b6/HDIwxeBT_o.png" alt="在这里插入图片描述"><br> 修改pod的网段<br> 修改CALICO_IPV4POOL_CIDR为k8s集群的pod网段<br> 同样也在DaemonSet 中， calico-node的pod的变量里，修改如下：<br> <img src="https://images2.imgbox.com/d7/3b/5vOS4Md0_o.png" alt="在这里插入图片描述"><br> （4）<br> 创建calico网络<br> kubectl create -f calico.yaml</p> 
<p>(5)<br> kubectl apply 和create区别<br> kubectl create<br> 是祈使式命令，明确告诉k8s要创建的资源或者对象<br> 首先删除集群中现有的资源，然后重新根据yaml文件生成新的资源对象<br> yaml文件必须是完整的配置<br> yaml文件中的所有字段都会被create<br> 在没有改动yaml文件时，使用同一个yaml文件执行命令kubectl replace，将不会成功（fail掉），因为缺少相关改动信息。<br> kubectl apply<br> 是声明式命令，apply不告诉k8s具体要干什么，而是kubectl根据yaml文件自动探测要做哪些操作，如果不存在则create，如果存在则对比差异，进行更新。<br> 根据yaml文件中包含的字段，直接升级集群中的现有资源对象<br> yaml文件可以不完整，只写需要修改的字段<br> 只有要改动的字段才会被apply<br> 在只改动了yaml文件中的某些声明时，而不是全部改动，你可以使用kubectl apply</p> 
<p>12.3<br> 确认一下calico是否安装成功（时间比较久，coredns和calico为running状态后再进行后面的操作）<br> kubectl get pods --all-namespaces -w<br> <img src="https://images2.imgbox.com/bf/8f/6LkDlEwe_o.png" alt="在这里插入图片描述"><br> （1）<br> coredns和calico为pending<br> <img src="https://images2.imgbox.com/ef/ec/gliQrHwz_o.png" alt="在这里插入图片描述"><br> 可以使用netstat -r 查看路由表<br> 使用kubectl describe 命令查看原因：kubectl describe pod calico-kube-controllers-55… -n kube-system<br> <img src="https://images2.imgbox.com/8a/e3/Q275gMsM_o.png" alt="在这里插入图片描述">然后找到原因对应的去解决就可以了<br> （2）<br> 查看calico的默认ip池<br> calicoctl get ipPool -o yaml<br> kubernetes 集群在初始化完成后就会创建一个 kubernetes service，该 service 是 kube-apiserver 创建并进行维护的<br> kubectl get svc<br> <img src="https://images2.imgbox.com/e5/1a/AMDmFhP9_o.png" alt="在这里插入图片描述"></p> 
<p>（3）<br> 查看容器的信息，查找容器名称<br> <img src="https://images2.imgbox.com/44/61/qqJePAiS_o.png" alt="在这里插入图片描述"><br> （4）<br> 查看/etc/cni/net.d/10-calico.conflist，nodename字段确实是szx-xxxxxx。这个文件是由install-cni这个容器初始化的<br> （5）<br> 查看<br> kubectl get pod -o yaml<br> -o指定具体的格式，可以是yaml或者json格式<br> apiVersion：Kubernetes API版本；<br> kind：Kubernetes对象资源类型；<br> metadata：包括名称、命名空间、标签和关于该容器的其他信息；<br> <img src="https://images2.imgbox.com/3c/92/CQdKLFEk_o.png" alt="在这里插入图片描述"><br> （6）<br> kubectl logs kubia-manual -c kubia<br> 以上表示查询Pod为kubia-manual中的容器kubia的日志(因为一个pod中可以包含多个容器)<br> （7）<br> 查看docker 状态报错，以下是journalctl -xe日志报错截图<br> 部署k8s报错：unknown container “/system.slice/kubelet.service”<br> *原因：kubernetes和docker版本兼容性问题（有可能是k8s版本太高,docker版本太低的问题）<br> 修改配置：vim /etc/sysconfig/kubelet<br> KUBELET_EXTRA_ARGS=“–runtime-cgroups=/systemd/system.slice --kubelet-cgroups=/systemd/system.slice”<br> <img src="https://images2.imgbox.com/c6/61/jd2l3mkL_o.png" alt="在这里插入图片描述"><br> (8)<br> kubectl edit ds calico-node -n kube-system<br> 可以编辑calico的配置文件<br> <img src="https://images2.imgbox.com/d3/37/pO3fBWOd_o.png" alt="在这里插入图片描述"></p> 
<p>（9）<br> 常用命令：kubectl cluster-info查看集群信息<br> 查看所有configmaps信息 kubectl get cm -A<br> 编辑查找的configmaps：kubectl edit cm cluser-info<br> <img src="https://images2.imgbox.com/c0/ce/4mxU6znH_o.png" alt="在这里插入图片描述"><br> 查看指定pod的日志 kubectl logs -f --tail 500 -n kube-system kube-apiserver-k8s-master<br> <img src="https://images2.imgbox.com/64/07/JazGtvWO_o.png" alt="在这里插入图片描述"></p> 
<p>(10)<br> 目前情况</p> 
<p><img src="https://images2.imgbox.com/2d/4b/T0qGD4HE_o.png" alt="在这里插入图片描述"><br> docker和kubelet都正常<br> kubectl describe pod calico-kube-controlle -n kube-system<br> <img src="https://images2.imgbox.com/a0/f1/79AOKpsD_o.png" alt="在这里插入图片描述"><br> calico.yaml的配置<br> <img src="https://images2.imgbox.com/06/25/0lTwz8nZ_o.png" alt="在这里插入图片描述"></p> 
<p>（11）<br> 查看所需的镜像： grep image calico.yaml<br> <img src="https://images2.imgbox.com/d4/3f/XGWsQtm2_o.png" alt="在这里插入图片描述"><br> 第一种方法<br> 在所有节点（包括master）上把这些镜像下载下来：<br> for i in docker.io/node:v3.24.4 ; do docker pull $i ; done<br> <img src="https://images2.imgbox.com/52/23/3xCe0V9H_o.png" alt="在这里插入图片描述"></p> 
<p>下载完成后(master和节点都要有)<br> 安装calico网络<br> kubectl apply -f calico.yaml<br> 第二种方法：<br> 下载calico.yaml文件后<br> 修改calico.yaml文件<br> 由于默认的Calico清单文件中所使用的镜像来源于docker.io国外镜像源，上面我们配置了Docker镜像加速，应删除docker.io前缀以使镜像从国内镜像加速站点下载。<br> <img src="https://images2.imgbox.com/c0/08/QodFnTzE_o.png" alt="在这里插入图片描述"></p> 
<p>（12）<br> 如果主机系统使用NetworkManager来管理网络的话，则需要配置NetworkManager，以允许Calico管理接口。<br> NetworkManger操作默认网络命名空间接口的路由表，这可能会干扰Calico代理正确路由的能力。在所有主机上操作:<br> 创建以下配置文件以防止 网络管理器干扰接口：/etc/NetworkManager/conf.d/calico.conf<br> [keyfile]<br> unmanaged-devices=interface-name:cali*;interface-name:tunl*;interface-name:vxlan.calico<br> <img src="https://images2.imgbox.com/13/7f/4YLm1PHC_o.png" alt="在这里插入图片描述"><br> 解决kubectl apply -f calico.yaml执行时报的错<br> sterrole.rbac.authorization.k8s.io/calico configured<br> kubelet apply should be used on resource created by either kubectl create --save-config or kubectl apply<br> (13)<br> 解决kubectl apply -f calico.yaml执行时报的错<br> calico.yaml error converting yaml to json line 205 did not find expected ‘-’ indicator<br> 配置文件的内容：<br> <img src="https://images2.imgbox.com/e7/0a/NGV4UKoJ_o.png" alt="在这里插入图片描述"><br> （14）<br> Calico同时支持Kubernetes API数据存储（kdd）和etcd数据存储<br> IPIP与BGP两种网络模式对比<br> IPIP<br> 适用于互相访问的Pod不在同一个网段中，跨网段访问的场景，外层封装的IP能够解决跨网段的路由问题<br> BGP<br> 使用路由信息导向流量，效率高<br> kubectl -n kube-system get po -owide<br> <img src="https://images2.imgbox.com/9f/fd/Qksdp0o5_o.png" alt="在这里插入图片描述"></p> 
<p>13</p> 
<h3><a id="nodekubelet__469"></a>node节点kubelet 报错</h3> 
<p>flag–cgroup驱动程序已被弃用，应通过kubelet的–config标志指定的配置文件设置此参数。<br> 命令未能解析kubelet标志：未知标志：–网络插件<br> <img src="https://images2.imgbox.com/8c/ff/5Nxx9mDz_o.png" alt="在这里插入图片描述"><br> (1)<br> rpm -qa | grep kube<br> 各个版本不一致<br> <img src="https://images2.imgbox.com/db/36/AlLmlXGE_o.png" alt="在这里插入图片描述"><br> 需要降级：yum downgrade kubelet-1.17.4-0.x86_64<br> 依旧报错<br> (2)<br> systemctl show --property=Environment kubelet \ cat<br> <img src="https://images2.imgbox.com/c6/79/XhzZOivx_o.png" alt="在这里插入图片描述"><br> node节点加入k8s集群就正常了。</p> 
<p>14</p> 
<h3><a id="nodek8s_488"></a>node节点加入k8s集群报错：</h3> 
<p>warning : joincontrolpane.controlplane settings will be ignored when control-plane flag is not set.<br> [preflight] running pre-flight checks<br> error execution phase preflight: couldn’t validate the identity of the api server :abort conneting to api server after timeout of<br> to see the stack trace of this error execute with --v=5 or higher</p> 
<p>配置k8s的node节点【node节点操作】<br> 10.1【node节点】<br> 在其余工作节点 执行主节点的安装日志中的加入命令即可<br> 向集群添加新节点，执行在kubeadm init输出的kubeadm join命令<br> <img src="https://images2.imgbox.com/b9/2b/hMvptVJz_o.png" alt="在这里插入图片描述"><br> 10.2<br> 默认token有效期为24小时，当过期之后，该token就不可用了。这时就需要重新创建token，可以直接使用命令快捷生成（master节点）：<br> kubeadm token create --print-join-command<br> 可能会失效。建议创建永久token<br> 10.3<br> #创建永久的token：kubeadm token create --ttl=0 <br> #获取token_hash值 ：openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der |openssl dgst -sha256 -hex <br> node节点执行以下命令后可以在master节点查看： <br> <img src="https://images2.imgbox.com/27/ea/FMvvVzZG_o.png" alt="在这里插入图片描述"><br> master节点<br> <img src="https://images2.imgbox.com/b5/07/mt15Gjnl_o.png" alt="在这里插入图片描述"><br> 执行全部完成后，node节点的kubelet也运行起来了。<br> 注：不确定加入k8s集群成功是不是因为执行了kubectl apply calico.yaml</p> 
<p><img src="https://images2.imgbox.com/ce/1b/vNEijTao_o.png" alt="在这里插入图片描述"><br> 等Calico Pod都Running后，节点也会准备就绪。<br> <img src="https://images2.imgbox.com/a0/c3/7MBJyBUF_o.png" alt="在这里插入图片描述"><br> 注：以后所有yaml文件都只在Master节点执行。</p> 
<p>安装目录：/etc/kubernetes/</p> 
<p>组件配置文件目录：/etc/kubernetes/manifests/</p> 
<p>10</p> 
<h3><a id="Dashboard_530"></a>部署Dashboard</h3> 
<p>（1）<br> Dashboard是官方提供的一个UI，可用于基本管理K8s资源。<br> 每个dashboard 与k8s 的匹配度不一样，可以在以下连接中查看版本<br> https://github.com/kubernetes/dashboard/releases?page=2<br> （2）<br> 我的k8s是v1.17版本，所以<br> YAML下载地址（/etc/kubernetes/）：<br> wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-rc7/aio/deploy/recommended.yaml<br> 之后执行kubelet apply -f recommended.yaml<br> <img src="https://images2.imgbox.com/4b/c1/wA9AEnXE_o.png" alt="在这里插入图片描述"><br> （3）<br> 查看是否安装成功<br> kubectl get pod -n kubernetes-dashboard<br> <img src="https://images2.imgbox.com/bd/33/X4Spvlp2_o.png" alt="在这里插入图片描述"><br> （4）<br> 默认Dashboard只能集群内部访问，修改Service为NodePort类型，暴露到外部：<br> kubectl edit svc kubernetes-dashboard -n kubernetes-dashboard<br> <img src="https://images2.imgbox.com/42/99/TQ53RE7l_o.png" alt="在这里插入图片描述"><br> 修改后<br> <img src="https://images2.imgbox.com/bb/29/9Vf53Nf8_o.png" alt="在这里插入图片描述"><br> （5）<br> 查看dashboard外网访问端口查看<br> kubectl get svc -A | grep kubenetes-dashboard<br> <img src="https://images2.imgbox.com/7a/13/UDsqhea3_o.png" alt="在这里插入图片描述"><br> （6）<br> 服务器上部署dashboard，防火墙或者安全组要开放相关端口，例如小编需要释放32431端口；<br> 浏览器输入https://Node节点IP:32431进入登录页面；</p> 
<p><img src="https://images2.imgbox.com/b5/77/SXO9r3qR_o.png" alt="在这里插入图片描述"></p> 
<p>（7）<br> 创建dashboard-account.yaml文件<br> vim dashboard-account.yaml</p> 
<p>创建service account并绑定默认cluster-admin管理员集群角色：<br> 主要内容是创建admin-user账户，并授予集群管理权限；<br> <img src="https://images2.imgbox.com/b0/c3/Vkez5r0X_o.png" alt="在这里插入图片描述"><br> kubectl apply -f dash-user.yaml<br> <img src="https://images2.imgbox.com/b8/5b/WGmphrl5_o.png" alt="在这里插入图片描述"><br> （8）<br> 获取账户token<br> 命令kubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath=“{.secrets[0].name}”) -o go-template=“{<!-- -->{.data.token | base64decode}}”<br> kubectl -n kubernetes-dashboard get secret<br> kubectl -n kubernetes-dashboard get sa/admin-user<br> kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath=“{.secrets[0].name}”<br> kubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath=“{.secrets[0].name}”)</p> 
<p><img src="https://images2.imgbox.com/3f/be/58Nz5Z2H_o.png" alt="在这里插入图片描述"></p> 
<p>可以将输出的token &gt;&gt;输出到日志中，复制到本地<br> 使用输出的token登录Dashboard，就可以管理pod<br> <img src="https://images2.imgbox.com/bc/a4/ytszaOLf_o.png" alt="在这里插入图片描述"></p> 
<p>注：查看各个组件证书过期时间，使用kubeadm会用证书过期的问题，一般一年左右<br> kubeadm certs check-expiration</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/259fab377e7ce888c11168f059ac11e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Flink cdc 2.3.0 日前发布，支持众多新特性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a11f2d426ad57c0984e16e58e100c2ee/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言 PTA 奇偶分家</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>