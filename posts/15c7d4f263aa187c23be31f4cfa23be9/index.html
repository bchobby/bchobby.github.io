<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 从底层结构聊 Beautiful Soup 4（内置豆瓣最新电影排行榜爬取案例） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python 从底层结构聊 Beautiful Soup 4（内置豆瓣最新电影排行榜爬取案例）" />
<meta property="og:description" content="1. 前言 什么是 Beautiful Soup 4 ？
Beautiful Soup 4（简称 BS4，后面的 4 表示最新版本）是一个 Python 第三方库，具有解析 HTML 页面的功能，爬虫程序可以使用 BS4 分析页面无素、精准查找出所需要的页面数据。有 BS4 的爬虫程序爬行过程惬意且轻快。
BS4 特点是功能强大、使用简单。相比较只使用正则表达式的费心费力，BS4 有着弹指一挥间的豪迈和潇洒。
2. 安装 Beautiful Soup 4 BS4 是 Python 第三库，使用之前需要安装。
pip install beautifulsoup4 2.1 BS4 的工作原理 要真正认识、掌握 BS4 ，则需要对其底层工作机制有所了解。
BS4 查找页面数据之前，需要加载 HTML 文件 或 HTML 片段，并在内存中构建一棵与 HTML 文档完全一一映射的树形对象（类似于 W3C 的 DOM 解析。为了方便，后面简称 BS 树），这个过程称为解析。
BS4 自身并没有提供解析的实现，而是提供了接口，用来对接第三方的解析器（这点是很牛逼的，BS4 具有很好的扩展性和开发性）。无论使用何种解析器，BS4 屏蔽了底层的差异性，对外提供了统一的操作方法（查询、遍历、修改、添加……）。
认识 BS4 先从构造 BeautifulSoup 对象开始。BeautifulSoup 是对整个文档树的引用，或是进入文档树的入口对象。
分析 BeautifulSoup 构造方法，可发现在构造 BeautifulSoup 对象时，可以传递很多参数。但一般只需要考虑前 2 个参数。其它参数采用默认值，BS4 就能工作很好（约定大于配置的典范）。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/15c7d4f263aa187c23be31f4cfa23be9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-15T10:34:10+08:00" />
<meta property="article:modified_time" content="2022-03-15T10:34:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 从底层结构聊 Beautiful Soup 4（内置豆瓣最新电影排行榜爬取案例）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1__0"></a>1. 前言</h3> 
<p><strong>什么是 Beautiful Soup 4 ？</strong></p> 
<p><strong>Beautiful Soup 4</strong>（简称 BS4，后面的 4 表示最新版本）是一个 <strong>Python</strong> 第三方库，具有解析 <strong>HTML</strong> 页面的功能，爬虫程序可以使用 <strong>BS4</strong> 分析页面无素、精准查找出所需要的页面数据。有 BS4 的爬虫程序爬行过程惬意且轻快。</p> 
<p><strong>BS4</strong> 特点是功能强大、使用简单。相比较只使用正则表达式的费心费力，BS4 有着弹指一挥间的豪迈和潇洒。</p> 
<h3><a id="2___Beautiful_Soup_4_8"></a>2. 安装 Beautiful Soup 4</h3> 
<p><strong>BS4</strong> 是 Python 第三库，使用之前需要安装。</p> 
<pre><code class="prism language-python">pip install beautifulsoup4
</code></pre> 
<h4><a id="21_BS4___16"></a>2.1 BS4 的工作原理</h4> 
<p>要真正认识、掌握 BS4 ，则需要对其底层工作机制有所了解。</p> 
<p>BS4 查找页面数据之前，需要加载 <strong>HTML 文件</strong> 或 <strong>HTML 片段</strong>，并在内存中构建一棵与 HTML 文档完全一一映射的树形对象（类似于 W3C 的 DOM 解析。为了方便，后面简称 BS 树），这个过程称为解析。</p> 
<p>BS4 自身并没有提供解析的实现，而是提供了接口，用来对接第三方的解析器（这点是很牛逼的，BS4 具有很好的扩展性和开发性）。无论使用何种解析器，<strong>BS4</strong> 屏蔽了底层的差异性，对外提供了统一的操作方法（查询、遍历、修改、添加……）。</p> 
<p><img src="https://images2.imgbox.com/9b/f1/BmXaDOMb_o.png" alt="bs1.png"></p> 
<p>认识 <strong>BS4</strong> 先从构造 <strong>BeautifulSoup</strong> 对象开始。<strong>BeautifulSoup</strong> 是对整个文档树的引用，或是进入文档树的入口对象。</p> 
<p>分析 <strong>BeautifulSoup</strong> 构造方法，可发现在构造 <strong>BeautifulSoup</strong> 对象时，可以传递很多参数。但一般只需要考虑前 2 个参数。其它参数采用默认值，BS4 就能工作很好（约定大于配置的典范）。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> markup<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> features<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> builder<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
      parse_only<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> from_encoding<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> exclude_encodings<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>element_classes<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
</code></pre> 
<ul><li><strong>markup：</strong> HTML 文档。可以是字符串格式的 HTML 片段、也可以是一个文件对象。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token comment"># 使用 HTML 代码片段</span>
html_code <span class="token operator">=</span> <span class="token string">"&lt;h1&gt;BeautifulSoup 4 简介&lt;/h1&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
</code></pre> 
<p>以下使用文件对象做为参数。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"d:/hello.html"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>

</code></pre> 
<blockquote> 
 <p><strong>Tip：</strong> 使用文件对象时，编码方式请选择 unicode 编码（utf-8 是 unicode 的具体实现）。</p> 
</blockquote> 
<ul><li> <p><strong>features：</strong> 指定解析器程序。解析器是 BS4 的灵魂所在，否则 BS4 就是一个无本之源的空壳子。</p> <p><strong>BS4</strong> 支持 Python 内置的 HTML 解析器 ，还支持第三方解析器：lxml、 html5lib……</p> 
  <blockquote> 
   <p><strong>Tip：</strong> 任何人都可以定制一个自己的解析器，但请务必遵循 BS4 的接口规范。</p> 
   <p>所以说即使<strong>谷歌浏览器</strong>的解析引擎很牛逼，但因和 <strong>BS4</strong> 接口不吻合，彼此之间也只能惺惺相惜一番。</p> 
  </blockquote> </li></ul> 
<p>如果要使用是第三方解析器，使用之前请提前安装：</p> 
<p><strong>安装 lxml ：</strong></p> 
<pre><code class="prism language-python">pip install lxml
</code></pre> 
<p><strong>安装 html5lib：</strong></p> 
<pre><code class="prism language-python">pip install html5lib
</code></pre> 
<p>几种解析器的纵横比较：</p> 
<table><thead><tr><th>解析器</th><th>使用方法</th><th>优势</th><th>劣势</th></tr></thead><tbody><tr><td>Python标准库</td><td>BeautifulSoup(markup, “html.parser”)</td><td>执行速度适中 <br>文档容错能力强</td><td>Python 2.7.3 or 3.2.2 前的版本文档容错能力差</td></tr><tr><td>lxml HTML 解析器</td><td>BeautifulSoup(markup, “lxml”)</td><td>速度快<br>文档容错能力强</td><td>需要 C 语言库的支持</td></tr><tr><td>lxml XML 解析器</td><td>BeautifulSoup(markup, [“lxml-xml”]) BeautifulSoup(markup, “xml”)</td><td>速度快 <br>唯一支持 XML 的解析器</td><td>需要 C 语言库的支持</td></tr><tr><td>html5lib</td><td>BeautifulSoup(markup, “html5lib”)</td><td>最好的容错性 <br>以浏览器的方式解析文档 <br>生成HTML5格式的文档</td><td>速度慢<br>不依赖外部扩展</td></tr></tbody></table> 
<p>每一种解析器都有自己的优点，如 <strong>html5lib</strong> 的容错性就非常好，但一般优先使用 <strong>lxml</strong> 解析器，更多时候速度更重要。</p> 
<h4><a id="22__90"></a>2.2 解析器的差异性</h4> 
<p>解析器的功能是加载 HTML（XML） 代码，在内存中构建一棵层次分明的对象树（后面简称 BS 树）。虽然 <strong>BS4</strong> 从应用层面统一了各种解析器的使用规范，但各有自己的底层实现逻辑。</p> 
<p>当然，解析器在解析格式正确、完全符合 HTML 语法规范的文档时，除了速度上的差异性，大家表现的还是可圈可点的。想想，这也是它们应该提供的最基础功能。</p> 
<p>但是，当文档格式不标准时，不同的解析器在解析时会遵循自己的底层设计，会弱显出差异性。</p> 
<blockquote> 
 <p>看来， <strong>BS4</strong> 也无法掌管人家底层逻辑的差异性。</p> 
</blockquote> 
<h5><a id="221_lxml_100"></a>2.2.1 lxml</h5> 
<p>使用 <strong>lxml</strong> 解析HTML代码段。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html_code <span class="token operator">=</span> <span class="token string">"&lt;a&gt;&lt;p&gt;&lt;p&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
&lt;html&gt;&lt;body&gt;&lt;a&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
'''</span>
</code></pre> 
<p><strong>lxml</strong> 在解析时，会自动添加上 <strong>html、body</strong> 标签。并自动补全没有<strong>结束语法结构</strong>的标签。 如上 a 标签是后面 2 个标签的父标签，第一个 p 标签是第二 p 标签的为兄弟关系。</p> 
<p>使用 <strong>lxml</strong> 解析如下HTML 代码段。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html_code <span class="token operator">=</span> <span class="token string">"&lt;a&gt;&lt;/p&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
&lt;html&gt;&lt;body&gt;&lt;a&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
'''</span>
</code></pre> 
<p><strong>lxml</strong> 会认定<strong>只有结束语法没有开始语法</strong>的标签结构是非法的，拒绝解析（也是挺刚的）。即使是非法，丢弃是理所当然的。</p> 
<h5><a id="222_html5lib_132"></a>2.2.2 html5lib</h5> 
<p>使用 <strong>html5lib</strong> 解析不完整的HTML代码段。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html_code <span class="token operator">=</span> <span class="token string">"&lt;a&gt;&lt;p&gt;&lt;p&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"html5lib"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;a&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
'''</span>
</code></pre> 
<p><strong>html5lib</strong> 在解析j时，会自动加上 html、head、body 标签。 除此之外如上解析结果和 <strong>lxml</strong> 没有太大区别，在没有结束标签语法上，大家还是英雄所见略同的。</p> 
<p>使用 <strong>html5lib</strong> 解析下面的HTML 代码段。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html_code <span class="token operator">=</span> <span class="token string">"&lt;a&gt;&lt;/p&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"html5lib"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果:
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;a&gt;&lt;p&gt;&lt;/p&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
'''</span>
</code></pre> 
<p><strong>html5lib</strong> 对于没有<strong>结束语法结构</strong>的标签，会为其补上<strong>开始语法结构</strong>，<strong>html5lib</strong> 遵循的是 HTML5 的部分标准。意思是既然都来了，也就不要走了，html5lib 都会尽可能补全。</p> 
<h5><a id="223_pyhton__164"></a>2.2.3 pyhton 内置解析器</h5> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html_code <span class="token operator">=</span> <span class="token string">"&lt;a&gt;&lt;p&gt;&lt;p&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
&lt;a&gt;&lt;p&gt;&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/a&gt;
'''</span>
</code></pre> 
<p>与前面 2 类解析器相比较，没有添加 、、 任一标签，会自动补全结束标签结构。但最终结构与前 2 类解析器不同。a 标签是后 2 个标签的父亲，第一个 p 标签是第二个 p 标签的父亲，而不是兄弟关系。</p> 
<p><strong>归纳可知：<strong>对于 lxml、html5lib、html.parser 而言，对于没有</strong>结束语法结构</strong>的标签都认为是可以识别的。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
html_code <span class="token operator">=</span> <span class="token string">"&lt;a&gt;&lt;/p&gt;"</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
&lt;a&gt;&lt;/a&gt;
'''</span>
</code></pre> 
<p>对于没有开始语法结构的标签的处理和 <strong>lxml</strong> 解析器相似，会丢弃掉。</p> 
<p>从上面的代码的运行结果可知，<strong>html5lib</strong> 的容错能力是最强的，在对于文档要求不高的场景下，可考虑使用 <strong>html5lib</strong>。在对文档格式要求高的应用场景下，可选择 <strong>lxml</strong> 。</p> 
<h3><a id="3__BS4__196"></a>3. BS4 树对象</h3> 
<p><strong>BS4 内存树</strong>是对 <strong>HTML</strong> 文档或代码段的内存映射，内存树由 4 种类型的 python 对象组成。分别是 <strong>BeautifulSoup</strong>、<strong>Tag</strong>、<strong>NavigableString</strong> 和 <strong>Comment</strong>。</p> 
<ul><li> <p><strong>BeautifulSoup对象</strong> 是对整个 <strong>html</strong> 文档结构的映射，提供对整个 <strong>BS4</strong> 树操作的全局方法和属性。也是入口对象。</p> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">BeautifulSoup</span><span class="token punctuation">(</span>Tag<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">pass</span>
</code></pre> </li><li> <p><strong>Tag对象（标签对象）</strong> 是对 <strong>HTML</strong> 文档中标签的映射，或称其为节点（<strong>对象名与标签名一样</strong>）对象，提供对页面标签操作的方法和属性。本质上 <strong>BeautifulSoup</strong> 对象也 <strong>Tag</strong> 对象。</p> 
  <blockquote> 
   <p><strong>Tip：</strong> 解析页面数据的关键，便是找到包含内容的<strong>标签对象（Tag）</strong>。<strong>BS4</strong> 提供了很多灵活、简洁的方法。</p> 
   <p>使用 <strong>BS4</strong> 就是以 <strong>BeautifulSoup</strong> 对象开始，逐步查找目标标签对象的过程。</p> 
  </blockquote> </li><li> <p><strong>NavigableString对象</strong> 是对 HTML 标签中所包含的内容体的映射，提供有对文本信息操作的方法和属性。</p> 
  <blockquote> 
   <p><strong>Tip：</strong> 对于开发者而言，分析页面，最终就要要获取数据，所以，掌握此对象的方法和属性尤为重要。</p> 
   <p>使用 标签对象的 string 属性就可以获取。</p> 
  </blockquote> </li><li> <p><strong>Comment</strong> 是对文档注释内容的映射对象。此对象用的不多。</p> </li></ul> 
<p>再总结一下：使用 <strong>BS4</strong> 的的关键就是如何以一个 <strong>Tag</strong> 对象（节点对象）为参考，找到与其关联的其它 <strong>Tag 对象</strong>。刚开始出场时就一个 <strong>BeautifulSoup</strong> 对象。</p> 
<p><img src="https://images2.imgbox.com/a1/f5/3jiW3mOy_o.png" alt="bs4tree.png"></p> 
<p>为了更好的以一个节点找到其它节点，需要理解节点与节点的关系：<strong>主要有父子关系、兄弟关系</strong>。</p> 
<p>现以一个案例逐一理解每一个对象的作用。</p> 
<p>案例描述：<strong>爬取豆瓣电影排行榜上的最新电影信息。</strong>（https://movie.douban.com/chart），并以CSV 文档格式保存电影信息。</p> 
<h4><a id="31__Tag_232"></a>3.1 查找目标 Tag</h4> 
<p>获取所需数据的关键就是要找到<strong>目标 Tag</strong>。<strong>BS4</strong> 提供有丰富多变的方法能帮助开发者快速、灵活找到所需 Tag 对象。通过下面的案例，让我们感受到它的富裕变化多端的魔力。</p> 
<p>先获取豆瓣电影排行榜的入口页面路径 https://movie.douban.com/chart 。</p> 
<p>使用谷歌浏览器浏览页面，使用浏览器提供的开发者工具分析一下页面中电影信息的 <strong>HTML</strong> 代码片段。 由简入深，从下载第一部电影的信息开始。</p> 
<blockquote> 
 <p><strong>Tip：</strong> 这个排行榜随时变化，大家所看到的第一部电影和下图可能不一样。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/67/eb/RM4q0yrB_o.png" alt="bsindex.png"></p> 
<blockquote> 
 <p>居然使用的是表格布局。表格布局非常有规则，这对于分析结构非常有利。</p> 
</blockquote> 
<p>先下载第一部电影的图片和电影名。图片当然使用的是 img 标签，使用 BS4 解析后， <strong>BS4 树</strong>上会有一个对应的 <strong>img Tag</strong> 对象。</p> 
<p><strong>树上的 img Tag 对象有很多，怎么找到第一部电影的图片标签？</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests
<span class="token comment"># 服务器地址</span>
url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/chart"</span>
<span class="token comment"># 伪装成浏览器</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36'</span><span class="token punctuation">}</span>
<span class="token comment"># 发送请求</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
html_code <span class="token operator">=</span> resp<span class="token punctuation">.</span>text
<span class="token comment"># 得到 BeautifulSoup 对象。万里长征的第一步。</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token comment"># 要获得 BS4 树上的 Tag 对象，最简单的方法就是直接使用标签名。简单的不要不要的。</span>
img_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>img
<span class="token comment"># 返回的是 BS4 树上的第一个 img Tag 对象</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>img_tag<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>img_tag<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
&lt;class 'bs4.element.Tag'&gt;
&lt;img alt="青春变形记" class="" src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2670448229.jpg" width="75"/&gt;

'''</span>
</code></pre> 
<p>这里有一个运气成分，<strong>bs.img</strong> 返回的恰好是第一部电影的图片标签（也意味着第一部电影的图片标签是整个页面的第一个图片标签）。</p> 
<p>找到了 <strong>img 标签对象</strong>，再分析出其图片路径就容易多了，图片路径存储在 img 标签的 src 属性中，现在只需要获取到 img 标签对象的 src 属性值就可以了。</p> 
<p><strong>Tag</strong> 对象提供有 <strong>attrs</strong> 属性，可以很容易得到一个 <strong>Tag</strong> 对象的任一属性值。</p> 
<p>使用语法：</p> 
<pre><code class="prism language-tex">Tag["属性名"]或者使用 Tag.attrs 获取到 Tag 对象的所有属性。
</code></pre> 
<p>下面使用 <strong>atts</strong> 获取标签对象的所有属性信息，返回的是一个 <strong>python</strong> 字典对象。</p> 
<pre><code class="prism language-python"><span class="token comment"># 省略上面代码段</span>
img_tag_attrs <span class="token operator">=</span> img_tag<span class="token punctuation">.</span>attrs
<span class="token keyword">print</span><span class="token punctuation">(</span>img_tag_attrs<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果：以字典格式返回 img Tag 对象的所有属性
{'src': 'https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2670448229.jpg', 'width': '75', 'alt': '青春变形记', 'class': []}
'''</span>
</code></pre> 
<p>单值属性返回的是单值，因 class 属性（多值属性）可以设置多个类样式，返回的是一个数组。现在只想得到图片的路径，可以使用如下方式。</p> 
<pre><code class="prism language-python">img_tag_attrs <span class="token operator">=</span> img_tag<span class="token punctuation">.</span>attrs
<span class="token comment"># 第一种方案</span>
img_tag_src<span class="token operator">=</span>img_tag_attrs<span class="token punctuation">[</span><span class="token string">"src"</span><span class="token punctuation">]</span>  
<span class="token comment"># 第二种方案</span>
img_tag_src <span class="token operator">=</span> img_tag<span class="token punctuation">[</span><span class="token string">"src"</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>img_tag_src<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果
https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2670448229.jpg
'''</span>
</code></pre> 
<p>上述代码中提供 2 种方案，其本质是一样的。有了图片路径，剩下的事情就好办了。</p> 
<p>完整的代码：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests
<span class="token comment"># 服务器地址</span>
url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/chart"</span>
<span class="token comment"># 伪装成浏览器</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36'</span><span class="token punctuation">}</span>
<span class="token comment"># 发送请求</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
html_code <span class="token operator">=</span> resp<span class="token punctuation">.</span>text
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
img_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>img
<span class="token comment"># img_tag_attrs = img_tag.attrs</span>
<span class="token comment"># img_tag_src=img_tag_attrs["src"]</span>
img_tag_src <span class="token operator">=</span> img_tag<span class="token punctuation">[</span><span class="token string">"src"</span><span class="token punctuation">]</span>
<span class="token comment"># 根据图片路径下载图片并保存到本地</span>
img_resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>img_tag_src<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"D:/movie/movie01.jpg"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>img_resp<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e5/22/cAEn1ceZ_o.png" alt="bsimg.png"></p> 
<h4><a id="32__344"></a>3.2 过滤方法</h4> 
<p>得到图片后，怎么得到电影的名字，以及其简介。如下为电影名的代码片段。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://movie.douban.com/subject/35284253/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>青春变形记/ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span>13px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>熊抱青春记(港) / 青春养成记(台)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>电影名包含在一个 a 标签中。如上所述，当使用 <strong>bs.标签名</strong> 时，返回的是整个页面代码段中的第一个同名标签对象。</p> 
<p>显然，第一部电影名所在的 a 标签不可能是页面中的第一个（否则就是运气爆棚了），无法直接使用 <strong>bs.a</strong> 获取电影名所在 a 标签，且此 a 标签也无特别明显的可以区分和其它 a 标签不一样的特征。</p> 
<p><strong>这里就要想点其它办法。以此 a 标签向上找到其父标签 div。</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pl2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://movie.douban.com/subject/35284253/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>青春变形记/ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span>13px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>熊抱青春记(港) / 青春养成记(台)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pl<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>2022-03-11(美国网络) / 姜晋安 / 吴珊卓 / 艾娃·摩士 / 麦特里伊·拉玛克里斯南 / 朴惠仁 / 奥赖恩·李 / 何炜晴 / 特里斯坦·艾瑞克·陈 / 吴汉章 / 菲尼亚斯·奥康奈尔 / 乔丹·费舍 / 托菲尔-恩戈 / 格雷森·维拉纽瓦 / 乔什·列维 / 洛瑞·坦·齐恩...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>star clearfix<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>allstar40<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rating_nums<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>8.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pl<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>(45853人评价)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>同理，div 标签在整个页面代码中也有很多，又如何获到到电影名所在的 div 标签，分析发现此 div 有一个与其它 div 不同的属性特征。<strong>class=“pl2”</strong>。 可以通过这个属性特征对 div 标签进行过滤。</p> 
<p><strong>什么是过滤方法？</strong></p> 
<p><strong>过滤方法是 BS4 Tag 标签对象的方法，用来对其子节点进行筛选。</strong></p> 
<p><strong>BS4</strong> 提供有 <strong>find( )、find_all( )</strong> 等过滤方法。此类方法的作用如其名可以在一个群体（所有子节点）中根据个体的特征进行筛选。</p> 
<blockquote> 
 <p><strong>Tip：</strong> 如果使用 <strong>BeautifulSoup对象</strong> 调用这类方法，则是对整个 <strong>BS4</strong> 树上的节点进行筛选。</p> 
 <p>​ 如果以某一个具体的 Tag 标签对象调用此类方法以，则是对 Tag 标签下的子节点进行筛选。</p> 
</blockquote> 
<p><strong>find（）和 find_all( )</strong> 方法的参数是一样的。两者的区别：前者搜索到第一个满足条件就返回，后者会搜索所有满足条件的对象。</p> 
<pre><code class="prism language-python">find_all<span class="token punctuation">(</span> name <span class="token punctuation">,</span> attrs <span class="token punctuation">,</span> recursive <span class="token punctuation">,</span> string <span class="token punctuation">,</span> <span class="token operator">**</span>kwargs <span class="token punctuation">)</span>
find<span class="token punctuation">(</span> name <span class="token punctuation">,</span> attrs <span class="token punctuation">,</span> recursive <span class="token punctuation">,</span> string <span class="token punctuation">,</span> <span class="token operator">**</span>kwargs <span class="token punctuation">)</span>
</code></pre> 
<p>参数说明</p> 
<ul><li><strong>name：</strong> 可以是标签名、正则表达式、列表、布尔值或一个自定义方法。变化多端。</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 标签名：查找页面中的第一个 div 标签对象</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span>
<span class="token comment"># 正则表达式：搜索所有以 d 开始的标签</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">"^d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 列表：查询 div 或  a 标签</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"div"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 布尔值：查找所有子节点</span>
bs<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">#自定义方法：搜索有 class 属性而没有 id 属性的标签对象。</span>
<span class="token keyword">def</span> <span class="token function">has_class_but_no_id</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> tag<span class="token punctuation">.</span>has_attr<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token operator">not</span> tag<span class="token punctuation">.</span>has_attr<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
bs<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>has_class_but_no_id<span class="token punctuation">)</span>

</code></pre> 
<ul><li><strong>attrs：</strong> 可以接收一个字典类型。以键、值对的方式描述要搜索的标签对象的属性特征。</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 在整个树结果中查询 class 属性值是 pl2 的标签对象</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"pl2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p><strong>Tip：</strong> 使用此属性时，可以结合 name 参数把范围收窄。</p> 
 <pre><code class="prism language-python">div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"pl2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
 <p><strong>查找 class 属性值是 pl2 的 div 标签对象。</strong></p> 
</blockquote> 
<ul><li><strong>string 参数：</strong> 此参数可以是 字符串、正则表达式、列表 布尔值。通过标签内容匹配查找。</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 搜索标签内容是'青春' 2 字开头的 span 标签对象</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">,</span> string<span class="token operator">=</span>re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">"青春.*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li> <p><strong>limit 参数：</strong> 可以使用 <code>limit</code> 参数限制返回结果的数量。</p> </li><li> <p><strong>recursive 参数：</strong> 是否递归查询节点下面的子节点，默认 是 <strong>True</strong> ，设置 <strong>False</strong> 时，只查询直接子节点。</p> </li></ul> 
<p>简单介绍过滤方法后，重新回到问题上来，查询第一部电影的电影名、简介。灵活使用过滤方法，则能很轻松搜索到所需要的标签对象。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests
<span class="token comment"># 服务器地址</span>
url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/chart"</span>
<span class="token comment"># 伪装成浏览器</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36'</span><span class="token punctuation">}</span>
<span class="token comment"># 发送请求</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
html_code <span class="token operator">=</span> resp<span class="token punctuation">.</span>text
<span class="token comment"># 使得解析器构建 BeautifulSoup 对象</span>
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token comment"># 使用过滤方法在整个树结构中查找 class 属性值为 pl2 的 div 对象。其实有多个，这里查找第一个</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"pl2"</span><span class="token punctuation">)</span>
<span class="token comment"># 查询 div 标签对象下的第一个 a 标签</span>
div_a <span class="token operator">=</span> div_tag<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token comment"># 得到  a 标签下所有子节点</span>
name <span class="token operator">=</span> div_a<span class="token punctuation">.</span>contents
<span class="token comment"># 得到 文本</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
输出结果：
青春变形记
'''</span>
</code></pre> 
<p>代码分析：</p> 
<ol><li>使用 bs.find(“div”, class_=“pl2”) 方法搜索到包含第一部电影的 div 标签。</li><li>电影名包含在 div 标签的子标签 a 中，继续使用 div_tag.find(“a”) 找到 a 标签。</li></ol> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://movie.douban.com/subject/35284253/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>青春变形记/ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span>13px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>熊抱青春记(港) / 青春养成记(台)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ol start="3"><li>a 标签中的内容就是电影名。<strong>BS4</strong> 为标签对象提供有 <strong>string</strong> 属性，可以获取其内容，返回 <strong>NavigableString</strong> 对象。但是如果标签中既有文本又有子标签时， 则不能使用 string 属性。如上 a 标签的 string 返回为 None。</li><li>在 <strong>BS4</strong> 树结构中文本也是节点，可以以子节点的方式获取。标签对象有 <strong>contents</strong> 和 <strong>children</strong> 属性获取子节点。前者返回一个列表，后者返回一个迭代器。另有 <strong>descendants</strong> 可以获取其直接子节点和孙子节点。</li><li>使用 <strong>contents</strong> 属性，从返回的列表中获取第一个子节点，即文本节点。文本节点没有 string 属性。</li></ol> 
<p>获取电影简介相对而言就简单的多，其内容包含在 div 标签的 p 子标签中。</p> 
<pre><code class="prism language-python"><span class="token comment"># 获取电影的简介</span>
div_p <span class="token operator">=</span> div_tag<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
movie_desc <span class="token operator">=</span> div_p<span class="token punctuation">.</span>string<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>movie_desc<span class="token punctuation">)</span>
</code></pre> 
<p>下面可以把电影名和电影简介以 CSV 的方式保存在文件中。完整代码：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> csv

<span class="token comment"># 服务器地址</span>
url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/chart"</span>
<span class="token comment"># 伪装成浏览器</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36'</span><span class="token punctuation">}</span>
<span class="token comment"># 发送请求</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
html_code <span class="token operator">=</span> resp<span class="token punctuation">.</span>text
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"pl2"</span><span class="token punctuation">)</span>
div_a <span class="token operator">=</span> div_tag<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
div_a_name <span class="token operator">=</span> div_a<span class="token punctuation">.</span>contents
<span class="token comment"># 电影名</span>
movie_name <span class="token operator">=</span> div_a_name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 获取电影的简介</span>
div_p <span class="token operator">=</span> div_tag<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
movie_desc <span class="token operator">=</span> div_p<span class="token punctuation">.</span>string<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"d:/movie/movies.csv"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"电影名"</span><span class="token punctuation">,</span> <span class="token string">"电影简介"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span>movie_name<span class="token punctuation">,</span> movie_desc<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c9/c8/fOG9nQFF_o.png" alt="bsindex1.png"></p> 
<p>是时候小结了，使用 BS4 的基本流程：</p> 
<ol><li>通过指定解析器获取到 BS4 对象。</li><li>指定一个标签名获取到标签对象。如果无法直接获取所需要的标签对象，则使用过滤器方法进行一层一层向下过滤。</li><li>找到目标标签对象后，可以使用 <strong>string</strong> 属性获取其中的文本，或使用 <strong>atrts</strong> 获取属性值。</li><li>使用获取到的数据。</li></ol> 
<h4><a id="33__529"></a>3.3 遍历所有的目标</h4> 
<p>如上仅仅是找到了第一部电影的信息。如果需要查找到所有电影信息，则只需要在上面代码的基础之上添加迭代便可。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> csv

all_movies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment"># 服务器地址</span>
url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/chart"</span>
<span class="token comment"># 伪装成浏览器</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36'</span><span class="token punctuation">}</span>
<span class="token comment"># 发送请求</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
html_code <span class="token operator">=</span> resp<span class="token punctuation">.</span>text
bs <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_code<span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token comment"># 查找到所有 &lt;div class="pl2"&gt;&lt;/div&gt;</span>
div_tag <span class="token operator">=</span> bs<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"pl2"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> div <span class="token keyword">in</span> div_tag<span class="token punctuation">:</span>
    div_a <span class="token operator">=</span> div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
    div_a_name <span class="token operator">=</span> div_a<span class="token punctuation">.</span>contents
    <span class="token comment"># 电影名</span>
    movie_name <span class="token operator">=</span> div_a_name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取电影的简介</span>
    div_p <span class="token operator">=</span> div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
    movie_desc <span class="token operator">=</span> div_p<span class="token punctuation">.</span>string<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    all_movies<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>movie_name<span class="token punctuation">,</span> movie_desc<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"d:/movie/movies.csv"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"电影名"</span><span class="token punctuation">,</span> <span class="token string">"电影简介"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> movie <span class="token keyword">in</span> all_movies<span class="token punctuation">:</span>
        csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>movie<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ee/c0/9O6qp70p_o.png" alt="bsindex2.png"><br> 本文主要讲解 BS4 的使用，仅爬取了电影排行榜的第一页数据。至于数据到手后，如何使用，则根据应用场景来决定。</p> 
<h3><a id="4__570"></a>4. 总结</h3> 
<p>BS4 还提供有很多方法，能根据当前节点找到父亲节点、子节点、兄弟节点……但其原理都是一样的。只要找到了内容所在的标签（节点）对象，一切也就OK 了。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/385ed31fad6e61d7a88c8b4eec94f83d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">什么是事件冒泡</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/329ffea10ae41ac7b3fec62a3f40fffc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">K8s 初始化报错(/var/lib/etcd is not empty)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>