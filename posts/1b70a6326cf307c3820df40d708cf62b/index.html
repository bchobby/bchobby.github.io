<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shell 变量和引用 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shell 变量和引用" />
<meta property="og:description" content="目录
一. 变量和引用
1.1 什么是变量
1.2 变量的名称
1.3 变量的类型
1.4 变量的定义
1.5 自定义变量
1.6 环境变量
1.7 位置变量
二、变量赋值和作用域
1.1 显示赋值 ：变量名=变量值
1.2 read 从键盘读入变量值
1.3 变量和引号
1.4 变量的作用域
1.5变量的运算
一. 变量和引用 1.1 什么是变量 变量是在程序中保护用户数据的一段内存存储空间，变量名是内存空间的首地址 1.2 变量的名称 组成 ：字母、数字、下划线组成，不能以数字开头变量名称的长度，shell没有明确规定，但是为了增加可读性，建议使用较短的、见名知意的名称命名规则 1.首字母必须为字母：a-z,A-Z(推荐）
2.中间不能由空格，可以使用下划线（_）
3.不能使用标点符号
4.不能使用bash中关键字，输入help查看bash的保留字
1.3 变量的类型 原则 ：shell是一种动态类型语言和弱类型语言，变量是不分数据类型的，统一都使用字符串存储，但根据变量的上下文环境，允许程序执行一些不同的操作，如：比较、整数加减shell的变量数据类型 [root@node1 ~]# vim test1.sh #!/bin/bash #定义变量x，输入初始值123 x=123 #变量x加1 let &#34;x&#43;=1&#34; #输出变量x的值 echo &#34;x=$x&#34; #替换x中1 的值为abc，并赋值给变量y y=${x/1/abc} #使用declare -i 声明变量y为整形变量（i 表示整型） declare -i y #输出y的值 echo &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/1b70a6326cf307c3820df40d708cf62b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-20T20:35:03+08:00" />
<meta property="article:modified_time" content="2023-07-20T20:35:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shell 变量和引用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%95%E7%94%A8-toc" style="margin-left:0px;"><a href="#1.%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%95%E7%94%A8" rel="nofollow">一. 变量和引用</a></p> 
<p id="1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F" rel="nofollow">1.1 什么是变量</a></p> 
<p id="1.2%20%E5%8F%98%E9%87%8F%E7%9A%84%E5%90%8D%E7%A7%B0-toc" style="margin-left:40px;"><a href="#1.2%20%E5%8F%98%E9%87%8F%E7%9A%84%E5%90%8D%E7%A7%B0" rel="nofollow">1.2 变量的名称</a></p> 
<p id="1.3%20%E5%8F%98%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B-toc" style="margin-left:40px;"><a href="#1.3%20%E5%8F%98%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B" rel="nofollow">1.3 变量的类型</a></p> 
<p id="1.4%20%E5%8F%98%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89-toc" style="margin-left:40px;"><a href="#1.4%20%E5%8F%98%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89" rel="nofollow">1.4 变量的定义</a></p> 
<p id="1.5%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#1.5%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F" rel="nofollow">1.5 自定义变量</a></p> 
<p id="1.6%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#1.6%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">1.6 环境变量</a></p> 
<p id="1.7%20%E4%BD%8D%E7%BD%AE%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#1.7%20%E4%BD%8D%E7%BD%AE%E5%8F%98%E9%87%8F" rel="nofollow">1.7 位置变量</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F" rel="nofollow">二、变量赋值和作用域</a></p> 
<p id="1.1%20%E6%98%BE%E7%A4%BA%E8%B5%8B%E5%80%BC%20%EF%BC%9A%E5%8F%98%E9%87%8F%E5%90%8D%3D%E5%8F%98%E9%87%8F%E5%80%BC-toc" style="margin-left:40px;"><a href="#1.1%20%E6%98%BE%E7%A4%BA%E8%B5%8B%E5%80%BC%20%EF%BC%9A%E5%8F%98%E9%87%8F%E5%90%8D%3D%E5%8F%98%E9%87%8F%E5%80%BC" rel="nofollow">1.1 显示赋值 ：变量名=变量值</a></p> 
<p id="1.2%20read%20%E4%BB%8E%E9%94%AE%E7%9B%98%E8%AF%BB%E5%85%A5%E5%8F%98%E9%87%8F%E5%80%BC-toc" style="margin-left:40px;"><a href="#1.2%20read%20%E4%BB%8E%E9%94%AE%E7%9B%98%E8%AF%BB%E5%85%A5%E5%8F%98%E9%87%8F%E5%80%BC" rel="nofollow">1.2 read 从键盘读入变量值</a></p> 
<p id="1.3%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%95%E5%8F%B7-toc" style="margin-left:40px;"><a href="#1.3%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%95%E5%8F%B7" rel="nofollow">1.3 变量和引号</a></p> 
<p id="1.4%20%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F-toc" style="margin-left:40px;"><a href="#1.4%20%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F" rel="nofollow">1.4 变量的作用域</a></p> 
<p id="1.5%E5%8F%98%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97-toc" style="margin-left:40px;"><a href="#1.5%E5%8F%98%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97" rel="nofollow">1.5变量的运算</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%95%E7%94%A8">一. 变量和引用</h2> 
<h3 id="1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F">1.1 什么是变量</h3> 
<ul><li>变量是在程序中保护用户数据的一段内存存储空间，变量名是内存空间的首地址</li></ul> 
<h3 id="1.2%20%E5%8F%98%E9%87%8F%E7%9A%84%E5%90%8D%E7%A7%B0">1.2 变量的名称</h3> 
<ul><li>组成 ：字母、数字、下划线组成，不能以数字开头</li><li>变量名称的长度，shell没有明确规定，但是为了增加可读性，建议使用较短的、见名知意的名称命名</li><li>规则</li></ul> 
<p>        1.首字母必须为字母：a-z,A-Z(推荐）</p> 
<p>        2.中间不能由空格，可以使用下划线（_）</p> 
<p>        3.不能使用标点符号</p> 
<p>        4.不能使用bash中关键字，输入help查看bash的保留字</p> 
<h3 id="1.3%20%E5%8F%98%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B">1.3 变量的类型</h3> 
<ul><li>原则 ：shell是一种动态类型语言和弱类型语言，变量是不分数据类型的，统一都使用字符串存储，但根据变量的上下文环境，允许程序执行一些不同的操作，如：比较、整数加减</li><li>shell的变量数据类型</li></ul> 
<pre><code class="hljs">[root@node1 ~]# vim test1.sh

#!/bin/bash

#定义变量x，输入初始值123
x=123

#变量x加1
let "x+=1"

#输出变量x的值
echo "x=$x"

#替换x中1 的值为abc，并赋值给变量y
y=${x/1/abc}

#使用declare -i 声明变量y为整形变量（i 表示整型）
declare -i y

#输出y的值
echo "y=$y"

[root@node1 ~]# bash test1.sh
x=124
y=abc24
</code></pre> 
<h3 id="1.4%20%E5%8F%98%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89">1.4 变量的定义</h3> 
<ul><li>原则：直接使用，不需要变量声明</li><li>格式 ：变量名=变量的值</li><li>例：</li></ul> 
<pre><code class="hljs">[root@node1 ~]# vim test2.sh

#定义变量a
a=1

#定义变量b
b="hello"

#定义变量c
c="hello word"

#定义路径
bak_dir=/data/backup
</code></pre> 
<ul><li>=前后不能收空格</li><li>字符串类型建议使用双引号作为定界符引起，尤其是字符串中有空格</li></ul> 
<h3 id="1.5%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">1.5 自定义变量</h3> 
<ul><li>概念 ：上述以赋值形态形成的变量定义形式称为自定义变量</li><li>引用变量值：</li></ul> 
<p>        1.$变量名</p> 
<p>        2.${表达式或变量名}</p> 
<p>                例：</p> 
<pre><code class="hljs">[root@node1 ~]# a=1024
[root@node1 ~]# echo $a
1024
[root@node1 ~]# echo ${a}
1024
</code></pre> 
<ul><li>查看变量</li></ul> 
<pre><code class="hljs">[root@node1 ~]# declare
[root@node1 ~]# set</code></pre> 
<ul><li>取消变量</li></ul> 
<pre><code class="hljs">[root@node1 ~]# a=256
[root@node1 ~]# echo $a
256
[root@node1 ~]# unset a
[root@node1 ~]# echo $a</code></pre> 
<ul><li>作用范围：只在当前shell起效</li></ul> 
<h3 id="1.6%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">1.6 环境变量</h3> 
<ul><li>环境变量又称为全局变量，可以在任意shell生效，环境变量又分为自定义变量和bash内置的环境变量，用户退出命令后该变量会丢失。若需要永久保存就必须写在文件中</li><li>定义环境变量</li></ul> 
<pre><code class="hljs">#法1
export  环境变量=值

#法2 
变量名=值
export 变量名

#法3
declare -x 变量名=值

</code></pre> 
<p>例子：</p> 
<pre><code class="hljs">[root@node1 ~]# export back_dir1=/home/backup
[root@node1 ~]# NAME="zhang san"
[root@node1 ~]# export NAME
[root@node1 ~]# declare -x AGE=10
[root@node1 ~]# env    #显示当前用户的环境变量
[root@node1 ~]# printenv     #功能同上
[root@node1 ~]# export     #同上 
</code></pre> 
<p><img alt="" height="76" src="https://images2.imgbox.com/a7/e2/7uxh5sso_o.png" width="1193"></p> 
<p> <img alt="" height="67" src="https://images2.imgbox.com/46/66/5qX6bgIk_o.png" width="1200"></p> 
<p> 注意：以上定义的环境变量都是临时的，重启后会实现，若要永久生效，则写入到配置文件中</p> 
<ul><li>对比：</li></ul> 
<pre><code class="hljs">c语言     局部变量    全局变量
shell 自定义变量       环境变量</code></pre> 
<ul><li>shell环境变量存储的文件</li><li>bash shell 初始化文件有：/etc/profile、~/.bash_profile、~/.bash_login、~./profile、~/.bashrc、/etc/bashrc</li><li>结论：</li></ul> 
<p>        1.对于用户的环境变量设置，常见的是用户家目录下的.bashrc和。bash_profile</p> 
<p>        2.对于全局环境变量设置，常见的文件有：/etc/profile /etc/bashrc /etc/prodile.d 这三个配置文件，常用方法是直接在/etc/profile文件中写入全局变量，如果想要在登录后初始化或者显示加载的内容，只需要把脚本放在 /etc/profile.d 文件下即可</p> 
<h3 id="1.7%20%E4%BD%8D%E7%BD%AE%E5%8F%98%E9%87%8F">1.7 位置变量</h3> 
<ul><li>概念 ： 当一条命令或脚本执行时，后面可以跟多个参数，可以使用位置变量来表示该参数</li></ul> 
<pre><code class="hljs">sh test1.sh hello word 123 456</code></pre> 
<ul><li>当执行test1.sh脚本时，第一个参数为hello到第四个参数可以使用特殊的符号表示，如 $1 $2 $3 .......</li><li>常见的位置变量</li></ul> 
<pre><code class="hljs">$0: 脚本名
$1-$9:1-9个参数
${10} :10以上的参数需要大花括号括起

$* :所有参数
$@:所有参数
$#：参数个数
$$: 当前进程的PID
$!：上一个后台进程的PID
$? :上一个命令
</code></pre> 
<p>例：</p> 
<pre><code class="hljs">[root@node1 ~]# vim test3.sh
#!/bin/bash

echo "第二个位置参数: $2"
echo "第1个位置参数: $1"
echo "第4个位置参数: $4"
echo "所有参数是 $@"
echo "所有参数是: $*"
echo "当前进程的PID值: $$"
echo "参数的个数是：$#"

[root@node1 ~]# bash test3.sh 1 2 3 4 5 
第二个位置参数: 2
第1个位置参数: 1
第4个位置参数: 4
所有参数是 1 2 3 4 5
所有参数是: 1 2 3 4 5
当前进程的PID值: 2837
参数的个数是：5
</code></pre> 
<pre><code class="hljs">[root@node1 ~]# vim test4.sh
#!/bin/bash
echo "name: $1"
echo "age: $2"
echo "E-mail: $3"

[root@node1 ~]# bash test4.sh 大漂亮 20 12345@qq
name: 大漂亮
age: 20
E-mail: 12345@qq
</code></pre> 
<ul><li><strong>$*   和$@区别</strong></li></ul> 
<p>当<strong>$*   和$@</strong>没有被引用的时候，他们确实没有什么区别，都会把位置参数当成一个个体，<strong>$*   会把所有位置参数当成一个整体（或者说当成一个单词），如果没有位置参数，则$*   为空，如果有两个位置参数并且IFS为空格时，$*    相当于“$1  $2”</strong></p> 
<p><strong>$@ 会把所有位置参数当成一个单独的字段，如果没有位置参数（$#为0），则$@ 展开为空（不是空字符串，而是空列表），如果存在一个位置参数，则$@ 相当于$1 ,如果有两个参数，则“$@”相当于“$1  ” "$2"</strong></p> 
<pre><code class="hljs">[root@node1 ~]# set -- I am test command
[root@node1 ~]# for i in "$@"; do echo $i;done
I
am
test
command
[root@node1 ~]# for i in "$*"; do echo $i;done
I am test command
</code></pre> 
<h3 id="%E4%BA%8C%E3%80%81%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F">二、变量赋值和作用域</h3> 
<h3 id="1.1%20%E6%98%BE%E7%A4%BA%E8%B5%8B%E5%80%BC%20%EF%BC%9A%E5%8F%98%E9%87%8F%E5%90%8D%3D%E5%8F%98%E9%87%8F%E5%80%BC">1.1 显示赋值 ：变量名=变量值</h3> 
<h3 id="1.2%20read%20%E4%BB%8E%E9%94%AE%E7%9B%98%E8%AF%BB%E5%85%A5%E5%8F%98%E9%87%8F%E5%80%BC">1.2 read 从键盘读入变量值</h3> 
<ul><li>read 命令从标准输入中读取一行，并把输入行的每个字段的值指给shell变量</li><li>格式 ：read -参数 变量名</li></ul> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>参数</td><td>功能</td></tr><tr><td>-p</td><td>“提示语句：” 屏幕打印出一行提示语句</td></tr><tr><td>-n数字</td><td>当输入的字符数目达到预定数目时，自动退出，并将输入的数据赋值给变量，如：-n1，只要接受到一个字符就退出。只要按下一个字符进行回答，read命令立即接受输入并将其传给变量。无需按回车键</td></tr><tr><td>-t</td><td>等待时间：计时输入，使用read命令存在潜伏危险。脚本很可能会停下来一直等待用户的输入。如果无论是否输入数据脚本都必须继续执行，那么可以使用-t选项指定一个计时器。-t 选项指定read命令等待输入的秒数。当计时满时，read命令返回一个非零退出状态</td></tr><tr><td> -s</td><td>关闭回显，使read命令中输入的数据不显示在监视器上（实际上，数据是显示的，只是read命令将文本颜色设置成与背景相同的颜色）</td></tr></tbody></table> 
<ul><li>常用格式：</li></ul> 
<pre><code class="hljs">[root@node1 ~]# read -p "Enter Numbers:" num
Enter Numbers:7658
[root@node1 ~]# echo $num
7658
[root@node1 ~]# read -t 3 n1
[root@node1 ~]# read -s -p "Enter your passwd:" passwd
Enter your passwd:[root@node1 ~]# echo $passwd
123456


[root@node1 ~]# echo $REPLY

[root@node1 ~]# read
100
[root@node1 ~]# echo $REPLY #当输入时没有指定变量接收，会默认存储到REPLY变量中
100

#一次性输入多个变量的值
[root@node1 ~]# read t1 t2
12 45

[root@node1 ~]# echo $t1 $t2
12 45
</code></pre> 
<ul><li>面试题：总结4种赋值方式</li></ul> 
<pre><code class="hljs">1.直接赋值 ：name="li si"
2.read命令 ：read name
3.使用位置参数（$1 $2 $3 $4...）: name=$1
4.命令输入：name=$(whoami)</code></pre> 
<ul><li>变量从文件中读取数据</li></ul> 
<pre><code class="hljs">[root@node1 ~]# cut -d ":" -f1 /etc/passwd &gt; /user.list
[root@node1 ~]# for user in $(cat /user.list);do echo $user; done
[root@node1 ~]# while read user; do echo $user; done &lt; /user.list</code></pre> 
<h3 id="1.3%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%95%E5%8F%B7">1.3 变量和引号</h3> 
<ul><li>双引号 ：出来$、单引号、反引号、反斜线之外，其他被引起的内容保存字面意思</li><li>单引号：所有字符保持字面意思</li><li>反引号：被引用的字符串转为shell命令</li><li>反斜线： 转义符（\）,屏蔽后面字符的特殊含义</li></ul> 
<h3 id="1.4%20%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F">1.4 变量的作用域</h3> 
<ul><li>全局变量：全局变量定义在脚本中，也可以定义在函数中，作用范围：从定义的开始处到shell脚本结束或者被显示的去除</li></ul> 
<pre><code class="hljs">[root@node1 ~]# vim test5.sh

#!/bin/bash
func() #定义函数

{
        echo "$v1"
        v1=200
}
v1=100
func
echo "$v1"

[root@node1 ~]# bash test5.sh
100
200
</code></pre> 
<ul><li>函数内部定义全局变量</li></ul> 
<pre><code class="hljs">#上例修改
[root@node1 ~]# vim test5.sh
#!/bin/bash
func() #定义函数
{ 
        v2=200
}
func
echo "$v2"
[root@node1 ~]# bash test5.sh
200
</code></pre> 
<ul><li>局部变量：范围更小，仅限于某个程序段中，如：函数、shell等，通过local关键字定义：注意：函数的参数也是局部变量</li></ul> 
<pre><code class="hljs">[root@node1 ~]# vim test5.sh

#!/bin/bash
func() #定义函数
{
        local v3=200    #使用local关键字声明为局部变量
}
func
echo "$v3"
[root@node1 ~]# bash test5.sh

</code></pre> 
<h3 id="1.5%E5%8F%98%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97">1.5变量的运算</h3> 
<table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>+、-</td><td>求和、差</td></tr><tr><td>*、/、%</td><td>求乘积，商，余数</td></tr><tr><td>**</td><td>幂运算，例如3**3是求3的立方，即27</td></tr><tr><td>+=、-=、*=、/=、%=</td><td>例a+=1相当于a=a+1</td></tr><tr><td>++variable、--variable</td><td>先将变量variable的值加1，然后再赋给variable； 先将变量variable的值减1，然后再赋给variable</td></tr><tr><td>variable++、variable--</td><td>先使用variable的值，然后再将该变量的值加1； 先使用variable的值，然后再将该变量的值减1</td></tr><tr><td>位运算符&lt;&lt;、&gt;&gt;</td><td>位运算通常出现在整数间，它针对的不是整个整数，而是其二进制表示形式中的某个或者某些位（bit）。例如，2&gt;&gt;1是将二进制形式的2，即10，左移1位，从而变成100，即4。 左移，4&lt;&lt;2，将4左移2位，结果为16； 右移，8&gt;&gt;2，将8右移两位，结果为2</td></tr><tr><td>&amp;、|、~、^</td><td>按位与，8&amp;4，将8和4进行按位与运算，结果为0； 按位或，8|4，将8和4进行按位或运算，结果为12； 按位非，~8，将8进行按位非运算，结果为-9（一个字符占一个字节，即8个二进制位，最高位为1时为负数）； 按位异或（a异或b，a、b值不同结果为1，相同结果为0），10^6，将10和6进行按二进制位异或运算，结果为12。</td></tr><tr><td>&lt;&lt;=、&gt;&gt;=</td><td>将变量的值左移指定位数之后重新赋给该变量，x&lt;&lt;=3，将x的值左移3位，重新赋给变量x； 将变量的值右移指定位数之后重新赋给该变量，x&gt;&gt;=4，将变量x的值右移4位后重新赋给变量x。</td></tr><tr><td>&amp;=、|=、^=</td><td>将变量的值与指定的数值按位与之后重新赋给该变量，x&amp;=8，将变量x的值与8按位与运算之后重新赋给变量x； 将变量的值与指定的数值按位或之后重新赋给该变量，x|=7，将变量x的值与7执行按位或运算之后重新赋给变量x； 将变量的值与指定的数值按位异或之后重新赋给该变量，x^=9，将变量x的值与9执行按位异或运算之后重新赋给变量x。</td></tr></tbody></table> 
<table><thead><tr><th>运算操作符与运算命令</th><th>意义</th><th>说明</th></tr></thead><tbody><tr><td>(())</td><td>用于整数运算的常用运算符</td><td>在(())中使用变量时可以去掉变量前的$符号</td></tr><tr><td>let</td><td>用于整数运算</td><td>使用let命令可以执行一个或者多个算术表达式，其中的变量名毋需使用$符号</td></tr><tr><td>expr</td><td>可用于整数运算，但还有很多其他的额外功能</td><td>使用expr时，运算符及用于计算的数字左右都至少有一个空格，否则会报错；使用乘号时，必须使用反斜线屏蔽其特定含义；使用expr做计算，将一个未知的变量和一个已知的整数相加，看返回码是否为0，如果为0就认为做加法的变量为整数，否则就不是整数。</td></tr><tr><td>bc</td><td>linux下的一个计算器程序（适合整数及小数运算）</td><td>[root@node13 test9]# echo `seq -s "+" 10` = `seq -s "+" 10 | bc ` seq是生成数字序列，-s是指定数字序列之间的分隔符</td></tr><tr><td></td><td></td><td></td></tr><tr><td>$[]</td><td>用于整数运算</td><td></td></tr><tr><td>awk</td><td>awk既可以用于整数运算，也可以用于小数运算</td><td></td></tr><tr><td>declare</td><td>定义变量值和属性，-i参数可以用于定义整形变量，做运算</td><td></td></tr></tbody></table> 
<ul><li>示例1：</li></ul> 
<pre><code class="hljs">[root@node1 ~]# expr 1 + 1    #注意+左右必须要有空格
2
[root@node1 ~]# expr 1+1    #否则原样显示
1+1
[root@node1 ~]# a=1
[root@node1 ~]# b=2
[root@node1 ~]# expr $a + $b     #支持变量
3
[root@node1 ~]# let num=1+2    #注意let中运算符左右不能有空格
[root@node1 ~]# echo $num
3
[root@node1 ~]# echo $((1+2))
3
[root@node1 ~]# echo $((3%5))
3
[root@node1 ~]# echo $((3 % 5))    #可以有空格
3

[root@node1 ~]# echo $((3.2-1))    #只支持整数运算
-bash: 3.2-1: syntax error: invalid arithmetic operator (error token is ".2-1")
[root@node1 ~]# echo $[2+3]    #[] 等价于(())   同样只支持整数运算
5
</code></pre> 
<pre><code class="hljs">[root@node1 ~]# bc
bc 1.07.1
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006, 2008, 2012-2017 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. 
1.1+2
3.1
1.5&gt;4
0
1.2&lt;3
1
quit    #退出交互模式

#不进入交互模式直接使用，bc需要放在最后
[root@node1 ~]# echo "s=3; 11/3" | bc
3
[root@node1 ~]# echo "scale=3; 11/3" | bc
3.666
#scale=3 表示保留运算精度</code></pre> 
<ul><li>示例2：返回变量长度</li></ul> 
<pre><code class="hljs">[root@node1 ~]# str1="hello world"
[root@node1 ~]# echo ${#str1}
11

#变量截取
[root@node1 ~]# echo ${str1:0:3}     #从左边第一个字符开始截取3个
hel
[root@node1 ~]# echo ${str1::3}    #可以省略起始0
hel
[root@node1 ~]# echo ${str1:1}     #从下标1开始截取到尾部
ello world
[root@node1 ~]# echo ${str1:0-1:1}  #从右边第一个字符开始截取1个，左边第一个为0，右边第一个为0-1
d
[root@node1 ~]# echo ${str1: -5}     #使用空格代替0，同上
world
[root@node1 ~]# echo ${str1:-5}    #没有空格表示提取整串
hello world
[root@node1 ~]# echo ${str1:0-5} #从右边第5个开始截取到尾部
world
</code></pre> 
<pre><code class="hljs">#使用%截取，删除右边字符，保留左边字符（怎么把文件的扩展名去掉方法）
[root@node1 ~]# filename=testfile.tar
[root@node1 ~]# file=${filename%.*}     #%，表示从右边开始检索第一次出现，之后删除，右侧的内容，保留左边内容，用于对文件名去掉扩展名
[root@node1 ~]# echo $file
testfile


[root@node1 ~]# url=http://www.baidu.com/index.html
[root@node1 ~]# ul1=${url%.*}
[root@node1 ~]# echo $ul1
http://www.baidu.com/index
[root@node1 ~]# url=http://www.baidu.com/index.html
[root@node1 ~]# ul1=${url%%.*}    
[root@node1 ~]# echo $ul1
http://www
[root@node1 ~]# ul1=${url%%:*}    # %% ：表示从右边开始检索最后一次出现的：之后删除：右侧的内容，保留左边内容
[root@node1 ~]# echo $ul1
http
[root@node1 ~]# url=http://www.baidu.com/index.html
[root@node1 ~]# ul1=${url#*.}    #  #*. 表示左向右遍历，删除第一次出现的.左侧内容
[root@node1 ~]# echo $ul1
baidu.com/index.html


[root@node1 ~]# url=http://www.baidu.com/index.html
[root@node1 ~]# ul1=${url%/*}
[root@node1 ~]# echo $ul1
http://www.baidu.com
[root@node1 ~]# url=http://www.baidu.com/index.html
[root@node1 ~]# ul1=${url##*/}
[root@node1 ~]# echo $ul1
index.html
</code></pre> 
<table><thead><tr><th>表达式</th><th>说明</th></tr></thead><tbody><tr><td>${parameter}</td><td>返回变量的内容</td></tr><tr><td>${#parameter}</td><td>返回变量内容的长度（按字符）</td></tr><tr><td>${paramater:offset}</td><td>在变量${parameter}中，从位置offset之后开始提取子串到结尾</td></tr><tr><td>${paramater:offset:length}</td><td>在变量${parameter}中，从位置offset之后开始提取长度为length的子串</td></tr><tr><td>${parameter#word}</td><td>从变量${parameter}开头开始删除最短匹配的word子串</td></tr><tr><td>${parameter##word}</td><td>从变量${parameter}开头开始删除最长匹配的word子串</td></tr><tr><td>${parameter%word}</td><td>从变量${parameter}结尾开始删除最短匹配的word子串</td></tr><tr><td>${parameter%%word}</td><td>从变量${parameter}结尾开始删除最长匹配的word子串</td></tr><tr><td>${parameter/pattern/string}</td><td>使用string代替第一个匹配的pattern</td></tr><tr><td>${parameter//pattern/string}</td><td>使用string代替所有匹配的pattern</td></tr></tbody></table> 
<ul><li>-示例：如果paramater变量值为空或为赋值，则返回word字符串的值，注意：paramater变量值不变</li></ul> 
<pre><code class="hljs">[root@node1 ~]# echo $var1

[root@node1 ~]# var2=${var:-hello}
[root@node1 ~]# echo $var2
hello
</code></pre> 
<ul><li>-示例：如果parameter变量有值，则返回注意：parameter变量值不变</li></ul> 
<pre><code class="hljs">[root@node1 ~]# var1="hello"
[root@node1 ~]# echo $var1
hello
[root@node1 ~]# var2=${var1:-world}
[root@node1 ~]# echo $var2
hello
</code></pre> 
<ul><li>=示例：如果parameter变量有值，则返回parameter变量值</li></ul> 
<pre><code class="hljs">[root@node1 ~]# var=hello
[root@node1 ~]# var2=${var1:=world}
[root@node1 ~]# echo $var2
world
</code></pre> 
<ul><li>？示例：如果paramater变量值为空或为赋值，则word字符串会作为标准错误输出，否则输出变量的值。</li></ul> 
<pre><code class="hljs">[root@node1 ~]# var2=${var1:?world}
-bash: var1: world    #标志错误输出
[root@node1 ~]# var1=hello
[root@node1 ~]# var2=${var1:?world}
[root@node1 ~]# echo $var2
hello
</code></pre> 
<ul><li>+示例：如果paramater变量值为空或为赋值，则什么都不做，否则word字符串</li></ul> 
<pre><code class="hljs">[root@node1 ~]# var1=hello
[root@node1 ~]# var2=${var1:+world}
[root@node1 ~]# echo $var2
world
[root@node1 ~]# echo $var1
hello
</code></pre> 
<ul><li>面试题：删除7天前的过期备份数据</li></ul> 
<pre><code class="hljs">#!/bin/bash
find ${path:-/tmp}  -name "*.tar.gz" -type f mtime +7 | xargs rm -f

#find 为查找文件命令
#${path:-/tmp} ：表示如果没有定义path则使用/tmp代替
#find不支持 | 使用xargs命令表示管道符进行数据转换</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fe0c4ca8d507dd29e09004b6184a9068/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql5.7中如何查看表是否被锁问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9a7bb83d306837cb9250259b20489c76/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于javaweb&#43;mysql的ssm宠物领养信息管理系统(JavaWeb JSP MySQL Servlet SSM SpringBoot Layui Ajax)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>