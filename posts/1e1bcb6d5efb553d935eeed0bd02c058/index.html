<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>tpc系列(2) - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="tpc系列(2)" />
<meta property="og:description" content="第一章 什么是TPC和tpmC? 1 TPC TPC(Transaction Processing Performance Council，事务处理性能委员会)是由数10家会员公司创建的非盈利组织，总部设在美国。该组织对全世界开放，但迄今为止，绝大多数会员都是美、日、西欧的大公司。TPC的成员主要是计算机软硬件厂家，而非计算机用户，它的功 能是制定商务应用基准程序(Benchmark)的标准规范、性能和价格度量，并管理测 试结果的发布。
TPC的出版物是开放的，可以通过网络获取(http://www.tpc.org)。TPC不给出基准程序的代码，而只给出基准程序的标准规范(Standard Specification)。任何厂家或其它测试者都可以根据规范，最优地构造出自己的系统(测试平台和测试程序)。为保证测试结果的客观性，被测试者(通常是厂家)必须提交给TPC一套完整的报告(Full Disclosure Report)，包括被测系统的详细配置、分类价格和包含五年维护费用在内的总价 格。该报告必须由TPC授权的审核员核实(TPC本身并不做审计)。现在全球只有几个审核员，全部在美国。
TPC已经推出了四套基准程序，被称为TPC－A、TPC－B、TPC－C和TPC－D。其中A和B已经过时，不再使用了。TPC－C是在线事务处理(OLTP)的基准程序，TPC－D是决策支持(Decision Support) 的基准程序。TPC即将推TPC－E，作为大型企业(Enterprise)信息服务的基准程序。
2 tpmC tpmC值在国内外被广 泛用于衡量计算机系统的事务处理能力。但究竟什么是tpmC值呢?作者曾向一些 用户、推销人员乃至某些国外大公司的技术人员问过这个问题，但回答的精确度 与tpmC值的流行程度远非相称。tpmC这一度量也常被误写为TPM或TPMC。
TPC-C模拟一个批发商的货物管理环境。该批发公司有N个仓库，每个仓库供应10个地区，其中每个地区为3000名顾客服务。在每个仓库中有10个终端，每一个终端用于一个地区。在运行时，10×N个终端操作员向公司的数据库发出5类请求。由于一个仓库中不可能存储公司所有的货物，有一些请求必须发往其它仓库，因此，数据库在逻辑上是 分布的。N是一个可变参数，测试者可以随意改变N，以获得最佳测试效果。
TPC-C使用三种性能和价格度量，其中性能由TPC-C吞吐率衡量，单位是tpmC。tpm是transactions per minute的简称；C指TPC中的C基准程序。它的定义是每分钟内系统处理的新订单个数。要注意的是，在处理新订单的同时，系统还要按表1的要求处理其它4类事务 请求。从表1可以看出，新订单请求不可能超出全部事务请求的45％，因此，当一个 系统的性能为1000tpmC时，它每分钟实际处理的请求数是2000多个。价格是指系 统的总价格，单位是美元，而价格性能比则定义为总价格÷性能，单位是＄/tpmC。
tpmC定义: TPC-C的吞吐量，按有效TPC-C配置期间每分钟处理的平均交易次数测量，至少要运行12分钟。
（吞吐量测试结果以比特/秒或字节/秒表示。）
第二章 TPCC 1 基准测试 TPCC值被广泛用于衡量C/S环境下,由服务器和客户端构筑的整体系统的性能,它由事物处理性能委员会（TPC，Transaction Processing Corp）制定,TPC为非赢利性国际组织。
TPCC值可以反映出系统的性能价格比。TPCC测试系统每分钟处理的任务数,单位为tpm,(transactions per minute)。系统的总体价格(单位为美元)除以TPCC值,就可以衡量出系统的性价比,系统的性价比值越大,系统的性价比越好。
需要注意的是,TPC-C值描述的是C/S整体系统的性能,它与系统的服务器和客户机的性能都有关系,也就是说,同样的服务器配置不同的客户端将会影响TPCC值,任何厂商和测试者都可以根据TPC提供的测试规范构造出自己最优的系统,当然测试的结果要经过TPC审核。
---------------------------------------------------------------------------------------------------------------
2 性能测试指标介绍 TPC-C
作为一家非盈利性机构，事务处理性能委员会（TPC）负责定义诸如TPC-C、TPC-H和TPC-W基准测试之类的事务处理与数据库性能基准测试，并依据这些基准测试项目发布客观性能数据。TPC基准测试采用极为严格的运行环境，并且必须在独立审计机构监督下进行。委员会成员包括大多数主要数据库产品厂商以及服务器硬件系统供应商。
相关企业参与TPC基准测试以期在规定运行环境中获得客观性能验证，并通过应用测试过程中所使用的技术开发出更加强健且更具伸缩性的软件产品及硬件设备。
TPC-C是一种旨在衡量联机事务处理（OLTP）系统性能与可伸缩性的行业标准基准测试项目。这种基准测试项目将对包括查询、更新及队列式小批量事务在内的广泛数据库功能进行测试。许多IT专业人员将TPC-C视为衡量“真实”OLTP系统性能的有效指示器。
TPC-C基准测试针对一种模拟订单录入与销售环境测量每分钟商业事务（tpmC）吞吐量。特别值得一提的是，它将专门测量系统在同时执行其它四种事务类型（如支付、订单状态更新、交付及证券级变更）时每分钟所生成的新增订单事务数量。独立审计机构将负责对基准测试结果进行公证，同时，TPC将出据一份全面彻底的测试报告。这份测试报告可以从TPC Web站点(http://www.tpc.org)上获得。
3 TPC-C规范概要 TPC-C是专门针对联机交易处理系统（OLTP系统）的，一般情况下我们也把这类系统称为业务处理系统。
TPC-C测试规范中模拟了一个比较复杂并具有代表意义的OLTP应用环境:假设有一个大型商品批发商，它拥有若干个分布在不同区域的商品库；每个仓库负责为10个销售点供货；每个销售点为3000个客户提供服务；每个客户平均一个订单有10项产品;所有订单中约1%的产品在其直接所属的仓库中没有存货，需要由其他区域的仓库来供货。
该系统需要处理的交易为以下几种：
New-Order：客户输入一笔新的订货交易；
Payment:更新客户账户余额以反映其支付状况;
Delivery:发货(模拟批处理交易);
Order-Status:查询客户最近交易的状态；
Stock-Level:查询仓库库存状况，以便能够及时补货。
对于前四种类型的交易，要求响应时间在5秒以内；对于库存状况查询交易，要求响应时间在20秒以内。
4评测指标 TPC-C测试规范经过两年的研制，于1992年7月发布。几乎所有在OLTP市场提供软硬件平台的厂商都发布了相应的TPC-C测试结果，随着计算机技术的不断发展，这些测试结果也在不断刷新。
TPC-C的测试结果主要有两个指标：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/1e1bcb6d5efb553d935eeed0bd02c058/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-12-05T13:31:23+08:00" />
<meta property="article:modified_time" content="2016-12-05T13:31:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">tpc系列(2)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="color:rgb(51,51,51)">第一章 什么是TPC和tpmC?</h2> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t1" style="color:rgb(51,102,153)"></a>1 TPC</h3> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black; background:fuchsia">TPC(Transaction Processing Performance Council</span><span style="color:black; background:fuchsia">，事务处理性能委员会)</span><span style="color:black">是由数10</span>家会员公司创建的非盈利组织，总部设在美国。该组织对全世界开放，但迄今为止，绝大多数会员都是美、日、西欧的大公司。TPC的成员主要是计算机软硬件厂家，而非计算机用户，<span style="background:fuchsia">它的功 能是制定商务应用基准程序(Benchmark)</span>的标准规范、性能和价格度量，并管理测 试结果的发布。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC</span><span style="color:black">的出版物是开放的，可以通过网络获取(<a target="_blank" href="http://www.tpc.org/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153)"><span style="color:rgb(51,51,51)">http://www.tpc.org</span></a>)</span>。TPC不给出基准程序的代码，而只给出基准程序的标准规范(Standard Specification)。任何厂家或其它测试者都可以根据规范，最优地构造出自己的系统(测试平台和测试程序)。为保证测试结果的客观性，被测试者(通常是厂家)必须提交给TPC一套完整的报告(Full Disclosure Report)，包括被测系统的详细配置、分类价格和包含五年维护费用在内的总价 格。该报告必须由TPC授权的审核员核实(TPC本身并不做审计)。现在全球只有几个审核员，全部在美国。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC</span><span style="color:black">已经推出了四套基准程序，被称为TPC</span>－A、TPC－B、TPC－C和TPC－D。其中A和B已经过时，不再使用了。TPC－C是在线事务处理(OLTP)的基准程序，TPC－D是决策支持(Decision Support) 的基准程序。TPC即将推TPC－E，作为大型企业(Enterprise)信息服务的基准程序。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black"> </span></p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t2" style="color:rgb(51,102,153)"></a>2 tpmC</h3> 
<p align="left" style="color:rgb(51,51,51)">tpmC值在国内外被广 泛用于衡量计算机系统的事务处理能力。但究竟什么是tpmC值呢?作者曾向一些 用户、推销人员乃至某些国外大公司的技术人员问过这个问题，但回答的精确度 与tpmC值的流行程度远非相称。tpmC这一度量也常被误写为TPM或TPMC。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">模拟一个批发商的货物管理环境。该批发公司有N</span>个仓库，每个仓库供应10个地区，其中每个地区为3000名顾客服务。在每个仓库中有10个终端，每一个终端用于一个地区。在运行时，10×N个终端操作员向公司的<a target="_blank" href="http://lib.csdn.net/base/14" rel="nofollow noopener noreferrer" title="MySQL知识库" style="color:rgb(223,52,52)">数据库</a>发出5类请求。由于一个仓库中不可能存储公司所有的货物，有一些请求必须发往其它仓库，因此，数据库在逻辑上是 分布的。N是一个可变参数，测试者可以随意改变N，以获得最佳测试效果。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">使用三种性能和价格度量，其中性能由TPC-C</span>吞吐率衡量，单位是tpmC。tpm是transactions per minute的简称；C指TPC中的C基准程序。它的定义是每分钟内系统处理的新订单个数。要注意的是，在处理新订单的同时，系统还要按表1的要求处理其它4类事务 请求。从表1可以看出，新订单请求不可能超出全部事务请求的45％，因此，当一个 系统的性能为1000tpmC时，它每分钟实际处理的请求数是2000多个。价格是指系 统的总价格，单位是美元，而价格性能比则定义为总价格÷性能，单位是＄/tpmC。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black; background:fuchsia">tpmC</span><span style="color:black; background:fuchsia">定义: TPC-C</span>的吞吐量，按有效TPC-C配置期间每分钟处理的平均交易次数测量<span style="color:black">，至少要运行12</span>分钟。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">（吞吐量测试结果以比特</span><span style="color:black">/</span><span style="color:black">秒或字节</span><span style="color:black">/</span><span style="color:black">秒表示。）</span></p> 
<h2 style="color:rgb(51,51,51)"><a target="_blank" name="t3" style="color:rgb(51,102,153)"></a>第二章 TPCC</h2> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t4" style="color:rgb(51,102,153)"></a>1             基准测试</h3> 
<p style="color:rgb(51,51,51)"><span style="background:red">TPCC</span><span style="background:red">值被广泛用于衡量</span><span style="background:red">C/S</span><span style="background:red">环境下</span><span style="background:red">,</span><span style="background:red">由服务器和客户端构筑的整体系统的性能</span>,它由事物处理性能委员会（TPC，Transaction Processing Corp）制定,TPC为非赢利性国际组织。</p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)"><span style="background:red">TPCC</span><span style="background:red">值可以反映出系统的性能价格比</span>。TPCC测试系统每分钟处理的任务数,单位为tpm,(transactions per minute)。系统的总体价格(单位为美元)除以TPCC值,就可以衡量出系统的性价比,<span style="background:red">系统的性价比值越大</span><span style="background:red">,</span><span style="background:red">系统的性价比越好</span>。</p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)"><span style="background:red">需要注意的是</span><span style="background:red">,TPC-C</span><span style="background:red">值描述的是</span><span style="background:red">C/S</span><span style="background:red">整体系统的性能</span><span style="background:red">,</span><span style="background:red">它与系统的服务器和客户机的性能都有关系</span>,也就是说,同样的服务器配置不同的客户端将会影响TPCC值,任何厂商和测试者都可以根据TPC提供的测试规范构造出自己最优的系统,当然测试的结果要经过TPC审核。</p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)">---------------------------------------------------------------------------------------------------------------</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t5" style="color:rgb(51,102,153)"></a>2             性能测试指标介绍</h3> 
<p style="color:rgb(51,51,51)">TPC-C</p> 
<p style="color:rgb(51,51,51)">作为一家非盈利性机构，事务处理性能委员会（TPC）负责定义诸如TPC-C、TPC-H和TPC-W基准测试之类的事务处理与数据库性能基准测试，并依据这些基准测试项目发布客观性能数据。TPC基准测试采用极为严格的运行环境，并且必须在独立审计机构监督下进行。委员会成员包括大多数主要数据库产品厂商以及服务器硬件系统供应商。</p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)">相关企业参与TPC基准测试以期在规定运行环境中获得客观性能验证，并通过应用测试过程中所使用的技术开发出更加强健且更具伸缩性的软件产品及硬件设备。</p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)">TPC-C是一种旨在衡量联机事务处理（OLTP）系统性能与可伸缩性的行业标准基准测试项目。这种基准测试项目将对包括查询、更新及队列式小批量事务在内的广泛数据库功能进行测试。许多IT专业人员将TPC-C视为衡量“真实”OLTP系统性能的有效指示器。</p> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)">TPC-C基准测试针对一种模拟订单录入与销售环境测量每分钟商业事务（tpmC）吞吐量。特别值得一提的是，它将专门测量系统在同时执行其它四种事务类型（如支付、订单状态更新、交付及证券级变更）时每分钟所生成的新增订单事务数量。独立审计机构将负责对基准测试结果进行公证，同时，TPC将出据一份全面彻底的测试报告。这份测试报告可以从TPC Web站点(http://www.tpc.org)上获得。</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t6" style="color:rgb(51,102,153)"></a>3 TPC-C规范概要</h3> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">是专门针对联机交易处理系统（OLTP</span>系统）的，一般情况下我们也把这类系统称为业务处理系统。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">测试规范中模拟了一个比较复杂并具有代表意义的OLTP</span>应用环境:假设有一个大型商品批发商，它拥有若干个分布在不同区域的商品库；每个仓库负责为10个销售点供货；每个销售点为3000个客户提供服务；每个客户平均一个订单有10项产品;所有订单中约1%的产品在其直接所属的仓库中没有存货，需要由其他区域的仓库来供货。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">该系统需要处理的交易为以下几种：</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">New-Order</span><span style="color:black">：客户输入一笔新的订货交易；</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">Payment:</span><span style="color:black">更新客户账户余额以反映其支付状况;</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">Delivery:</span><span style="color:black">发货(</span>模拟批处理交易);</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">Order-Status:</span><span style="color:black">查询客户最近交易的状态；</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">Stock-Level:</span><span style="color:black">查询仓库库存状况，以便能够及时补货。</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">对于前四种类型的交易，要求响应时间在5</span>秒以内；对于库存状况查询交易，要求响应时间在20秒以内。</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t7" style="color:rgb(51,102,153)"></a>4评测指标</h3> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">测试规范经过两年的研制，于1992</span>年7月发布。几乎所有在OLTP市场提供软硬件平台的厂商都发布了相应的TPC-C测试结果，随着计算机技术的不断发展，这些测试结果也在不断刷新。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">的测试结果主要有两个指标：</span></p> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t8" style="color:rgb(51,102,153)"></a>①流量指标(Throughput，简称tpmC)</h4> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">按照TPC</span>的定义，流量指标描述了系统在执行Payment、Order-status、Delivery、Stock-Level这四种交易的同时，每分钟可以处理多少个New-Order交易。所有交易的响应时间必须满足TPC-C测试规范的要求。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">流量指标值越大越好！</span></p> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t9" style="color:rgb(51,102,153)"></a>②性价比(Price/Performance，简称Price/tpmC)</h4> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">即测试系统价格（指在美国的报价）与流量指标的比值。</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">性价比越大越好！</span></p> 
<h2 style="color:rgb(51,51,51)"><a target="_blank" name="t10" style="color:rgb(51,102,153)"></a>第三章（TPCC）如何衡量计算机系统的性能和价格</h2> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">在系统选型时，我们一定不要忘记我们是为特定用户环境中的特定应用选择系统。切忌为了“</span>与国际接轨”而盲目套用“国际通用”的东西。在性能评价领域，越是通用的度量常常越是不准确的。据我所知，美国的一些大用户从不相信任何“国际通用”的度量，而是花相当精力，比如预算的5％，使用自己的应用来测试系统，决定选型。在使用任何一种性能和价格度量时，一定要弄明白该度量的定义，以及它是在什么系统配置和运行环境下得到的，如何解释它的意义等。下面我们由好到差讨论三种方式。</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t11" style="color:rgb(51,102,153)"></a>1在真实环境中运行 实际应用</h3> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">最理想的方式是搞一个试点，要求制造商或系统集成商配合将系统(</span>含平台、软件和操作流程)在一个 实际用户点真正试运行一段时间。这样，用户不仅能看到实际性能，也能观察到系统是否稳定可靠、使用是否方便、服务是否周到、配置是否足够、全部价格是否合理。如果一个部门需要购买一批同类的系统，这种方式应列为首选，因为它不仅最精确、稳妥，也常常最有效率，用户还可先租一套系统作为试点。用这种方式得到的度量值常常具有很明确和实际的含义。</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t12" style="color:rgb(51,102,153)"></a>2使用用户定义的基准程序</h3> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">如果由于某种原因第一种方式不可行，用户可以定义一组含有自己实际应用环境特征的应用基准程序。 我举两个例子：近年来，由于R/3</span>软件是应用层软件，SAP公司的基准程序获得了越来越多国外企业的认可；中国税务总局最近也开发了自己的基准程序，以帮助税务系统进行计算机选型。这种方式在中国尤其重要，因为中国的信息系统有其特殊性。</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t13" style="color:rgb(51,102,153)"></a>3使用通用基准程序</h3> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">如果第1</span>种和第2种方式都不行，则使用如TPC-C之类的通用基准程序，这是不得已的一种近似方法。因 此，tpmC值只能用作参考。我们应当注意以下几点：</p> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t14" style="color:rgb(51,102,153)"></a>①实际应用是否与基准程序相符</h4> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">绝大多数基准程序都是在美国制订的，而中国的企事业单位与美国的运作方式常常不一样(</span>恐怕也不应该或不可能一样)。在使用TPC－C时，我们应该清楚地知道：我的应用是否符合批发商模式?事务请求是否与表1近似?对响应时间的要求是否满足表1?如果都不是，则tpmC值的参考价值就不太大了。</p> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t15" style="color:rgb(51,102,153)"></a>②TPC度量的解释</h4> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC</span><span style="color:black">基准程序是用来测系统而不是测主机的，厂家肯定要充分优化他们的被测系统。此处的“</span>系统”包括主机、外设(如硬盘或RAID)、主机端操作系统、数据库软件、客户端计算机及其 操作系统、数据库软件和网络连接等。在很多厂家的TPC测试系统中，主机的价格只是系统总价格的1/4或更小，而硬盘的价格有可能占到总价格的1/3以上，因为TPC－C要求被测系统必须保存180天的事务记录。如果同样的主机被用到用户的环境中，厂家报的tpmC值就意义不大，因为用户的实际系统与厂家原来用于TPC测试的系统大不一样。当同样的主机用在不同的系统中时，tpmC值可能有相当大的变化，现在很多用户还没有意识到这一点。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">我举一个例子。假设用 户希望购买一批同类系统，每一系统至少需要1GB</span>的内存和50GB的硬盘。厂家A、B、C 各报了三个价格相当的系统，tpmC值分别为3000、2800、2600。用户是否应该选厂家A的产品呢?答案是：不一定。厂家用于测试tpmC值的系统与实际提供给用户的系统配置大不一样。tpmC最低的厂家C提供给用户的系统反而有可能性能最好，不 论是以实际系统的tpmC值还是以用户的实际应用性能来衡量。</p> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t16" style="color:rgb(51,102,153)"></a>③TPC测试的成本</h4> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC</span><span style="color:black">－C</span>和TPC－D都是很复杂的基准程序，做一个严格的测试是很消耗资源的，厂家当然不会说出他们花费了多少钱和时间。但据国外知情人士透露，一个厂家做第一个TPC－C测试需 要几十万到上百万美元的资金和半年左右的时间投入。因此，很多TPC的度量值都 是估计的。由于计算机系统换代频繁，如果用户一定要用通过审核的度量值，就必 须多等待半年时间，因此而不能用最先进的系统。中国的厂家通过审核的时间则更长。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">综上所述，我们对中国 用户(</span>尤其是大用户)在计算机系统的选型方面有如下建议：</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">最好建立一个真实的试点，因为实际应用环境是检验计算机系统的最好标准。</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">中国的行业应该建立符合自己实际应用的基准程序和测试标准。中国税务总局的做法值得提倡。国家有关部门应该建立独立的测试中心，制定跨行业、符合中国企事业运作模式的性能测试标准。</span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">“</span><span style="color:black">国际通用”</span>的度量可以作为参考值，而不应作为必要条件。尤其是一定要弄清这些流行度量有什么含义，是在什么样的系统环境中测得的，以及基准程序是否符合企业真实的业务流程和运作模式。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">作为一家非盈利性机构，事务处理性能委员会（TPC</span>）负责定义诸如TPC-C、TPC-H和TPC-W基准测试之类的事务处理与数据库性能基准测试，并依据这些基准测试项目发布客观性能数据。TPC基准测试采用极为严格的运行环境，并且必须在独立审计机构监督下进行。委员会成员包括大多数主要数据库产品厂商以及服务器硬件系统供应商。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">相关企业参与TPC</span>基准测试以期在规定运行环境中获得客观性能验证，并通过应用测试过程中所使用的技术开发出更加强健且更具伸缩性的软件产品及硬件设备。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black">TPC-C</span><span style="color:black">是一种旨在衡量联机事务处理（OLTP</span>）系统性能与可伸缩性的行业标准基准测试项目。这种基准测试项目将对包括查询、更新及队列式小批量事务在内的广泛数据库功能进行测试。许多IT专业人员将TPC-C视为衡量“真实”OLTP系统性能的有效指示器。</p> 
<p align="left" style="color:rgb(51,51,51)">TPC-C基准测试针对一种模拟订单录入与销售环境测量每分钟商业事务（tpmC）吞吐量。特别值得一提的是，它将专门测量系统在同时执行其它四种事务类型（如支付、订单状态更新、交付及证券级变更）时每分钟所生成的新增订单事务数量。独立审计机构将负责对基准测试结果进行公证，同时，TPC将出据一份全面彻底的测试报告。这份测试报告可以从TPC Web站点(<a target="_blank" href="http://www.tpc.org/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153)"><span style="color:rgb(51,51,51)">http://www.tpc.org</span></a>)上获得。</p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black"> </span></p> 
<p align="left" style="color:rgb(51,51,51)"><span style="color:black"> </span></p> 
<h2 style="color:rgb(51,51,51)"><a target="_blank" name="t17" style="color:rgb(51,102,153)"></a>第四章 TPCC计算原则</h2> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t18" style="color:rgb(51,102,153)"></a>1建议</h3> 
<p style="color:rgb(51,51,51)">不管是TPC-C还是SPECjbb2000，计算结果都只能作为一个横向比较的参考。在实际应用中，决定系统性能的因素除了硬件、系统软件外，与应用软件的设计也是有很大关系的，此外，基于系统可扩展性的考虑，更多时候也倾向于一次性的采购。<br> 从长远考虑，以政府信息化主管部门的角度考虑，建立一套评估机制是非常有用的，这其中包括：<br> 1、 通过对各单位业务系统运行情况的调查，进行历史数据的收集分析，按分类建立基准指标库。收集的信息包括：服务器的配置、并发用户数（每天业务量）、CPU负荷等；<br> 2、 由厂商定期提供基准值，更新基准指标库；<br> 有了基准指标库的信息参照，不仅可以用于评估项目建设方案中服务器选型，也可以对各部门进行系统<a target="_blank" href="http://lib.csdn.net/base/16" rel="nofollow noopener noreferrer" title="大型网站架构知识库" style="color:rgb(223,52,52)">架构</a>设计的优化提供指导。如以下是一些指导原则：<br> 1、 数据库服务器选型：采购两台相同配置的小型机，进行虚拟分区和并行处理，以提高系统资源的利用率；日后扩容时采取垂直扩展的方式进行升级；<br> 2、 应用服务器：采用负载均衡的方式提高并发处理能力，一般可配置2台以上，每台的硬件配置完全可以不同，应首先考虑使用旧的数据库服务器（利旧），如需采购新的服务器，应采用水平扩展的方式逐步升级；<br> 3、 WEB服务器，可以考虑采用刀片服务器，提高扩展性和可管理性。</p> 
<h3 style="color:rgb(51,51,51)"><a target="_blank" name="t19" style="color:rgb(51,102,153)"></a>2参考：某项目计算实例</h3> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t20" style="color:rgb(51,102,153)"></a>参考1</h4> 
<p style="color:rgb(51,51,51)">为了方便计算数据库服务器的造型，我们约定：<br> " 系统同时在线用户数为1500人（U1）； <br> " 平均每个用户每分钟发出2次业务请求（N1）；<br> " 系统发出的业务请求中，更新、查询、统计各占1/3；<br> " 平均每次更新业务产生3个事务（T1）；<br> " 平均每次查询业务产生8个事务（T2）；<br> " 平均每次统计业务产生13个事务（T3）；<br> " 一天内忙时的处理量为平均值的5倍；<br> " 经验系数为1.6；(实际工程经验)<br> " 考虑服务器保留30％的冗余；<br> 服务器需要的处理能力为：<br> TPC-C=U1*N1*（T1+T2+T3）/3*3*经验系数/冗余系数 <br> 则应用服务器的处理性能估算为：<br> TPC-C= 1500*2*（3+8+13）/3*5*1.6/0.7= 274,285 tpmC</p> 
<p style="color:rgb(51,51,51)">数据库服务器关系到整个系统的稳定运行，考虑到高可靠性和高可用性，并注重设备的可扩展性和性价比，系统将配置两台TPC-C值不小于28万的高性能数据库服务器。</p> 
<h4 style="color:rgb(51,51,51)"><a target="_blank" name="t21" style="color:rgb(51,102,153)"></a>参考2</h4> 
<p style="color:rgb(51,51,51)"> </p> 
<p style="color:rgb(51,51,51)">以单台服务器性能进行计算，即确保单台服务器工作的时候可以满足系统正常运行的需要；</p> 
<p style="color:rgb(51,51,51)">假设每天有1万人次来窗口办理业务，每人次办理一项业务。即以每日1万笔前台交易为例进行<strong><span style="color:rgb(51,0,255)">综合系数</span></strong>的推导：</p> 
<p style="color:rgb(51,51,51)">1. 假设每月前台交易数（未来5年内的设计指标）为220,000 （有些业务在月初、月末的处理量比较高，按月统计可以平衡此项差异）;<br> 2. 每日前台交易数=220000/22=10,000 ，即每日 1万笔；<br> 3. 忙时处理能力：每日交易的80%在4个小时内完成，即10000*80%/4=2000（笔/小时）<br> 4. 峰值处理能力：2000*2=4000（笔/小时），即峰值处理能力为每小时4000笔，或 67笔/分，假设业务人员同时在线为100人，即每人每分钟处理0.7笔）<br> 5. 假设每笔交易对应数据库事务数=20，基准TPC指标值对应的比例=8，cpu保留30%的处理能力冗余，计算值与公布值（最优值）的偏差经验值为4 <strong>（这几个参数估算的依据不足，更多的是经验值）</strong></p> 
<p style="color:rgb(51,51,51)">则 tpmC值为：<br> tpmC= 67*20*8*4/(1-30%)= 61257<span style="background:red">[</span><span style="background:red">颠峰处理能力时（笔/</span>分）*每笔交易对应数据库事务数*基准TPC指标值对应的比例*计算值与公布值（最优值）的偏差经验值/（1- cpu保留30%的处理能力冗余）<br> <span style="background:fuchsia">倒算出 综合系数</span> = 61257/10000=6.1<br> 即数据库服务器tpmC= <strong><span style="color:rgb(0,51,255)">每日前台交易数 * 6.1</span></strong> （实际计算值应不高于该值）<br> 应用服务器的 tpmC = 数据库服务器 tpmC *50% （一般）<br> 应用服务器的 tpmC = 数据库服务器 tpmC *70% （涉及大量计算的，如社保、税务）</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1ab150d15ad8b7e69f4852f090d4795c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java基础 - 树堆（Treap = tree&#43;heap）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6160b14f333877bf0368e556cfa59c2d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">贪心算法解决tsp问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>