<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络空间安全面试题目及答案(简版) - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络空间安全面试题目及答案(简版)" />
<meta property="og:description" content="获取目标站点的绝对路径 如果是iis系统,尝试对参数进行恶意传值,使其出现报错页面对目标网站进行js代码审计,查看是否存在信息泄露出站点的绝对路径使用字典猜解目标站点的绝对路径如果目标是thinkphp框架,尝试访问无效的路径,或者对参数进行而已传值使其报错phpinfo页面泄露站点的绝对路径 怎样进行信息收集 获取目标的真实ip,如果有cdn就绕一下通过真实去进行半开放的端口扫描,获取目标服务通过审计js代码 &#43; jsfinder工具查看是否存在接口泄露可以使我们进一步的利用对站点进行指纹识别,查看cms历史漏洞通过乌云查找目标的历史漏洞,查看脆弱点通过google黑语法搜索目标站点的敏感关键词 如 登录 后台 学号 上传通过目录扫描工具扫描目标站点文件,查看是否存在未授权访问文件或者更多的功能点通过潮汐 在线子域名 layer子域名挖掘机进行子域名收集通过nmap goby对c端进行信息收集 绕cdn 通过境外ip去平目标系统主动向我方的请求,如发邮件获取多个子域名ip对比查看dns记录通过网络搜索引擎去搜索 只有一个登录页面如何去测 测试逻辑漏洞点sql注入漏洞js代码是否存在js接口泄露目录扫描查看漏洞库是否存在历史漏洞提取页面关键词去黑暗引擎搜索 网站有验证码挖漏洞？ 验证码无效验证码由客户端生成 验证验证码有回显验证码固定验证码可以爆破验证码可猜解可绕过短信轰炸任意用户注册任意用户密码重置 load data local读入表条件 SHOW VARIABLES LIKE &#34;secure_file_priv&#34;; null 表示禁止如果value值有文件夹目录,则表示只允许改目录下文件如果为空则,表表示不限制目录 ban了sleep怎么实现时间盲注 sleep()benchmark()重复执行某表达式笛卡尔积get_lock 加锁rlike regexp 正则匹配 sqlmap的os shell原理 对于mysql数据库来说,–os-shell的本质就是写入两个shell文件,其中的一个可以让我们用来执行命令,另外一个,如果在网站访问的话可以让我们上传文件.
导入导出的权限是secure_file_priv参数来控制的,当这个参数的后面为null的时候,表示不允许导入导出,如果为具体文件夹时,表示仅允许在这个文件夹下导入导出,secure_file_priv参数的默认值为null已知目标站点的绝对路径
已知目标站点的绝对路径已知目标站点的脚本语言当前数据库权限必须是dba sa权限网站不查杀木马文件 SQL注入绕waf的方式 白盒
根据waf的固定规则去寻找有没有漏网之鱼.
黑盒
架构层绕waf
用户本身是进入waf后访问web页面的,只要我们找到web的真实ip,就可以绕过waf在同网段内,页面与页面之间,服务器与服务器之间,通过waf的防护,然后展示给我们,只要我们在内部服务之间进行访问,即可绕过waf边界漏洞,同样类似于同网段数据,我们可以利用已知服务器存在的ssrf漏洞,将数据直接发送给同网段的web2进行sql注入. 协议层面绕过waf
基于协议层,有的waf只过滤get请求,而对post请求没有做别的限制,因此,可以将get类型转换成post请求
文件格式,页面只对Content-Type为application/x-www-form-urlencoded数据格式进行过滤,因此我们可以将Content-Tyoe格式修改为multipart/form-data,即可绕过
参数污染 有的waf仅对部分内容进行过滤如
规则层面绕过
首先使用比较特殊的方法进行绕过
常见规则
缓冲区溢出
mysql特性绕过
黑魔法
内联注释
phpmyadmin如何拿shell? 数据库文件导入导出
条件
数据库root权限数据库字段secure_file_priv没有具体的值获取网站的绝对路径 数据库全局日志写入
条件
数据库root权限获取网站的绝对路径 数据库慢查询日志写入
慢日志查询 记录所有执行时间超过字段long_query_time规定时间的所有查询或者不使用索引的查询,默认情况下慢查询日志为关闭,long_query_time值为10秒" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/1ea038c235702b8611146df8bc0a93cb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-18T15:03:10+08:00" />
<meta property="article:modified_time" content="2023-03-18T15:03:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络空间安全面试题目及答案(简版)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_3"></a>获取目标站点的绝对路径</h2> 
<ol><li>如果是iis系统,尝试对参数进行恶意传值,使其出现报错页面</li><li>对目标网站进行js代码审计,查看是否存在信息泄露出站点的绝对路径</li><li>使用字典猜解目标站点的绝对路径</li><li>如果目标是thinkphp框架,尝试访问无效的路径,或者对参数进行而已传值使其报错</li><li>phpinfo页面泄露站点的绝对路径</li></ol> 
<h2><a id="_11"></a>怎样进行信息收集</h2> 
<ol><li>获取目标的真实ip,如果有cdn就绕一下</li><li>通过真实去进行半开放的端口扫描,获取目标服务</li><li>通过审计js代码 + jsfinder工具查看是否存在接口泄露可以使我们进一步的利用</li><li>对站点进行指纹识别,查看cms历史漏洞</li><li>通过乌云查找目标的历史漏洞,查看脆弱点</li><li>通过google黑语法搜索目标站点的敏感关键词 如 登录 后台 学号 上传</li><li>通过目录扫描工具扫描目标站点文件,查看是否存在未授权访问文件或者更多的功能点</li><li>通过潮汐 在线子域名 layer子域名挖掘机进行子域名收集</li><li>通过nmap goby对c端进行信息收集</li></ol> 
<h2><a id="cdn_23"></a>绕cdn</h2> 
<ol><li>通过境外ip去平目标系统</li><li>主动向我方的请求,如发邮件</li><li>获取多个子域名ip对比</li><li>查看dns记录</li><li>通过网络搜索引擎去搜索</li></ol> 
<h2><a id="_31"></a>只有一个登录页面如何去测</h2> 
<ol><li>测试逻辑漏洞点</li><li>sql注入漏洞</li><li>js代码是否存在js接口泄露</li><li>目录扫描</li><li>查看漏洞库是否存在历史漏洞</li><li>提取页面关键词去黑暗引擎搜索</li></ol> 
<h2><a id="_40"></a>网站有验证码挖漏洞？</h2> 
<ol><li>验证码无效</li><li>验证码由客户端生成 验证</li><li>验证码有回显</li><li>验证码固定</li><li>验证码可以爆破</li><li>验证码可猜解</li><li>可绕过</li><li>短信轰炸</li><li>任意用户注册</li><li>任意用户密码重置</li></ol> 
<h2><a id="load_data_local_53"></a>load data local读入表条件</h2> 
<pre><code>SHOW VARIABLES LIKE "secure_file_priv";
</code></pre> 
<ul><li>null 表示禁止</li><li>如果value值有文件夹目录,则表示只允许改目录下文件</li><li>如果为空则,表表示不限制目录</li></ul> 
<h2><a id="bansleep_63"></a>ban了sleep怎么实现时间盲注</h2> 
<ol><li>sleep()</li><li>benchmark()重复执行某表达式</li><li>笛卡尔积</li><li>get_lock 加锁</li><li>rlike regexp 正则匹配</li></ol> 
<h2><a id="sqlmapos_shell_71"></a>sqlmap的os shell原理</h2> 
<p>对于mysql数据库来说,–os-shell的本质就是写入两个shell文件,其中的一个可以让我们用来执行命令,另外一个,如果在网站访问的话可以让我们上传文件.</p> 
<p>导入导出的权限是secure_file_priv参数来控制的,当这个参数的后面为null的时候,表示不允许导入导出,如果为具体文件夹时,表示仅允许在这个文件夹下导入导出,secure_file_priv参数的默认值为null已知目标站点的绝对路径</p> 
<ol><li>已知目标站点的绝对路径</li><li>已知目标站点的脚本语言</li><li>当前数据库权限必须是dba sa权限</li><li>网站不查杀木马文件</li></ol> 
<h2><a id="SQLwaf_82"></a>SQL注入绕waf的方式</h2> 
<p><strong>白盒</strong></p> 
<p>根据waf的固定规则去寻找有没有漏网之鱼.</p> 
<p><strong>黑盒</strong></p> 
<p><strong>架构层绕waf</strong></p> 
<ol><li>用户本身是进入waf后访问web页面的,只要我们找到web的真实ip,就可以绕过waf</li><li>在同网段内,页面与页面之间,服务器与服务器之间,通过waf的防护,然后展示给我们,只要我们在内部服务之间进行访问,即可绕过waf</li><li>边界漏洞,同样类似于同网段数据,我们可以利用已知服务器存在的ssrf漏洞,将数据直接发送给同网段的web2进行sql注入.</li></ol> 
<p><strong>协议层面绕过waf</strong></p> 
<ol><li> <p>基于协议层,有的waf只过滤get请求,而对post请求没有做别的限制,因此,可以将get类型转换成post请求</p> </li><li> <p>文件格式,页面只对Content-Type为application/x-www-form-urlencoded数据格式进行过滤,因此我们可以将Content-Tyoe格式修改为multipart/form-data,即可绕过</p> </li><li> <p>参数污染 有的waf仅对部分内容进行过滤如</p> </li></ol> 
<p><strong>规则层面绕过</strong></p> 
<ol><li> <p>首先使用比较特殊的方法进行绕过</p> </li><li> <p>常见规则</p> </li><li> <p>缓冲区溢出</p> </li><li> <p>mysql特性绕过</p> </li><li> <p>黑魔法</p> </li><li> <p>内联注释</p> </li></ol> 
<h2><a id="phpmyadminshell_119"></a>phpmyadmin如何拿shell?</h2> 
<p><strong>数据库文件导入导出</strong></p> 
<p><strong>条件</strong></p> 
<ol><li>数据库root权限</li><li>数据库字段secure_file_priv没有具体的值</li><li>获取网站的绝对路径</li></ol> 
<p><strong>数据库全局日志写入</strong></p> 
<p><strong>条件</strong></p> 
<ol><li>数据库root权限</li><li>获取网站的绝对路径</li></ol> 
<p><strong>数据库慢查询日志写入</strong></p> 
<p>慢日志查询 记录所有执行时间超过字段long_query_time规定时间的所有查询或者不使用索引的查询,默认情况下慢查询日志为关闭,long_query_time值为10秒</p> 
<p><strong>条件</strong></p> 
<ol><li>数据库root权限</li><li>获取网站的绝对路径</li></ol> 
<p><strong>CVE</strong></p> 
<h2><a id="waf_147"></a>文件上传漏洞原理,绕waf</h2> 
<ol><li>字符变异</li><li>畸形的boundary头部</li><li>顺序颠倒</li><li>boundary内容重复</li><li>filename重复</li><li>数据溢出</li><li>数据截断</li></ol> 
<h2><a id="_157"></a>为什么会存在文件上传漏洞</h2> 
<ol><li>上传的文件是web脚本语言,服务器的web容器解释并执行了用户上传脚本,导致代码执行</li><li>上传文件是木马或者病毒.主要用于诱骗用户或者管理员下载执行或者直接自动运行</li><li>上传文件是flash的执行策略文件crossdomain.xml.黑客用以控制flash在该域下的行为(其他通过类似的凡是控制策略文件的情况类似)</li></ol> 
<h2><a id="http_onlycookie_163"></a>http only怎么获取cookie</h2> 
<p>如果在cookie中设置了http only属性,那么将不能从js脚本中获取到cookie的信息,也就是说不能呢用document.cookie()来获取cookie</p> 
<ol><li>配置错误,htto only只是对特定的cookie做了保护</li><li>如果apache版本低,可以通过发送超长cookie,可以获取http only保护下的cookie</li></ol> 
<h2><a id="XSSWAF_170"></a>XSS绕过WAF姿势总结</h2> 
<ol><li>Script 标签</li><li>JavaScript 事件</li><li>行内样式(Inlinestyle)</li><li>CSS import</li><li>Javascript URL</li><li>利用字符编码</li><li>绕过长度限制</li><li>超文本内容</li><li>变形主要包含大小写和JavaScript变形</li></ol> 
<h2><a id="XSS_182"></a>XSS还能干嘛？</h2> 
<p>常规用到的就是盗取cookie js做钓鱼工具 流量指向等.主要作用是盗取管理员的凭证,就意味着得到后台的权限,可以直接利用.还能配合别的漏洞,比如可以和网站木马结合,扔到哪里去跳转</p> 
<h2><a id="xsscsrf_186"></a>xss和csrf区别</h2> 
<ol><li> <p>xss是单一网站不需要登录就能获取cookie,csrf是有一个漏洞网站,和一个攻击网站需要先登录漏洞网站</p> </li><li> <p>xss是向网站注入js代码,执行js代码.csrf利用网站本身漏洞去执行网站功能</p> </li><li> <p>CSRF比XSS漏洞危害更高。</p> </li><li> <p>CSRF可以做到的事情，XSS都可以做到。</p> </li><li> <p>XSS有局限性，而CSRF没有局限性。</p> </li><li> <p>XSS针对客户端，而CSRF针对服务端。</p> </li><li> <p>XSS是利用合法用户获取其信息，而CSRF是伪造成合法用户发起请求。</p> </li></ol> 
<h2><a id="SSRF_201"></a>SSRF有哪些利用点？</h2> 
<ol><li> <p>分享:通过url地址分享网页内容</p> </li><li> <p>转码服务: 通过url地址把原地址的网页内容调优使其适合收集屏幕浏览</p> </li><li> <p>在线翻译 : 他弄个url地址翻译对应文本的内容,比如百度翻译,有道等</p> </li><li> <p>图片加载与下载: 通过指定url地址加载或者下载图片</p> </li><li> <p>图片文章的收藏功能:从分享的url中读取原文的标题等</p> </li><li> <p>从未公开的api实现以及其他调用url的功能</p> </li><li> <p>ssrf漏洞验证</p> </li><li> <p>ssrf利用方式</p> </li><li> <p>本地利用</p> </li><li> <p>远程利用</p> </li><li> <p>探测内网</p> </li><li> <p>攻击Redis服务</p> </li><li> <p>攻击Mysql服务</p> </li></ol> 
<h2><a id="PHP_218"></a>PHP命令执行函数有哪些？</h2> 
<ol><li> <p>eval()</p> </li><li> <p>assert</p> </li><li> <p>preg_replace()</p> </li><li> <p>create_function()</p> </li><li> <p>array_map()</p> </li><li> <p>call_user_func()</p> </li><li> <p>call_user_func_array()</p> </li><li> <p>array_filter()</p> </li></ol> 
<h2><a id="java_236"></a>java执行无回显</h2> 
<p>dnslog、当前环境中找响应对象、抛出异常、web目录里写入html</p> 
<h2><a id="spring_240"></a>spring漏洞</h2> 
<p><img src="https://images2.imgbox.com/7c/f0/tLJbzzIe_o.png" alt="image-20220613205748112"></p> 
<h2><a id="_244"></a>内存马查杀</h2> 
<p><strong>内存马的分类</strong></p> 
<ol><li>servlet-api类 
  <ul><li>filter型</li><li>servlet型</li></ul> </li><li>spring类 
  <ul><li>拦截器</li><li>controller型</li></ul> </li><li>java Instrumentation类 
  <ul><li>agent型</li></ul> </li></ol> 
<p><strong>内存马的识别</strong></p> 
<ol><li>利用java agent技术遍历所有已经加载到内存中的class,先判断是否是内存马,是则进入内存查杀</li><li>filter名字很特别</li><li>filter优先级是第一位</li><li>对比web.xml中没有filter配置</li><li>特殊class loader加载</li><li>对应的classloader路径下面没有class文件</li><li>dilter的dofilter方法中有恶意代码</li></ol> 
<p><strong>内存马的查杀</strong></p> 
<ol><li>清除内存马中的filter的恶意代码</li><li>模拟中间件注销filter</li></ol> 
<p><strong>阿里开源的Java诊断工具——Arthas</strong></p> 
<h2><a id="_274"></a>提权</h2> 
<p><strong>linux</strong></p> 
<ol><li>内核漏洞提权</li><li>SUID提权</li><li>sudo提权</li><li>数据库提权思路</li><li>第三方软件提权思路</li><li>cve pkexec和dirty pipe</li></ol> 
<p><strong>windows</strong></p> 
<ol><li>令牌窃取提权</li><li>组策略首选项提权</li><li>权限配置错误</li></ol> 
<h2><a id="_291"></a>权限维持</h2> 
<p><strong>windows</strong></p> 
<p><img src="https://images2.imgbox.com/01/1d/iazg0nmG_o.png" alt="image-20220613115519668"></p> 
<p><strong>Linux</strong></p> 
<ol><li>一句话添加用户和密码</li><li>SUID Shell</li><li>ssh公私钥免密登录</li><li>软连接</li><li>SSH wrapper</li><li>strace后门</li><li>crontab反弹shell</li><li>openssh后门</li><li>PAM后门</li><li>rookit后门</li></ol> 
<h2><a id="_310"></a>蓝队反杀红队的经历有吗</h2> 
<p><strong>针对ip溯源一二</strong></p> 
<p>一般来说,红队大部分都是使用代理节点进行测试,假如我们捕获或者从样本里面分析拿到了真实的ip,那么以下的操作场景就有用了,或者使用钓鱼反调的方式去获取到真实的ip</p> 
<ol><li>来自创宇盾等节点的流量ip</li><li>whois 域名反查</li><li>探测端口 服务 进行反渗透</li><li>威胁情报</li><li>邮箱 qq 手机号 社工库</li><li>qq 微信 抖音 陌陌 等接口</li><li>ga数据 运营商数据</li></ol> 
<p><strong>常见红队被反杀的姿势</strong></p> 
<ol><li>使用个人工作pc,且浏览器里面保存了百度 163 sina等登录凭据,攻击对抗过程中踩到蓝队的蜜罐,被jsonp劫持漏洞捕获安全社交id,从而被溯源到了真实的姓名和所在公司</li><li>可能是蓝队封禁ip太厉害的原因,红队个人或者团队,使用自己的网站进行vps进行扫描,vps上含有团伙组织https证书,或者vps ip绑定的域名跟安全社交id对应,从而被溯源到真实姓名和所在的公司</li><li>部分攻击队写的扫描器payload里面含有攻击者的信息,如使用了私有的dnslog 攻击载荷里面含有安全社交id 含有个人博客资源请求等</li><li>投递的钓鱼邮件里面的木马样本被蓝队采集,逆向 反控c2c 溯源到个人信息</li><li>虚拟机逃逸打到实体机,暴露个人全部真实信息的</li></ol> 
<p><strong>反制红队基础设施的操作</strong></p> 
<p>cobalt strike反制</p> 
<ol><li>批量上线钓鱼马,启几百个进程mddos红方的cs端.假如我们获取到了红方的cs样本,那么第一种方法可以批量启几百个进程运行该样本(注意隔离环境),然后红方的cs端几乎瘫痪,无法使用</li><li>爆破cs密码 一般而言,红队的cs设施为了多人运动,密码通常不会太复杂,很大机会是弱口令为主,甚至teamserver端口50050,那么针对cs端控制端,可以直接进行密码爆破,</li></ol> 
<p>针对dnslog的反制</p> 
<h2><a id="webshell_343"></a>判断是不是webshell</h2> 
<p><strong>静态检测</strong></p> 
<p>静态检测通过匹配特征码，特征值，危险函数函数来查找 webshell 的方法，只能查找已知的 webshell</p> 
<p><strong>动态检测</strong></p> 
<p>webshell 传到服务器了，在执行函数时这些对于系统调用、系统配置、数据库、文件的操作动作都是可以作为判断依据</p> 
<p><strong>日志检测</strong></p> 
<p>使用 webshell 一般不会在系统日志中留下记录，但是会在网站的 web 日志中留下 webshell 页面的访问数据和数据提交记录</p> 
<p><strong>语法检测</strong></p> 
<p>语法语义分析形式，是根据 php 语言扫描编译的实现方式，进行剥离代码、注释，分析变量、函数、字符串、语言结构的分析方式，来实现关键危险函数的捕捉方式这样可以完美解决漏报的情况但误报上</p> 
<h2><a id="webshell_361"></a>webshell流量信息</h2> 
<p><strong>菜刀</strong></p> 
<p>菜刀 webshell 只使用了 url 编码 + base64 编码</p> 
<p>shell 特征就是传输参数名为 z0,还存在<code>int_set("display_erros"**,**"0")</code>字符串特征</p> 
<p><strong>蚁剑</strong></p> 
<p>默认的蚁剑 shell,连接时会请求两次,其请求体只是经过 url 编码,其流量中也存在和蚁剑一样的代码</p> 
<p>第一次请求,关闭报错和 magic_quotes,接下来去获取主机的信息</p> 
<p>第二次请求,会把主机目录列出来</p> 
<p>蚁剑单向加密,支持客户端传入信息</p> 
<p><strong>冰蝎3.0</strong></p> 
<p>使用 aes 加密发起两次请求</p> 
<p>冰蝎是双向加密的</p> 
<p><strong>哥斯拉</strong></p> 
<p>支持 n 种加密</p> 
<p>采用了和冰蝎 3.0 一样的密钥交换方式,哥斯拉建立连接时会发起三次请求,第一次请求数据超级长,建立 session,第二三次请求确认连接</p> 
<p><strong>Weevely</strong></p> 
<p>信息payload放于accetp头中,采用gzip压缩传输,使用异或加密.进行base64加密</p> 
<h2><a id="_395"></a>进程注入</h2> 
<p>由于防火墙对于系统中正常的网络相关进程(例如Services.exe、Svchost.exe等)默认都是放行的，因此，木马一般都是注入到这些系统进程当中，并以此来穿透防火墙。</p> 
<h2><a id="_401"></a>拿到日志如何分析？</h2> 
<ol><li> <p>特征字符分析 在日志中寻找已知的漏洞特征 访问频率分析</p> </li><li> <p>在攻击过程中,需要对系统进行各种特定的访问,这些访问与正常使用的用户访问区别较大,每一种工具行为都有不同的特征</p> </li><li> <p>漏洞扫描检查</p> </li><li> <p>可以匹配user-agent特征的方式进行检测</p> </li><li> <p>暴力破解检测</p> </li><li> <p>webshell检测</p> </li></ol> 
<h2><a id="_412"></a>获取域控权限的几种思路</h2> 
<ol><li> <p>通过域控相关的漏洞</p> </li><li> <p>通过域内的中继</p> </li><li> <p>通过抓取域管登录服务器的hash</p> </li><li> <p>CVE-2022-26923域内最新提权漏洞</p> </li><li> <p>通过攻击Exchange服务器、DNS服务器、SCCM服务器、WSUS服务器等</p> </li><li> <p>通过获取域控制器的localgroup中特权组成员的权限来获取域控权限</p> </li><li> <p>通过委派来获取域控权限</p> </li><li> <p>通过域控运维堡垒机</p> </li><li> <p>通过运维人员的个人主机</p> </li><li> <p>通过与域控相关的web服务器</p> </li></ol> 
<h2><a id="_433"></a>黄金票据白银票据区别是？</h2> 
<p><strong>黄金票据</strong></p> 
<p>所需条件</p> 
<ol><li>域名称</li><li>域的SID值</li><li>域的KRBTGT账号的HASH</li><li>伪造任意用户名</li></ol> 
<p>（获取域的SID和KRBTGT账号的NTLM HASH的前提是需要已经拿到了域的权限）</p> 
<p><strong>白银票据</strong></p> 
<ol><li>域名</li><li>域sid</li><li>目标服务器名</li><li>可利用的服务</li><li>服务账号的NTML HASH</li><li>需要伪造的用户名</li></ol> 
<p><strong>区别之处</strong></p> 
<table><thead><tr><th><strong>区别点</strong></th><th><strong>黄金票据</strong></th><th><strong>白银票据</strong></th></tr></thead><tbody><tr><td>访问权限</td><td>获取任何Kerberos服务权限</td><td>访问指定的服务</td></tr><tr><td>加密方式</td><td>由krbtgt的Hash加密</td><td>由服务账号(通常为计算机帐户)Hash加密</td></tr><tr><td>认证流程</td><td>需要经过域控</td><td>不需要经过域控</td></tr><tr><td>生成的票据</td><td>TGT票据</td><td>TGS票据</td></tr></tbody></table> 
<h2><a id="windows_464"></a>windows命令</h2> 
<pre><code>netstat -ano
查看开放端口

systeminfo
查看系统信息

ipconfig/all
查看网络信息

shell whoami/all
查看所有用户信息

wmic process list brief
查询进程信息

wmic startup get command,caption
查看启动程序信息

shell tasklist
查看常见的杀毒软件进程

hostname
获取dns信息

net view
查看当前局域网中的计算机列表

net user
查看当前计算机中的用户

systeminfo | findstr /B /C:"OS Name" /C:"OS Version"
systeminfo | findstr /B /C:"OS 名称" /C:"OS 版本"
查询操作系统及软件信息

echo %PROCESSOR_ARCHITECTURE%
查看系统体系结构

powershell "Get-WmiObject -class Win32_Product |Select-Object -Property name, version"
使用PowerShell收集软件的版本信息

whoami &amp;&amp; whoami /priv
查看当前权限

wmic service list brief
查询本机服务信息

wmic product get name, version 
查看安装的软件的版本、路径等


shell net view /domain
查看主域信息

shell net time /domain
查看时间服务器

shell net config workstation
查看当前的登录域与用户信息

nslookup god.org
寻找域dns服务器ip
</code></pre> 
<h2><a id="windows_530"></a>windows入侵排查思路</h2> 
<ol><li>查看系统账号安全</li><li>查看注册表中是否有隐藏账号</li><li>检查异常端口 进程</li><li>检查启动项 计划任务 服务</li><li>检查系统相关信息</li><li>日志分析 (C:\Windows\System32\winevt\Logs) 事件查看器</li><li>搜索一下有没有可疑bat exe文件</li></ol> 
<h2><a id="windows_540"></a>windows加固</h2> 
<ol><li>在win ser2016中如何管理重命名administrator,禁用GUEST</li><li>系统不显示上次登录的账户名。</li><li>清理系统无效账户.</li><li>按用户类型分配账号</li><li>配置密码策略</li><li>账户锁定策略</li><li>远端系统强制关机设置</li><li>本地关机设置</li><li>用户权限指派</li><li>授权账户本地登录</li><li>授权账户从网络访问</li></ol> 
<h2><a id="linux_554"></a>linux命令</h2> 
<p><strong>账号相关</strong></p> 
<pre><code>awk -F: '$3==0{print $1}' /etc/passwd
 awk '/\$1|\$6/{print $1}' /etc/shadow
 /var/log/utmp
</code></pre> 
<p><strong>程序相关</strong></p> 
<pre><code>#查看当前开放端口
netstat -tnlp 

#查看当前系统上运行的所有进程
ps -ef

#查看进程
ps aux | grep pid

#可以直接看到进程实时情况
top

#查看cpu占用率前十的进程，互补top
ps aux --sort=pcpu | head -10
</code></pre> 
<p><strong>日志相关</strong></p> 
<pre><code>日志默认存放位置：/var/log/
查看日志配置：more /etc/rsyslog.conf
</code></pre> 
<p><strong>启动项相关</strong></p> 
<pre><code>#开机启动配置文件
/etc/rc.local
/etc/rc.d/rc[0~6].d
</code></pre> 
<p><strong>定时任务</strong></p> 
<pre><code>#排查以下文件
/var/spool/cron/*
/etc/crontab
/etc/cron.d/*
/etc/cron.daily/*
/etc/cron.hourly/*
/etc/cron.monthly/*
/etc/cron.weekly/
/etc/anacrontab
/var/spool/anacron/*

#查看目录下所有文件
more /etc/cron.daily/*
</code></pre> 
<h2><a id="linux_616"></a>linux日志</h2> 
<p><img src="https://images2.imgbox.com/4a/a5/yn4QSXaa_o.png" alt="image-20220613145246204"></p> 
<h2><a id="linux_620"></a>linux入侵排查思路</h2> 
<ol><li>账号安全查看/etc/passwd /etc/shadow</li><li>历史命令 .bash_history</li><li>异常端口 netstat -a -t -u</li><li>检查异常进程 ps</li><li>检查开机启动项 /etc/rc.local</li><li>检查定时任务 crontab -l</li><li>检查服务 chkconfig -list</li><li>检查异常文件 找.php后缀文件</li><li>检查系统日志</li></ol> 
<h2><a id="linux_632"></a>linux加固思路</h2> 
<ol><li>删除无用账号</li><li>检查特殊账号</li><li>添加口令策略</li><li>限制su</li><li>进制root直接登录</li><li>设置隐藏文件属性(先最小,后加)</li><li>关闭不必要服务</li><li>更改ssh端口号 防爆破</li><li>记录日志</li></ol> 
<h2><a id="_644"></a>免杀有了解吗？</h2> 
<p>免杀大概分为两种情况</p> 
<ol><li>二进制免杀(无源码),只能通过修改asm代码 二进制数据 其他数据来完成免杀</li><li>有源码的免杀,可以通过修改源代码来完成免杀,也可以结合二进制免杀的技术</li></ol> 
<p>免杀也可以分为这两种情况</p> 
<ol><li>静态文件免杀,被杀毒软件病毒 云查杀了,也就是文件特征码在病毒库了.免杀方式可能是上面的两种方式,看情况</li><li>动态行为免杀,运行中执行的某些行为被杀毒软件拦截报读.行为免杀如果没有源码就不是很好搞了</li></ol> 
<p><img src="https://images2.imgbox.com/b4/57/tw1Cuplq_o.png" alt="image-20220614103931753"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f99b6fab2e25b0b4dbcc018e7da07083/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何复制文件到docker容器中（实操）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1736cc50f79470ea1d69a2ccf40164f1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">csdn博客转markdown</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>