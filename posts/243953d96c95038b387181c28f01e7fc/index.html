<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android WebSocketçŠ¶æ€ç®¡ç†æ¡†æ¶ - WebSocketGo - ç¼–ç¨‹çˆ±å¥½è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android WebSocketçŠ¶æ€ç®¡ç†æ¡†æ¶ - WebSocketGo" />
<meta property="og:description" content="é˜…è¯»æœ¬æ–‡éœ€è¦ Integer.MAX_VALUE åˆ†é’Ÿã€‚
æ•…äº‹èƒŒæ™¯ ç¬”è€…æ‰€åœ¨çš„å…¬å¸ä¸»è¥ä¸šåŠ¡æ˜¯æ™ºèƒ½å®¶å±…ï¼Œç¬”è€…åœ¨å…¬å¸è´Ÿè´£çš„Androidç«¯Appçš„å¼€å‘ã€‚å…³äºæ™ºèƒ½å®¶å±…ï¼Œä¼°è®¡ç°åœ¨ç™¾åˆ†ä¹‹å…«ä¹åçš„ç«¥é‹éƒ½å¬è¿‡ï¼Œä½†çœŸæ­£äº†è§£æˆ–è€…ä½¿ç”¨è¿‡çš„ä¼°è®¡å°±ä¸å å¤šæ•°äº†ã€‚æœ¬æ–‡ä¸è°ˆè¡Œä¸šå‰æ™¯ï¼Œåªè°ˆæŠ€æœ¯ã€‚
ä¸ºäº†æ–¹ä¾¿å¤§å®¶æ›´åŠ äº†è§£æ•…äº‹çš„èƒŒæ™¯ï¼Œé¡ºä¾¿ç§‘æ™®ä¸€ä¸‹æ™ºèƒ½å®¶å±…ï¼Œæƒ³ç›´å¥”WebSocketä¸»é¢˜çš„ç«¥é‹å¯ä»¥ç›´æ¥ç¬¬äºŒç« èŠ‚ã€‚
æ™ºèƒ½å®¶å±…ï¼Œç®—æ˜¯ç‰©è”ç½‘çš„ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯ã€‚ä»€ä¹ˆæ˜¯ç‰©è”ç½‘å‘¢ï¼Œå­—é¢æ„æ€å°±æ˜¯æŠŠä¼—å¤šç‰©ä½“è¿æ¥èµ·æ¥ç»„æˆä¸€ä¸ªç½‘ç»œï¼Œè‹±æ–‡æ˜¯Internet of thingsï¼ˆIoTï¼‰ã€‚å°åˆ°ä¸€ä¸ªä½ çš„æ‰‹æœºè·Ÿè“ç‰™è€³æœºï¼Œå¤§åˆ°ä¸€ä¸ªåŸå¸‚çš„å„ä¸ªè§’è½ï¼Œç©¶æå½¢æ€å°±æ˜¯â€œä¸‡ç‰©äº’è”â€ã€‚ï¼ˆä¸ºä»€ä¹ˆçªç„¶æƒ³èµ·ä¸‡ä½›æœå®— -_-!ï¼‰
IoTå…¶å®ä¸åœ¨æ„ç½‘ç»œçš„åè®®ï¼Œä¹Ÿä¸åœ¨æ„è¿æ¥çš„åˆ°åº•æ˜¯ä»€ä¹ˆä¸œä¸œï¼Œå°±è¿™ç§å½¢æ€æœ¬èº«è€Œè¨€ï¼Œå°±æ˜¯IoTã€‚å…¶å®è¿™ä¸ªæ¦‚å¿µå…¶å®å¾ˆæ—©å°±æœ‰äº†ï¼Œåœ¨ç¬”è€…ä¸Šå¤§å­¦é‚£ä¼šï¼Œä¸æ€•æš´éœ²å¹´é¾„çš„è¯´æ˜¯åœ¨09åˆ°10å¹´å·¦å³å°±å¬è¯´è¿‡ç‰©è”ç½‘è¿™ä¸ªè¯ã€‚è¿˜è®°å¾—å®éªŒè¯¾çš„GPRSæ™ºèƒ½æŠ„è¡¨ç³»ç»Ÿä¹ˆï¼Œä½ å¯èƒ½æ²¡æœ‰è§‰å¾—å¤šä¹ˆé«˜å¤§ä¸Šï¼Œä¸å°±æ˜¯æ°´è¡¨ä¸Šæ’ä¸ªSIMå¡ï¼Œå®šæœŸæŠŠå€¼å‘åˆ°å®¢æˆ·ç«¯ä¸Šä¹ˆï¼Œå†ä¹Ÿä¸æ€•è¢«äººä¸Šé—¨æŸ¥æ°´è¡¨å•¦~ æ²¡é”™ï¼Œè¿™ä¹Ÿæ˜¯IoTçš„ä¸€ç§ä½“ç°ã€‚
ä½†è¿™ä¹ˆå¤šå¹´ï¼Œç‰©è”ç½‘ä½†ä¸€ç›´ä¸æ¸©ä¸ç«ã€‚è‡³äºä¸ºä»€ä¹ˆæœ€è¿‘å‡ å¹´åˆè¢«æå‡ºæ¥å‘¢ï¼Œæ™ºèƒ½å®¶å±…åœ¨å…¶ä¸­æ‰®æ¼”äº†å¾ˆé‡è¦çš„ä½œç”¨ã€‚å¦å¤–AIè¿™æŠŠç«ä¹Ÿèµ·åˆ°äº†æ¨æ³¢åŠ©æ¾œçš„ä½œç”¨ï¼Œä»»ä½•äº§å“éƒ½è¦åŠ ä¸Šæ™ºèƒ½äºŒå­—ã€‚æ‰€ä»¥æœ‰äº†AI &#43; IoTï¼Œä¹Ÿå°±æ˜¯AIOTã€‚å…·ä½“å°±ä¸è¯¦è¿°äº†ï¼Œä»¥åå¯ä»¥å†å•å¼€ä¸€æ–‡è¯¦ç»†ä»‹ç»ä¸‹ç‰©è”ç½‘ã€‚
è¯´å›æ™ºèƒ½å®¶å±…ï¼Œæ™ºèƒ½å®¶å±…æ˜¯å®¶åº­ä¸ºå•ä½çš„ç‰©è”ç½‘ï¼Œç®€å•è¯´å°±æ˜¯ä½ å¯ä»¥é€šè¿‡å®¶é‡Œä¸­æ§æˆ–è€…Appæ§åˆ¶åˆ¶å®¶é‡Œçš„ç¯ã€æ’åº§ã€ç›‘æ§ã€ç”µå™¨ç­‰ç­‰ã€‚
æ–‡å­—ç®—ä¸ªçƒï¼Œä¸€å›¾è§£åƒæ„ï¼Œä¸Šæ¶æ„å›¾
ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œç½‘å…³çš„ä½œç”¨æ˜¯è´Ÿè´£è¿æ¥å±‹å†…çš„æ‰€æœ‰è®¾å¤‡ï¼Œç½‘å…³å’Œè®¾å¤‡ä¹‹é—´ä¸€èˆ¬ä¸ä¼šé‡‡ç”¨HTTPï¼ˆä¸ªåˆ«å•å“é™¤å¤–ï¼‰ï¼Œè€Œä¼šé‡‡ç”¨æ¯”å¦‚zigbeeã€loraç­‰è¿‘åœºé€šä¿¡åè®®ï¼ˆæˆ–è€…ç›´æ¥ç”¨æœ‰çº¿æ–¹å¼æ›´ç¨³å®šï¼‰ï¼Œå› ä¸ºåŠŸè€—ä½ï¼Œæ¯”è¾ƒçœç”µï¼Œä½ æƒ³å®¶é‡Œå¦‚æœè£…äº†å‡ åä¸ªå¼€å…³é¢æ¿ï¼Œæ€»å½’æ¯ä¸ªæœˆä¹Ÿèƒ½èŠ‚çº¦åå‡ äºŒåå—é’±çš„ç”µè´¹å§ã€‚å½“ç„¶æœ€é‡è¦çš„åŸå› è¿˜æ˜¯å› ä¸ºæ–¹æ¡ˆä¹Ÿæ¯”è¾ƒæˆç†Ÿã€‚æ‰€ä»¥ä½¿ç”¨è¿™ç±»è®¾å¤‡ä¹‹å‰éœ€è¦æœ‰ä¸ªâ€œç»„ç½‘â€çš„æ“ä½œï¼ŒæŠŠè®¾å¤‡ç»„åˆ°ç½‘å…³ä¸Šã€‚å¦‚æœæ–­å¼€äº†ï¼Œç½‘å…³å°±è®¤ä¸ºè®¾å¤‡ç¦»çº¿äº†ã€‚
ç½‘å…³ä¼šå°†è®¾å¤‡çš„çŠ¶æ€ä¸ŠæŠ¥ç»™äº‘å¹³å°ï¼Œäº‘å¹³å°å°±å°†çŠ¶æ€ä¸‹å‘ç»™å®¢æˆ·ç«¯äº†ã€‚åŒæ ·ï¼Œå®¢æˆ·ç«¯æ§åˆ¶è®¾å¤‡å°±æ˜¯ä¸ªåå‘çš„è¿‡ç¨‹ã€‚å½“ç„¶å¦‚æœä»¥å5Gæ™®åŠäº†ï¼Œè®¾å¤‡ç›´æ¥é€šè¿‡5Gç½‘ç»œè¿æ¥äº‘å¹³å°ï¼Œå› ä¸º5GåŠŸè€—ä½ã€å»¶è¿Ÿä½ã€é€Ÿåº¦å¿«ï¼Œå°±å¯ä»¥ä¸éœ€è¦ç½‘å…³äº†ã€‚
æ•´ä½“çš„æ¶æ„è¿˜ç®—æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå½“ç„¶ä¸­é—´ä¹Ÿæœ‰å¾ˆå¤šå¤æ‚çš„é€»è¾‘ï¼Œæ¶‰åŠåˆ°æ¯”å¦‚è®¾å¤‡çŠ¶æ€ã€äººå‘˜ã€æƒé™ã€æˆ¿å±‹çš„ç®¡ç†ç­‰ç­‰è¿™é‡Œå°±ä¸å…³æ³¨äº†ã€‚
åœ¨æœåŠ¡å™¨ä¸‹å‘è®¾å¤‡çŠ¶æ€çš„æ—¶å€™å°±æ¶‰åŠåˆ°äº†æ¨é€ã€‚å› ä¸ºæ™ºèƒ½å®¶å±…æœ‰æƒ…æ™¯æ¨¡å¼çš„æ¦‚å¿µï¼Œæ¯”å¦‚å›å®¶æ¨¡å¼ï¼Œæ‰§è¡Œä¸€ä¸ªè¯·æ±‚ï¼Œå’”å’”æ‰“å¼€åå‡ ä¸ªç¯ï¼Œæ‰€ä»¥é è¯·æ±‚çš„è¿”å›å€¼åˆ¤æ–­çŠ¶æ€æ˜¯ä¸å¤ªç°å®çš„ï¼Œåªèƒ½ä¾é æ¨é€ã€‚
ç”±äºä¸šåŠ¡çš„ç‰¹æ®Šæ€§ï¼Œæ™ºèƒ½å®¶å±…çš„æ¨é€éœ€è¦æœ‰è¾ƒé«˜çš„å®æ—¶æ€§ï¼Œæ¯”å¦‚ç”¨æˆ·æ‰“å¼€äº†ç¯ï¼ˆæ— è®ºåœ¨appä¸Šæ‰“å¼€æˆ–è€…ç›´æ¥æ‰“å¼€ï¼‰ï¼Œappä¸Šçš„ç¯çš„çŠ¶æ€éƒ½éœ€è¦ç«‹å³å˜æˆå¼€ã€‚å¦‚æœç­‰ä¸ª3ã€5ç§’çŠ¶æ€å†å‘ç”Ÿæ”¹å˜ï¼Œè¿™æ ·çš„ç”¨æˆ·ä½“éªŒå¾ˆä¸å¥½ã€‚
æˆ‘ä»¬æœ€æ—©ä½¿ç”¨çš„æ˜¯æŸå…‰æ¨é€ï¼Œå‘ç°å»¶è¿Ÿä¸¥é‡ï¼Œæœ‰æ—¶éœ€è¦ç­‰åå‡ ç§’æ‰æ”¶åˆ°æ¨é€ï¼Œæ¯•ç«Ÿé€‚ç”¨åœºæ™¯æ¯•ç«Ÿä¸ä¸€æ ·ã€‚æ‰€ä»¥å†³å®šè‡ªå»ºé•¿è¿æ¥å½“æ¨é€ã€‚ç»è¿‡é€‰å‹ï¼Œå†³å®šé‡‡ç”¨æœ¬æ–‡çš„ä¸»è§’ï¼ŒWebSocketã€‚
WebSocketçŠ¶æ€ç®¡ç†ç°å­˜çš„é—®é¢˜ å¸‚é¢ä¸Šæœ‰å¾ˆå¤šç°æˆçš„WebSocketè¿æ¥åº“ï¼Œæ¯”è¾ƒè‘—åçš„æœ‰Java-WebSocketï¼ŒOkHttpä¹Ÿè‡ªå¸¦WebSocketæ”¯æŒã€‚
æœ€åˆå› ä¸ºé¡¹ç›®å†…å·²ç»æ¥å…¥äº†OkHttpï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨äº†OkHttpã€‚ä½¿ç”¨çš„æ–¹å¼å¾ˆç®€å•ï¼Œç†Ÿæ‚‰OkHttpçš„ç«¥é‹åº”è¯¥å¾ˆæ‡‚ï¼Œ
OkHttpClient client = OkHttpClient.Builder().build(); Request request = new Request.Builder().build(); client.newWebSocket(request, new WebSocketListener() { @Override public void onOpen(okhttp3.WebSocket webSocket, Response response) {} @Override public void onMessage(okhttp3.WebSocket webSocket, String text) {} @Override public void onClosed(okhttp3.WebSocket webSocket, int code, String reason) {} @Override public void onFailure(okhttp3.WebSocket webSocket, Throwable t, Response response) {} }); å¤åˆ¶ä»£ç  è°ƒç”¨æ–¹ä¾¿ï¼Œå›è°ƒçŠ¶æ€ä¹Ÿå¾ˆæ¸…æ™°ã€‚Java-Websocketä¹Ÿå·®ä¸å¤šç±»ä¼¼ï¼Œä½†æ€»ä½“æ¥è¯´æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/243953d96c95038b387181c28f01e7fc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-31T21:47:29+08:00" />
<meta property="article:modified_time" content="2022-05-31T21:47:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹çˆ±å¥½è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹çˆ±å¥½è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android WebSocketçŠ¶æ€ç®¡ç†æ¡†æ¶ - WebSocketGo</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>é˜…è¯»æœ¬æ–‡éœ€è¦ Integer.MAX_VALUE åˆ†é’Ÿã€‚</p> 
<h2><a id="_2"></a>æ•…äº‹èƒŒæ™¯</h2> 
<p>ç¬”è€…æ‰€åœ¨çš„å…¬å¸ä¸»è¥ä¸šåŠ¡æ˜¯æ™ºèƒ½å®¶å±…ï¼Œç¬”è€…åœ¨å…¬å¸è´Ÿè´£çš„Androidç«¯Appçš„å¼€å‘ã€‚å…³äºæ™ºèƒ½å®¶å±…ï¼Œä¼°è®¡ç°åœ¨ç™¾åˆ†ä¹‹å…«ä¹åçš„ç«¥é‹éƒ½å¬è¿‡ï¼Œä½†çœŸæ­£äº†è§£æˆ–è€…ä½¿ç”¨è¿‡çš„ä¼°è®¡å°±ä¸å å¤šæ•°äº†ã€‚æœ¬æ–‡ä¸è°ˆè¡Œä¸šå‰æ™¯ï¼Œåªè°ˆæŠ€æœ¯ã€‚</p> 
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶æ›´åŠ äº†è§£æ•…äº‹çš„èƒŒæ™¯ï¼Œé¡ºä¾¿ç§‘æ™®ä¸€ä¸‹æ™ºèƒ½å®¶å±…ï¼Œ<strong>æƒ³ç›´å¥”WebSocketä¸»é¢˜çš„ç«¥é‹å¯ä»¥ç›´æ¥ç¬¬äºŒç« èŠ‚</strong>ã€‚</p> 
<p>æ™ºèƒ½å®¶å±…ï¼Œç®—æ˜¯ç‰©è”ç½‘çš„ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯ã€‚ä»€ä¹ˆæ˜¯ç‰©è”ç½‘å‘¢ï¼Œå­—é¢æ„æ€å°±æ˜¯æŠŠä¼—å¤šç‰©ä½“è¿æ¥èµ·æ¥ç»„æˆä¸€ä¸ªç½‘ç»œï¼Œè‹±æ–‡æ˜¯Internet of thingsï¼ˆIoTï¼‰ã€‚å°åˆ°ä¸€ä¸ªä½ çš„æ‰‹æœºè·Ÿè“ç‰™è€³æœºï¼Œå¤§åˆ°ä¸€ä¸ªåŸå¸‚çš„å„ä¸ªè§’è½ï¼Œç©¶æå½¢æ€å°±æ˜¯â€œä¸‡ç‰©äº’è”â€ã€‚ï¼ˆä¸ºä»€ä¹ˆçªç„¶æƒ³èµ·ä¸‡ä½›æœå®— -_-!ï¼‰</p> 
<p>IoTå…¶å®ä¸åœ¨æ„ç½‘ç»œçš„åè®®ï¼Œä¹Ÿä¸åœ¨æ„è¿æ¥çš„åˆ°åº•æ˜¯ä»€ä¹ˆä¸œä¸œï¼Œå°±è¿™ç§å½¢æ€æœ¬èº«è€Œè¨€ï¼Œå°±æ˜¯IoTã€‚å…¶å®è¿™ä¸ªæ¦‚å¿µå…¶å®å¾ˆæ—©å°±æœ‰äº†ï¼Œåœ¨ç¬”è€…ä¸Šå¤§å­¦é‚£ä¼šï¼Œä¸æ€•æš´éœ²å¹´é¾„çš„è¯´æ˜¯åœ¨09åˆ°10å¹´å·¦å³å°±å¬è¯´è¿‡ç‰©è”ç½‘è¿™ä¸ªè¯ã€‚è¿˜è®°å¾—å®éªŒè¯¾çš„GPRSæ™ºèƒ½æŠ„è¡¨ç³»ç»Ÿä¹ˆï¼Œä½ å¯èƒ½æ²¡æœ‰è§‰å¾—å¤šä¹ˆé«˜å¤§ä¸Šï¼Œä¸å°±æ˜¯æ°´è¡¨ä¸Šæ’ä¸ªSIMå¡ï¼Œå®šæœŸæŠŠå€¼å‘åˆ°å®¢æˆ·ç«¯ä¸Šä¹ˆï¼Œå†ä¹Ÿä¸æ€•è¢«äººä¸Šé—¨æŸ¥æ°´è¡¨å•¦~ æ²¡é”™ï¼Œè¿™ä¹Ÿæ˜¯IoTçš„ä¸€ç§ä½“ç°ã€‚</p> 
<p>ä½†è¿™ä¹ˆå¤šå¹´ï¼Œç‰©è”ç½‘ä½†ä¸€ç›´ä¸æ¸©ä¸ç«ã€‚è‡³äºä¸ºä»€ä¹ˆæœ€è¿‘å‡ å¹´åˆè¢«æå‡ºæ¥å‘¢ï¼Œæ™ºèƒ½å®¶å±…åœ¨å…¶ä¸­æ‰®æ¼”äº†å¾ˆé‡è¦çš„ä½œç”¨ã€‚å¦å¤–AIè¿™æŠŠç«ä¹Ÿèµ·åˆ°äº†æ¨æ³¢åŠ©æ¾œçš„ä½œç”¨ï¼Œä»»ä½•äº§å“éƒ½è¦åŠ ä¸Šæ™ºèƒ½äºŒå­—ã€‚æ‰€ä»¥æœ‰äº†AI + IoTï¼Œä¹Ÿå°±æ˜¯AIOTã€‚å…·ä½“å°±ä¸è¯¦è¿°äº†ï¼Œä»¥åå¯ä»¥å†å•å¼€ä¸€æ–‡è¯¦ç»†ä»‹ç»ä¸‹ç‰©è”ç½‘ã€‚</p> 
<p>è¯´å›æ™ºèƒ½å®¶å±…ï¼Œæ™ºèƒ½å®¶å±…æ˜¯å®¶åº­ä¸ºå•ä½çš„ç‰©è”ç½‘ï¼Œç®€å•è¯´å°±æ˜¯ä½ å¯ä»¥é€šè¿‡å®¶é‡Œä¸­æ§æˆ–è€…Appæ§åˆ¶åˆ¶å®¶é‡Œçš„ç¯ã€æ’åº§ã€ç›‘æ§ã€ç”µå™¨ç­‰ç­‰ã€‚</p> 
<p>æ–‡å­—ç®—ä¸ªçƒï¼Œä¸€å›¾è§£åƒæ„ï¼Œä¸Šæ¶æ„å›¾</p> 
<p><img src="https://images2.imgbox.com/5a/d6/YdCgVQFq_o.png" alt=""></p> 
<p>ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œç½‘å…³çš„ä½œç”¨æ˜¯è´Ÿè´£è¿æ¥å±‹å†…çš„æ‰€æœ‰è®¾å¤‡ï¼Œç½‘å…³å’Œè®¾å¤‡ä¹‹é—´ä¸€èˆ¬ä¸ä¼šé‡‡ç”¨HTTPï¼ˆä¸ªåˆ«å•å“é™¤å¤–ï¼‰ï¼Œè€Œä¼šé‡‡ç”¨æ¯”å¦‚zigbeeã€loraç­‰è¿‘åœºé€šä¿¡åè®®ï¼ˆæˆ–è€…ç›´æ¥ç”¨æœ‰çº¿æ–¹å¼æ›´ç¨³å®šï¼‰ï¼Œå› ä¸ºåŠŸè€—ä½ï¼Œæ¯”è¾ƒçœç”µï¼Œä½ æƒ³å®¶é‡Œå¦‚æœè£…äº†å‡ åä¸ªå¼€å…³é¢æ¿ï¼Œæ€»å½’æ¯ä¸ªæœˆä¹Ÿèƒ½èŠ‚çº¦åå‡ äºŒåå—é’±çš„ç”µè´¹å§ã€‚å½“ç„¶æœ€é‡è¦çš„åŸå› è¿˜æ˜¯å› ä¸ºæ–¹æ¡ˆä¹Ÿæ¯”è¾ƒæˆç†Ÿã€‚æ‰€ä»¥ä½¿ç”¨è¿™ç±»è®¾å¤‡ä¹‹å‰éœ€è¦æœ‰ä¸ªâ€œç»„ç½‘â€çš„æ“ä½œï¼ŒæŠŠè®¾å¤‡ç»„åˆ°ç½‘å…³ä¸Šã€‚å¦‚æœæ–­å¼€äº†ï¼Œç½‘å…³å°±è®¤ä¸ºè®¾å¤‡ç¦»çº¿äº†ã€‚</p> 
<p>ç½‘å…³ä¼šå°†è®¾å¤‡çš„çŠ¶æ€ä¸ŠæŠ¥ç»™äº‘å¹³å°ï¼Œäº‘å¹³å°å°±å°†çŠ¶æ€ä¸‹å‘ç»™å®¢æˆ·ç«¯äº†ã€‚åŒæ ·ï¼Œå®¢æˆ·ç«¯æ§åˆ¶è®¾å¤‡å°±æ˜¯ä¸ªåå‘çš„è¿‡ç¨‹ã€‚å½“ç„¶å¦‚æœä»¥å5Gæ™®åŠäº†ï¼Œè®¾å¤‡ç›´æ¥é€šè¿‡5Gç½‘ç»œè¿æ¥äº‘å¹³å°ï¼Œå› ä¸º5GåŠŸè€—ä½ã€å»¶è¿Ÿä½ã€é€Ÿåº¦å¿«ï¼Œå°±å¯ä»¥ä¸éœ€è¦ç½‘å…³äº†ã€‚</p> 
<p>æ•´ä½“çš„æ¶æ„è¿˜ç®—æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå½“ç„¶ä¸­é—´ä¹Ÿæœ‰å¾ˆå¤šå¤æ‚çš„é€»è¾‘ï¼Œæ¶‰åŠåˆ°æ¯”å¦‚è®¾å¤‡çŠ¶æ€ã€äººå‘˜ã€æƒé™ã€æˆ¿å±‹çš„ç®¡ç†ç­‰ç­‰è¿™é‡Œå°±ä¸å…³æ³¨äº†ã€‚</p> 
<p>åœ¨æœåŠ¡å™¨ä¸‹å‘è®¾å¤‡çŠ¶æ€çš„æ—¶å€™å°±æ¶‰åŠåˆ°äº†æ¨é€ã€‚å› ä¸ºæ™ºèƒ½å®¶å±…æœ‰æƒ…æ™¯æ¨¡å¼çš„æ¦‚å¿µï¼Œæ¯”å¦‚å›å®¶æ¨¡å¼ï¼Œæ‰§è¡Œä¸€ä¸ªè¯·æ±‚ï¼Œå’”å’”æ‰“å¼€åå‡ ä¸ªç¯ï¼Œæ‰€ä»¥é è¯·æ±‚çš„è¿”å›å€¼åˆ¤æ–­çŠ¶æ€æ˜¯ä¸å¤ªç°å®çš„ï¼Œåªèƒ½ä¾é æ¨é€ã€‚</p> 
<p>ç”±äºä¸šåŠ¡çš„ç‰¹æ®Šæ€§ï¼Œæ™ºèƒ½å®¶å±…çš„æ¨é€éœ€è¦æœ‰è¾ƒé«˜çš„å®æ—¶æ€§ï¼Œæ¯”å¦‚ç”¨æˆ·æ‰“å¼€äº†ç¯ï¼ˆæ— è®ºåœ¨appä¸Šæ‰“å¼€æˆ–è€…ç›´æ¥æ‰“å¼€ï¼‰ï¼Œappä¸Šçš„ç¯çš„çŠ¶æ€éƒ½éœ€è¦ç«‹å³å˜æˆå¼€ã€‚å¦‚æœç­‰ä¸ª3ã€5ç§’çŠ¶æ€å†å‘ç”Ÿæ”¹å˜ï¼Œè¿™æ ·çš„ç”¨æˆ·ä½“éªŒå¾ˆä¸å¥½ã€‚</p> 
<p>æˆ‘ä»¬æœ€æ—©ä½¿ç”¨çš„æ˜¯æŸå…‰æ¨é€ï¼Œå‘ç°å»¶è¿Ÿä¸¥é‡ï¼Œæœ‰æ—¶éœ€è¦ç­‰åå‡ ç§’æ‰æ”¶åˆ°æ¨é€ï¼Œæ¯•ç«Ÿé€‚ç”¨åœºæ™¯æ¯•ç«Ÿä¸ä¸€æ ·ã€‚æ‰€ä»¥å†³å®šè‡ªå»ºé•¿è¿æ¥å½“æ¨é€ã€‚ç»è¿‡é€‰å‹ï¼Œå†³å®šé‡‡ç”¨æœ¬æ–‡çš„ä¸»è§’ï¼ŒWebSocketã€‚</p> 
<h2><a id="WebSocket_33"></a>WebSocketçŠ¶æ€ç®¡ç†ç°å­˜çš„é—®é¢˜</h2> 
<p>å¸‚é¢ä¸Šæœ‰å¾ˆå¤šç°æˆçš„WebSocketè¿æ¥åº“ï¼Œæ¯”è¾ƒè‘—åçš„æœ‰Java-WebSocketï¼ŒOkHttpä¹Ÿè‡ªå¸¦WebSocketæ”¯æŒã€‚</p> 
<p>æœ€åˆå› ä¸ºé¡¹ç›®å†…å·²ç»æ¥å…¥äº†OkHttpï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨äº†OkHttpã€‚ä½¿ç”¨çš„æ–¹å¼å¾ˆç®€å•ï¼Œç†Ÿæ‚‰OkHttpçš„ç«¥é‹åº”è¯¥å¾ˆæ‡‚ï¼Œ</p> 
<pre><code>OkHttpClient client = OkHttpClient.Builder().build();
Request request = new Request.Builder().build();
client.newWebSocket(request, new WebSocketListener() {
    @Override
    public void onOpen(okhttp3.WebSocket webSocket, Response response) {}

    @Override
    public void onMessage(okhttp3.WebSocket webSocket, String text) {}

    @Override
    public void onClosed(okhttp3.WebSocket webSocket, int code, String reason) {}

    @Override
    public void onFailure(okhttp3.WebSocket webSocket, Throwable t, Response response) {}
});
å¤åˆ¶ä»£ç  
</code></pre> 
<p>è°ƒç”¨æ–¹ä¾¿ï¼Œå›è°ƒçŠ¶æ€ä¹Ÿå¾ˆæ¸…æ™°ã€‚Java-Websocketä¹Ÿå·®ä¸å¤šç±»ä¼¼ï¼Œä½†æ€»ä½“æ¥è¯´æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p> 
<h3><a id="1__61"></a>1. <strong>å¿ƒè·³æœºåˆ¶</strong></h3> 
<p>æ— è®ºOkHttpè¿˜æ˜¯Java-WebSocketï¼Œéƒ½æ˜¯æœ‰å¿ƒè·³æœºåˆ¶çš„ã€‚ä½†OkHttpçš„å¿ƒè·³é—´éš”ï¼Œä¹Ÿå°±æ˜¯pingIntervalï¼Œåœ¨åˆ›å»ºclientæ—¶å€™å°±å·²ç»å›ºå®šäº†ï¼Œæ˜¯ä¸æ”¯æŒä¸­é€”è°ƒæ•´çš„ã€‚ï¼ˆJakeå¤§ç¥è¿˜åœ¨githubä¸Šå›å¤è¿‡ç›¸å…³é—®é¢˜ï¼Œæ„æ€æ˜¯è°ƒç”¨è€…ä¸éœ€è¦å…³æ³¨è¿™äº›ã€‚ä½†å¾€å¾€ç¡®å®æœ‰è¿™ç§éœ€æ±‚çš„å•ŠğŸ˜¢ğŸ˜¢ğŸ˜¢ï¼‰</p> 
<p>æ¯”å¦‚åº”ç”¨åœ¨å‰å°çš„æ—¶å€™å¿ƒè·³å¯èƒ½ç¨å¾®é¢‘ç¹ç‚¹ï¼Œä½†åº”ç”¨å‡ºäºåå°æ—¶å‡ºäºçœç”µçš„ä¼˜åŒ–ï¼Œå¿ƒè·³é—´éš”å¯ä»¥è®¾ç½®çš„ç¨å¾®é•¿ä¸€ç‚¹ã€‚å¦‚æœéœ€è¦è°ƒæ•´å¿ƒè·³ï¼Œéœ€è¦åˆ›å»ºæ–°çš„clientï¼Œæ–­æ‰æ—§çš„ï¼Œé‡æ–°è¿æ¥ã€‚æœ‰ä¸¤ç§ç­–ç•¥ï¼š</p> 
<ul><li>å…ˆæ–­æ—§çš„ï¼Œå†è¿æ–°çš„ã€‚å¦‚æœæœåŠ¡ç«¯çš„æ¶ˆæ¯æ²¡æœ‰åšç¼“å­˜ç­–ç•¥ï¼Œåœ¨æ–­æ‰å’Œæ–°è¿æ¥çš„é—´éš”å¯èƒ½ä¼šæ¼æ‰æ¶ˆæ¯ã€‚</li><li>å…ˆè¿æ–°çš„ï¼Œå†æ–­æ—§çš„ã€‚è¿™è¦åœ¨ä¸€ç¬æ—¶å°±ä¼šæœ‰ä¸¤ä¸ªè¿æ¥è¿ä¸ŠæœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¯¹äºæ¶ˆæ¯çš„çŠ¶æ€å¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚</li></ul> 
<p>ä»¥ä¸Šä¸¤ç§ç­–ç•¥éƒ½éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å…ˆçº¦å®šå¥½ï¼ŒæœåŠ¡ç«¯åšé¢å¤–å¤„ç†ï¼Œå¢åŠ ç ”å‘æˆæœ¬ä¸è¯´ï¼Œä¹Ÿæœ‰å¢åŠ å‡ºé”™æ¦‚ç‡ã€‚</p> 
<h3><a id="2__73"></a>2. <strong>æ–­æ‰é‡è¿</strong></h3> 
<p>é€šå¸¸è¿æ¥æ–­æ‰æœ‰ä»¥ä¸‹è¿™ä¹ˆå‡ ç§æƒ…å†µï¼š</p> 
<ul><li>å®¢æˆ·ç«¯ä¸»åŠ¨æ–­ï¼ˆæ— éœ€é‡è¿ï¼‰</li><li>æœåŠ¡ç«¯ä¸»åŠ¨æ–­ï¼ˆæ— éœ€é‡è¿ï¼‰</li><li>å®¢æˆ·ç«¯å› ä¸ºç½‘ç»œåŸå› ï¼Œæ¯”å¦‚æ‰‹æœºæ–­ç½‘ï¼Œéä¸»åŠ¨æ®µï¼ˆéœ€è¦é‡è¿ï¼‰</li><li>è¿è¥å•†å› è¿æ¥ç©ºé—²å¯¼è‡´çš„è¿æ¥æ–­å¼€ï¼ˆéœ€è¦é‡è¿ï¼‰</li></ul> 
<p>å¯¹äºé‡è¿ï¼Œè¿˜éœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯é‡è¿çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ‰‹æœºç½‘æ–­äº†ï¼Œä¸åœåœ°é‡è¿åŒæ ·æ˜¯å¤±è´¥ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±åˆ¶å®šä¸€ä¸ªé‡è¿æ¬¡æ•°å’Œæ—¶é—´é—´éš”å…³ç³»ã€‚</p> 
<p>æ€»ä¹‹ï¼Œé‡è¿çš„é€»è¾‘å’Œç­–ç•¥æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±ç»´æŠ¤çš„ã€‚</p> 
<h3><a id="3__89"></a>3. <strong>å¤šçº¿ç¨‹</strong></h3> 
<p>OkHttpä¸­å…³äºçŠ¶æ€çš„å›è°ƒå‘ç”Ÿåœ¨OkHttpåˆ›å»ºçš„å­çº¿ç¨‹ä¸­ï¼Œæ ¹æ®çŠ¶æ€æˆ‘ä»¬éœ€è¦å‘èµ·é‡è¿ã€‚å¦‚æœè¿™æ—¶å€™æˆ‘ä»¬çš„åº”ç”¨å‘ç”Ÿäº†å‰åå°åˆ‡æ¢åˆè¦åˆ›å»ºæ–°è¿æ¥ï¼Œå„ç§è¿æ¥ï¼ˆé‡è¿ï¼‰äº¤ç»‡åœ¨ä¸€èµ·ï¼Œé‚£çœŸæ˜¯ä¸€å›¢ä¹±éº»ã€‚éœ€è¦è€ƒè™‘çš„é—®é¢˜æœ‰ï¼š</p> 
<ul><li>åŒæ—¶å‘èµ·å¤šä¸ªè¿æ¥çš„æƒ…å†µï¼Œéœ€è¦ç­‰ä¸Šä¸€ä¸ªè¿æ¥è¯·æ±‚æ‰§è¡Œå®Œï¼Œå†æ ¹æ®è¯·æ±‚å‘èµ·ä¸‹ä¸€ä¸ªè¿æ¥è¯·æ±‚ã€‚ä¸Šä¸€ä¸ªè¿æ¥å¦‚æœè¿ä¸Šäº†ï¼Œé‚£ä¸‹ä¸€ä¸ªç­‰å¾…çš„è¿æ¥è¯·æ±‚å°±å¯ä»¥ç›´æ¥è·³è¿‡äº†ã€‚</li><li>è¿æ¥è¯·æ±‚çš„å‘ç”Ÿåœ¨ä¸åŒçº¿ç¨‹ä¸­ï¼ŒçŠ¶æ€çš„åŒæ­¥</li></ul> 
<h2><a id="_97"></a>è§£å†³æ–¹æ¡ˆ</h2> 
<p>å› ä¸ºç¬”è€…é¡¹ç›®å†…ç”¨çš„æ˜¯OkHttpï¼Œæ‰€ä»¥æœ€åˆçš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯é’ˆå¯¹äºOkHttpæ¥åšçš„ã€‚å¤§è‡´æ€è·¯å¦‚ä¸‹ï¼š</p> 
<h3><a id="1__102"></a>1. <strong>å¿ƒè·³æœºåˆ¶</strong></h3> 
<h4><a id="11_OkHttp_WebSocket_105"></a>1.1 OkHttp WebSocketå¿ƒè·³åˆ†æ</h4> 
<p>å‰é¢è¯´åˆ°è¿‡ï¼ŒOkHttpæ˜¯ä¸æ”¯æŒåŠ¨æ€è°ƒæ•´å¿ƒè·³çš„ï¼Œé‚£OkHttpæ˜¯æ€ä¹ˆç»´æŠ¤å¿ƒè·³çš„å‘¢ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒçš„æºç ï¼š</p> 
<p>åˆ†ææºç ï¼Œæˆ‘ä»¬ä»è°ƒç”¨å…¥å£client.newWebSocketå¼€å§‹ï¼š</p> 
<pre><code>// newWebSocket@OkHttpClient.java

/**
 * å†…éƒ¨ä½¿ç”¨RealWebSocketç±»æ¥å‘èµ·è¿æ¥
 */
@Override public WebSocket newWebSocket(Request request, WebSocketListener listener) {
    // æ³¨æ„è¿™é‡Œçš„pingIntervalï¼Œæ‰€ä»¥åœ¨åˆ›å»ºRealWebSocketæ—¶å°±å·²ç»å›ºå®šï¼Œæ²¡æ³•å†ä¿®æ”¹äº†ã€‚
    RealWebSocket webSocket = new RealWebSocket(request, listener, new Random(), pingInterval);
    webSocket.connect(this);
    return webSocket;
}
å¤åˆ¶ä»£ç 

// RealWebSocket@RealWebSocket.java

public RealWebSocket(Request request, WebSocketListener listener, Random random, long pingIntervalMillis) {
    this.originalRequest = request;
    this.listener = listener;
    this.random = random;
    this.pingIntervalMillis = pingIntervalMillis;
    // ...
    // è¿™é‡Œçš„writerRunnableæ˜¯ç”¨æ¥å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯çš„ï¼Œåœ¨åé¢è¯¦è¿°
    this.writerRunnable = new Runnable() {
      @Override public void run() {
        try {
          while (writeOneFrame()) {
          }
        } catch (IOException e) {
          failWebSocket(e, null);
        }
      }
    };
  }
  
  public void connect(OkHttpClient client) {
    // WebSocketåè®®ç›¸å…³çš„header
    client = client.newBuilder()
        .eventListener(EventListener.NONE)
        .protocols(ONLY_HTTP1)
        .build();
    final Request request = originalRequest.newBuilder()
        .header("Upgrade", "websocket")
        .header("Connection", "Upgrade")
        .header("Sec-WebSocket-Key", key)
        .header("Sec-WebSocket-Version", "13")
        .build();
    call = Internal.instance.newWebSocketCall(client, request);
    call.enqueue(new Callback() {
      @Override public void onResponse(Call call, Response response) {
        try {
          checkResponse(response);
        } catch (ProtocolException e) {
          failWebSocket(e, response);
          closeQuietly(response);
          return;
        }

        // Promote the HTTP streams into web socket streams.
        StreamAllocation streamAllocation = Internal.instance.streamAllocation(call);
        streamAllocation.noNewStreams(); // Prevent connection pooling!
        Streams streams = streamAllocation.connection().newWebSocketStreams(streamAllocation);

        // Process all web socket messages.
        try {
          // è¿æ¥æˆåŠŸï¼Œè°ƒç”¨listernçš„onOpen
          listener.onOpen(RealWebSocket.this, response);
          String name = "OkHttp WebSocket " + request.url().redact();
          // é‡ç‚¹1ï¼šåˆ›å»ºreaderå’Œwriterï¼Œè§ä¸‹æ–‡
          initReaderAndWriter(name, streams);
          streamAllocation.connection().socket().setSoTimeout(0);
          // é‡ç‚¹2ï¼šè½®è¯¢è¯»
          loopReader();
        } catch (Exception e) {
          failWebSocket(e, null);
        }
      }

      @Override public void onFailure(Call call, IOException e) {
        failWebSocket(e, null);
      }
    });
  }
  
   public void initReaderAndWriter(String name, Streams streams) throws IOException {
    synchronized (this) {
      this.streams = streams;
      this.writer = new WebSocketWriter(streams.client, streams.sink, random);
      // åˆ›å»ºScheduledçº¿ç¨‹æ± 
      this.executor = new ScheduledThreadPoolExecutor(1, Util.threadFactory(name, false));
      if (pingIntervalMillis != 0) {
        // åˆ©ç”¨çº¿ç¨‹æ± å®šæœŸè¿è¡ŒPingRunnableï¼Œè¶Šæ¥è¶Šæ¥è¿‘çœŸåƒäº†
        executor.scheduleAtFixedRate(
            new PingRunnable(), pingIntervalMillis, pingIntervalMillis, MILLISECONDS);
      }
      if (!messageAndCloseQueue.isEmpty()) {
        runWriter(); // Send messages that were enqueued before we were connected.
      }
    }
    // åˆ›å»ºreaderï¼Œç”¨æ¥è¯»å–æ¶ˆæ¯
    reader = new WebSocketReader(streams.client, streams.source, this);
  }
å¤åˆ¶ä»£ç  
</code></pre> 
<p>é‡ç‚¹çœ‹ä¸€ä¸‹PingRunnableéƒ½åšäº†ä»€ä¹ˆ</p> 
<pre><code>private final class PingRunnable implements Runnable {
    PingRunnable() {
    }

    @Override public void run() {
      // å‘é€ping frame
      writePingFrame();
    }
  }

  void writePingFrame() {
    WebSocketWriter writer;
    int failedPing;
    synchronized (this) {
      if (failed) return;
      writer = this.writer;
      // åˆ¤æ–­æ˜¯å¦åœ¨ç­‰å¾…pongï¼Œå¦‚æœåœ¨ç­‰å¾…failedPingç½®ä¸ºsentPingCountï¼Œå¦åˆ™ç½®ä¸º-1
      failedPing = awaitingPong ? sentPingCount : -1;
      sentPingCount++;
      awaitingPong = true;
    }

    if (failedPing != -1) {
      // è¿è¡Œåˆ°æ­¤å¤„çš„æ¡ä»¶æ˜¯ä¸Šä¸€ä¸ªpongè¿˜æ²¡æœ‰è¿”å›ï¼ŒæŠ¥é”™é€€å‡º
      failWebSocket(new SocketTimeoutException("sent ping but didn't receive pong within "
          + pingIntervalMillis + "ms (after " + (failedPing - 1) + " successful ping/pongs)"),
          null);
      return;
    }

    try {
      // å‘é€ä¸€ä¸ªpingæ¶ˆæ¯
      writer.writePing(ByteString.EMPTY);
    } catch (IOException e) {
      failWebSocket(e, null);
    }
  }
å¤åˆ¶ä»£ç  
</code></pre> 
<p>é‚£ä¹ˆæ€ä¹ˆåˆ¤æ–­æœ‰æ²¡æœ‰æ”¶åˆ°pongäº†ï¼Œå°±éœ€è¦ç”¨åˆ°readeräº†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹readeré‡Œåšäº†ä»€ä¹ˆã€‚</p> 
<p>è¿˜è®°å¾—å‰æ–‡é‡ç‚¹2æ ‡è®°çš„loopReaderä¹ˆï¼Ÿ</p> 
<pre><code>// loopReader@RealWebSocket.java

/** Receive frames until there are no more. Invoked only by the reader thread. */
public void loopReader() throws IOException {
    while (receivedCloseCode == -1) {
        // This method call results in one or more onRead* methods being called on this thread.
        // å¤„ç†æ”¶åˆ°çš„frame
        reader.processNextFrame();
    }
}

/**
 * æ ¹æ®headeråˆ¤æ–­æ˜¯æ¶ˆæ¯å¸§è¿˜æ˜¯æ§åˆ¶å¸§ï¼Œå¿ƒè·³pongå±äºæ§åˆ¶å¸§
 */
void processNextFrame() throws IOException {
    readHeader();
    if (isControlFrame) {
      readControlFrame();
    } else {
      readMessageFrame();
    }
  }

/**
 * è§£æopcode
 */
private void readControlFrame() throws IOException {
    // ...
    switch (opcode) {
      case OPCODE_CONTROL_PING:
        frameCallback.onReadPing(controlFrameBuffer.readByteString());
        break;
      case OPCODE_CONTROL_PONG:
        // æ³¨æ„ï¼šæ”¶åˆ°pongï¼Œè§¦å‘onReadPing
        frameCallback.onReadPong(controlFrameBuffer.readByteString());
        break;
      case OPCODE_CONTROL_CLOSE:
        // ...
        frameCallback.onReadClose(code, reason);
        closed = true;
        break;
      default:
        throw new ProtocolException("Unknown control opcode: " + toHexString(opcode));
    }
  }
  
  /**
    * è®¡æ•°å™¨è‡ªå¢ï¼Œå°†awaitingPongçŠ¶æ€ç½®ä¸ºfalse
    */
  @Override public synchronized void onReadPong(ByteString buffer) {
    // This API doesn't expose pings.
    receivedPongCount++;
    awaitingPong = false;
  }
å¤åˆ¶ä»£ç  
</code></pre> 
<p>ä¸€è·¯è¿½ä¸‹æ¥å‘ç°ï¼Œå…¶å®æ”¶åˆ°pongä¹‹åï¼Œokhttpå°±æ˜¯ç®€å•åœ°æ”¹å˜awaitingPongæ ‡è®°ä½çš„çŠ¶æ€ï¼Œå°±ä»£è¡¨æ”¶åˆ°äº†ä¸Šä¸€ä¸ªpongæ¶ˆæ¯ã€‚</p> 
<p>æ€»ç»“ä¸€ä¸‹ï¼Œokhttpçš„å¿ƒè·³æµç¨‹ï¼Œ</p> 
<ol><li>ReadWebSocketè¿æ¥çš„æ—¶å€™åˆ›å»ºscheduleçº¿ç¨‹æ± ï¼Œå®šæœŸåœ°æ‰§è¡ŒPingRunnableå‘é€pingæ¶ˆæ¯ï¼›ï¼ˆå‘é€å…¶ä»–çš„è¯·æ±‚æ¶ˆæ¯åœ¨WriteRunnableä¸­ï¼‰</li><li>åŒæ—¶åˆ›å»ºä¸€ä¸ªreaderä¸æ–­æ¥å—æ¶ˆæ¯ï¼›</li><li>å‘é€pingä¹‹å‰ï¼Œé€šè¿‡awaitingPongæ ‡è®°ï¼Œåˆ¤æ–­ä¸Šä¸€ä¸ªpongæœ‰æ²¡æœ‰å›æ¥ï¼›</li><li>å¯¹äºæ”¶åˆ°çš„æ¶ˆæ¯ï¼Œè¿›è¡Œè§£æï¼Œå¦‚æœæ”¶åˆ°çš„pongï¼Œæ”¹å˜awaitingPongçŠ¶æ€ã€‚</li></ol> 
<h4><a id="12_okhttp_330"></a>1.2 <strong>åŠ¨æ€è°ƒæ•´okhttpå¿ƒè·³</strong></h4> 
<p>æˆ‘ä»¬å‘ç°ï¼Œåªè¦æ”¹å˜çº¿ç¨‹æ± æ‰§è¡ŒPingRunableçš„delayTimeï¼Œå°±èƒ½è¾¾åˆ°åœ¨ä¸é‡æ–°åˆ›å»ºOkHttpClientçš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€æ”¹å˜pingçš„é€Ÿç‡ã€‚</p> 
<p>æ‰€ä»¥å¯ä»¥ç”¨åå°„çš„æ–¹å¼ï¼ŒshutDownåŸæ¥çš„çº¿ç¨‹æ± ï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹æ± ï¼Œç”¨æ–°çš„pingIntervalæ‰§è¡ŒpingRunnableã€‚</p> 
<pre><code>Class clazz = Class.forName("okhttp3.internal.ws.RealWebSocket");
Field field = clazz.getDeclaredField("executor");
field.setAccessible(true);
ScheduledExecutorService oldService = (ScheduledExecutorService) field.get(mWebSocket);

Class[] innerClasses = Class.forName("okhttp3.internal.ws.RealWebSocket").getDeclaredClasses();
for (Class innerClass : innerClasses) {
    if ("PingRunnable".equals(innerClass.getSimpleName())) {
        // åˆ›å»ºæ–°çš„PingRunnableå®ä¾‹
        Constructor constructor = innerClass.getDeclaredConstructor(RealWebSocket.class);
        constructor.setAccessible(true);
        Object pingRunnable = constructor.newInstance(mWebSocket);

        // åˆ›å»ºæ–°çš„çº¿ç¨‹æ± 
        ScheduledThreadPoolExecutor newService = new ScheduledThreadPoolExecutor(1, Util.threadFactory("ws-ping", false));
        newService.scheduleAtFixedRate((Runnable) pingRunnable, interval, interval, unit);
        field.set(mWebSocket, newService);

        // shutdownæ—§çš„çº¿ç¨‹æ± 
        oldService.shutdown();
    }
}
å¤åˆ¶ä»£ç  
</code></pre> 
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±è¾¾æˆäº†åŠ¨æ€è°ƒæ•´å¿ƒè·³çš„ç›®çš„ã€‚</p> 
<p>Java-WebSocketçš„pingæ˜¯é€šè¿‡å¤–éƒ¨è°ƒç”¨sendPing()æ¥è¾¾åˆ°å‘é€pingçš„ç›®çš„çš„ï¼Œå†…éƒ¨æ²¡æœ‰ping/pongçŠ¶æ€æœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬è‡ªå·±å»ç»´æŠ¤è¿™ä¸ªå…³ç³»ã€‚å…¶å®å¯ä»¥ä»¿ç…§OkHttpé‚£æ ·ï¼Œåˆ©ç”¨å®šæ—¶æ¶ˆæ¯å»å‘é€pingï¼Œç„¶åè§£æpongæ¥ç»´æŠ¤å¿ƒè·³çŠ¶æ€ã€‚è¿™é‡Œå°±ä¸è¿‡å¤šé˜è¿°äº†ã€‚</p> 
<h3><a id="2__366"></a>2. <strong>æ–­æ‰é‡è¿</strong></h3> 
<p>æ­£å¦‚å‰é¢æè¿‡çš„ï¼Œæ–­æ‰é‡è¿åªè¦å¤„ç†å¥½å‡ ç§æ–­å¼€çŠ¶æ€çš„é€»è¾‘å³å¯ã€‚å¥½åœ¨ç»å¤§å¤šæ•°websocketåº“éƒ½åˆ†closeã€errorå›è°ƒï¼Œå¯ä»¥åŒºåˆ†å¼‚å¸¸æ–­å¼€å’Œä¸»åŠ¨æ–­å¼€ã€‚</p> 
<p>éœ€è¦è‡ªå·±ç»´æŠ¤çš„ä¹Ÿå°±æ˜¯é‡è¿çš„é—´éš”å’Œé‡è¯•æ¬¡æ•°çš„å…³ç³»ï¼Œç±»ä¼¼æŒ‡æ•°é€€é¿ç®—æ³•ã€‚</p> 
<h3><a id="3__373"></a>3. <strong>å¤šçº¿ç¨‹</strong></h3> 
<p>é’ˆå¯¹ä¸Šæ–‡è¯´åˆ°çš„å¤šçº¿ç¨‹é—®é¢˜ï¼Œä¸»è¦çš„é—®é¢˜ç‚¹å°±æ˜¯å‘ç”Ÿåœ¨åŒæ—¶å‘ç”Ÿå¤šä¸ªè¿æ¥è¯·æ±‚çš„æ—¶å€™ï¼Œä¸å…¶å¯¹å¤šçº¿ç¨‹åŠ å„ç§åŒæ­¥ï¼Œä¸å¦‚å¹¶è¡Œè¯¥ä¸²è¡Œã€‚é‡‡ç”¨ç±»ä¼¼æ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹å¼ï¼Œæ¶ˆæ¯çš„å¤„ç†æ”¾åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­å–åšã€‚è¿™æ ·å°±å¯ä»¥çœå´äº†çº¿ç¨‹çš„åŒæ­¥ï¼ŒåŒæ—¶ä¹Ÿèƒ½ä¿è¯çŠ¶æ€çš„æœ‰åºæ€§ã€‚</p> 
<p>å…¶å®Androidä¸­ï¼Œåˆ©ç”¨HandlerThreadå°±å¯ä»¥å®Œç¾åœ°æ»¡è¶³ä¸Šè¿°ä¸¤ç‚¹ï¼Œæœ€åˆç¬”è€…ä¹Ÿç¡®å®æ˜¯åˆ©ç”¨HandlerThreadæ¥åšçš„ã€‚åæ¥è§‰å¾—å¯ä»¥ç‹¬ç«‹äºå¹³å°ï¼Œä¹Ÿå¯ä»¥è¿è¡Œåœ¨çº¯Javaçš„å¹³å°ä¸Šï¼Œæ‰€ä»¥è¿˜æ˜¯è‡ªå·±æ‰‹åŠ¨å®ç°äº†ã€‚åŒæ—¶è‡ªå·±ç»´æŠ¤æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥æ›´å¥½åœ°è‡ªå·±å¤„ç†ä¼˜å…ˆçº§ã€å»¶è¿Ÿç­‰ã€‚</p> 
<h2><a id="WebSocketGo_380"></a>WebSocketGo</h2> 
<p>ä¹‹å‰ä¹Ÿè¯´è¿‡ï¼Œç¬”è€…çš„é¡¹ç›®æ˜¯åŸºäºOkHttpçš„ï¼Œä½†å‘ç°çŠ¶æ€ç®¡ç†è¿™éƒ¨åˆ†å¯ä»¥å•ç‹¬æŠ½è±¡å‡ºæ¥ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰äº†æœ¬æ–‡çš„æ ‡é¢˜<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGnepux%2FWebSocketGo" rel="nofollow">WebSocketGo</a>ï¼ˆä»¥ä¸‹ç®€ç§°WsGoï¼‰ã€‚</p> 
<p>æ•°æ®æµå¦‚ä¸‹ï¼š</p> 
<p><img src="https://images2.imgbox.com/64/a4/zzylOIMP_o.png" alt=""></p> 
<ol><li> <p>Dispatcherå°±æ˜¯å‰æ–‡æåˆ°çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°±æ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå‘é€commandï¼Œæ¥æ”¶eventã€‚</p> 
  <ul><li> <p>commandä¸»è¦æœ‰ï¼šCONNECTã€DISCONNECTã€RECONNECTã€CHANGE_PINGã€SEND</p> </li><li> <p>eventä¸»è¦æœ‰ï¼šOnConnectã€onMessageã€onSendã€onRetryã€onDisConnectã€onClose</p> </li></ul> </li><li> <p>Channel Managerä¸»è¦è´Ÿè´£çŠ¶æ€ç®¡ç†ã€‚</p> </li><li> <p>WebSocket interfaceå¯ä»¥ç†è§£ä¸ºé€‚é…å±‚ï¼Œè´Ÿè´£è°ƒç”¨WebSocketåº“ã€‚</p> </li><li> <p>Event Listenerå°±æ˜¯å‰å°çš„çŠ¶æ€å›è°ƒã€‚</p> </li></ol> 
<h3><a id="WsGo_403"></a>æ¥å…¥WsGo</h3> 
<pre><code>implementation 'com.gnepux:wsgo:1.0.2'
// use okhttp
implementation 'com.gnepux:wsgo-okwebsocket:1.0.1'
// use java websocket
implementation 'com.gnepux:wsgo-jwebsocket:1.0.1'
å¤åˆ¶ä»£ç  
</code></pre> 
<h3><a id="_415"></a>åˆå§‹åŒ–</h3> 
<pre><code>WsConfig config = new WsConfig.Builder()
        .debugMode(true)    // true to print log
        .setUrl(pushUrl)    // ws url
        .setHttpHeaders(headerMap)  // http headers
        .setConnectTimeout(10 * 1000L)  // connect timeout
        .setReadTimeout(10 * 1000L)     // read timeout
        .setWriteTimeout(10 * 1000L)    // write timeout
        .setPingInterval(10 * 1000L)    // initial ping interval
        .setWebSocket(OkWebSocket.create()) // websocket client
        .setRetryStrategy(retryStrategy)    // retry count and delay time strategy
        .setEventListener(eventListener)    // event listener
        .build();
WsGo.init(config);
å¤åˆ¶ä»£ç  
</code></pre> 
<h3><a id="Go_435"></a>Go</h3> 
<pre><code>// è¿æ¥
WsGo.getInstance().connect();
// å‘é€æ¶ˆæ¯
WsGo.getInstance().send("hello from WsGo");
// æ–­å¼€
WsGo.getInstance().disconnect(1000, "close");
WsGo.getInstance().disconnectNormal("close");
// æ”¹å˜å¿ƒè·³
WsGo.getInstance().changePingInterval(10, TimeUnit.SECONDS);
// é‡Šæ”¾
WsGo.getInstance().destroyInstance();
å¤åˆ¶ä»£ç  
</code></pre> 
<h3><a id="WsConfig_453"></a>WsConfigçš„æ›´å¤šé…ç½®</h3> 
<h4><a id="setWebSocketWebSocket_socket_456"></a>setWebSocket(WebSocket socket)</h4> 
<p>WsGo å·²ç»æ”¯æŒOkHttp and Java WebSocket</p> 
<pre><code>// for OkHttp (wsgo-okwebsocket)
setWebSocket(OkWebSocket.create());
// for Java WebSocket (wsgo-jwebsocket)
setWebSocket(JWebSocket.create());
å¤åˆ¶ä»£ç  

</code></pre> 
<p>å¦‚æœä½ éœ€è¦ä½¿ç”¨å…¶ä»–çš„WebSocketåº“æˆ–è‡ªå®šä¹‰å®¢æˆ·ç«¯ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªWebSocketæ¥å£ï¼Œå°†å¯¹åº”ç»“æœä¼ é€’ç»™ChannelCallbackå³å¯ã€‚å‰©ä¸‹çš„è¿æ¥ç®¡ç†ï¼ŒWsGoä¼šå¸®ä½ å®Œæˆã€‚</p> 
<pre><code>public interface WebSocket {
    void connect(WsConfig config, ChannelCallback callback);
    void reconnect(WsConfig config, ChannelCallback callback);
    boolean disconnect(int code, String reason);
    void changePingInterval(long interval, TimeUnit unit);
    boolean send(String msg);
}
å¤åˆ¶ä»£ç  

</code></pre> 
<h4><a id="setRetryStrategyRetryStrategy_retryStrategy_483"></a>setRetryStrategy(RetryStrategy retryStrategy)</h4> 
<p>å¯¹äºéæ­£å¸¸æ–­å¼€ï¼ŒWsGoä¼šè‡ªåŠ¨é‡è¿ã€‚RetryStrategyæŒ‡çš„æ˜¯é‡è¿æ¬¡æ•°å’Œå»¶æ—¶çš„å…³ç³»ã€‚</p> 
<p>WsGoé»˜è®¤æœ‰ä¸€ä¸ªDefaultRetryStrategyï¼Œå¦‚æœä½ éœ€è¦è‡ªå·±è°ƒæ•´ï¼Œå®ç°RetryStrategyæ¥å£é‡Œçš„onRetryæ–¹æ³•å³å¯ã€‚</p> 
<pre><code>public interface RetryStrategy {
    /**
     * é‡è¯•æ¬¡æ•°å’Œå»¶è¿Ÿçš„å…³ç³»
     *
     * @param retryCount å·²ç»é‡è¯•çš„æ¬¡æ•°
     * @return å»¶æ—¶çš„æ—¶é—´
     */
    long onRetry(long retryCount);
}
å¤åˆ¶ä»£ç  

</code></pre> 
<h4><a id="setEventListenerEventListener_eventListener_503"></a>setEventListener(EventListener eventListener)</h4> 
<p>æ·»åŠ äº‹ä»¶å›è°ƒã€‚éœ€è¦æ³¨æ„ï¼Œå›è°ƒåœ¨WsGoè‡ªå·±åˆ›å»ºçš„ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œä¸åœ¨è°ƒç”¨çº¿ç¨‹ä¸­ã€‚å¦‚æœ‰å¿…è¦ï¼Œéœ€è¦åœ¨ä¼šè°ƒç”¨æ‰‹åŠ¨åˆ‡æ¢çº¿ç¨‹ã€‚</p> 
<pre><code>public interface EventListener {
    void onConnect();
    void onDisConnect(Throwable throwable);
    void onClose(int code, String reason);
    void onMessage(String text);
    void onReconnect(long retryCount, long delayMillSec);
    void onSend(String text, boolean success);
}
å¤åˆ¶ä»£ç  

</code></pre> 
<h4><a id="PS_520"></a>PS</h4> 
<p>ç›®å‰WsGoæ²¡æœ‰ä¸æ‰‹æœºç½‘ç»œçš„å˜åŒ–é€šçŸ¥å…³è”ï¼ˆå³æ–­ç½‘å¯ä»¥æ”¶åˆ°å›è°ƒï¼Œç½‘ç»œæ¢å¤ä¸ä¼šè‡ªåŠ¨é‡è¿ï¼‰ï¼Œå› ä¸ºç¬”è€…è§‰å¾—è¿™éƒ¨åˆ†ä¸å±äºWebSocketè‡ªèº«çš„çŠ¶æ€ç®¡ç†èŒƒç•´ï¼Œè€Œä¸”å·²ç»ä¸å±äºå¹³å°æ— å…³äº†ã€‚å¦‚æœ‰æœ‰è¿™æ–¹ä¾¿éœ€æ±‚ï¼Œéœ€è¦è‡ªå·±ä»å¤–éƒ¨å‘èµ·è¿æ¥ã€‚åœ¨é¡¹ç›®ä¸­ç®€å•åœ°å°è£…ä¸€ä¸‹å°±okå•¦~</p> 
<h2><a id="_524"></a>åè®°</h2> 
<p>æœ¬æ–‡ç¨æ˜¾é•¿ï¼Œä»æœ€åˆçš„æ™ºèƒ½å®¶å±…çš„åœºæ™¯å¼€å§‹ï¼Œä»‹ç»åˆ°websocketçŠ¶æ€ç®¡ç†ç°å­˜çš„é—®é¢˜ï¼Œç„¶åç»™å‡ºäº†ç¬”è€…çš„è§£å†³æ–¹æ¡ˆï¼Œæœ€åæ˜¯é€šç”¨çš„çŠ¶æ€ç®¡ç†æ¡†æ¶WebSocketGoã€‚ä¹Ÿç®—æ˜¯ç¬”è€…åœ¨å·¥ä½œä¸­çš„ä¸€ç‚¹æ€è€ƒå’Œæ€»ç»“ã€‚å…¶å®ç»†æƒ³ï¼Œä¸å…‰WebSocketï¼Œæ‰€æœ‰çš„é•¿è¿æ¥åº”è¯¥éƒ½ä¼šé¢ä¸´ç›¸åŒçš„é—®é¢˜ã€‚ä½†æ€è€ƒçš„è§’åº¦å’Œè§£å†³çš„å‡ºå‘ç‚¹åº”è¯¥éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p> 
<h3><a id="_531"></a>æ–‡æœ«</h3> 
<h3><a id="_534"></a>æ€»ç»“</h3> 
<p>è¦æƒ³æˆä¸ºæ¶æ„å¸ˆï¼Œé‚£å°±ä¸è¦å±€é™åœ¨ç¼–ç ï¼Œä¸šåŠ¡ï¼Œè¦ä¼šé€‰å‹ã€æ‰©å±•ï¼Œæå‡ç¼–ç¨‹æ€ç»´ã€‚æ­¤å¤–ï¼Œè‰¯å¥½çš„èŒä¸šè§„åˆ’ä¹Ÿå¾ˆé‡è¦ï¼Œå­¦ä¹ çš„ä¹ æƒ¯å¾ˆé‡è¦ï¼Œä½†æ˜¯æœ€é‡è¦çš„è¿˜æ˜¯è¦èƒ½æŒä¹‹ä»¥æ’ï¼Œä»»ä½•ä¸èƒ½åšæŒè½å®çš„è®¡åˆ’éƒ½æ˜¯ç©ºè°ˆã€‚</p> 
<p>å¦‚æœä½ æ²¡æœ‰æ–¹å‘ï¼Œè¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸€å¥—ç”±é˜¿é‡Œé«˜çº§æ¶æ„å¸ˆç¼–å†™çš„ã€ŠAndroidå…«å¤§æ¨¡å—è¿›é˜¶ç¬”è®°ã€‹ï¼Œå¸®å¤§å®¶å°†æ‚ä¹±ã€é›¶æ•£ã€ç¢ç‰‡åŒ–çš„çŸ¥è¯†è¿›è¡Œä½“ç³»åŒ–çš„æ•´ç†ï¼Œè®©å¤§å®¶ç³»ç»Ÿè€Œé«˜æ•ˆåœ°æŒæ¡Androidå¼€å‘çš„å„ä¸ªçŸ¥è¯†ç‚¹ã€‚<br> <img src="https://images2.imgbox.com/77/e8/CvnuFXkL_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ç›¸å¯¹äºæˆ‘ä»¬å¹³æ—¶çœ‹çš„ç¢ç‰‡åŒ–å†…å®¹ï¼Œè¿™ä»½ç¬”è®°çš„çŸ¥è¯†ç‚¹æ›´ç³»ç»ŸåŒ–ï¼Œæ›´å®¹æ˜“ç†è§£å’Œè®°å¿†ï¼Œæ˜¯ä¸¥æ ¼æŒ‰ç…§çŸ¥è¯†ä½“ç³»ç¼–æ’çš„ã€‚</p> 
<h4><a id="_541"></a>ä¸€ã€æ¶æ„å¸ˆç­‘åŸºå¿…å¤‡æŠ€èƒ½</h4> 
<p>1ã€æ·±å…¥ç†è§£Javaæ³›å‹<br> 2ã€æ³¨è§£æ·±å…¥æµ…å‡º<br> 3ã€å¹¶å‘ç¼–ç¨‹<br> 4ã€æ•°æ®ä¼ è¾“ä¸åºåˆ—åŒ–<br> 5ã€Javaè™šæ‹ŸæœºåŸç†<br> 6ã€é«˜æ•ˆIO<br> â€¦â€¦</p> 
<p><img src="https://images2.imgbox.com/a0/62/r1D6GLZd_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="Android_551"></a>äºŒã€Androidç™¾å¤§æ¡†æ¶æºç è§£æ</h4> 
<p>1.Retrofit 2.0æºç è§£æ<br> 2.Okhttp3æºç è§£æ<br> 3.ButterKnifeæºç è§£æ<br> 4.MPAndroidChart æºç è§£æ<br> 5.Glideæºç è§£æ<br> 6.Leakcanary æºç è§£æ<br> 7.Universal-lmage-Loaderæºç è§£æ<br> 8.EventBus 3.0æºç è§£æ<br> 9.zxingæºç åˆ†æ<br> 10.Picassoæºç è§£æ<br> 11.LottieAndroidä½¿ç”¨è¯¦è§£åŠæºç è§£æ<br> 12.Fresco æºç åˆ†æâ€”â€”å›¾ç‰‡åŠ è½½æµç¨‹</p> 
<p><img src="https://images2.imgbox.com/71/fc/6C37vuFG_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="Android_566"></a>ä¸‰ã€Androidæ€§èƒ½ä¼˜åŒ–å®æˆ˜è§£æ</h4> 
<ul><li>è…¾è®¯Bugly:å¯¹å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•çš„ä¸€ç‚¹ç†è§£</li><li>çˆ±å¥‡è‰ºï¼šå®‰å“APPå´©æºƒæ•è·æ–¹æ¡ˆâ€”â€”xCrash</li><li>å­—èŠ‚è·³åŠ¨ï¼šæ·±å…¥ç†è§£Gradleæ¡†æ¶ä¹‹ä¸€ï¼šPlugin, Extension, buildSrc</li><li>ç™¾åº¦APPæŠ€æœ¯ï¼šAndroid H5é¦–å±ä¼˜åŒ–å®è·µ</li><li>æ”¯ä»˜å®å®¢æˆ·ç«¯æ¶æ„è§£æï¼šAndroid å®¢æˆ·ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ä¹‹ã€Œåƒåœ¾å›æ”¶ã€</li><li>æºç¨‹ï¼šä»æ™ºè¡Œ Android é¡¹ç›®çœ‹ç»„ä»¶åŒ–æ¶æ„å®è·µ</li><li>ç½‘æ˜“æ–°é—»æ„å»ºä¼˜åŒ–ï¼šå¦‚ä½•è®©ä½ çš„æ„å»ºé€Ÿåº¦â€œåŠ¿å¦‚é—ªç”µâ€ï¼Ÿ</li><li>â€¦</li></ul> 
<p><img src="https://images2.imgbox.com/5b/e9/mOSW5mZL_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="kotlin_578"></a>å››ã€é«˜çº§kotlinå¼ºåŒ–å®æˆ˜</h4> 
<p>1ã€Kotlinå…¥é—¨æ•™ç¨‹<br> 2ã€Kotlin å®æˆ˜é¿å‘æŒ‡å—<br> 3ã€é¡¹ç›®å®æˆ˜ã€ŠKotlin Jetpack å®æˆ˜ã€‹</p> 
<ul><li> <p>ä»ä¸€ä¸ªè†œæ‹œå¤§ç¥çš„ Demo å¼€å§‹</p> </li><li> <p>Kotlin å†™ Gradle è„šæœ¬æ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒï¼Ÿ</p> </li><li> <p>Kotlin ç¼–ç¨‹çš„ä¸‰é‡å¢ƒç•Œ</p> </li><li> <p>Kotlin é«˜é˜¶å‡½æ•°</p> </li><li> <p>Kotlin æ³›å‹</p> </li><li> <p>Kotlin æ‰©å±•</p> </li><li> <p>Kotlin å§”æ‰˜</p> </li><li> <p>åç¨‹â€œä¸ä¸ºäººçŸ¥â€çš„è°ƒè¯•æŠ€å·§</p> </li><li> <p>å›¾è§£åç¨‹ï¼šsuspend</p> </li></ul> 
<p><img src="https://images2.imgbox.com/fd/78/Grr1tKn8_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="AndroidUI_602"></a>äº”ã€Androidé«˜çº§UIå¼€æºæ¡†æ¶è¿›é˜¶è§£å¯†</h4> 
<p>1.SmartRefreshLayoutçš„ä½¿ç”¨<br> 2.Androidä¹‹PullToRefreshæ§ä»¶æºç è§£æ<br> 3.Android-PullToRefreshä¸‹æ‹‰åˆ·æ–°åº“åŸºæœ¬ç”¨æ³•<br> 4.LoadSir-é«˜æ•ˆæ˜“ç”¨çš„åŠ è½½åé¦ˆé¡µç®¡ç†æ¡†æ¶<br> 5.Androidé€šç”¨LoadingViewåŠ è½½æ¡†æ¶è¯¦è§£<br> 6.MPAndroidChartå®ç°LineChartï¼ˆæŠ˜çº¿å›¾ï¼‰<br> 7.hellocharts-androidä½¿ç”¨æŒ‡å—<br> 8.SmartTableä½¿ç”¨æŒ‡å—<br> 9.å¼€æºé¡¹ç›®android-uitableviewä»‹ç»<br> 10.ExcelPanel ä½¿ç”¨æŒ‡å—<br> 11.Androidå¼€æºé¡¹ç›®SlidingMenuæ·±åˆ‡è§£æ<br> 12.MaterialDrawerä½¿ç”¨æŒ‡å—<br> <img src="https://images2.imgbox.com/c4/55/DDF895cW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="NDK_616"></a>å…­ã€NDKæ¨¡å—å¼€å‘</h4> 
<p>1ã€NDK æ¨¡å—å¼€å‘<br> 2ã€JNI æ¨¡å—<br> 3ã€Native å¼€å‘å·¥å…·<br> 4ã€Linux ç¼–ç¨‹<br> 5ã€åº•å±‚å›¾ç‰‡å¤„ç†<br> 6ã€éŸ³è§†é¢‘å¼€å‘<br> 7ã€æœºå™¨å­¦ä¹ </p> 
<p><img src="https://images2.imgbox.com/f8/c2/AXDZwXCn_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="Flutter_627"></a>ä¸ƒã€FlutteræŠ€æœ¯è¿›é˜¶</h4> 
<p>1ã€Flutterè·¨å¹³å°å¼€å‘æ¦‚è¿°<br> 2ã€Windowsä¸­Flutterå¼€å‘ç¯å¢ƒæ­å»º<br> 3ã€ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªFlutter APP<br> 4ã€Flutterå¼€å‘ç¯å¢ƒæ­å»ºå’Œè°ƒè¯•<br> 5ã€Dartè¯­æ³•ç¯‡ä¹‹åŸºç¡€è¯­æ³•(ä¸€)<br> 6ã€Dartè¯­æ³•ç¯‡ä¹‹é›†åˆçš„ä½¿ç”¨ä¸æºç è§£æ(äºŒ)<br> 7ã€Dartè¯­æ³•ç¯‡ä¹‹é›†åˆæ“ä½œç¬¦å‡½æ•°ä¸æºç åˆ†æ(ä¸‰)<br> â€¦<br> <img src="https://images2.imgbox.com/81/21/J7NoR52T_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="_637"></a>å…«ã€å¾®ä¿¡å°ç¨‹åºå¼€å‘</h4> 
<p>1ã€å°ç¨‹åºæ¦‚è¿°åŠå…¥é—¨<br> 2ã€å°ç¨‹åºUIå¼€å‘<br> 3ã€APIæ“ä½œ<br> 4ã€è´­ç‰©å•†åœºé¡¹ç›®å®æˆ˜â€¦â€¦</p> 
<p><img src="https://images2.imgbox.com/0e/7f/l1bINUZK_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="_644"></a>å…¨å¥—è§†é¢‘èµ„æ–™ï¼š</h4> 
<p><strong>ä¸€ã€é¢è¯•åˆé›†</strong><br> <img src="https://images2.imgbox.com/c2/b2/thKiv8IC_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>äºŒã€æºç è§£æåˆé›†</strong></p> 
<p><img src="https://images2.imgbox.com/31/22/ajlc6G8F_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>ä¸‰ã€å¼€æºæ¡†æ¶åˆé›†</strong></p> 
<p><img src="https://images2.imgbox.com/16/ca/N5mXIazE_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>æ¬¢è¿å¤§å®¶ä¸€é”®ä¸‰è¿æ”¯æŒï¼Œè‹¥éœ€è¦æ–‡ä¸­èµ„æ–™ï¼Œç›´æ¥ç‚¹å‡»æ–‡æœ«CSDNå®˜æ–¹è®¤è¯å¾®ä¿¡å¡ç‰‡å…è´¹é¢†å–ã€ä¿è¯100%å…è´¹ã€‘â†“â†“â†“</strong><br> <img src="https://images2.imgbox.com/80/7a/gcVjdmtb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5dbaac390493d71f73b63313231e4dee/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æ— æ³•è·å– dpkg å‰ç«¯é” (/var/lib/dpkg/lock-frontend)ï¼Œæ˜¯å¦æœ‰å…¶ä»–è¿›ç¨‹æ­£å ç”¨å®ƒ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b296a43cb5980275e475b88b8020035/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">vscode-spring-boot YAML_UNKNOWN_PROPERTY è§£å†³</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹çˆ±å¥½è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>