<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>django - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="django" />
<meta property="og:description" content="django学习 初识Django1.安装django2.创建项目2.1 在终端2.2 Pycharm 3. 创建app4.快速上手4.1 再写一个页面4.2 templates模板4.3 静态文件4.3.1 static目录4.3.2 引用静态文件 5.模板语法案例：伪联通新闻中心6.请求和响应案例：用户登录7.数据库操作7.1 安装第三方模块7.2 ORM1. 自己创建数据库2. django连接数据库3.django操作表4.表中的数据 案例：用户管理1. 展示用户列表2.添加用户3.删除用户 Django开发（一）1.新建项目2.创建app3.设计表结构（django）4.在MySQL中生成表5.静态文件管理6.部门管理7.模板的继承8.用户管理8.1 初识Form1. views.py2.user_add.html 8.3 ModelForm（推荐）0. models.py1. views.py2.user_add.html Django开发（二）8.4 编辑用户8.5 删除 9.靓号管理9.1 表结构9.2 靓号列表9.3 新建靓号9.4 编辑靓号9.5 搜索手机号9.6 分页 10.时间插件11.ModelForm和BootStrap操作 Django开发（三）1.Ajax请求2.订单小结3.图表 Django开发（四）1.知识点复习1.1 基础入门1.2 数据类型1.3 函数1.4 模块1.5 面向对象1.6 MySQL数据库1.7 前端开发1.8 Django 2.关于文件上传2.1 基本操作案例：批量上传数据案例：混合数据（Form）2.2 启用media案例：混合数据（form）案例：混合数据（ModalForm)models.py定义ModelForm视图 小结 总结 初识Django Python知识点：函数、面向对象。前端开发：HTML、CSS、JavaScript、jQuery、BootStrap。MySQL数据库。Python的Web框架： Flask，自身短小精悍 &#43; 第三方组件。Django，内部已集成了很多组件 &#43; 第三方组件。【主要】 1.安装django pip install django c:\python39 - python.exe - Scripts - pip.exe - django-admin." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/2b9afb89a6acc1575b159bfca38d10ad/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-31T17:22:36+08:00" />
<meta property="article:modified_time" content="2023-07-31T17:22:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">django</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>django学习</h4> 
 <ul><li><a href="#Django_2" rel="nofollow">初识Django</a></li><li><ul><li><a href="#1django_13" rel="nofollow">1.安装django</a></li><li><a href="#2_36" rel="nofollow">2.创建项目</a></li><li><ul><li><a href="#21__42" rel="nofollow">2.1 在终端</a></li><li><a href="#22_Pycharm_75" rel="nofollow">2.2 Pycharm</a></li></ul> 
   </li><li><a href="#3_app_123" rel="nofollow">3. 创建app</a></li><li><a href="#4_160" rel="nofollow">4.快速上手</a></li><li><ul><li><a href="#41__186" rel="nofollow">4.1 再写一个页面</a></li><li><a href="#42_templates_197" rel="nofollow">4.2 templates模板</a></li><li><a href="#43__203" rel="nofollow">4.3 静态文件</a></li><li><ul><li><a href="#431_static_215" rel="nofollow">4.3.1 static目录</a></li><li><a href="#432__223" rel="nofollow">4.3.2 引用静态文件</a></li></ul> 
   </li></ul> 
   </li><li><a href="#5_229" rel="nofollow">5.模板语法</a></li><li><a href="#_237" rel="nofollow">案例：伪联通新闻中心</a></li><li><a href="#6_247" rel="nofollow">6.请求和响应</a></li><li><a href="#_257" rel="nofollow">案例：用户登录</a></li><li><a href="#7_269" rel="nofollow">7.数据库操作</a></li><li><ul><li><a href="#71__294" rel="nofollow">7.1 安装第三方模块</a></li><li><a href="#72_ORM_304" rel="nofollow">7.2 ORM</a></li><li><ul><li><a href="#1__314" rel="nofollow">1. 自己创建数据库</a></li><li><a href="#2_django_328" rel="nofollow">2. django连接数据库</a></li><li><a href="#3django_349" rel="nofollow">3.django操作表</a></li><li><a href="#4_418" rel="nofollow">4.表中的数据</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_463" rel="nofollow">案例：用户管理</a></li><li><ul><li><a href="#1__465" rel="nofollow">1. 展示用户列表</a></li><li><a href="#2_472" rel="nofollow">2.添加用户</a></li><li><a href="#3_481" rel="nofollow">3.删除用户</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Django_501" rel="nofollow">Django开发（一）</a></li><li><ul><li><a href="#1_507" rel="nofollow">1.新建项目</a></li><li><a href="#2app_515" rel="nofollow">2.创建app</a></li><li><a href="#3django_531" rel="nofollow">3.设计表结构（django）</a></li><li><a href="#4MySQL_580" rel="nofollow">4.在MySQL中生成表</a></li><li><a href="#5_624" rel="nofollow">5.静态文件管理</a></li><li><a href="#6_632" rel="nofollow">6.部门管理</a></li><li><a href="#7_644" rel="nofollow">7.模板的继承</a></li><li><a href="#8_704" rel="nofollow">8.用户管理</a></li><li><ul><li><a href="#81_Form_753" rel="nofollow">8.1 初识Form</a></li><li><ul><li><a href="#1_viewspy_755" rel="nofollow">1. views.py</a></li><li><a href="#2user_addhtml_774" rel="nofollow">2.user_add.html</a></li></ul> 
    </li><li><a href="#83_ModelForm_796" rel="nofollow">8.3 ModelForm（推荐）</a></li><li><ul><li><a href="#0_modelspy_798" rel="nofollow">0. models.py</a></li><li><a href="#1_viewspy_818" rel="nofollow">1. views.py</a></li><li><a href="#2user_addhtml_834" rel="nofollow">2.user_add.html</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#Django_856" rel="nofollow">Django开发（二）</a></li><li><ul><li><ul><li><a href="#84__873" rel="nofollow">8.4 编辑用户</a></li><li><a href="#85__893" rel="nofollow">8.5 删除</a></li></ul> 
   </li><li><a href="#9_905" rel="nofollow">9.靓号管理</a></li><li><ul><li><a href="#91__907" rel="nofollow">9.1 表结构</a></li><li><a href="#92__960" rel="nofollow">9.2 靓号列表</a></li><li><a href="#93__978" rel="nofollow">9.3 新建靓号</a></li><li><a href="#94__1009" rel="nofollow">9.4 编辑靓号</a></li><li><a href="#95__1051" rel="nofollow">9.5 搜索手机号</a></li><li><a href="#96__1085" rel="nofollow">9.6 分页</a></li></ul> 
   </li><li><a href="#10_1128" rel="nofollow">10.时间插件</a></li><li><a href="#11ModelFormBootStrap_1160" rel="nofollow">11.ModelForm和BootStrap</a></li><li><ul><li><a href="#_1305" rel="nofollow">操作</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Django_1328" rel="nofollow">Django开发（三）</a></li><li><ul><li><a href="#1Ajax_1448" rel="nofollow">1.Ajax请求</a></li><li><a href="#2_1452" rel="nofollow">2.订单</a></li><li><a href="#_1512" rel="nofollow">小结</a></li><li><a href="#3_1523" rel="nofollow">3.图表</a></li></ul> 
  </li><li><a href="#Django_1536" rel="nofollow">Django开发（四）</a></li><li><ul><li><a href="#1_1538" rel="nofollow">1.知识点复习</a></li><li><ul><li><a href="#11__1542" rel="nofollow">1.1 基础入门</a></li><li><a href="#12__1633" rel="nofollow">1.2 数据类型</a></li><li><a href="#13__1695" rel="nofollow">1.3 函数</a></li><li><a href="#14__1784" rel="nofollow">1.4 模块</a></li><li><a href="#15__1831" rel="nofollow">1.5 面向对象</a></li><li><a href="#16_MySQL_1840" rel="nofollow">1.6 MySQL数据库</a></li><li><a href="#17__1911" rel="nofollow">1.7 前端开发</a></li><li><a href="#18_Django_2025" rel="nofollow">1.8 Django</a></li></ul> 
   </li><li><a href="#2_2289" rel="nofollow">2.关于文件上传</a></li><li><ul><li><a href="#21__2293" rel="nofollow">2.1 基本操作</a></li><li><a href="#_2329" rel="nofollow">案例：批量上传数据</a></li><li><a href="#Form_2365" rel="nofollow">案例：混合数据（Form）</a></li><li><a href="#22_media_2462" rel="nofollow">2.2 启用media</a></li><li><a href="#form_2493" rel="nofollow">案例：混合数据（form）</a></li><li><a href="#ModalForm_2539" rel="nofollow">案例：混合数据（ModalForm)</a></li><li><ul><li><a href="#modelspy_2541" rel="nofollow">models.py</a></li><li><a href="#ModelForm_2555" rel="nofollow">定义ModelForm</a></li><li><a href="#_2571" rel="nofollow">视图</a></li></ul> 
    </li><li><a href="#_2595" rel="nofollow">小结</a></li></ul> 
   </li><li><a href="#_2625" rel="nofollow">总结</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Django_2"></a>初识Django</h2> 
<ul><li>Python知识点：函数、面向对象。</li><li>前端开发：HTML、CSS、JavaScript、jQuery、BootStrap。</li><li>MySQL数据库。</li><li>Python的Web框架： 
  <ul><li>Flask，自身短小精悍 + 第三方组件。</li><li>Django，内部已集成了很多组件 + 第三方组件。【主要】</li></ul> </li></ul> 
<h3><a id="1django_13"></a>1.安装django</h3> 
<pre><code>pip install django
</code></pre> 
<pre><code>c:\python39
	- python.exe
	- Scripts
		- pip.exe
		- django-admin.exe   【工具，创建django项目中的文件和文件夹】
	- Lib
		- 内置模块
		- site-packages
			- openpyxl
			- python-docx
			- flask
			- django         【框架的源码】
</code></pre> 
<h3><a id="2_36"></a>2.创建项目</h3> 
<blockquote> 
 <p>django中项目会有一些默认的文件和默认的文件夹。</p> 
</blockquote> 
<h4><a id="21__42"></a>2.1 在终端</h4> 
<ul><li> <p>打开终端。</p> </li><li> <p>进入某个目录（项目放在哪里）。</p> <pre><code>/Users/wupeiqi/PycharmProjects/gx
</code></pre> </li><li> <p>执行命令创建项目</p> <pre><code>"c:\python39\Scripts\django-admin.exe" startproject 项目名称
</code></pre> <pre><code># 如果 c:\python39\Scripts 已加入环境系统环境变量。

django-admin startproject 项目名称
</code></pre> <pre><code># 我自己的电脑
/Library/Frameworks/Python.framework/Versions/3.9/bin/django-admin startproject mysite
</code></pre> </li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-g95O9Kfj-1690794616337)(assets/image-20211124085229322.png)]</p> 
<h4><a id="22_Pycharm_75"></a>2.2 Pycharm</h4> 
<p>注意：</p> 
<pre><code>- Python解释器安装目录：C:\python39\python.exe lib....
	/Library/Frameworks/Python.framework/Versions/3.9/
	
- F:\pycode\ (基于Django创建的项目)
	/Users/wupeiqi/PycharmProjects
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-UuMcjNLT-1690794616338)(assets/image-20211124090749083.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-VyBLyXk9-1690794616338)(assets/image-20211124090818003.png)]</p> 
<p>特殊说明：</p> 
<ul><li> <p>命令行，创建的项目是标准的。</p> </li><li> <p>pycharm，在标准的基础上默认给咱们加了点东西。</p> 
  <ul><li> <p>创建了一个templates目录【删除】</p> </li><li> <p>settings.py中【删除】<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-dft4zbqz-1690794616339)(assets/image-20211124091443354.png)]</p> </li></ul> </li></ul> 
<p>默认项目的文件介绍：</p> 
<pre><code>mysite
├── manage.py         【项目的管理，启动项目、创建app、数据管理】【不要动】【***常常用***】
└── mysite
    ├── __init__.py
    ├── settings.py    【项目配置】          【***常常修改***】
    ├── urls.py        【URL和函数的对应关系】【***常常修改***】
    ├── asgi.py        【接收网络请求】【不要动】
    └── wsgi.py        【接收网络请求】【不要动】
</code></pre> 
<h3><a id="3_app_123"></a>3. 创建app</h3> 
<pre><code>- 项目
	- app，用户管理【表结构、函数、HTML模板、CSS】
	- app，订单管理【表结构、函数、HTML模板、CSS】
	- app，后台管理【表结构、函数、HTML模板、CSS】
	- app，网站   【表结构、函数、HTML模板、CSS】
	- app，API    【表结构、函数、HTML模板、CSS】
	..
	
注意：我们开发比较简洁，用不到多app，一般情况下，项目下创建1个app即可。
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vKyPqzgm-1690794616340)(assets/image-20211124094508905.png)]</p> 
<pre><code>├── app01
│   ├── __init__.py
│   ├── admin.py         【固定，不用动】django默认提供了admin后台管理。
│   ├── apps.py          【固定，不用动】app启动类
│   ├── migrations       【固定，不用动】数据库变更记录
│   │   └── __init__.py
│   ├── models.py        【**重要**】，对数据库操作。
│   ├── tests.py         【固定，不用动】单元测试
│   └── views.py         【**重要**】，函数。
├── manage.py
└── mysite2
    ├── __init__.py
    ├── asgi.py
    ├── settings.py
    ├── urls.py          【URL-&gt;函数】
    └── wsgi.py
</code></pre> 
<h3><a id="4_160"></a>4.快速上手</h3> 
<ul><li> <p>确保app已注册 【settings.py】<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-gKW2Umzj-1690794616340)(assets/image-20211124095619097.png)]</p> </li><li> <p>编写URL和视图函数对应关系 【urls.py】<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vT7Xxumk-1690794616341)(assets/image-20211124095850778.png)]</p> </li><li> <p>编写视图函数 【views.py】<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-IqyFM6Bd-1690794616341)(assets/image-20211124100027337.png)]</p> </li><li> <p>启动django项目</p> 
  <ul><li> <p>命令行启动</p> <pre><code>python manage.py runserver 
</code></pre> </li><li> <p>Pycharm启动<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mt4BoYNP-1690794616342)(assets/image-20211124100320461.png)]</p> </li></ul> </li></ul> 
<h4><a id="41__186"></a>4.1 再写一个页面</h4> 
<pre><code>- url -&gt; 函数
- 函数
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jHhyQD9f-1690794616342)(assets/image-20211124101708419.png)]</p> 
<h4><a id="42_templates_197"></a>4.2 templates模板</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-zScWppLG-1690794616342)(assets/image-20211124102815510.png)]</p> 
<h4><a id="43__203"></a>4.3 静态文件</h4> 
<p>在开发过程中一般将：</p> 
<ul><li>图片</li><li>CSS</li><li>js</li></ul> 
<p>都会当做静态文件处理。</p> 
<h5><a id="431_static_215"></a>4.3.1 static目录</h5> 
<p>在app目录下创建static文件夹。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-foitRgki-1690794616343)(assets/image-20211124103828667.png)]</p> 
<h5><a id="432__223"></a>4.3.2 引用静态文件</h5> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-fGwOHmCj-1690794616343)(assets/image-20211124103947169.png)]</p> 
<h3><a id="5_229"></a>5.模板语法</h3> 
<p>本质上：在HTML中写一些占位符，由数据对这些占位符进行替换和处理。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JwPcg4Ob-1690794616343)(assets/image-20211124113409740.png)]</p> 
<h3><a id="_237"></a>案例：伪联通新闻中心</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-35s5sJro-1690794616344)(assets/image-20211124115145293.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mBv931Sa-1690794616344)(assets/image-20211124115155394.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-CaOfYvt9-1690794616344)(assets/image-20211124115209067.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-42DnrY5R-1690794616345)(assets/image-20211124115218937.png)]</p> 
<h3><a id="6_247"></a>6.请求和响应</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-WK5oRO2G-1690794616345)(assets/image-20211124142250396.png)]</p> 
<p>关于重定向：</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-tgHRG1oa-1690794616345)(assets/image-20211124142033257.png)]</p> 
<h3><a id="_257"></a>案例：用户登录</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-zlFmHVRB-1690794616346)(assets/image-20211124151119553.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-pU24JgTm-1690794616346)(assets/image-20211124151127364.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-SQE1ILmA-1690794616346)(assets/image-20211124151135563.png)]</p> 
<h3><a id="7_269"></a>7.数据库操作</h3> 
<ul><li> <p>MySQL数据库 + pymysql</p> <pre><code class="prism language-python"><span class="token keyword">import</span> pymysql

<span class="token comment"># 1.连接MySQL</span>
conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span> user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span> passwd<span class="token operator">=</span><span class="token string">"root123"</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token string">'unicom'</span><span class="token punctuation">)</span>
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span>cursor<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>DictCursor<span class="token punctuation">)</span>

<span class="token comment"># 2.发送指令</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"insert into admin(username,password,mobile) values('wupeiqi','qwe123','15155555555')"</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 3.关闭</span>
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>Django开发操作数据库更简单，内部提供了ORM框架。<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-tJYs4lPR-1690794616347)(assets/image-20211124151748712.png)]</p> </li></ul> 
<h4><a id="71__294"></a>7.1 安装第三方模块</h4> 
<pre><code>pip install mysqlclient
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JbJLTE3e-1690794616347)(assets/image-20211124152339567.png)]</p> 
<h4><a id="72_ORM_304"></a>7.2 ORM</h4> 
<p>ORM可以帮助我们做两件事：</p> 
<ul><li> <p>创建、修改、删除数据库中的表（不用你写SQL语句）。 【无法创建数据库】</p> </li><li> <p>操作表中的数据（不用写SQL语句）。</p> </li></ul> 
<h5><a id="1__314"></a>1. 自己创建数据库</h5> 
<ul><li> <p>启动MySQL服务</p> </li><li> <p>自带工具创建数据库</p> <pre><code>create database gx_day15 DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
</code></pre> </li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-KrvrYMM0-1690794616347)(assets/image-20211124153042996.png)]</p> 
<h5><a id="2_django_328"></a>2. django连接数据库</h5> 
<p>在settings.py文件中进行配置和修改。</p> 
<pre><code class="prism language-python">DATABASES <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'django.db.backends.mysql'</span><span class="token punctuation">,</span>
        <span class="token string">'NAME'</span><span class="token punctuation">:</span> <span class="token string">'gx_day15'</span><span class="token punctuation">,</span>  <span class="token comment"># 数据库名字</span>
        <span class="token string">'USER'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
        <span class="token string">'PASSWORD'</span><span class="token punctuation">:</span> <span class="token string">'root123'</span><span class="token punctuation">,</span>
        <span class="token string">'HOST'</span><span class="token punctuation">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>  <span class="token comment"># 那台机器安装了MySQL</span>
        <span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-lRCwHknH-1690794616348)(assets/image-20211124154030823.png)]</p> 
<h5><a id="3django_349"></a>3.django操作表</h5> 
<ul><li>创建表</li><li>删除表</li><li>修改表</li></ul> 
<p>创建表：在models.py文件中</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-X78iOQAG-1690794616348)(assets/image-20211124154658774.png)]</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> app01_userinfo<span class="token punctuation">(</span>
    id <span class="token keyword">bigint</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>执行命令：</p> 
<pre><code>python3.9 manage.py makemigrations
python3.9 manage.py migrate
</code></pre> 
<p>注意：app需要提前注册。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-La5e9anw-1690794616349)(assets/image-20211124155407018.png)]</p> 
<p>在表中新增列时，由于已存在列中可能已有数据，所以新增列必须要指定新增列对应的数据：</p> 
<ul><li> <p>1，手动输入一个值。</p> </li><li> <p>设置默认值</p> <pre><code>age = models.IntegerField(default=2)
</code></pre> </li><li> <p>允许为空</p> <pre><code>data = models.IntegerField(null=True, blank=True)
</code></pre> </li></ul> 
<p>以后在开发中如果想要对表结构进行调整：</p> 
<ul><li> <p>在models.py文件中操作类即可。</p> </li><li> <p>命令</p> <pre><code>python3.9 manage.py makemigrations
python3.9 manage.py migrate
</code></pre> </li></ul> 
<h5><a id="4_418"></a>4.表中的数据</h5> 
<pre><code class="prism language-python">
<span class="token comment"># #### 1.新建 ####</span>
<span class="token comment"># Department.objects.create(title="销售部")</span>
<span class="token comment"># Department.objects.create(title="IT部")</span>
<span class="token comment"># Department.objects.create(title="运营部")</span>
<span class="token comment"># UserInfo.objects.create(name="武沛齐", password="123", age=19)</span>
<span class="token comment"># UserInfo.objects.create(name="朱虎飞", password="666", age=29)</span>
<span class="token comment"># UserInfo.objects.create(name="吴阳军", password="666")</span>

<span class="token comment"># #### 2.删除 ####</span>
<span class="token comment"># UserInfo.objects.filter(id=3).delete()</span>
<span class="token comment"># Department.objects.all().delete()</span>

<span class="token comment"># #### 3.获取数据 ####</span>
<span class="token comment"># 3.1 获取符合条件的所有数据</span>
<span class="token comment"># data_list = [对象,对象,对象]  QuerySet类型</span>
<span class="token comment"># data_list = UserInfo.objects.all()</span>
<span class="token comment"># for obj in data_list:</span>
<span class="token comment">#     print(obj.id, obj.name, obj.password, obj.age)</span>

<span class="token comment"># data_list = [对象,]</span>
<span class="token comment"># data_list = UserInfo.objects.filter(id=1)</span>
<span class="token comment"># print(data_list)</span>
<span class="token comment"># 3.1 获取第一条数据【对象】</span>
<span class="token comment"># row_obj = UserInfo.objects.filter(id=1).first()</span>
<span class="token comment"># print(row_obj.id, row_obj.name, row_obj.password, row_obj.age)</span>


<span class="token comment"># #### 4.更新数据 ####</span>
<span class="token comment"># UserInfo.objects.all().update(password=999)</span>
<span class="token comment"># UserInfo.objects.filter(id=2).update(age=999)</span>
<span class="token comment"># UserInfo.objects.filter(name="朱虎飞").update(age=999)</span>
</code></pre> 
<h3><a id="_463"></a>案例：用户管理</h3> 
<h4><a id="1__465"></a>1. 展示用户列表</h4> 
<ul><li>url</li><li>函数 
  <ul><li>获取所有用户信息</li><li>HTML渲染</li></ul> </li></ul> 
<h4><a id="2_472"></a>2.添加用户</h4> 
<ul><li>url</li><li>函数 
  <ul><li>GET，看到页面，输入内容。</li><li>POST，提交 -&gt; 写入到数据库。</li></ul> </li></ul> 
<h4><a id="3_481"></a>3.删除用户</h4> 
<ul><li>url</li><li>函数</li></ul> 
<pre><code>http://127.0.0.1:8000/info/delete/?nid=1
http://127.0.0.1:8000/info/delete/?nid=2
http://127.0.0.1:8000/info/delete/?nid=3

def 函数(request):
	nid = reuqest.GET.get("nid")
	UserInfo.objects.filter(id=nid).delete()
	return HttpResponse("删除成功")
</code></pre> 
<h2><a id="Django_501"></a>Django开发（一）</h2> 
<p>主题：员工管理系统</p> 
<h3><a id="1_507"></a>1.新建项目</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-WCXbc0sm-1690794616349)(E:\django\day15.assets\image-20211125083543235.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-SuC8AlHQ-1690794616349)(E:\django\day15.assets\image-20211125083701911.png)]</p> 
<h3><a id="2app_515"></a>2.创建app</h3> 
<pre><code>python manage.py startapp app01
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-9SBwoWDe-1690794616350)(E:\django\day15.assets\image-20211125084115717.png)]</p> 
<p>注册app：</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-i34CygP6-1690794616350)(E:\django\day15.assets\image-20211125084246174.png)]</p> 
<h3><a id="3django_531"></a>3.设计表结构（django）</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-URNp4SqY-1690794616350)(E:\django\day15.assets\image-20211125092320247.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-kztMSnQ0-1690794616351)(E:\django\day15.assets\image-20211125092904544.png)]</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models


<span class="token keyword">class</span> <span class="token class-name">Department</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 部门表 """</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">'标题'</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 员工表 """</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
    password <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"密码"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"年龄"</span><span class="token punctuation">)</span>
    account <span class="token operator">=</span> models<span class="token punctuation">.</span>DecimalField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"账户余额"</span><span class="token punctuation">,</span> max_digits<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> decimal_places<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    create_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"入职时间"</span><span class="token punctuation">)</span>

    <span class="token comment"># 无约束</span>
    <span class="token comment"># depart_id = models.BigIntegerField(verbose_name="部门ID")</span>
    <span class="token comment"># 1.有约束</span>
    <span class="token comment">#   - to，与那张表关联</span>
    <span class="token comment">#   - to_field，表中的那一列关联</span>
    <span class="token comment"># 2.django自动</span>
    <span class="token comment">#   - 写的depart</span>
    <span class="token comment">#   - 生成数据列 depart_id</span>
    <span class="token comment"># 3.部门表被删除</span>
    <span class="token comment"># ### 3.1 级联删除</span>
    depart <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">"Department"</span><span class="token punctuation">,</span> to_field<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    <span class="token comment"># ### 3.2 置空</span>
    <span class="token comment"># depart = models.ForeignKey(to="Department", to_field="id", null=True, blank=True, on_delete=models.SET_NULL)</span>

    <span class="token comment"># 在django中做的约束</span>
    gender_choices <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"女"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    gender <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"性别"</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>gender_choices<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4MySQL_580"></a>4.在MySQL中生成表</h3> 
<ul><li> <p>工具连接MySQL生成数据库。</p> <pre><code>create database gx_day16 DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
</code></pre> </li><li> <p>修改配置文件，连接MySQL</p> <pre><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'gx_day16',  # 数据库名字
        'USER': 'root',
        'PASSWORD': 'root123',
        'HOST': '127.0.0.1',  # 那台机器安装了MySQL
        'PORT': 3306,
    }
}
</code></pre> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-LEIeauus-1690794616351)(E:\django\day15.assets\image-20211125093556582.png)]</p> </li><li> <p>django命令生成数据库表</p> <pre><code>python manage.py makemigrations
python manage.py migrate
</code></pre> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-HxSGeTHd-1690794616351)(E:\django\day15.assets\image-20211125093805549.png)]</p> </li></ul> 
<p>表结构创建成功：</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-KXnfuumV-1690794616352)(E:\django\day15.assets\image-20211125093859327.png)]</p> 
<h3><a id="5_624"></a>5.静态文件管理</h3> 
<p>static目录</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-RA2prnAB-1690794616352)(E:\django\day15.assets\image-20211125095750076.png)]</p> 
<h3><a id="6_632"></a>6.部门管理</h3> 
<blockquote> 
 <p>体验，最原始方法来做。</p> 
 <p>Django中提供Form和ModelForm组件（方便）</p> 
</blockquote> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-9BHHWnAm-1690794616352)(E:\django\day15.assets\image-20211125100519237.png)]</p> 
<h3><a id="7_644"></a>7.模板的继承</h3> 
<ul><li>部门列表</li><li>添加部门</li><li>编辑部门</li></ul> 
<p>定义目版：<code>layout.html</code></p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% static 'plugin...min.css' %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% block css %}{% endblock %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        {% block content %}{% endblock %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>底部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% static 'js/jquery-3.6.0.min.js' %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    {% block js %}{% endblock %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>继承母版：</p> 
<pre><code class="prism language-html">{% extends 'layout.html' %}

{% block css %}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% static 'pluxxx.css' %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
		...
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
{% endblock %}


{% block content %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
{% endblock %}


{% block js %}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% static 'js/jqxxxin.js' %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
{% endblock %}
</code></pre> 
<h3><a id="8_704"></a>8.用户管理</h3> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> app01_userinfo<span class="token punctuation">(</span>name<span class="token punctuation">,</span>password<span class="token punctuation">,</span>age<span class="token punctuation">,</span>account<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>depart_id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">"韩超"</span><span class="token punctuation">,</span><span class="token string">"666"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">100.68</span><span class="token punctuation">,</span><span class="token string">"2020-01-11"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> app01_userinfo<span class="token punctuation">(</span>name<span class="token punctuation">,</span>password<span class="token punctuation">,</span>age<span class="token punctuation">,</span>account<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>depart_id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">"刘东"</span><span class="token punctuation">,</span><span class="token string">"123"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">100.68</span><span class="token punctuation">,</span><span class="token string">"2010-11-11"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> app01_userinfo<span class="token punctuation">(</span>name<span class="token punctuation">,</span>password<span class="token punctuation">,</span>age<span class="token punctuation">,</span>account<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>depart_id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">"朱虎飞"</span><span class="token punctuation">,</span><span class="token string">"999"</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">9900.68</span><span class="token punctuation">,</span><span class="token string">"2021-05-11"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+-------------+---------------+------+-----+---------+----------------+
| Field       | Type          | Null | Key | Default | Extra          |
+-------------+---------------+------+-----+---------+----------------+
| id          | bigint(20)    | NO   | PRI | NULL    | auto_increment |
| name        | varchar(16)   | NO   |     | NULL    |                |
| password    | varchar(64)   | NO   |     | NULL    |                |
| age         | int(11)       | NO   |     | NULL    |                |
| account     | decimal(10,2) | NO   |     | NULL    |                |
| create_time | datetime(6)   | NO   |     | NULL    |                |
| gender      | smallint(6)   | NO   |     | NULL    |                |
| depart_id   | bigint(20)    | NO   | MUL | NULL    |                |
+-------------+---------------+------+-----+---------+----------------+
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-HO5efwGQ-1690794616353)(E:\django\day15.assets\image-20211125144436879.png)]</p> 
<p>新建用户：</p> 
<ul><li> <p>原始方式理思路：不会采用（本质）【麻烦】</p> <pre><code>- 用户提交数据没有校验。
- 错误，页面上应该有错误提示。
- 页面上，没一个字段都需要我们重新写一遍。     [OK]
- 关联的数据，手动去获取并展示循环展示在页面。  [OK]
</code></pre> </li><li> <p>Django组件</p> 
  <ul><li>Form组件（小简便）</li><li>ModelForm组件（最简便）</li></ul> </li></ul> 
<h4><a id="81_Form_753"></a>8.1 初识Form</h4> 
<h5><a id="1_viewspy_755"></a>1. views.py</h5> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">MyForm</span><span class="token punctuation">(</span>Form<span class="token punctuation">)</span><span class="token punctuation">:</span>
    user <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>
    pwd <span class="token operator">=</span> form<span class="token punctuation">.</span>CharFiled<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>
    email <span class="token operator">=</span> form<span class="token punctuation">.</span>CharFiled<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>
    account <span class="token operator">=</span> form<span class="token punctuation">.</span>CharFiled<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>
    create_time <span class="token operator">=</span> form<span class="token punctuation">.</span>CharFiled<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>
    depart <span class="token operator">=</span> form<span class="token punctuation">.</span>CharFiled<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>
    gender <span class="token operator">=</span> form<span class="token punctuation">.</span>CharFiled<span class="token punctuation">(</span>widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Input<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">user_add</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> MyForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'user_add.html'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span>form<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2user_addhtml_774"></a>2.user_add.html</h5> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% for field in form%}
    	{<!-- -->{ field }}
    {% endfor %}
    <span class="token comment">&lt;!-- &lt;input type="text"  placeholder="姓名" name="user" /&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {<!-- -->{ form.user }}
    {<!-- -->{ form.pwd }}
    {<!-- -->{ form.email }}
    <span class="token comment">&lt;!-- &lt;input type="text"  placeholder="姓名" name="user" /&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="83_ModelForm_796"></a>8.3 ModelForm（推荐）</h4> 
<h5><a id="0_modelspy_798"></a>0. models.py</h5> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 员工表 """</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
    password <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"密码"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"年龄"</span><span class="token punctuation">)</span>
    account <span class="token operator">=</span> models<span class="token punctuation">.</span>DecimalField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"账户余额"</span><span class="token punctuation">,</span> max_digits<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> decimal_places<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    create_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"入职时间"</span><span class="token punctuation">)</span>
    depart <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">"Department"</span><span class="token punctuation">,</span> to_field<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    gender_choices <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"女"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    gender <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"性别"</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>gender_choices<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="1_viewspy_818"></a>1. views.py</h5> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">MyForm</span><span class="token punctuation">(</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    xx <span class="token operator">=</span> form<span class="token punctuation">.</span>CharField<span class="token operator">*</span><span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token string">"xx"</span><span class="token punctuation">]</span>


<span class="token keyword">def</span> <span class="token function">user_add</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> MyForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'user_add.html'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span>form<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2user_addhtml_834"></a>2.user_add.html</h5> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% for field in form%}
    	{<!-- -->{ field }}
    {% endfor %}
    <span class="token comment">&lt;!-- &lt;input type="text"  placeholder="姓名" name="user" /&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {<!-- -->{ form.user }}
    {<!-- -->{ form.pwd }}
    {<!-- -->{ form.email }}
    <span class="token comment">&lt;!-- &lt;input type="text"  placeholder="姓名" name="user" /&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h2><a id="Django_856"></a>Django开发（二）</h2> 
<ul><li> <p>部门管理</p> </li><li> <p>用户管理</p> 
  <ul><li> <p>用户列表</p> </li><li> <p>新建用户</p> <pre><code>- ModelForm，针对数据库中的某个表。
- Form。
</code></pre> </li></ul> </li></ul> 
<h4><a id="84__873"></a>8.4 编辑用户</h4> 
<ul><li> <p>点击编辑，跳转到编辑页面（将编辑行的ID携带过去）。</p> </li><li> <p>编辑页面（默认数据，根据ID获取并设置到页面中）</p> </li><li> <p>提交：</p> 
  <ul><li> <p>错误提示</p> </li><li> <p>数据校验</p> </li><li> <p>在数据库更新</p> <pre><code>models.UserInfo.filter(id=4).update(...)
</code></pre> </li></ul> </li></ul> 
<h4><a id="85__893"></a>8.5 删除</h4> 
<p>见代码。</p> 
<h3><a id="9_905"></a>9.靓号管理</h3> 
<h4><a id="91__907"></a>9.1 表结构</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-NuYRP5xz-1690794616353)(E:\django\day15.assets\image-20211126094318872.png)]</p> 
<p>根据表结构的需求，在models.py中创建类（由类生成数据库中的表）。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">PrettyNum</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 靓号表 """</span>
    mobile <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"手机号"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">)</span>
    <span class="token comment"># 想要允许为空 null=True, blank=True</span>
    price <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"价格"</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

    level_choices <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"1级"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"2级"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"3级"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"4级"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    level <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"级别"</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>level_choices<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

    status_choices <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"已占用"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"未使用"</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    status <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"状态"</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>status_choices<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<p>自己在数据模拟创建一些数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> app01_prettynum<span class="token punctuation">(</span>mobile<span class="token punctuation">,</span>price<span class="token punctuation">,</span><span class="token keyword">level</span><span class="token punctuation">,</span><span class="token keyword">status</span><span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">"111111111"</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>mysql&gt; select * from app01_prettynum;
+----+-----------+-------+-------+--------+
| id | mobile    | price | level | status |
+----+-----------+-------+-------+--------+
|  1 | 111111111 |    19 |     1 |      1 |
|  2 | 111111111 |    19 |     1 |      1 |
|  3 | 111111111 |    19 |     1 |      1 |
|  4 | 111111111 |    19 |     1 |      1 |
+----+-----------+-------+-------+--------+
4 rows in set (0.01 sec)
</code></pre> 
<h4><a id="92__960"></a>9.2 靓号列表</h4> 
<ul><li> <p>URL</p> </li><li> <p>函数</p> 
  <ul><li> <p>获取所有的靓号</p> </li><li> <p>结合html+render将靓号罗列出来</p> <pre><code>id	号码	价格	级别（中文）	状态（中文）
</code></pre> </li></ul> </li></ul> 
<h4><a id="93__978"></a>9.3 新建靓号</h4> 
<ul><li> <p>列表点击跳转：<code>/pretty/add/</code></p> </li><li> <p>URL</p> </li><li> <p>ModelForm类</p> <pre><code>from django import forms

class PrettyModelForm(forms.ModelForm):
	...
</code></pre> </li><li> <p>函数</p> 
  <ul><li>实例化类的对象</li><li>通过render将对象传入到HTML中。</li><li>模板的循环展示所有的字段。</li></ul> </li><li> <p>点击提交</p> 
  <ul><li>数据校验</li><li>保存到数据库</li><li>跳转回靓号列表</li></ul> </li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-iBAgglFl-1690794616353)(E:\django\day15.assets\image-20211126111252278.png)]</p> 
<h4><a id="94__1009"></a>9.4 编辑靓号</h4> 
<ul><li>列表页面：<code>/pretty/数字/edit/</code></li><li>URL</li><li>函数 
  <ul><li>根据ID获取当前编辑的对象</li><li>ModelForm配合，默认显示数据。</li><li>提交修改。</li></ul> </li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-lsJ9Gpxx-1690794616354)(E:\django\day15.assets\image-20211126112848435.png)]</p> 
<p>不允许手机号重复。</p> 
<ul><li> <p>添加：【正则表达式】【手机号不能存在】</p> <pre><code class="prism language-python"><span class="token comment"># [obj,obj,obj]</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile<span class="token operator">=</span><span class="token string">"1888888888"</span><span class="token punctuation">)</span>

obj <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile<span class="token operator">=</span><span class="token string">"1888888888"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># True/False</span>
exists <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile<span class="token operator">=</span><span class="token string">"1888888888"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>编辑：【正则表达式】【手机号不能存在】</p> <pre><code class="prism language-python">排除自己以外，其他的数据是否手机号是否重复？

<span class="token comment"># id!=2 and mobile='1888888888'</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile<span class="token operator">=</span><span class="token string">"1888888888"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exclude<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<h4><a id="95__1051"></a>9.5 搜索手机号</h4> 
<pre><code class="prism language-python">models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile<span class="token operator">=</span><span class="token string">"19999999991"</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>

data_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"mobile"</span><span class="token punctuation">:</span><span class="token string">"19999999991"</span><span class="token punctuation">,</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">123</span><span class="token punctuation">}</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token operator">**</span>data_dict<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>       <span class="token comment"># 等于12</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>id__gt<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>   <span class="token comment"># 大于12</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>id__gte<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token comment"># 大于等于12</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>id__lt<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>   <span class="token comment"># 小于12</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>id__lte<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token comment"># 小于等于12</span>

data_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"id__lte"</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token operator">**</span>data_dict<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile<span class="token operator">=</span><span class="token string">"999"</span><span class="token punctuation">)</span>               <span class="token comment"># 等于</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile__startswith<span class="token operator">=</span><span class="token string">"1999"</span><span class="token punctuation">)</span>  <span class="token comment"># 筛选出以1999开头</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile__endswith<span class="token operator">=</span><span class="token string">"999"</span><span class="token punctuation">)</span>     <span class="token comment"># 筛选出以999结尾</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>mobile__contains<span class="token operator">=</span><span class="token string">"999"</span><span class="token punctuation">)</span>     <span class="token comment"># 筛选出包含999</span>

data_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"mobile__contains"</span><span class="token punctuation">:</span><span class="token string">"999"</span><span class="token punctuation">}</span>
models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token operator">**</span>data_dict<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="96__1085"></a>9.6 分页</h4> 
<pre><code class="prism language-python">queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>


<span class="token comment"># 第1页</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>

<span class="token comment"># 第2页</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span>

<span class="token comment"># 第3页</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">]</span>
</code></pre> 
<pre><code class="prism language-python">data <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> models<span class="token punctuation">.</span>PrettyNum<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li> <p>分页的逻辑和处理规则</p> </li><li> <p>封装分页类</p> 
  <ul><li>从头到尾开发</li><li>写项目用【pagination.py】公共组件。</li></ul> </li><li> <p>小Bug，搜索 + 分页情况下。</p> <pre><code>分页时候，保留原来的搜索条件

http://127.0.0.1:8000/pretty/list/?q=888
http://127.0.0.1:8000/pretty/list/?page=1

http://127.0.0.1:8000/pretty/list/?q=888&amp;page=23
</code></pre> </li></ul> 
<h3><a id="10_1128"></a>10.时间插件</h3> 
<pre><code>&lt;link rel="stylesheet" href="static/plugins/bootstrap-3.4.1/css/bootstrap.css"&gt;
&lt;link rel="stylesheet" href="static/plugins/bootstrap-datepicker/css/bootstrap-datepicker.css"&gt;


&lt;input type="text" id="dt" class="form-control" placeholder="入职日期"&gt;



&lt;script src="static/js/jquery-3.6.0.min.js"&gt;&lt;/script&gt;
&lt;script src="static/plugins/bootstrap-3.4.1/js/bootstrap.js"&gt;&lt;/script&gt;
&lt;script src="static/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"&gt;&lt;/script&gt;
&lt;script src="static/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"&gt;&lt;/script&gt;


&lt;script&gt;
    $(function () {
        $('#dt').datepicker({
            format: 'yyyy-mm-dd',
            startDate: '0',
            language: "zh-CN",
            autoclose: true
        });

    })
&lt;/script&gt;
</code></pre> 
<h3><a id="11ModelFormBootStrap_1160"></a>11.ModelForm和BootStrap</h3> 
<ul><li> <p>ModelForm可以帮助我们生成HTML标签。</p> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span><span class="token punctuation">]</span>

form <span class="token operator">=</span> UserModelForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <pre><code class="prism language-html">{<!-- -->{form.name}}      普通的input框
{<!-- -->{form.password}}  普通的input框
</code></pre> </li><li> <p>定义插件</p> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
        widgets <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"name"</span><span class="token punctuation">:</span> forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">"password"</span><span class="token punctuation">:</span> forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">"age"</span><span class="token punctuation">:</span> forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
</code></pre> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>
        min_length<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>
        label<span class="token operator">=</span><span class="token string">"用户名"</span><span class="token punctuation">,</span>
        widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">]</span>
</code></pre> <pre><code class="prism language-html">{<!-- -->{form.name}}      BootStrap的input框
{<!-- -->{form.password}}  BootStrap的input框
</code></pre> </li><li> <p>重新定义的init方法，批量设置</p> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        
        <span class="token comment"># 循环ModelForm中的所有字段，给每个字段的插件设置</span>
        <span class="token keyword">for</span> name<span class="token punctuation">,</span> field <span class="token keyword">in</span> self<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">,</span> 
                <span class="token string">"placeholder"</span><span class="token punctuation">:</span> field<span class="token punctuation">.</span>label
            <span class="token punctuation">}</span>
</code></pre> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        
        <span class="token comment"># 循环ModelForm中的所有字段，给每个字段的插件设置</span>
        <span class="token keyword">for</span> name<span class="token punctuation">,</span> field <span class="token keyword">in</span> self<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 字段中有属性，保留原来的属性，没有属性，才增加。</span>
            <span class="token keyword">if</span> field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">:</span>
				field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"form-control"</span>
				field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">"placeholder"</span><span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">.</span>label
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">,</span> 
                    <span class="token string">"placeholder"</span><span class="token punctuation">:</span> field<span class="token punctuation">.</span>label
                <span class="token punctuation">}</span>
</code></pre> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserEditModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        
        <span class="token comment"># 循环ModelForm中的所有字段，给每个字段的插件设置</span>
        <span class="token keyword">for</span> name<span class="token punctuation">,</span> field <span class="token keyword">in</span> self<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 字段中有属性，保留原来的属性，没有属性，才增加。</span>
            <span class="token keyword">if</span> field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">:</span>
				field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"form-control"</span>
				field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">"placeholder"</span><span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">.</span>label
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">,</span> 
                    <span class="token string">"placeholder"</span><span class="token punctuation">:</span> field<span class="token punctuation">.</span>label
                <span class="token punctuation">}</span>
</code></pre> </li><li> <p>自定义类</p> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">BootStrapModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token comment"># 循环ModelForm中的所有字段，给每个字段的插件设置</span>
        <span class="token keyword">for</span> name<span class="token punctuation">,</span> field <span class="token keyword">in</span> self<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 字段中有属性，保留原来的属性，没有属性，才增加。</span>
            <span class="token keyword">if</span> field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">:</span>
				field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"form-control"</span>
				field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">"placeholder"</span><span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">.</span>label
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                field<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>attrs <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"form-control"</span><span class="token punctuation">,</span> 
                    <span class="token string">"placeholder"</span><span class="token punctuation">:</span> field<span class="token punctuation">.</span>label
                <span class="token punctuation">}</span>
</code></pre> <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserEditModelForm</span><span class="token punctuation">(</span>BootStrapModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
</code></pre> </li></ul> 
<h4><a id="_1305"></a>操作</h4> 
<ul><li> <p>提取公共的类</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-TajQ5Ki0-1690794616354)(E:\django\day15.assets\image-20211126175803303.png)]<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-BK4Gnv1I-1690794616354)(E:\django\day15.assets\image-20211126175826579.png)]</p> </li><li> <p>ModelForm拆分出来<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-A82Ti9tw-1690794616355)(E:\django\day15.assets\image-20211126175852716.png)]</p> </li><li> <p>视图函数的归类<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-4lh1fBWi-1690794616355)(E:\django\day15.assets\image-20211126175927378.png)]</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-7NqtwfX2-1690794616355)(E:\django\day15.assets\image-20211126175946996.png)]</p> </li></ul> 
<h2><a id="Django_1328"></a>Django开发（三）</h2> 
<p>知识点的回顾：</p> 
<ul><li> <p>安装Django</p> <pre><code>pip install django
</code></pre> </li><li> <p>创建Django项目</p> <pre><code>&gt;&gt;&gt; django-admin startproject mysite
</code></pre> <p>注意：Pycharm可以创建。如果用Pycharm创建，记得settings.py中的DIR templates 删除。</p> </li><li> <p>创建app &amp; 注册</p> <pre><code>&gt;&gt;&gt;python manage.py startapp app01
&gt;&gt;&gt;python manage.py startapp app02
&gt;&gt;&gt;python manage.py startapp app03
</code></pre> <pre><code>INSTALLED_APPS = [
    ...
    'app01.apps.App01Config'
]
</code></pre> <p>注意：否则app下的models.py写类时，无法在数据库中创建表。</p> </li><li> <p>配置 静态文件路径 &amp; 模板的路径（放在app目录下）。</p> </li><li> <p>配置数据库相关操作（MySQL）</p> 
  <ul><li> <p>第三方模块（django3版本）</p> <pre><code>pip install mysqlclient
</code></pre> </li><li> <p>自己先去MySQL创建一个数据库。</p> </li><li> <p>配置数据库连接settings.py</p> <pre><code class="prism language-python">DATABASES <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'django.db.backends.mysql'</span><span class="token punctuation">,</span>
        <span class="token string">'NAME'</span><span class="token punctuation">:</span> <span class="token string">'gx_day16'</span><span class="token punctuation">,</span>  <span class="token comment"># 数据库名字</span>
        <span class="token string">'USER'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
        <span class="token string">'PASSWORD'</span><span class="token punctuation">:</span> <span class="token string">'root123'</span><span class="token punctuation">,</span>
        <span class="token string">'HOST'</span><span class="token punctuation">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>  <span class="token comment"># 那台机器安装了MySQL</span>
        <span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>在app下的models.py中编写</p> <pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models


<span class="token keyword">class</span> <span class="token class-name">Admin</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 管理员 """</span>
    username <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"用户名"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
    password <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"密码"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>username

    
<span class="token keyword">class</span> <span class="token class-name">Department</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 部门表 """</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">'标题'</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>title
</code></pre> </li><li> <p>执行两个命令：</p> <pre><code class="prism language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>python manange<span class="token punctuation">.</span>py makemigrations
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>python manange<span class="token punctuation">.</span>py migrate
</code></pre> </li></ul> </li><li> <p>在 urls.py ，路由 （ URL 和 函数的对应关系）。</p> </li><li> <p>在views.py，视图函数，编写业务逻辑。</p> </li><li> <p>templates目录，编写HTML模板（含有模板语法、继承、<code>{% static 'xx'%}</code>）</p> </li><li> <p>ModelForm &amp; Form组件，在我们开发增删改查功能。</p> 
  <ul><li>生成HTML标签（生成默认值）</li><li>请求数据进行校验。</li><li>保存到数据库（ModelForm）</li><li>获取错误信息。</li></ul> </li><li> <p>Cookie和Session，用户登录信息保存起来。</p> </li><li> <p>中间件，基于中间件实现用户认证 ，基于：<code>process_request</code>。</p> </li><li> <p>ORM操作</p> <pre><code>models.User.objects.filter(id="xxx")
models.User.objects.filter(id="xxx").order_by("-id")
</code></pre> </li><li> <p>分页组件。</p> </li></ul> 
<h3><a id="1Ajax_1448"></a>1.Ajax请求</h3> 
<h3><a id="2_1452"></a>2.订单</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mOa4MvUm-1690794616356)(E:\django\day15.assets\image-20211129092011994.png)]</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Order</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 订单 """</span>
    oid <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"订单号"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"名称"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
    price <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"价格"</span><span class="token punctuation">)</span>

    status_choices <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"待支付"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"已支付"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    status <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"状态"</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>status_choices<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    admin <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"管理员"</span><span class="token punctuation">,</span> to<span class="token operator">=</span><span class="token string">"Admin"</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
</code></pre> 
<p>想要去数据库中获取数据时：对象/字典</p> 
<pre><code class="prism language-python"><span class="token comment"># 对象，当前行的所有数据。</span>
row_object <span class="token operator">=</span> models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>uid<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
row_object<span class="token punctuation">.</span><span class="token builtin">id</span>
row_object<span class="token punctuation">.</span>title
</code></pre> 
<pre><code class="prism language-python"><span class="token comment"># 字典，{"id":1,"title":"xx"}</span>
row_dict <span class="token operator">=</span> models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>uid<span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token comment"># queryset = [obj,obj,obj,]</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token comment"># queryset = [ {'id':1,'title':"xx"},{'id':2,'title':"xx"}, ]</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token comment"># queryset = [ (1,"xx"),(2,"xxx"), ]</span>
queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values_list<span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_1512"></a>小结</h3> 
<p>至此，基于Ajax + 对话框的形式实现的页面的增删改查。</p> 
<ul><li>表单，实现增删改查。</li><li>Ajax，实现增删改查。</li></ul> 
<h3><a id="3_1523"></a>3.图表</h3> 
<ul><li>highchart，国外。</li><li>echarts，国内。</li></ul> 
<p>更多参考文档：https://echarts.apache.org/handbook/zh/get-started</p> 
<h2><a id="Django_1536"></a>Django开发（四）</h2> 
<h3><a id="1_1538"></a>1.知识点复习</h3> 
<h4><a id="11__1542"></a>1.1 基础入门</h4> 
<ul><li> <p>编码</p> <pre><code>编码基础知识点：utf-8、unicode、gbk、ascii
默认解释器编码：
	- Python2：ascii（ # -*- coding:utf-8 -*- )
	- Python3：utf-8（重要）
</code></pre> </li><li> <p>输入和输出</p> <pre><code>print
input，用户输入的永远是字符串类型。

data = input("请输入序号：") # 1
print(data) # "1"
</code></pre> </li><li> <p>变量</p> <pre><code class="prism language-python">规范：字母、数字、下划线；数字不能开头；不能是py内置关键字。
建议：
	<span class="token operator">-</span> 见名知意
    <span class="token operator">-</span> 多个单词，用下划线连接。
    <span class="token operator">-</span> 全局变量用大写（ DATA_LIST、USER_INFO  ）；局部变量小写（user_age）。
    
注意：
	全局变量    GET_INFO
    局部变量    get_info
	函数名      get_info
    类名        GetInfo
    文件名      get_info
    包名称      get_info
</code></pre> </li><li> <p>异常处理【补充】</p> <pre><code class="prism language-python">data <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入："</span><span class="token punctuation">)</span>  <span class="token comment"># 你好</span>
res <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

<span class="token comment"># 这个代码是有风险，可能会报错。</span>
</code></pre> <pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"开始"</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入："</span><span class="token punctuation">)</span>  <span class="token comment"># 123  / 你好</span>
    res <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"出错了"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"结束"</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>循环中for/while内部都可以用 break、continue</p> </li><li> <p>字符串格式化</p> <pre><code>data = "我是{}，姓名是{}，年龄是{}".format("xx",123,999)

data = "我是{0}，姓名是{1}，年龄是{2}".format("xx",123,999)

data = "我是{0}，姓名是{0}，年龄是{2}".format("xx",123)
</code></pre> </li><li> <p>运算符</p> <pre><code>- 传统的运算符
- 逻辑运算符
	- 常见操作，最终的到的结果：True/False
		if 1&gt;10 and 9&lt;8:
			pass
		else:
			pass
	- 非传统，最终的结果是：第一个或第二个值。
		data = 值1 and 值2
		v1 = 5 and 9  # 9
		v2 = 0 and 10 # 0
</code></pre> </li></ul> 
<h4><a id="12__1633"></a>1.2 数据类型</h4> 
<ul><li> <p>字符串类型</p> <pre><code>- 不可变类型；
- 常见方法：strip/split/replace/join
	v1 = "root"
	data = v1.upper()
	print(v1)   # root
	print(data) # ROOT
	
- 公共：索引、切片、循环
	v1 = "root"
	v1[1] = "X"  # 报错，不可变
</code></pre> </li><li> <p>列表类型</p> <pre><code>- 可变类型
- 常见方法：append/insert/pop/remove
- 公共：索引、切片、循环
	v1 = [11,22,33,44,55]
	
	v1[0]
	v1[1:3]      - 前取后不取
	v1[1:-1]
- 列表的推导式
	data = [ i for i in range(10)]
	data = [ i for i in range(10) if i&lt;5]
</code></pre> </li><li> <p>字典类型</p> <pre><code>- 可变类型
- 字典的键是有要求：可哈希类型，目前不可哈希：list/dict/set。
- 扩展：python3.6+字典有序。
- 常见的功能：keys、values、items、get
	data = {}
	v1 = data.get("k1")
</code></pre> </li><li> <p>关于元组</p> <pre><code>v1 = (11,)
v2 = (11)   # 11
v3 = 11
</code></pre> </li><li> <p>其他数据类型</p> <pre><code>其他类型转布尔类型时，哪些为False： 空、0、None
其他类型转自己类型时，自己的类名()
	int("123")
</code></pre> </li></ul> 
<h4><a id="13__1695"></a>1.3 函数</h4> 
<ul><li> <p>定义</p> <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

func<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>参数</p> <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre> </li><li> <p>返回值</p> <pre><code class="prism language-python"><span class="token operator">-</span> 没有返回值，默认返回<span class="token boolean">None</span>
    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span>
<span class="token operator">-</span> 一个返回值
    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">123</span>
    
    res <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment"># 123</span>
    
<span class="token operator">-</span> 多个返回值
    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">,</span><span class="token number">123</span>
    
    res <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment"># (123,999,123)</span>
    
    
	<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">,</span><span class="token number">123</span>
    
    d1<span class="token punctuation">,</span>d2<span class="token punctuation">,</span>c3 <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <pre><code class="prism language-python">v1<span class="token punctuation">,</span>v2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">]</span>
v1<span class="token punctuation">,</span>v2<span class="token punctuation">,</span>v3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>lambda表达式（匿名函数）</p> <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> arg <span class="token operator">+</span> <span class="token number">100</span>

func <span class="token operator">=</span> <span class="token keyword">lambda</span> arg<span class="token punctuation">:</span>arg<span class="token operator">+</span><span class="token number">100</span>
v1 <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span> <span class="token comment"># 200</span>
</code></pre> </li><li> <p>内置函数</p> <pre><code>max/min/all/any/help/hex/oct/bin..

open，文件操作。
    f = open("xx.log",mode='r')
    data = f.read()
    f.close()
</code></pre> </li><li> <p>文件操作</p> <pre><code>- 模式：r/w/a ； rb/wb/ab
- 打开 &amp; 关闭
	with open("xx.log",mode='r') as f:
		f.read()
</code></pre> </li></ul> 
<h4><a id="14__1784"></a>1.4 模块</h4> 
<ul><li> <p>分类</p> <pre><code>- 自定义模块：自己写文件/文件夹
- 内置模块：time/datetime/json/hashlib/random/re等
- 第三方模块：openpyxl/requests/bs4/flask/django等
</code></pre> </li><li> <p>自定义模块</p> <pre><code>- sys.path，Python内部导入模块时，根据目录去寻找。
- 一定不要让自己写的模块名和内置的模块名重复（***）
- 导入模块：
	import xxx
	from xxx import xxx
</code></pre> </li><li> <p>内置模块</p> <pre><code>- 时间部分：time/datetime/字符串类型。
- random：随机生成数字。
- hashlib：加密（md5加密、md5加密+加盐） 防止被撞库。
- json：
	- JSON格式的字符串： 内部字符串双引号、内部[] 
	- json.dumps
	- json.loads
- re和正则
	- 正则：\d \w ; 贪婪匹配。
	- re.search/re.match/      re.findall
</code></pre> </li><li> <p>第三方模块</p> <pre><code>- 安装第三方模块：pip、源码、wheel
- 常见第三方模块：
	- requests
	- bs4
	- openpyxl
	- python-docx
	- flask/django （flask简洁（轻量级）；django功能强大）
</code></pre> </li></ul> 
<h4><a id="15__1831"></a>1.5 面向对象</h4> 
<pre><code>- 面向对象的三大特性：封装、继承、多态。
- 理解，读懂源码和代码。
</code></pre> 
<h4><a id="16_MySQL_1840"></a>1.6 MySQL数据库</h4> 
<pre><code>- 数据库
- 表
- 数据行
更多知识：https://www.bilibili.com/video/BV15R4y1b7y9
</code></pre> 
<pre><code>show databases;
use 数据库;

show tables;
desc 表名;

select * from 表;
insert into 表(列,列,列)values(...)
update  表 set 列=值;
delete from 表 where 条件;
</code></pre> 
<p>Python连接并操作MySQL：</p> 
<ul><li> <p>pymysql 【自己原生写】</p> <pre><code>pip install pymysql
</code></pre> </li><li> <p>mysqlclient 【django内部】</p> <pre><code>pip install mysqlclient
</code></pre> </li><li> <p>MySQLdb （默认不支持python3）</p> <pre><code>pip intall MySQLdb
</code></pre> </li></ul> 
<p>当使用Python代码去操作MySQL时，一定要防止SQL注入的问题。</p> 
<pre><code class="prism language-python"><span class="token comment"># SQL语句不要用字符串格式化去拼接。</span>

<span class="token keyword">import</span> pymysql
<span class="token comment"># 1.连接MySQL</span>
conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span> user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span> passwd<span class="token operator">=</span><span class="token string">"root123"</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token string">'unicom'</span><span class="token punctuation">)</span>
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span>cursor<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>DictCursor<span class="token punctuation">)</span>

<span class="token comment"># 【错误】不要这么写</span>
sql <span class="token operator">=</span> <span class="token string">"select * from admin where id &gt; %s"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
<span class="token comment"># 【正确】这么写</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from admin where id &gt; %s"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 获取符合条件的第一条数据，字典    None</span>
res <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment"># {'id': 3, 'username': '集宁', 'password': 'qwe123', 'mobile': '1999999999'}</span>

<span class="token comment"># 3.关闭连接</span>
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="17__1911"></a>1.7 前端开发</h4> 
<ul><li> <p>HTML</p> <pre><code>- 块级和行内标签（div、span）
	块级：div/h系列
	行内：span/a （设置高度、宽度、边距无效）
- Form表单
	&lt;form method="post" action="地址"&gt; 
		&lt;input ....
		
		&lt;input type='submit' ... /&gt;
	&lt;/form&gt;
	
- 关于a标签
	&lt;a href="www.baidu.com"&gt;百度&lt;/a&gt;   超链接去跳转。
	做锚点
        &lt;a href="#m1"&gt;第一章&lt;/a&gt;
        &lt;a href="#m2"&gt;第二章&lt;/a&gt;
        &lt;div id="m1" style="height: 1000px;"&gt;第一章 谢新雪&lt;/div&gt;
        &lt;div id="m2" style="height: 1000px;"&gt;第二章 单独的&lt;/div&gt;
</code></pre> </li><li> <p>CSS</p> <pre><code>- 位置
	- 标签 &lt;div style="xxx"&gt;
	- style代码块
		&lt;style&gt;
			div { }
			#v1 { }
			.v2 {}
		&lt;/style&gt;
	- 文件中
	
- 选择器
	div { }
	#v1 { }
	.v2 { }
	div[xx='11'] { }
	
- 样式
	color;fonts-ize; background-color; padding; margin;
	float:left; ,脱离文档流。 clear:both; :after
</code></pre> </li><li> <p>JavaScript &amp; jQuery</p> <pre><code>- 本质上：找到标签；操作标签。

- 找标签
	$("#x1")
	$(".x1")
	$("div")
	
	$("input[type='text']")   找到 input 标签且 type='text'
- 操作标签
	$("#x1").text()            &lt;div id='x1'&gt;dd&lt;/div&gt;
	$("#x1").text("xxx")       &lt;div id='x1'&gt;xxx&lt;/div&gt;
	
	$("#x1").val()             &lt;input id='x1' /&gt;
	$("#x1").val("xxx")        &lt;input id='x1' /&gt;
	
	$("#x1").attr("uu")           &lt;div id='x1' uu="123"&gt;dd&lt;/div&gt;
	$("#x1").attr("uu","999")     &lt;div id='x1' uu="999"&gt;dd&lt;/div&gt;
	
	$("#x1").empty()          &lt;div id='x1'&gt;dd&lt;/div&gt;  - 清空内容
	$("#x1").remove()         &lt;div id='x1'&gt;dd&lt;/div&gt;  - 整个标签删除
</code></pre> </li><li> <p>BootStrap</p> <pre><code>- 支持响应式布局，根据屏幕的宽度调整布局。
- 栅格，12份。
- 常见的样式：
	- container  / container-fluid
	- 面板
	- 按钮
	- 表单
	- 表格
	- 对话框
</code></pre> </li><li> <p>第三方插件</p> <pre><code>- 插件一般都包含：CSS、JavaScript，开发使用时候
	- 引入css、js（依赖jQuery）
	- 使用
</code></pre> </li><li> <p>关于注释</p> <pre><code>- Python语言
	# 注释
    """ 注释 """
- HTML
	&lt;!-- --&gt;
    
- CSS注释
	/* 注释 */
    
- JavaScript
	// 注释
    /* 注释 */
</code></pre> </li></ul> 
<h4><a id="18_Django_2025"></a>1.8 Django</h4> 
<ul><li> <p>安装</p> <pre><code>pip install django
</code></pre> <pre><code>python安装目录下：
	- lib/site-packages/django源码包
	- Scripts/django-admin.exe  文件
</code></pre> </li><li> <p>创建Django项目</p> <pre><code>&gt;&gt;&gt;django-admin  startproject  项目名
</code></pre> </li><li> <p>创建APP</p> <pre><code>&gt;&gt;&gt;cd 项目目录
&gt;&gt;&gt;python manange.py startapp app名称
</code></pre> </li><li> <p>注册app</p> <pre><code>- 不注册，models.py生成数据库表行为不执行。
- 不注册，模板文件、静态文件，不回去app目录下找。
</code></pre> </li><li> <p>static目录，静态文件目录</p> </li><li> <p>templates目录，模板文件目录（HTML）</p> </li><li> <p>表结构设计 app01/modes.py下执行</p> <pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    v1 <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <pre><code>&gt;&gt;&gt;python manage.py makemigrations
&gt;&gt;&gt;python manage.py migrate
</code></pre> </li><li> <p>urls.py 中编写路由。</p> <pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span>re_path
<span class="token keyword">from</span> app01 <span class="token keyword">import</span> admin


urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'admin/list/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>admin_list<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'admin/&lt;int:nid&gt;/delete/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>admin_delete<span class="token punctuation">)</span><span class="token punctuation">,</span>
    re_path<span class="token punctuation">(</span><span class="token string">'admin/(?P&lt;nid&gt;\d+)/delete/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>admin_delete<span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> </li><li> <p>视图函数</p> <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">admin_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    k1 <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">)</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 业务处理
    
    <span class="token keyword">return</span> 数据

<span class="token operator">-</span> 默认参数request，包含请求相关的所有数据。
	request<span class="token punctuation">.</span>method
    request<span class="token punctuation">.</span>GET
    request<span class="token punctuation">.</span>POST
    request<span class="token punctuation">.</span>FILES，上传文件。
    request<span class="token punctuation">.</span>path_info，获取当前请求的URL
    	http<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>depart<span class="token operator">/</span>add<span class="token operator">/</span>  <span class="token operator">-</span><span class="token operator">&gt;</span>    <span class="token operator">/</span>depart<span class="token operator">/</span>add<span class="token operator">/</span>
                
<span class="token operator">-</span> 返回值
	<span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"字符串"</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">"data"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">456</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token punctuation">)</span>
		<span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span> <span class="token punctuation">,</span>safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">"xxx.html"</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>值<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8000/depart/add/"</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"/depart/add/"</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>数据库的ORM操作</p> <pre><code class="prism language-python"><span class="token comment"># 增加</span>
models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

obj <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

obj_list <span class="token operator">=</span> <span class="token punctuation">[</span>
    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    models<span class="token punctuation">.</span>类<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
    。。。
<span class="token punctuation">]</span>
models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>bulk_create<span class="token punctuation">(</span>obj_list<span class="token punctuation">,</span>batch_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> <pre><code class="prism language-python"><span class="token comment"># 查询</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>         <span class="token comment"># [obj,obj,]</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># []</span>
obj <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># obj / None</span>

queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__gt<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__gte<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__lt<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__lte<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age__gt<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name__contains<span class="token operator">=</span><span class="token string">"中国"</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>exclude<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>  <span class="token comment"># id !=9</span>

queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">"-id"</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">"-id"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span>

queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
</code></pre> <pre><code class="prism language-python"><span class="token comment"># 更新</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">"武沛齐"</span><span class="token punctuation">)</span>
queyrset <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"武沛齐"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


obj <span class="token operator">=</span> models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"武沛齐"</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span>
obj<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <pre><code class="prism language-python"><span class="token comment"># 删除</span>
models<span class="token punctuation">.</span>类<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <pre><code>整理的所有ORM操作：
	https://www.cnblogs.com/wupeiqi/articles/6216618.html
</code></pre> </li><li> <p>Form和ModelForm组件</p> <pre><code>- 自动生成HTML标签
- 对用户请求的数据进行校验
	- 自动保存到数据库（ModelForm）
- 错误信息
</code></pre> <pre><code class="prism language-python"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms

<span class="token keyword">class</span> <span class="token class-name">UserForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>Form<span class="token punctuation">)</span><span class="token punctuation">:</span>
    xx <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    
    
<span class="token keyword">class</span> <span class="token class-name">UserModelForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>类
        fields <span class="token operator">=</span> <span class="token string">"__all__"</span>    
</code></pre> <pre><code class="prism language-python">form <span class="token operator">=</span> UserModelForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span>instance<span class="token operator">=</span>对象<span class="token punctuation">)</span>
<span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    form<span class="token punctuation">.</span>cleaned_data
<span class="token keyword">else</span><span class="token punctuation">:</span>
    form<span class="token punctuation">.</span>errors
</code></pre> </li><li> <p>关于POST提交CSRF认证</p> <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>post<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    {% csrf_token %}
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <p>如果想要免除csrf认证。</p> <pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>csrf <span class="token keyword">import</span> csrf_exempt

<span class="token decorator annotation punctuation">@csrf_exempt</span>
<span class="token keyword">def</span> <span class="token function">order_add</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre> </li><li> <p>Cookie和Session</p> <pre><code>cookie，本质上保存在浏览器端的键值对。 
session，保存服务器端（django是将session默认存储在数据库中）

def order_add(request):
    request.session['xx'] = 123
    
def logout(request):
	request.session.clear()
</code></pre> </li><li> <p>中间件</p> <pre><code>- 类 process_request / process_response
- 注册中间件类
    MIDDLEWARE = [
        'django.middleware.security.SecurityMiddleware',
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.common.CommonMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        'django.middleware.clickjacking.XFrameOptionsMiddleware',
        'app01.middleware.auth.AuthMiddleware',
    ]
- django请求到达之后，自动会执行相应的方法。

- process_request
	- 没有返回值或返回None，继续向后执行。
	- 返回redirect/render/HttpResponse/JsonReponse，拦截请求不再继续向后之后。
</code></pre> </li><li> <p>图片验证码</p> <pre><code>pip install pillow
</code></pre> <pre><code>- 创建图片并在图片上写文字
- 字体文件
- 自定义模块 check_code
</code></pre> </li><li> <p>分页组件</p> <pre><code>开发时候会用。
</code></pre> </li></ul> 
<h3><a id="2_2289"></a>2.关于文件上传</h3> 
<h4><a id="21__2293"></a>2.1 基本操作</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% csrf_token %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> HttpResponse


<span class="token keyword">def</span> <span class="token function">upload_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_list.html'</span><span class="token punctuation">)</span>

    <span class="token comment"># # 'username': ['big666']</span>
    <span class="token comment"># print(request.POST)  # 请求体中数据</span>
    <span class="token comment"># # {'avatar': [&lt;InMemoryUploadedFile: 图片 1.png (image/png)&gt;]}&gt;</span>
    <span class="token comment"># print(request.FILES)  # 请求发过来的文件 {}</span>

    file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"avatar"</span><span class="token punctuation">)</span>
    <span class="token comment"># print(file_object.name)  # 文件名：WX20211117-222041@2x.png</span>

    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_object<span class="token punctuation">.</span>name<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> chunk <span class="token keyword">in</span> file_object<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_2329"></a>案例：批量上传数据</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/depart/multi/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% csrf_token %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exc<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>上传<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-info btn-sm<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">depart_multi</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 批量删除（Excel文件）"""</span>
    <span class="token keyword">from</span> openpyxl <span class="token keyword">import</span> load_workbook

    <span class="token comment"># 1.获取用户上传的文件对象</span>
    file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"exc"</span><span class="token punctuation">)</span>

    <span class="token comment"># 2.对象传递给openpyxl，由openpyxl读取文件的内容</span>
    wb <span class="token operator">=</span> load_workbook<span class="token punctuation">(</span>file_object<span class="token punctuation">)</span>
    sheet <span class="token operator">=</span> wb<span class="token punctuation">.</span>worksheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

    <span class="token comment"># 3.循环获取每一行数据</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> sheet<span class="token punctuation">.</span>iter_rows<span class="token punctuation">(</span>min_row<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        text <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value
        exists <span class="token operator">=</span> models<span class="token punctuation">.</span>Department<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>title<span class="token operator">=</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> exists<span class="token punctuation">:</span>
            models<span class="token punctuation">.</span>Department<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>title<span class="token operator">=</span>text<span class="token punctuation">)</span>

    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'/depart/list/'</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="Form_2365"></a>案例：混合数据（Form）</h4> 
<p>提交页面时：用户输入数据 + 文件（输入不能为空、报错）。</p> 
<ul><li>Form生成HTML标签：type=file</li><li>表单的验证</li><li>form.cleaned_data 获取 数据 + 文件对象</li></ul> 
<pre><code class="prism language-html">{% extends 'layout.html' %}


{% block content %}

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel panel-default<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-heading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> {<!-- -->{ title }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-body<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token attr-name">novalidate</span> <span class="token punctuation">&gt;</span></span>
                    {% csrf_token %}

                    {% for field in form %}
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ field.label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
                            {<!-- -->{ field }}
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{ field.errors.0 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    {% endfor %}

                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>提 交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

{% endblock %}

</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms
<span class="token keyword">from</span> app01<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>bootstrap <span class="token keyword">import</span> BootStrapForm


<span class="token keyword">class</span> <span class="token class-name">UpForm</span><span class="token punctuation">(</span>BootStrapForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    bootstrap_exclude_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'img'</span><span class="token punctuation">]</span>

    name <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> forms<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"年龄"</span><span class="token punctuation">)</span>
    img <span class="token operator">=</span> forms<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"头像"</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">upload_form</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    title <span class="token operator">=</span> <span class="token string">"Form上传"</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>

    form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> files<span class="token operator">=</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span>
    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># {'name': '武沛齐', 'age': 123, 'img': &lt;InMemoryUploadedFile: 图片 1.png (image/png)&gt;}</span>
        <span class="token comment"># 1.读取图片内容，写入到文件夹中并获取文件的路径。</span>
        image_object <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span>

        <span class="token comment"># file_path = "app01/static/img/{}".format(image_object.name)</span>
        db_file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">"static"</span><span class="token punctuation">,</span> <span class="token string">"img"</span><span class="token punctuation">,</span> image_object<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

        file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">"app01"</span><span class="token punctuation">,</span> db_file_path<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> image_object<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
        f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 2.将图片文件路径写入到数据库</span>
        models<span class="token punctuation">.</span>Boss<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
            name<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            age<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            img<span class="token operator">=</span>db_file_path<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<p>注意：就目前而言，所有的静态文件都只能放在static目录。</p> 
<p>在django的开发过程中两个特殊的文件夹：</p> 
<ul><li>static，存放静态文件的路径，包括：CSS、JS、项目图片。</li><li>media，用户上传的数据的目录。</li></ul> 
<h4><a id="22_media_2462"></a>2.2 启用media</h4> 
<p>在urls.py中进行配置：</p> 
<pre><code>from django.urls import path, re_path
from django.views.static import serve
from django.conf import settings

urlpatterns = [
	re_path(r'^media/(?P&lt;path&gt;.*)$', serve, {'document_root': settings.MEDIA_ROOT}, name='media'),
]
</code></pre> 
<p>在settings.py中进行配置：</p> 
<pre><code>import os

MEDIA_ROOT = os.path.join(BASE_DIR, "media")
MEDIA_URL = "/media/"
</code></pre> 
<p>在浏览器上访问这个地址：</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-KwRwSO5N-1690794616357)(E:\django\day15.assets\image-20211130170639048.png)]</p> 
<h4><a id="form_2493"></a>案例：混合数据（form）</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms
<span class="token keyword">from</span> app01<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>bootstrap <span class="token keyword">import</span> BootStrapForm


<span class="token keyword">class</span> <span class="token class-name">UpForm</span><span class="token punctuation">(</span>BootStrapForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    bootstrap_exclude_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'img'</span><span class="token punctuation">]</span>

    name <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> forms<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"年龄"</span><span class="token punctuation">)</span>
    img <span class="token operator">=</span> forms<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"头像"</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">upload_form</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    title <span class="token operator">=</span> <span class="token string">"Form上传"</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>

    form <span class="token operator">=</span> UpForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> files<span class="token operator">=</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span>
    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># {'name': '武沛齐', 'age': 123, 'img': &lt;InMemoryUploadedFile: 图片 1.png (image/png)&gt;}</span>
        <span class="token comment"># 1.读取图片内容，写入到文件夹中并获取文件的路径。</span>
        image_object <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span>

        <span class="token comment"># media_path = os.path.join(settings.MEDIA_ROOT, image_object.name)</span>
        media_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">"media"</span><span class="token punctuation">,</span> image_object<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>media_path<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> image_object<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
        f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 2.将图片文件路径写入到数据库</span>
        models<span class="token punctuation">.</span>Boss<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
            name<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            age<span class="token operator">=</span>form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            img<span class="token operator">=</span>media_path<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="ModalForm_2539"></a>案例：混合数据（ModalForm)</h4> 
<h5><a id="modelspy_2541"></a>models.py</h5> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">City</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 城市 """</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"名称"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
    count <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"人口"</span><span class="token punctuation">)</span>

    <span class="token comment"># 本质上数据库也是CharField，自动保存数据。</span>
    img <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"Logo"</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">'city/'</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="ModelForm_2555"></a>定义ModelForm</h5> 
<pre><code class="prism language-python"><span class="token keyword">from</span> app01<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>bootstrap <span class="token keyword">import</span> BootStrapModelForm


<span class="token keyword">class</span> <span class="token class-name">UpModelForm</span><span class="token punctuation">(</span>BootStrapModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    bootstrap_exclude_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'img'</span><span class="token punctuation">]</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> models<span class="token punctuation">.</span>City
        fields <span class="token operator">=</span> <span class="token string">"__all__"</span>
</code></pre> 
<h5><a id="_2571"></a>视图</h5> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">upload_modal_form</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""" 上传文件和数据（modelForm）"""</span>
    title <span class="token operator">=</span> <span class="token string">"ModelForm上传文件"</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> UpModelForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>

    form <span class="token operator">=</span> UpModelForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> files<span class="token operator">=</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span>
    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 对于文件：自动保存；</span>
        <span class="token comment"># 字段 + 上传路径写入到数据库</span>
        form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'upload_form.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"form"</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_2595"></a>小结</h4> 
<ul><li> <p>自己手动去写</p> <pre><code class="prism language-python">file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"exc"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> </li><li> <p>Form组件（表单验证）</p> <pre><code class="prism language-python">request<span class="token punctuation">.</span>POST
file_object <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"exc"</span><span class="token punctuation">)</span>

具体文件操作还是手动自己做。
</code></pre> </li><li> <p>ModelForm（表单验证 + 自动保存数据库 + 自动保存文件）</p> <pre><code>- Media文件夹
- Models.py定义类文件要
	img = models.FileField(verbose_name="Logo", max_length=128, upload_to='city/')
</code></pre> </li></ul> 
<h3><a id="_2625"></a>总结</h3> 
<p>关于django的开发知识点，更多的案例：</p> 
<ul><li> <p>Python基础（课件 https://gitee.com/wupeiqi/python_course）</p> <pre><code>https://www.bilibili.com/video/BV1m54y1r7zE
</code></pre> </li><li> <p>并发编程（进程线程协程）</p> <pre><code>https://www.bilibili.com/video/BV1Ev411G7i3?spm_id_from=333.999.0.0

# 不建议小白学（协程）
https://www.bilibili.com/video/BV1NA411g7yf?spm_id_from=333.999.0.0
</code></pre> </li><li> <p>MySQL数据库</p> <pre><code class="prism language-python"><span class="token comment"># 2021最新推荐</span>
https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV15R4y1b7y9?spm_id_from<span class="token operator">=</span><span class="token number">333.999</span><span class="token number">.0</span><span class="token number">.0</span>
    
<span class="token comment"># 2017年</span>
https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1DE411n7fU?
</code></pre> </li><li> <p>前端开发</p> <pre><code class="prism language-python">https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1QE411j7bV?spm_id_from<span class="token operator">=</span><span class="token number">333.999</span><span class="token number">.0</span><span class="token number">.0</span>
</code></pre> </li><li> <p>django开发知识点</p> <pre><code>https://www.bilibili.com/video/BV1zE411x7LG
https://www.bilibili.com/video/BV1JE411V7xk
</code></pre> </li><li> <p>项目开发</p> <pre><code>任务管理平台：https://www.bilibili.com/video/BV1uA411b77M
</code></pre> </li><li> <p>进阶项目（增删改查、权限）</p> <pre><code class="prism language-python">https<span class="token punctuation">:</span><span class="token operator">//</span>space<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">283478842</span><span class="token operator">/</span>channel<span class="token operator">/</span>detail?cid<span class="token operator">=</span><span class="token number">91596</span><span class="token operator">&amp;</span>ctype<span class="token operator">=</span><span class="token number">0</span>
</code></pre> </li><li> <p>前后端分离的项目： django + drf框架 + vue.js</p> <pre><code>- Django
- drf框架
	- https://www.bilibili.com/video/BV1ZE411j7RK
</code></pre> </li><li> <p>git 版本控制和协同开发 + 任务管理平台</p> <pre><code>https://www.bilibili.com/video/BV19E411f76x?spm_id_from=333.999.0.0
</code></pre> </li><li> <p>微信小程序 + Django + drf框架编写</p> <pre><code class="prism language-python">https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1jC4y1s7QD?spm_id_from<span class="token operator">=</span><span class="token number">333.999</span><span class="token number">.0</span><span class="token number">.0</span>
</code></pre> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e743540057dd2d67e45a5f7b7c1f674f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">真空电子管、晶体管&amp;DRAM</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/196640ed661bd74a9ae2e1ddea04d61f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java js</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>