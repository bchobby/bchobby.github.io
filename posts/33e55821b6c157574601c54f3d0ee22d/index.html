<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>创建可扩展性系统-8-2 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="创建可扩展性系统-8-2" />
<meta property="og:description" content="谷歌的Bigtable
Bigtable是管理结构化数据的分布式存储系统。 BigTable的设计宗旨是让系统可靠地扩展到PB级的数据和数千台机器；其设计理念是：广泛的适用性，可扩展性，高性能和高可用性。谷歌很多重要的产品使用 BigTable ，其中包括谷歌财经，和谷歌地球。
BigTable是一个“稀疏的，分布式的，持久的多维排序图”。索引关键词包括行关键词，列关键词，和一个时间戳； 对应的每个值是一个字节数组：
（行字符串，列字符串，时间：INT64） - &gt;字符串
数据模型优化后用于存储网页和类似文件的多个版本，主要便于对于列(而不是行）的快速读取。在一个表中的行关键字是任意字符串（目前高达64KB的大小），客户程序通常会在把各种结构化或者半结构化的数据串行化到这些字符串里。对行关键字的每次读取或写入是一个原子操作。
Bigtable的数据按照行关键字的字典顺序排序。表中的每个行都可以动态分区 ；每一个分区被称为小表格（Tablet)，这是计算分布和负载平衡的单元。小表格使用的未公开的算法BMDiff的Zippy进行压缩。这些算法虽然不具有高的压缩比（LZW），但有很好的计算效率。
BigTable是建立在谷歌文件系统（GFS)之上，底层的文件格式是SSTable。 SSTables的一个重要特点是使每次数据访问最多只需要单个磁盘访问。一个SSTable一旦被创建，是永远不会改变的。添加新的数据会创建一个新的SSTable， 而不改变已有的SSTable。不再需要的SSTable可以被垃圾收集程序收集。 SSTable的不变性是BigTable的数据检查和恢复程序的基础。
Chubby是分布式锁管理的服务器， 支持拥有数千的集群节点的Big​​table保持协调。Chubby本身就是一个集群的应用程序，维持着非常低量的锁管理通讯。Chubby控制服务器的生命周期，存储访问控制列表，数据架构和BigTable的数据的引导位置。
主服务器管理工作服务器及其负载平衡，检测的工作服务器的变化（损失或增加），以及对保存在GFS上的文件进行垃圾收集 和其他一些杂务。和很多Single-Master类型的分布式存储系统类似 ，客户端的数据不通过主服务器。事实上，大多数客户端永远不会与主站进行通信，这有助于在实践中保持主服务器较轻的负载。
每片服务器通常管理10至1000小表格（Tablet)。平均每个小表格约100-200 MB。每一个的BigTable的表通常由多个小表格组成。每个小表格中包含了某个范围内的行的所有相关数据 。新创建的表包含一个小表格。小表格增长后动态分解成多个小表格。这允许系统自动的支持横向扩展。此外，Bigtable中三个层次的命名方案和类似B&#43;树的存储结构也支持实现系统的可扩展性。
分布式计算中的查询，如过滤，聚合，统计数据收集都是使用Sawzall语言。谷歌公开BigTable论文后，对NoSQL发展产生重要影响。突出的是Apache的HBase和Hypertable。 总结:
NoSQL为我们提供了传统RDBMS以外的不同的数据存储方案。系统需要处理的数据量，数据的事务特性，数据的使用方式（读写操作的比例），数据之间的关联性，包括开发和维护成本，都影响到存储方式的选择。
附： Merkle Tree
Merkle Tree, 经常直接称为 Hash Tree，是一个Ralph Merkle在1979年发明，用于有效的处理大量Lamport一次性签名。后来主要被用于验证数据的完整性。
【图片出自http://en.wikipedia.org/wiki/Hash_tree 】
Merkle树是关于哈希的树形结构，叶子节点是文件等数据的哈希值，而非叶节点是子节点的哈希值。比如上图中 hash 0 = hash( hash 0-0 || hash 0-1 ) 。
在P2P的数据传输中，Merkle 树的任何分支可以独立传输，而数据的完整性可以用分支树的根节点的哈希值直接验证。
Dynamo使用Merkle树来减少同步机制中的网络传输开销。Dynamo首先比对Merkle树根节点的哈希值，如果一致则表示两者完全一致，否则分别比较子节点, 直到定位到有差异的数据块. 这种同步方式的时间复杂度为O（lgn）， 避免了可能出现的线性时间比较 ， 同时每次只要传输比较哈希值，而不是数据本身，在分布式中有着节省网络传输量的优点. 附: 开源代码：JGroup
Dynamo 使用一种相互交谈（gossip)的机制监测服务器成员的增减变化。作者在公司内部的一个项目中使用JGroup同步Memcached文件，达到了相似的效果。
JGroup是当前被广泛使用的可靠组间通信的工具之一，例如OSCache以及JBoss的TreeCache。JGroups可以用来创建一个组，在一个组中的所有主机使用一个相同的组播地址 ，这个组中的成员可以给其他成员发送并接受消息；组中的成员关系是动态的，成员可以随时加入或者离开组 。JGroup最大的特点就是支持协议栈的可配置性 。
JGroups的主要功能如下：
1）创建和删除组，组成员可以分布在局域网或广域网中。 2）组的加入和离开 3）成员关系的自动侦测并通知成员的加入，离开和故障 4）监测并删除故障 的成员 5）发送和接收成员到组的消息（点到多点） 6）发送和接收成员到成员的消息（点到点） 转载于:https://blog." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/33e55821b6c157574601c54f3d0ee22d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-04-06T13:28:58+08:00" />
<meta property="article:modified_time" content="2013-04-06T13:28:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">创建可扩展性系统-8-2</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="artical-content-bak main-content editor-side-new"> 
 <div class="con editor-preview-side" id="result"> 
  <p> <font color="#000000"><u><font face="宋体"><font style="font-size:13pt;"><b>谷歌的</b></font></font></u></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;"><u><b>Bigtable</b></u></font></font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Bigtable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">是管理结构化数据的分布式存储系统。 </font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的设计宗旨是让系统可靠地扩展到</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">PB</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">级的数据和数千台机器；其设计理念是：广泛的适用性，可扩展性，高性能和高可用性。谷歌很多重要的产品使用 </font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">，其中包括谷歌财经，和谷歌地球。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">是一个“稀疏的，分布式的，持久的多维排序图”。索引关键词包括行关键词，列关键词，和一个时间戳； 对应的每个值是一个字节数组：</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000">   </font><font color="#000000"><font face="宋体">（行字符串，列字符串，时间：</font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif">INT64</font></font></font><font color="#000000"><font face="宋体">） </font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif">- &gt;</font></font></font><font color="#000000"><font face="宋体">字符串</font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;">数据模型优化后用于存储网页和类似文件的多个版本，主要便于对于列</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">(</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">而不是行）的快速读取。在一个表中的行关键字是任意字符串（目前高达</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">64KB</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的大小），客户程序通常会在把各种结构化或者半结构化的数据串行化到这些字符串里。对行关键字的每次读取或写入是一个原子操作。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Bigtable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的数据按照行关键字的字典顺序排序。</font></font></font><font color="#333333"><font face="宋体">表中的每个行都可以动态分区</font></font><font face="宋体"> </font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">；每一个分区被称为小表格（</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Tablet)</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">，这是计算分布和负载平衡的单元。小表格使用的未公开的算法</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BMDiff</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Zippy</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">进行压缩。这些算法虽然不具有高的压缩比（</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">LZW</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">），但有很好的计算效率。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">是建立在谷歌文件系统（</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">GFS)</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">之上，底层的文件格式是</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。 </font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTables</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的一个重要特点是使每次数据访问最多只需要单个磁盘访问。一个</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">一旦被创建，是永远不会改变的。添加新的数据会创建一个新的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">， 而不改变已有的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。不再需要的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">可以被垃圾收集程序收集。 </font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">SSTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的不变性是</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的数据检查和恢复程序的基础。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Chubby</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">是分布式锁管理的服务器， 支持拥有数千的集群节点的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Big</font></font></font><font color="#000000"><font face="MS Mincho, serif"><font style="font-size:13pt;">​​</font></font></font><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">table</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">保持协调。</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Chubby</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">本身就是一个集群的应用程序，维持着非常低量的锁管理通讯。</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Chubby</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">控制服务器的生命周期，存储访问控制列表，数据架构和</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的数据的引导位置。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;">主服务器管理工作服务器及其负载平衡，检测的工作服务器的变化（损失或增加），以及对保存在</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">GFS</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">上的文件进行垃圾收集 和其他一些杂务。和很多</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Single-Master</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">类型的分布式存储系统类似 ，客户端的数据不通过主服务器。事实上，大多数客户端永远不会与主站进行通信，这有助于在实践中保持主服务器较轻的负载。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;">每片服务器通常管理</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">10</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">至</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">1000</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">小表格（</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Tablet)</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。平均每个小表格约</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">100-200 MB</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。每一个的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的表通常由多个小表格组成。每个小表格中包含了某个范围内的行的所有相关数据 。新创建的表包含一个小表格。小表格增长后动态分解成多个小表格。这允许系统自动的支持横向扩展。此外，</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Bigtable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">中三个层次的命名方案和类似</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">B+</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">树的存储结构也支持实现系统的可扩展性。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;">分布式计算中的查询，如过滤，聚合，统计数据收集都是使用</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Sawzall</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">语言。谷歌公开</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">BigTable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">论文后，对</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">NoSQL</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">发展产生重要影响。突出的是</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Apache</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">HBase</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">和</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Hypertable</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。 </font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;"><b>总结</b></font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;"><b>:</b></font></font></font></font></p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">NoSQL</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">为我们提供了传统</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">RDBMS</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">以外的不同的数据存储方案。系统需要处理的数据量，数据的事务特性，数据的使用方式（读写操作的比例），数据之间的关联性，包括开发和维护成本，都影响到存储方式的选择。</font></font></font></p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;"><b>附： </b></font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;"><b>Merkle Tree</b></font></font></font></font></p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Merkle Tree, </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">经常直接称为 </font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Hash Tree</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">，是一个</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Ralph Merkle</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">在</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">1979</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">年发明，用于有效的处理大量</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Lamport</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">一次性签名。后来主要被用于验证数据的完整性。</font></font></font></p> 
  <p align="left"> </p> 
  <p><a href="https://s1.51cto.com/attachment/201304/132828323.png" rel="nofollow"><img src="https://images2.imgbox.com/02/1b/HBuY7n8o_o.png" border="0" alt=""></a></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;">【图片出自</font></font></font><font face="Times New Roman, serif"><a href="http://en.wikipedia.org/wiki/Hash_tree" rel="nofollow"><font color="#0000ff"><font face="Times New Roman, serif"><u>http://en.wikipedia.org/wiki/Hash_tree</u></font></font></a><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;"> </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">】</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Merkle</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">树是关于哈希的树形结构，叶子节点是文件等数据的哈希值，而非叶节点是子节点的哈希值。比如上图中 </font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">hash 0 = hash( hash 0-0 || hash 0-1 ) </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。</font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;">在</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">P2P</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的数据传输中，</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Merkle </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">树的任何分支可以独立传输，而数据的完整性可以用分支树的根节点的哈希值直接验证。</font></font></font></p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Dynamo</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">使用</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Merkle</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">树来减少同步机制中的网络传输开销。</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Dynamo</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">首先比对</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Merkle</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">树根节点的哈希值，如果一致则表示两者完全一致，否则分别比较子节点</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">, </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">直到定位到有差异的数据块</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">. </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">这种同步方式的时间复杂度为</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">O</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">（</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">lgn</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）， 避免了可能出现的线性时间比较 ， 同时每次只要传输比较哈希值，而不是数据本身，在分布式中有着节省网络传输量的优点</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">. </font></font></font></font></p> 
  <p align="left"> </p> 
  <p align="left"> </p> 
  <p align="left"><font color="#000000"><font face="宋体"><font style="font-size:13pt;"><b>附</b></font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;"><b>: </b></font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;"><b>开源代码：</b></font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;"><b>JGroup</b></font></font></font></font></p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Dynamo </font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">使用一种相互交谈（</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">gossip)</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的机制监测服务器成员的增减变化。作者在公司内部的一个项目中使用</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">JGroup</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">同步</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">Memcached</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">文件，达到了相似的效果。</font></font></font></p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">JGroup</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">是当前被广泛使用的可靠组间通信的工具之一，例如</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">OSCache</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">以及</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">JBoss</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">TreeCache</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">。</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">JGroups</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">可以用来创建一个组，在一个组中的所有主机使用一个相同的组播地址 ，这个组中的成员可以给其他成员发送并接受消息；组中的成员关系是动态的，成员可以随时加入或者离开组 。</font></font></font><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">JGroup</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">最大的特点就是支持协议栈的可配置性 。</font></font></font></p> 
  <p align="left"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">JGroups</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">的主要功能如下：</font></font></font></p> 
  <p align="left" style="margin-left:1.52cm;"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">1</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）创建和删除组，组成员可以分布在局域网或广域网中。 </font></font></font></p> 
  <p align="left" style="margin-left:1.52cm;"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">2</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）组的加入和离开 </font></font></font></p> 
  <p align="left" style="margin-left:1.52cm;"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">3</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）成员关系的自动侦测并通知成员的加入，离开和</font></font></font><font color="#222222"><font face="宋体">故障</font></font><font face="宋体"> </font></p> 
  <p align="left" style="margin-left:1.52cm;"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">4</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）监测并删除</font></font></font><font color="#222222"><font face="宋体">故障</font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;"> 的成员 </font></font></font></p> 
  <p align="left" style="margin-left:1.52cm;"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">5</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）发送和接收成员到组的消息（点到多点） </font></font></font></p> 
  <p align="left" style="margin-left:1.52cm;"><font face="Times New Roman, serif"><font color="#000000"><font face="Arial, serif"><font style="font-size:13pt;">6</font></font></font></font><font color="#000000"><font face="宋体"><font style="font-size:13pt;">）发送和接收成员到成员的消息（点到点） </font></font></font></p> 
 </div> 
</div> 
<p>转载于:https://blog.51cto.com/6927843/1172107</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0deeeb6048248e07a15ffb92f595446e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">FAT32文件系统--For TF卡</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a6cd8066c7c43efa3011353aa120ef0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">kindeditor</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>