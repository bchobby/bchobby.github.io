<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>æ‹¥æŠ±å˜åŒ–ï¼Œé¢å‘Java17ï¼ŒJava8-18å…¨ç³»åˆ—ç‰¹æ€§è¯¦è§£ - ç¼–ç¨‹çˆ±å¥½è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="æ‹¥æŠ±å˜åŒ–ï¼Œé¢å‘Java17ï¼ŒJava8-18å…¨ç³»åˆ—ç‰¹æ€§è¯¦è§£" />
<meta property="og:description" content="æ–‡ç« ç›®å½•ï¼š
Java 8 æ–°ç‰¹æ€§Java 9 æ–°ç‰¹æ€§Java 10 æ–°ç‰¹æ€§Java 11 æ–°ç‰¹æ€§Java 12 æ–°ç‰¹æ€§Java 13 æ–°ç‰¹æ€§Java 14 æ–°ç‰¹æ€§Java 15 æ–°ç‰¹æ€§Java 16 æ–°ç‰¹æ€§Java 17 æ–°ç‰¹æ€§Java 18 æ–°ç‰¹æ€§ ğŸ’¡ æ–‡ç« è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµã€æ”¶è—ã€è¯„è®ºåæ…¢æ…¢çœ‹ï¼Œåˆç†åˆ©ç”¨ â€œåªçœ‹ç›®å½•åŠŸèƒ½â€
å‰è¨€ å½“æˆ‘ä»¬å¤§éƒ¨åˆ†Javaerè¿˜æ²‰æµ¸åœ¨Java 8 çš„ç‰¹æ€§ä¸­æ—¶ï¼ŒJava 19 é¢„è®¡åœ¨2022å¹´9æœˆ20å·å‘å¸ƒï¼Œç°åœ¨åŠå¹´å‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥çœŸè®©äººåº”æ¥ä¸æš‡ï¼Œå†µä¸”Spring Boot 3.0å¼€å§‹æœ€ä½ç‰ˆæœ¬ä¸ºJava 17ï¼ŒSpring Securityã€KafKaç­‰ä¹Ÿéƒ½å®£å¸ƒåœ¨åæœŸç‰ˆæœ¬æœ€ä½éœ€è¦Java 17 ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¶è¡¥ä¸€ä¸‹Java 8-18çš„ç‰¹æ€§å¾ˆæœ‰å¿…è¦ã€‚
Java 8 æ–°ç‰¹æ€§ Java 8 å¸¦æ¥äº†å¤§é‡çš„æ–°ç‰¹æ€§ã€‚ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šè¯­è¨€ã€å®ƒçš„ç¼–è¯‘å™¨ã€åº“ã€å·¥å…·å’Œ JVMï¼ˆJava è™šæ‹Ÿæœºï¼‰ã€‚
è¿™ä¸ªæ•™ç¨‹åŒ…å«Javaå¼€å‘è€…ç»å¸¸é¢å¯¹çš„å‡ ç±»é—®é¢˜ï¼š
è¯­è¨€ç¼–è¯‘å™¨åº“å·¥å…·è¿è¡Œæ—¶ï¼ˆJVMï¼‰ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹ä¸‹å®˜ç½‘çš„æè¿°ï¼š
https://docs.oracle.com/en/java/javase/index.html
è¯­è¨€æ–°ç‰¹æ€§ Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£ ä¸€ä¸ªæ¦‚å¿µï¼šå‡½æ•°å¼æ¥å£ï¼šåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ã€‚
Lambdaè¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºé—­åŒ…ï¼‰æ˜¯Java 8ä¸­æœ€å¤§å’Œæœ€ä»¤äººæœŸå¾…çš„è¯­è¨€æ”¹å˜ã€‚
å®ƒå…è®¸æˆ‘ä»¬å°†å‡½æ•°å½“æˆå‚æ•°ä¼ é€’ç»™æŸä¸ªæ–¹æ³•ï¼Œæˆ–è€…æŠŠä»£ç æœ¬èº«å½“ä½œæ•°æ®å¤„ç†ï¼šå‡½æ•°å¼å¼€å‘è€…éå¸¸ç†Ÿæ‚‰è¿™äº›æ¦‚å¿µã€‚å¾ˆå¤šJVMå¹³å°ä¸Šçš„è¯­è¨€ï¼ˆGroovyã€Scalaç­‰ï¼‰ä»è¯ç”Ÿä¹‹æ—¥å°±æ”¯æŒLambdaè¡¨è¾¾å¼ï¼Œä½†æ˜¯Javaå¼€å‘è€…æ²¡æœ‰é€‰æ‹©ï¼Œåªèƒ½ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ä»£æ›¿Lambdaè¡¨è¾¾å¼ã€‚
Lambdaçš„è®¾è®¡è€—è´¹äº†å¾ˆå¤šæ—¶é—´å’Œå¾ˆå¤§çš„ç¤¾åŒºåŠ›é‡ï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ç§æŠ˜ä¸­çš„å®ç°æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°ç®€æ´è€Œç´§å‡‘çš„è¯­è¨€ç»“æ„ã€‚æœ€ç®€å•çš„Lambdaè¡¨è¾¾å¼å¯ç”±é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€-&gt; ç¬¦å·å’Œè¯­å¥å—ç»„æˆã€‚
ç¤ºä¾‹1ï¼š
Arrays.asList( &#34;a&#34;, &#34;b&#34;, &#34;d&#34; ).forEach( e -&gt; System.out.println( e ) ); åœ¨ä¸Šé¢è¿™ä¸ªä»£ç ä¸­çš„å‚æ•°eçš„ç±»å‹æ˜¯ç”±ç¼–è¯‘å™¨æ¨ç†å¾—å‡ºçš„ï¼Œä½ ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šè¯¥å‚æ•°çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/384892fabd0139f55667ed0affcabaca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-23T08:44:08+08:00" />
<meta property="article:modified_time" content="2022-08-23T08:44:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹çˆ±å¥½è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹çˆ±å¥½è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">æ‹¥æŠ±å˜åŒ–ï¼Œé¢å‘Java17ï¼ŒJava8-18å…¨ç³»åˆ—ç‰¹æ€§è¯¦è§£</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><strong>æ–‡ç« ç›®å½•ï¼š</strong></p> 
 <ol><li><a href="#8" rel="nofollow">Java 8 æ–°ç‰¹æ€§</a></li><li><a href="#9" rel="nofollow">Java 9 æ–°ç‰¹æ€§</a></li><li><a href="#10" rel="nofollow">Java 10 æ–°ç‰¹æ€§</a></li><li><a href="#11" rel="nofollow">Java 11 æ–°ç‰¹æ€§</a></li><li><a href="#12" rel="nofollow">Java 12 æ–°ç‰¹æ€§</a></li><li><a href="#13" rel="nofollow">Java 13 æ–°ç‰¹æ€§</a></li><li><a href="#14" rel="nofollow">Java 14 æ–°ç‰¹æ€§</a></li><li><a href="#15" rel="nofollow">Java 15 æ–°ç‰¹æ€§</a></li><li><a href="#16" rel="nofollow">Java 16 æ–°ç‰¹æ€§</a></li><li><a href="#17" rel="nofollow">Java 17 æ–°ç‰¹æ€§</a></li><li><a href="#18" rel="nofollow">Java 18 æ–°ç‰¹æ€§</a></li></ol> 
</blockquote> 
<blockquote> 
 <p>ğŸ’¡ æ–‡ç« è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµã€æ”¶è—ã€è¯„è®ºåæ…¢æ…¢çœ‹ï¼Œåˆç†åˆ©ç”¨ â€œ<strong>åªçœ‹ç›®å½•åŠŸèƒ½</strong>â€</p> 
</blockquote> 
<h2><a id="_15"></a>å‰è¨€</h2> 
<p>å½“æˆ‘ä»¬å¤§éƒ¨åˆ†Javaerè¿˜æ²‰æµ¸åœ¨Java 8 çš„ç‰¹æ€§ä¸­æ—¶ï¼ŒJava 19 é¢„è®¡åœ¨2022å¹´9æœˆ20å·å‘å¸ƒï¼Œç°åœ¨åŠå¹´å‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥çœŸè®©äººåº”æ¥ä¸æš‡ï¼Œå†µä¸”Spring Boot 3.0å¼€å§‹æœ€ä½ç‰ˆæœ¬ä¸ºJava 17ï¼ŒSpring Securityã€KafKaç­‰ä¹Ÿéƒ½å®£å¸ƒåœ¨åæœŸç‰ˆæœ¬æœ€ä½éœ€è¦Java 17 ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¶è¡¥ä¸€ä¸‹Java 8-18çš„ç‰¹æ€§å¾ˆæœ‰å¿…è¦ã€‚</p> 
<h2><a id="h1_id8Java_8__17"></a></h2> 
<h2 id="8">Java 8 æ–°ç‰¹æ€§</h2> 
<p>Java 8 å¸¦æ¥äº†å¤§é‡çš„æ–°ç‰¹æ€§ã€‚ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šè¯­è¨€ã€å®ƒçš„ç¼–è¯‘å™¨ã€åº“ã€å·¥å…·å’Œ JVMï¼ˆJava è™šæ‹Ÿæœºï¼‰ã€‚<br> è¿™ä¸ªæ•™ç¨‹åŒ…å«Javaå¼€å‘è€…ç»å¸¸é¢å¯¹çš„å‡ ç±»é—®é¢˜ï¼š</p> 
<ul><li>è¯­è¨€</li><li>ç¼–è¯‘å™¨</li><li>åº“</li><li>å·¥å…·</li><li>è¿è¡Œæ—¶ï¼ˆJVMï¼‰</li></ul> 
<p>æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹ä¸‹å®˜ç½‘çš„æè¿°ï¼š<br> <a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">https://docs.oracle.com/en/java/javase/index.html</a></p> 
<h3><a id="_30"></a>è¯­è¨€æ–°ç‰¹æ€§</h3> 
<h4><a id="Lambda_31"></a>Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£</h4> 
<p>ä¸€ä¸ªæ¦‚å¿µï¼šå‡½æ•°å¼æ¥å£ï¼šåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ã€‚<br> Lambdaè¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºé—­åŒ…ï¼‰æ˜¯Java 8ä¸­æœ€å¤§å’Œæœ€ä»¤äººæœŸå¾…çš„è¯­è¨€æ”¹å˜ã€‚<br> å®ƒå…è®¸æˆ‘ä»¬å°†å‡½æ•°å½“æˆå‚æ•°ä¼ é€’ç»™æŸä¸ªæ–¹æ³•ï¼Œæˆ–è€…æŠŠä»£ç æœ¬èº«å½“ä½œæ•°æ®å¤„ç†ï¼š<a href="http://www.javacodegeeks.com/2014/03/functional-programming-with-java-8-lambda-expressions-monads.html" rel="nofollow">å‡½æ•°å¼å¼€å‘è€…</a>éå¸¸ç†Ÿæ‚‰è¿™äº›æ¦‚å¿µã€‚å¾ˆå¤šJVMå¹³å°ä¸Šçš„è¯­è¨€ï¼ˆGroovyã€Scalaç­‰ï¼‰ä»è¯ç”Ÿä¹‹æ—¥å°±æ”¯æŒLambdaè¡¨è¾¾å¼ï¼Œä½†æ˜¯Javaå¼€å‘è€…æ²¡æœ‰é€‰æ‹©ï¼Œåªèƒ½ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ä»£æ›¿Lambdaè¡¨è¾¾å¼ã€‚<br> Lambdaçš„è®¾è®¡è€—è´¹äº†å¾ˆå¤šæ—¶é—´å’Œå¾ˆå¤§çš„ç¤¾åŒºåŠ›é‡ï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ç§æŠ˜ä¸­çš„å®ç°æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°ç®€æ´è€Œç´§å‡‘çš„è¯­è¨€ç»“æ„ã€‚æœ€ç®€å•çš„Lambdaè¡¨è¾¾å¼å¯ç”±é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€-&gt; ç¬¦å·å’Œè¯­å¥å—ç»„æˆã€‚</p> 
<p><strong>ç¤ºä¾‹1ï¼š</strong></p> 
<pre><code class="prism language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> e <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>åœ¨ä¸Šé¢è¿™ä¸ªä»£ç ä¸­çš„å‚æ•°eçš„ç±»å‹æ˜¯ç”±ç¼–è¯‘å™¨æ¨ç†å¾—å‡ºçš„ï¼Œä½ ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šè¯¥å‚æ•°çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token class-name">String</span> e <span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>ç¤ºä¾‹2ï¼š</strong><br> å¦‚æœLambdaè¡¨è¾¾å¼éœ€è¦æ›´å¤æ‚çš„è¯­å¥å—ï¼Œåˆ™å¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·å°†è¯¥è¯­å¥å—æ‹¬èµ·æ¥ï¼Œç±»ä¼¼äºJavaä¸­çš„å‡½æ•°ä½“ï¼Œä¾‹å¦‚</p> 
<pre><code class="prism language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> e <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>ç¤ºä¾‹3ï¼š</strong><br> Lambdaè¡¨è¾¾å¼å¯ä»¥å¼•ç”¨ç±»æˆå‘˜å’Œå±€éƒ¨å˜é‡ï¼ˆä¼šå°†è¿™äº›å˜é‡éšå¼å¾—è½¬æ¢æˆfinalçš„ï¼‰ï¼Œä¾‹å¦‚ä¸‹åˆ—ä¸¤ä¸ªä»£ç å—çš„æ•ˆæœå®Œå…¨ç›¸åŒï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> separator <span class="token operator">=</span> <span class="token string">","</span><span class="token punctuation">;</span>
<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> 
    <span class="token punctuation">(</span> <span class="token class-name">String</span> e <span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span> e <span class="token operator">+</span> separator <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å’Œ</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">String</span> separator <span class="token operator">=</span> <span class="token string">","</span><span class="token punctuation">;</span>
<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> 
    <span class="token punctuation">(</span> <span class="token class-name">String</span> e <span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span> e <span class="token operator">+</span> separator <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>ç¤ºä¾‹4ï¼š</strong><br> Lambdaè¡¨è¾¾å¼æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼çš„ç±»å‹ä¹Ÿç”±ç¼–è¯‘å™¨æ¨ç†å¾—å‡ºã€‚å¦‚æœLambdaè¡¨è¾¾å¼ä¸­çš„è¯­å¥å—åªæœ‰ä¸€è¡Œï¼Œåˆ™å¯ä»¥ä¸ç”¨ä½¿ç”¨returnè¯­å¥ï¼Œä¸‹åˆ—ä¸¤ä¸ªä»£ç ç‰‡æ®µæ•ˆæœç›¸åŒï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> e1<span class="token punctuation">,</span> e2 <span class="token punctuation">)</span> <span class="token operator">-&gt;</span> e1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span> e2 <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å’Œ</p> 
<pre><code class="prism language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"d"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> e1<span class="token punctuation">,</span> e2 <span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> e1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span> e2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>Lambdaçš„è®¾è®¡è€…ä»¬ä¸ºäº†è®©ç°æœ‰çš„åŠŸèƒ½ä¸Lambdaè¡¨è¾¾å¼è‰¯å¥½å…¼å®¹ï¼Œè€ƒè™‘äº†å¾ˆå¤šæ–¹æ³•ï¼Œäºæ˜¯äº§ç”Ÿäº† <a href="http://www.javacodegeeks.com/2013/03/introduction-to-functional-interfaces-a-concept-recreated-in-java-8.html" rel="nofollow">å‡½æ•°æ¥å£</a> è¿™ä¸ªæ¦‚å¿µã€‚<br> å‡½æ•°æ¥å£æŒ‡çš„æ˜¯åªæœ‰ä¸€ä¸ªå‡½æ•°çš„æ¥å£ï¼Œè¿™æ ·çš„æ¥å£å¯ä»¥éšå¼è½¬æ¢ä¸ºLambdaè¡¨è¾¾å¼ã€‚<strong>java.lang.Runnable</strong>å’Œ<strong>java.util.concurrent.Callable</strong>æ˜¯å‡½æ•°å¼æ¥å£çš„æœ€ä½³ä¾‹å­ã€‚<br> åœ¨å®è·µä¸­ï¼Œå‡½æ•°å¼æ¥å£éå¸¸è„†å¼±ï¼šåªè¦æŸä¸ªå¼€å‘è€…åœ¨è¯¥æ¥å£ä¸­æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è¯¥æ¥å£å°±ä¸å†æ˜¯å‡½æ•°å¼æ¥å£è¿›è€Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚<br> ä¸ºäº†å…‹æœè¿™ç§ä»£ç å±‚é¢çš„è„†å¼±æ€§ï¼Œå¹¶æ˜¾å¼è¯´æ˜æŸä¸ªæ¥å£æ˜¯å‡½æ•°å¼æ¥å£ï¼ŒJava 8 æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ³¨è§£ <strong>@FunctionalInterface</strong>ï¼ˆJava åº“ä¸­çš„æ‰€æœ‰ç›¸å…³æ¥å£éƒ½å·²ç»å¸¦æœ‰è¿™ä¸ªæ³¨è§£äº†ï¼‰ï¼Œä¸¾ä¸ªç®€å•çš„å‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼š</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Functional</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Lambdaè¡¨è¾¾å¼ä½œä¸ºJava 8çš„æœ€å¤§å–ç‚¹ï¼Œå®ƒæœ‰æ½œåŠ›å¸å¼•æ›´å¤šçš„å¼€å‘è€…åŠ å…¥åˆ°JVMå¹³å°ï¼Œå¹¶åœ¨çº¯Javaç¼–ç¨‹ä¸­ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µã€‚å¦‚æœä½ éœ€è¦äº†è§£æ›´å¤šLambdaè¡¨è¾¾å¼çš„ç»†èŠ‚ï¼Œå¯ä»¥<a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html" rel="nofollow">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a>ã€‚</p> 
<h4><a id="_90"></a>æ¥å£é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•</h4> 
<p>Java 8ä½¿ç”¨ä¸¤ä¸ªæ–°æ¦‚å¿µæ‰©å±•äº†æ¥å£çš„å«ä¹‰ï¼šé»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ã€‚<br> <strong>æ¥å£ä¸­å¯ç”¨å®šä¹‰é»˜è®¤æ–¹æ³•</strong><br> é»˜è®¤æ–¹æ³•ä½¿å¾—æ¥å£æœ‰ç‚¹ç±»ä¼¼traitsï¼Œä¸è¿‡è¦å®ç°çš„ç›®æ ‡ä¸ä¸€æ ·ã€‚é»˜è®¤æ–¹æ³•ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ä¸ç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§çš„å‰æä¸‹ï¼Œå¾€ç°å­˜æ¥å£ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå³ä¸å¼ºåˆ¶é‚£äº›å®ç°äº†è¯¥æ¥å£çš„ç±»ä¹ŸåŒæ—¶å®ç°è¿™ä¸ªæ–°åŠ çš„æ–¹æ³•ã€‚<br> é»˜è®¤æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«åœ¨äºæŠ½è±¡æ–¹æ³•éœ€è¦å®ç°ï¼Œè€Œé»˜è®¤æ–¹æ³•ä¸éœ€è¦ã€‚æ¥å£æä¾›çš„é»˜è®¤æ–¹æ³•ä¼šè¢«æ¥å£çš„å®ç°ç±»ç»§æ‰¿æˆ–è€…è¦†å†™ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">interface</span> <span class="token class-name">Defaulable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Interfaces now allow default methods, the implementer may or </span>
    <span class="token comment">// may not implement (override) them.</span>
    <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">notRequired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">return</span> <span class="token string">"Default implementation"</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>        
<span class="token punctuation">}</span>
 
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DefaultableImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Defaulable</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
 
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">OverridableImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Defaulable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">notRequired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Overridden implementation"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>Defaulableæ¥å£ä½¿ç”¨å…³é”®å­—defaultå®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•notRequired()ã€‚<br> DefaultableImplç±»å®ç°äº†è¿™ä¸ªæ¥å£ï¼ŒåŒæ—¶é»˜è®¤ç»§æ‰¿äº†è¿™ä¸ªæ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼›<br> OverridableImplç±»ä¹Ÿå®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä½†è¦†å†™äº†è¯¥æ¥å£çš„é»˜è®¤æ–¹æ³•ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªä¸åŒçš„å®ç°ã€‚</p> 
<p><strong>æ¥å£ä¸­å¯ç”¨å®šä¹‰é™æ€æ–¹æ³•</strong><br> Java 8å¸¦æ¥çš„å¦ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯åœ¨æ¥å£ä¸­å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">interface</span> <span class="token class-name">DefaulableFactory</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Interfaces now allow static methods</span>
    <span class="token keyword">static</span> <span class="token class-name">Defaulable</span> <span class="token function">create</span><span class="token punctuation">(</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Defaulable</span><span class="token punctuation">&gt;</span></span> supplier <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> supplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ•´åˆäº†é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Defaulable</span> defaulable <span class="token operator">=</span> <span class="token class-name">DefaulableFactory</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span> <span class="token class-name">DefaultableImpl</span><span class="token operator">::</span><span class="token keyword">new</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> defaulable<span class="token punctuation">.</span><span class="token function">notRequired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    defaulable <span class="token operator">=</span> <span class="token class-name">DefaulableFactory</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span> <span class="token class-name">OverridableImpl</span><span class="token operator">::</span><span class="token keyword">new</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> defaulable<span class="token punctuation">.</span><span class="token function">notRequired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Default</span> implementation
<span class="token class-name">Overridden</span> implementation
</code></pre> 
<p>ç”±äºJVMä¸Šçš„é»˜è®¤æ–¹æ³•çš„å®ç°åœ¨å­—èŠ‚ç å±‚é¢æä¾›äº†æ”¯æŒï¼Œå› æ­¤æ•ˆç‡éå¸¸é«˜ã€‚é»˜è®¤æ–¹æ³•å…è®¸åœ¨ä¸æ‰“ç ´ç°æœ‰ç»§æ‰¿ä½“ç³»çš„åŸºç¡€ä¸Šæ”¹è¿›æ¥å£ã€‚è¯¥ç‰¹æ€§åœ¨å®˜æ–¹åº“ä¸­çš„åº”ç”¨æ˜¯ï¼šç»™java.util.Collectionæ¥å£æ·»åŠ æ–°æ–¹æ³•ï¼Œå¦‚stream()ã€parallelStream()ã€**forEach()å’ŒremoveIf()**ç­‰ç­‰ã€‚<br> å°½ç®¡é»˜è®¤æ–¹æ³•æœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­åº”è¯¥è°¨æ…ä½¿ç”¨ï¼šåœ¨å¤æ‚çš„ç»§æ‰¿ä½“ç³»ä¸­ï¼Œé»˜è®¤æ–¹æ³•å¯èƒ½å¼•èµ·æ­§ä¹‰å’Œç¼–è¯‘é”™è¯¯ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒ<a href="http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p> 
<h4><a id="_146"></a>æ–¹æ³•å¼•ç”¨</h4> 
<p>æ–¹æ³•å¼•ç”¨ä½¿å¾—å¼€å‘è€…å¯ä»¥ç›´æ¥å¼•ç”¨ç°å­˜çš„æ–¹æ³•ã€Javaç±»çš„æ„é€ æ–¹æ³•æˆ–è€…å®ä¾‹å¯¹è±¡ã€‚æ–¹æ³•å¼•ç”¨å’ŒLambdaè¡¨è¾¾å¼é…åˆä½¿ç”¨ï¼Œä½¿å¾—javaç±»çš„æ„é€ æ–¹æ³•çœ‹èµ·æ¥ç´§å‡‘è€Œç®€æ´ï¼Œæ²¡æœ‰å¾ˆå¤šå¤æ‚çš„æ¨¡æ¿ä»£ç ã€‚<br> ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<strong>Car</strong>ç±»æ˜¯ä¸åŒæ–¹æ³•å¼•ç”¨çš„ä¾‹å­ï¼Œå¯ä»¥å¸®åŠ©è¯»è€…åŒºåˆ†å››ç§ç±»å‹çš„æ–¹æ³•å¼•ç”¨ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Car</span> <span class="token function">create</span><span class="token punctuation">(</span> <span class="token keyword">final</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Car</span><span class="token punctuation">&gt;</span></span> supplier <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> supplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>              
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">collide</span><span class="token punctuation">(</span> <span class="token keyword">final</span> <span class="token class-name">Car</span> car <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Collided "</span> <span class="token operator">+</span> car<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">follow</span><span class="token punctuation">(</span> <span class="token keyword">final</span> <span class="token class-name">Car</span> another <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Following the "</span> <span class="token operator">+</span> another<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">repair</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>   
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Repaired "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>ç¬¬ä¸€ç§æ–¹æ³•å¼•ç”¨çš„ç±»å‹æ˜¯æ„é€ å™¨å¼•ç”¨ï¼Œè¯­æ³•æ˜¯<strong>Class::new</strong>ï¼Œæˆ–è€…æ›´ä¸€èˆ¬çš„å½¢å¼ï¼š<strong>Class&lt; T&gt;::new</strong>ã€‚æ³¨æ„ï¼šè¿™ä¸ªæ„é€ å™¨æ²¡æœ‰å‚æ•°ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span> <span class="token class-name">Car</span><span class="token operator">::</span><span class="token keyword">new</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Car</span><span class="token punctuation">&gt;</span></span> cars <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> car <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç¬¬äºŒç§æ–¹æ³•å¼•ç”¨çš„ç±»å‹æ˜¯é™æ€æ–¹æ³•å¼•ç”¨ï¼Œè¯­æ³•æ˜¯<strong>Class::static_method</strong>ã€‚æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªCarç±»å‹çš„å‚æ•°ã€‚</p> 
<pre><code class="prism language-java">cars<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token class-name">Car</span><span class="token operator">::</span><span class="token function">collide</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç¬¬ä¸‰ç§æ–¹æ³•å¼•ç”¨çš„ç±»å‹æ˜¯æŸä¸ªç±»çš„æˆå‘˜æ–¹æ³•çš„å¼•ç”¨ï¼Œè¯­æ³•æ˜¯<strong>Class::method</strong>ï¼Œæ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰å®šä¹‰å…¥å‚ï¼š</p> 
<pre><code class="prism language-java">cars<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token class-name">Car</span><span class="token operator">::</span><span class="token function">repair</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç¬¬å››ç§æ–¹æ³•å¼•ç”¨çš„ç±»å‹æ˜¯æŸä¸ªå®ä¾‹å¯¹è±¡çš„æˆå‘˜æ–¹æ³•çš„å¼•ç”¨ï¼Œè¯­æ³•æ˜¯<strong>instance::method</strong>ã€‚æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªCarç±»å‹çš„å‚æ•°ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">Car</span> police <span class="token operator">=</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span> <span class="token class-name">Car</span><span class="token operator">::</span><span class="token keyword">new</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
cars<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> police<span class="token operator">::</span><span class="token function">follow</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿è¡Œä¸Šè¿°ä¾‹å­ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼ˆCarå®ä¾‹å¯èƒ½ä¸åŒï¼‰ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Collided</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>method<span class="token punctuation">.</span>references<span class="token punctuation">.</span></span>MethodReferences</span>$<span class="token class-name">Car</span><span class="token annotation punctuation">@7a81197d</span>
<span class="token class-name">Repaired</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>method<span class="token punctuation">.</span>references<span class="token punctuation">.</span></span>MethodReferences</span>$<span class="token class-name">Car</span><span class="token annotation punctuation">@7a81197d</span>
<span class="token class-name">Following</span> the <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>method<span class="token punctuation">.</span>references<span class="token punctuation">.</span></span>MethodReferences</span>$<span class="token class-name">Car</span><span class="token annotation punctuation">@7a81197d</span>
</code></pre> 
<h4><a id="_193"></a>é‡å¤æ³¨è§£</h4> 
<p>è‡ªä»Java 5ä¸­å¼•å…¥æ³¨è§£ä»¥æ¥ï¼Œè¿™ä¸ªç‰¹æ€§å¼€å§‹å˜å¾—éå¸¸æµè¡Œï¼Œå¹¶åœ¨å„ä¸ªæ¡†æ¶å’Œé¡¹ç›®ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ä¸è¿‡ï¼Œæ³¨è§£æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶æ˜¯ï¼šåœ¨åŒä¸€ä¸ªåœ°æ–¹ä¸èƒ½å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ³¨è§£ã€‚Java 8æ‰“ç ´äº†è¿™ä¸ªé™åˆ¶ï¼Œå¼•å…¥äº†é‡å¤æ³¨è§£çš„æ¦‚å¿µï¼Œå…è®¸åœ¨åŒä¸€ä¸ªåœ°æ–¹å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ³¨è§£ã€‚<br> åœ¨Java 8ä¸­ä½¿ç”¨**@Repeatable**æ³¨è§£å®šä¹‰é‡å¤æ³¨è§£ï¼Œå®é™…ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯è¯­è¨€å±‚é¢çš„æ”¹è¿›ï¼Œè€Œæ˜¯ç¼–è¯‘å™¨åšçš„ä¸€ä¸ªtrickï¼Œåº•å±‚çš„æŠ€æœ¯ä»ç„¶ç›¸åŒã€‚å¯ä»¥åˆ©ç”¨ä¸‹é¢çš„ä»£ç è¯´æ˜ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>repeatable<span class="token punctuation">.</span>annotations</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Repeatable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RepeatingAnnotations</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span> <span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Filters</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Filter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span> <span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span> <span class="token class-name">Filters</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span> <span class="token string">"filter1"</span> <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span> <span class="token string">"filter2"</span> <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filterable</span> <span class="token punctuation">{<!-- --></span>        
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token class-name">Filter</span> filter<span class="token operator">:</span> <span class="token class-name">Filterable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getAnnotationsByType</span><span class="token punctuation">(</span> <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> filter<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œè¿™é‡Œçš„<strong>Filter</strong>ç±»ä½¿ç”¨**@Repeatable(Filters.class)<strong>æ³¨è§£ä¿®é¥°ï¼Œè€Œ</strong>Filters<strong>æ˜¯å­˜æ”¾</strong>Filter<strong>æ³¨è§£çš„å®¹å™¨ï¼Œç¼–è¯‘å™¨å°½é‡å¯¹å¼€å‘è€…å±è”½è¿™äº›ç»†èŠ‚ã€‚è¿™æ ·ï¼Œ<strong>Filterable</strong>æ¥å£å¯ä»¥ç”¨ä¸¤ä¸ª</strong>Filter<strong>æ³¨è§£æ³¨é‡Šï¼ˆè¿™é‡Œå¹¶æ²¡æœ‰æåˆ°ä»»ä½•å…³äº</strong>Filters**çš„ä¿¡æ¯ï¼‰ã€‚<br> å¦å¤–ï¼Œåå°„APIæä¾›äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼š<strong>getAnnotationsByType()</strong>ï¼Œå¯ä»¥è¿”å›æŸä¸ªç±»å‹çš„é‡å¤æ³¨è§£ï¼Œä¾‹å¦‚<code>Filterable.class.getAnnoation(Filters.class)</code>å°†è¿”å›ä¸¤ä¸ªFilterå®ä¾‹ï¼Œè¾“å‡ºåˆ°æ§åˆ¶å°çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p> 
<pre><code class="prism language-java">filter1
filter2
</code></pre> 
<p>å¦‚æœä½ å¸Œæœ›äº†è§£æ›´å¤šå†…å®¹ï¼Œå¯ä»¥å‚è€ƒ<a href="http://docs.oracle.com/javase/tutorial/java/annotations/repeating.html" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p> 
<h4><a id="_239"></a>æ›´å¥½çš„ç±»å‹æ¨æ–­</h4> 
<p>Java 8ç¼–è¯‘å™¨åœ¨ç±»å‹æ¨æ–­æ–¹é¢æœ‰å¾ˆå¤§çš„æå‡ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ç¼–è¯‘å™¨å¯ä»¥æ¨å¯¼å‡ºæŸä¸ªå‚æ•°çš„æ•°æ®ç±»å‹ï¼Œä»è€Œä½¿å¾—ä»£ç æ›´ä¸ºç®€æ´ã€‚ä¾‹å­ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>type<span class="token punctuation">.</span>inference</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">,</span> <span class="token class-name">T</span> defaultValue <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token operator">?</span> value <span class="token operator">:</span> defaultValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¸‹åˆ—ä»£ç æ˜¯ <strong>Value&lt; String&gt;</strong> ç±»å‹çš„åº”ç”¨ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>type<span class="token punctuation">.</span>inference</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TypeInference</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Value</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        value<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token string">"22"</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">.</span><span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å‚æ•° <strong>Value.defaultValue()</strong> çš„ç±»å‹ç”±ç¼–è¯‘å™¨æ¨å¯¼å¾—å‡ºï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡æ˜ã€‚åœ¨Java 7ä¸­è¿™æ®µä»£ç ä¼šæœ‰ç¼–è¯‘é”™è¯¯ï¼Œé™¤éä½¿ç”¨Value.defaultValue()ã€‚</p> 
<h4><a id="_266"></a>æ‹“å®½æ³¨è§£çš„åº”ç”¨åœºæ™¯</h4> 
<p>Java 8æ‹“å®½äº†æ³¨è§£çš„åº”ç”¨åœºæ™¯ã€‚ç°åœ¨ï¼Œæ³¨è§£å‡ ä¹å¯ä»¥ä½¿ç”¨åœ¨ä»»ä½•å…ƒç´ ä¸Šï¼šå±€éƒ¨å˜é‡ã€æ¥å£ç±»å‹ã€è¶…ç±»å’Œæ¥å£å®ç°ç±»ï¼Œç”šè‡³å¯ä»¥ç”¨åœ¨å‡½æ•°çš„å¼‚å¸¸å®šä¹‰ä¸Šã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>annotations</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Annotations</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span> <span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE_USE<span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE_PARAMETER <span class="token punctuation">}</span> <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">NonEmpty</span> <span class="token punctuation">{<!-- --></span>        
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Holder</span><span class="token operator">&lt;</span> <span class="token annotation punctuation">@NonEmpty</span> <span class="token class-name">T</span> <span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token annotation punctuation">@NonEmpty</span> <span class="token class-name">Object</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token annotation punctuation">@NonEmpty</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span> <span class="token string">"unused"</span> <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Holder</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">String</span> <span class="token punctuation">&gt;</span></span> holder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token annotation punctuation">@NonEmpty</span> <span class="token class-name">Holder</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">String</span> <span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
        <span class="token annotation punctuation">@NonEmpty</span> <span class="token class-name">Collection</span><span class="token operator">&lt;</span> <span class="token annotation punctuation">@NonEmpty</span> <span class="token class-name">String</span> <span class="token operator">&gt;</span> strings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>ElementType.TYPE_USER</strong> å’Œ <strong>ElementType.TYPE_PARAMETER</strong> æ˜¯Java 8æ–°å¢çš„ä¸¤ä¸ªæ³¨è§£ï¼Œç”¨äºæè¿°æ³¨è§£çš„ä½¿ç”¨åœºæ™¯ã€‚Java è¯­è¨€ä¹Ÿåšäº†å¯¹åº”çš„æ”¹å˜ï¼Œä»¥è¯†åˆ«è¿™äº›æ–°å¢çš„æ³¨è§£ã€‚</p> 
<h3><a id="_297"></a>ç¼–è¯‘å™¨çš„æ–°ç‰¹æ€§</h3> 
<h4><a id="_298"></a>å‚æ•°åç§°</h4> 
<p><strong>åœ¨è¿è¡Œæ—¶è·å¾—Javaç¨‹åºä¸­æ–¹æ³•çš„å‚æ•°åç§°</strong><br> ä¸ºäº†åœ¨è¿è¡Œæ—¶è·å¾—Javaç¨‹åºä¸­æ–¹æ³•çš„å‚æ•°åç§°ï¼Œè€ä¸€è¾ˆçš„Javaç¨‹åºå‘˜å¿…é¡»ä½¿ç”¨ä¸åŒæ–¹æ³•ï¼Œä¾‹å¦‚Paranamer liberaryã€‚Java 8ç»ˆäºå°†è¿™ä¸ªç‰¹æ€§è§„èŒƒåŒ–ï¼Œåœ¨è¯­è¨€å±‚é¢ï¼ˆä½¿ç”¨åå°„APIå’Œ Parameter.getName()æ–¹æ³• ï¼‰å’Œå­—èŠ‚ç å±‚é¢ï¼ˆä½¿ç”¨æ–°çš„javacç¼–è¯‘å™¨ä»¥åŠ -parameters å‚æ•°ï¼‰æä¾›æ”¯æŒã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>parameter<span class="token punctuation">.</span>names</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Parameter</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParameterNames</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> <span class="token class-name">ParameterNames</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">final</span> <span class="token class-name">Parameter</span> parameter<span class="token operator">:</span> method<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Parameter: "</span> <span class="token operator">+</span> parameter<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åœ¨Java 8ä¸­è¿™ä¸ªç‰¹æ€§æ˜¯é»˜è®¤å…³é—­çš„ï¼Œå› æ­¤å¦‚æœä¸å¸¦ <strong>-parameters</strong> å‚æ•°ç¼–è¯‘ä¸Šè¿°ä»£ç å¹¶è¿è¡Œï¼Œåˆ™ä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Parameter</span><span class="token operator">:</span> arg0
</code></pre> 
<p>å¦‚æœå¸¦ <strong>-parameters</strong> å‚æ•°ï¼Œåˆ™ä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼ˆæ­£ç¡®çš„ç»“æœï¼‰ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Parameter</span><span class="token operator">:</span> args
</code></pre> 
<p>å¦‚æœä½ ä½¿ç”¨Mavenè¿›è¡Œé¡¹ç›®ç®¡ç†ï¼Œåˆ™å¯ä»¥åœ¨ <strong>maven-compiler-plugin</strong> ç¼–è¯‘å™¨çš„é…ç½®é¡¹ä¸­é…ç½®**-parameters**å‚æ•°ï¼š</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>compilerArgument</span><span class="token punctuation">&gt;</span></span>-parameters<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>compilerArgument</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="_337"></a>å®˜æ–¹åº“çš„æ–°ç‰¹æ€§</h3> 
<h4><a id="Optional_338"></a>Optional</h4> 
<p>Javaåº”ç”¨ä¸­æœ€å¸¸è§çš„bugå°±æ˜¯<strong>ç©ºå€¼å¼‚å¸¸</strong>ã€‚åœ¨Java 8ä¹‹å‰ï¼ŒGoogle Guavaå¼•å…¥äº†<strong>Optionals</strong>ç±»æ¥è§£å†³<strong>NullPointerException</strong>ï¼Œä»è€Œé¿å…æºç è¢«å„ç§nullæ£€æŸ¥æ±¡æŸ“ï¼Œä»¥ä¾¿å¼€å‘è€…å†™å‡ºæ›´åŠ æ•´æ´çš„ä»£ç ã€‚<br> Java 8ä¹Ÿå°†OptionalåŠ å…¥äº†å®˜æ–¹åº“ã€‚<br> Optionalä»…ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼šå­˜æ”¾Tç±»å‹çš„å€¼æˆ–è€…nullã€‚å®ƒæä¾›äº†ä¸€äº›æœ‰ç”¨çš„æ¥å£æ¥é¿å…æ˜¾å¼çš„nullæ£€æŸ¥ï¼Œå¯ä»¥å‚è€ƒJava 8å®˜æ–¹æ–‡æ¡£äº†è§£æ›´å¤šç»†èŠ‚ã€‚<br> æ¥ä¸‹æ¥çœ‹ä¸€ç‚¹ä½¿ç”¨Optionalçš„ä¾‹å­ï¼šå¯èƒ½ä¸ºç©ºçš„å€¼æˆ–è€…æŸä¸ªç±»å‹çš„å€¼ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> fullName <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Full Name is set? "</span> <span class="token operator">+</span> fullName<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Full Name: "</span> <span class="token operator">+</span> fullName<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">"[none]"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> fullName<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> s <span class="token operator">-&gt;</span> <span class="token string">"Hey "</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">"!"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span> <span class="token string">"Hey Stranger!"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å¦‚æœ**Optional **å®ä¾‹æŒæœ‰ä¸€ä¸ªéç©ºå€¼ï¼Œåˆ™ **isPresent() **æ–¹æ³•è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›<br> **orElseGet() **æ–¹æ³•ï¼Œ**Optional **å®ä¾‹æŒæœ‰nullï¼Œåˆ™å¯ä»¥æ¥å—ä¸€ä¸ªlambdaè¡¨è¾¾å¼ç”Ÿæˆçš„é»˜è®¤å€¼ï¼›<br> **map() **æ–¹æ³•å¯ä»¥å°†ç°æœ‰çš„ **Opetional **å®ä¾‹çš„å€¼è½¬æ¢æˆæ–°çš„å€¼ï¼›<br> <strong>orElse()</strong> æ–¹æ³•ä¸ **orElseGet() **æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨æŒæœ‰nullçš„æ—¶å€™è¿”å›ä¼ å…¥çš„é»˜è®¤å€¼ã€‚<br> ä¸Šè¿°ä»£ç çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Full</span> <span class="token class-name">Name</span> is set<span class="token operator">?</span> <span class="token boolean">false</span>
<span class="token class-name">Full</span> <span class="token class-name">Name</span><span class="token operator">:</span> <span class="token punctuation">[</span>none<span class="token punctuation">]</span>
<span class="token class-name">Hey</span> <span class="token class-name">Stranger</span><span class="token operator">!</span>
</code></pre> 
<p>å†çœ‹ä¸‹å¦ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstName <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span> <span class="token string">"Tom"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"First Name is set? "</span> <span class="token operator">+</span> firstName<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"First Name: "</span> <span class="token operator">+</span> firstName<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">"[none]"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> firstName<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token string">"Hey "</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">"!"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span> <span class="token string">"Hey Stranger!"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºæ˜¯ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">First</span> <span class="token class-name">Name</span> is set<span class="token operator">?</span> <span class="token boolean">true</span>
<span class="token class-name">First</span> <span class="token class-name">Name</span><span class="token operator">:</span> <span class="token class-name">Tom</span>
<span class="token class-name">Hey</span> <span class="token class-name">Tom</span><span class="token operator">!</span>
</code></pre> 
<p>å¦‚æœæƒ³äº†è§£æ›´å¤šçš„ç»†èŠ‚ï¼Œè¯·å‚è€ƒ<a href="http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ã€‚<br> <strong>Optionalæºç </strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Consumer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Function</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Predicate</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Supplier</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * A container object which may or may not contain a non-null value.
 * If a value is present, {@code isPresent()} will return {@code true} and
 * {@code get()} will return the value.
 *
 * &lt;p&gt;Additional methods that depend on the presence or absence of a contained
 * value are provided, such as {@link #orElse(java.lang.Object) orElse()}
 * (return a default value if value not present) and
 * {@link #ifPresent(java.util.function.Consumer) ifPresent()} (execute a block
 * of code if the value is present).
 *
 * &lt;p&gt;This is a &lt;a href="../lang/doc-files/ValueBased.html"&gt;value-based&lt;/a&gt;
 * class; use of identity-sensitive operations (including reference equality
 * ({@code ==}), identity hash code, or synchronization) on instances of
 * {@code Optional} may have unpredictable results and should be avoided.
 *
 * @since 1.8
 */</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * Common instance for {@code empty()}.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> EMPTY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * If non-null, the value; if null, indicates no value is present
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">T</span> value<span class="token punctuation">;</span>

    <span class="token comment">/**
     * Constructs an empty instance.
     *
     * @implNote Generally only one empty instance, {@link Optional#EMPTY},
     * should exist per VM.
     * 
     * æ— å‚æ„é€ 
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Returns an empty {@code Optional} instance.  No value is present for this
     * Optional.
     *
     * @apiNote Though it may be tempting to do so, avoid testing if an object
     * is empty by comparing with {@code ==} against instances returned by
     * {@code Option.empty()}. There is no guarantee that it is a singleton.
     * Instead, use {@link #isPresent()}.
     *
     * @param &lt;T&gt; Type of the non-existent value
     * @return an empty {@code Optional}
     * 
     *  è¿”å›ä¸€ä¸ªç©ºOptionalå®ä¾‹ã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
        <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> EMPTY<span class="token punctuation">;</span>
        <span class="token keyword">return</span> t<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Constructs an instance with the value present.
     *
     * @param value the non-null value to be present
     * @throws NullPointerException if value is null
     *
     * æœ‰å‚æ„é€ 
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Optional</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Returns an {@code Optional} with the specified present non-null value.
     *
     * @param &lt;T&gt; the class of the value
     * @param value the value to be present, which must be non-null
     * @return an {@code Optional} with the value present
     * @throws NullPointerException if value is null
     *
     * è¿”å›ä¸€ä¸ªå…·æœ‰æŒ‡å®šå½“å‰éç©ºå€¼çš„Optionalå®ä¾‹ã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Returns an {@code Optional} describing the specified value, if non-null,
     * otherwise returns an empty {@code Optional}.
     *
     * @param &lt;T&gt; the class of the value
     * @param value the possibly-null value to describe
     * @return an {@code Optional} with a present value if the specified value
     * is non-null, otherwise an empty {@code Optional}
     *
     * å¦‚æœéç©ºï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šå€¼Optionalå®ä¾‹ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºOptionalã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * If a value is present in this {@code Optional}, returns the value,
     * otherwise throws {@code NoSuchElementException}.
     *
     * @return the non-null value held by this {@code Optional}
     * @throws NoSuchElementException if there is no value present
     *
     * @see Optional#isPresent()
     *
     * å¦‚æœ this ä¸­å­˜åœ¨Optionalå€¼ï¼Œåˆ™è¿”å›è¯¥å€¼ï¼Œå¦åˆ™æŠ›å‡ºNoSuchElementExceptionã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"No value present"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Return {@code true} if there is a value present, otherwise {@code false}.
     *
     * @return {@code true} if there is a value present, otherwise {@code false}
     *
     * å¦‚æœå­˜åœ¨å€¼ï¼ˆä¸ä¸ºnullï¼‰åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * If a value is present, invoke the specified consumer with the value,
     * otherwise do nothing.
     *
     * @param consumer block to be executed if a value is present
     * @throws NullPointerException if value is present and {@code consumer} is
     * null
     *
     * å¦‚æœå­˜åœ¨å€¼ï¼Œåˆ™ä½¿ç”¨è¯¥å€¼è°ƒç”¨æŒ‡å®šçš„ä½¿ç”¨è€…ï¼Œå¦åˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * If a value is present, and the value matches the given predicate,
     * return an {@code Optional} describing the value, otherwise return an
     * empty {@code Optional}.
     *
     * @param predicate a predicate to apply to the value, if present
     * @return an {@code Optional} describing the value of this {@code Optional}
     * if a value is present and the value matches the given predicate,
     * otherwise an empty {@code Optional}
     * @throws NullPointerException if the predicate is null
     *
     * å¦‚æœå­˜åœ¨ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”è¯¥å€¼ä¸ç»™å®šçš„è°“è¯åŒ¹é…ï¼Œåˆ™è¿”å›ä¸€ä¸ªOptionalæè¿°è¯¥å€¼çš„å€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºå€¼Optionalã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>predicate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> predicate<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * If a value is present, apply the provided mapping function to it,
     * and if the result is non-null, return an {@code Optional} describing the
     * result.  Otherwise return an empty {@code Optional}.
     *
     * @apiNote This method supports post-processing on optional values, without
     * the need to explicitly check for a return status.  For example, the
     * following code traverses a stream of file names, selects one that has
     * not yet been processed, and then opens that file, returning an
     * {@code Optional&lt;FileInputStream&gt;}:
     *
     * &lt;pre&gt;{@code
     *     Optional&lt;FileInputStream&gt; fis =
     *         names.stream().filter(name -&gt; !isProcessedYet(name))
     *                       .findFirst()
     *                       .map(name -&gt; new FileInputStream(name));
     * }&lt;/pre&gt;
     *
     * Here, {@code findFirst} returns an {@code Optional&lt;String&gt;}, and then
     * {@code map} returns an {@code Optional&lt;FileInputStream&gt;} for the desired
     * file if one exists.
     *
     * @param &lt;U&gt; The type of the result of the mapping function
     * @param mapper a mapping function to apply to the value, if present
     * @return an {@code Optional} describing the result of applying a mapping
     * function to the value of this {@code Optional}, if a value is present,
     * otherwise an empty {@code Optional}
     * @throws NullPointerException if the mapping function is null
     *
     * å¦‚æœå­˜åœ¨å€¼ï¼Œåˆ™å¯¹å…¶åº”ç”¨æä¾›çš„æ˜ å°„å‡½æ•°ï¼Œå¦‚æœç»“æœä¸ºé nullï¼Œåˆ™è¿”å›Optionalæè¿°ç»“æœã€‚
     */</span>
    <span class="token keyword">public</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>mapper<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * If a value is present, apply the provided {@code Optional}-bearing
     * mapping function to it, return that result, otherwise return an empty
     * {@code Optional}.  This method is similar to {@link #map(Function)},
     * but the provided mapper is one whose result is already an {@code Optional},
     * and if invoked, {@code flatMap} does not wrap it with an additional
     * {@code Optional}.
     *
     * @param &lt;U&gt; The type parameter to the {@code Optional} returned by
     * @param mapper a mapping function to apply to the value, if present
     *           the mapping function
     * @return the result of applying an {@code Optional}-bearing mapping
     * function to the value of this {@code Optional}, if a value is present,
     * otherwise an empty {@code Optional}
     * @throws NullPointerException if the mapping function is null or returns
     * a null result
     *
     * å¦‚æœå­˜åœ¨å€¼ï¼Œåˆ™å°†æä¾›çš„Optional-bearing æ˜ å°„å‡½æ•°åº”ç”¨äºå®ƒï¼Œè¿”å›è¯¥ç»“æœï¼Œå¦åˆ™è¿”å›ç©º Optionalã€‚
     */</span>
    <span class="token keyword">public</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>mapper<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Return the value if present, otherwise return {@code other}.
     *
     * @param other the value to be returned if there is no value present, may
     * be null
     * @return the value, if present, otherwise {@code other}
     *
     * å¯¹è‡ªèº«åˆ¤æ–­ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›è‡ªèº«ï¼Œå¦åˆ™è¿”å›otherã€‚
     * å¯¹è‡ªèº«åˆ¤æ–­ï¼Œå¦‚æœä¸ä¸ºnullåˆ™è¿”å›è‡ªèº«ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">orElse</span><span class="token punctuation">(</span><span class="token class-name">T</span> other<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> value <span class="token operator">:</span> other<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Return the value if present, otherwise invoke {@code other} and return
     * the result of that invocation.
     *
     * @param other a {@code Supplier} whose result is returned if no value
     * is present
     * @return the value if present otherwise the result of {@code other.get()}
     * @throws NullPointerException if value is not present and {@code other} is
     * null
     *
     * å¦‚æœå­˜åœ¨åˆ™è¿”å›è¯¥å€¼ï¼Œå¦åˆ™è°ƒç”¨otherå¹¶è¿”å›è¯¥è°ƒç”¨çš„ç»“æœã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> value <span class="token operator">:</span> other<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Return the contained value, if present, otherwise throw an exception
     * to be created by the provided supplier.
     *
     * @apiNote A method reference to the exception constructor with an empty
     * argument list can be used as the supplier. For example,
     * {@code IllegalStateException::new}
     *
     * @param &lt;X&gt; Type of the exception to be thrown
     * @param exceptionSupplier The supplier which will return the exception to
     * be thrown
     * @return the present value
     * @throws X if there is no value present
     * @throws NullPointerException if no value is present and
     * {@code exceptionSupplier} is null
     *
     * å¦‚æœå­˜åœ¨ï¼ˆä¸ä¸ºnullï¼‰ï¼Œåˆ™è¿”å›è¯¥å€¼ï¼Œå¦åˆ™æŠ›å‡ºç”±æä¾›çš„ä¾›åº”å•†åˆ›å»ºçš„å¼‚å¸¸ã€‚
     */</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">X</span> <span class="token keyword">extends</span> <span class="token class-name">Throwable</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">X</span><span class="token punctuation">&gt;</span></span> exceptionSupplier<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">X</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> exceptionSupplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Indicates whether some other object is "equal to" this Optional. The
     * other object is considered equal if:
     * &lt;ul&gt;
     * &lt;li&gt;it is also an {@code Optional} and;
     * &lt;li&gt;both instances have no value present or;
     * &lt;li&gt;the present values are "equal to" each other via {@code equals()}.
     * &lt;/ul&gt;
     *
     * @param obj an object to be tested for equality
     * @return {code true} if the other object is "equal to" this object
     * otherwise {@code false}
     *
     * åˆ¤æ–­æŸä¸ªå…¶ä»–å¯¹è±¡æ˜¯å¦â€œç­‰äºâ€æ­¤ Optionalã€‚ ç›¸ç­‰è¿”å›trueï¼Œä¸æƒ³ç­‰è¿”å›false
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Optional</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> other<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Returns the hash code value of the present value, if any, or 0 (zero) if
     * no value is present.
     *
     * @return hash code value of the present value or 0 if no value is present
     *
     * è¿”å›å½“å‰å€¼çš„å“ˆå¸Œç å€¼ï¼ˆå¦‚æœæœ‰ï¼‰ï¼›å¦‚æœä¸å­˜åœ¨å€¼ï¼Œåˆ™è¿”å› 0ï¼ˆé›¶ï¼‰ã€‚
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Returns a non-empty string representation of this Optional suitable for
     * debugging. The exact presentation format is unspecified and may vary
     * between implementations and versions.
     *
     * @implSpec If a value is present the result must include its string
     * representation in the result. Empty and present Optionals must be
     * unambiguously differentiable.
     *
     * @return the string representation of this instance
     *
     * è¿”å›æ­¤ Optional é€‚åˆè°ƒè¯•çš„éç©ºå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span>
            <span class="token operator">?</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Optional[%s]"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token operator">:</span> <span class="token string">"Optional.empty"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Stream_737"></a>Stream</h4> 
<p>æ–°å¢çš„Stream APIï¼ˆjava.util.streamï¼‰å°†ç”Ÿæˆç¯å¢ƒçš„å‡½æ•°å¼ç¼–ç¨‹å¼•å…¥äº†Javaåº“ä¸­ã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢æœ€å¤§çš„ä¸€æ¬¡å¯¹Javaåº“çš„å®Œå–„ï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½å¤Ÿå†™å‡ºæ›´åŠ æœ‰æ•ˆã€æ›´åŠ ç®€æ´å’Œç´§å‡‘çš„ä»£ç ã€‚<br> Steam APIæå¤§å¾—ç®€åŒ–äº†é›†åˆæ“ä½œï¼ˆåé¢æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸æ­¢æ˜¯é›†åˆï¼‰ï¼Œé¦–å…ˆçœ‹ä¸‹è¿™ä¸ªå«Taskçš„ç±»ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Streams</span>  <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{<!-- --></span>
        OPEN<span class="token punctuation">,</span> CLOSED
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Status</span> status<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> points<span class="token punctuation">;</span>
 
        <span class="token class-name">Task</span><span class="token punctuation">(</span> <span class="token keyword">final</span> <span class="token class-name">Status</span> status<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> points <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>points <span class="token operator">=</span> points<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> points<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">public</span> <span class="token class-name">Status</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> status<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span> <span class="token string">"[%s, %d]"</span><span class="token punctuation">,</span> status<span class="token punctuation">,</span> points <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Taskç±»æœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆæˆ–ä¼ªå¤æ‚åº¦ï¼‰çš„æ¦‚å¿µï¼Œå¦å¤–è¿˜æœ‰ä¸¤ç§çŠ¶æ€ï¼šOPENæˆ–è€…CLOSEDã€‚ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªtaské›†åˆï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">Task</span> <span class="token punctuation">&gt;</span></span> tasks <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span> <span class="token class-name">Status</span><span class="token punctuation">.</span>OPEN<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span> <span class="token class-name">Status</span><span class="token punctuation">.</span>OPEN<span class="token punctuation">,</span> <span class="token number">13</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span> <span class="token class-name">Status</span><span class="token punctuation">.</span>CLOSED<span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">)</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>é¦–å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼šåœ¨è¿™ä¸ªtaské›†åˆä¸­ä¸€å…±æœ‰å¤šå°‘ä¸ªOPENçŠ¶æ€çš„ç‚¹ï¼Ÿ<br> åœ¨Java 8ä¹‹å‰ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆ™éœ€è¦ä½¿ç”¨ <strong>foreach</strong> å¾ªç¯éå†taské›†åˆï¼›<br> ä½†æ˜¯åœ¨Java 8ä¸­å¯ä»¥åˆ©ç”¨steamsè§£å†³ï¼šåŒ…æ‹¬ä¸€ç³»åˆ—å…ƒç´ çš„åˆ—è¡¨ï¼Œå¹¶ä¸”æ”¯æŒé¡ºåºå’Œå¹¶è¡Œå¤„ç†ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// Calculate total points of all active tasks using sum()</span>
<span class="token keyword">final</span> <span class="token keyword">long</span> totalPointsOfOpenTasks <span class="token operator">=</span> tasks
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> task <span class="token operator">-&gt;</span> task<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Status</span><span class="token punctuation">.</span>OPEN <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span> <span class="token class-name">Task</span><span class="token operator">::</span><span class="token function">getPoints</span> <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Total points: "</span> <span class="token operator">+</span> totalPointsOfOpenTasks <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿è¡Œè¿™ä¸ªæ–¹æ³•çš„æ§åˆ¶å°è¾“å‡ºæ˜¯ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Total</span> points<span class="token operator">:</span> <span class="token number">18</span>
</code></pre> 
<p>è¿™é‡Œæœ‰å¾ˆå¤šçŸ¥è¯†ç‚¹å€¼å¾—è¯´ã€‚</p> 
<ul><li>é¦–å…ˆï¼Œtasksé›†åˆè¢«è½¬æ¢æˆsteamè¡¨ç¤ºï¼›</li><li>å…¶æ¬¡ï¼Œåœ¨steamä¸Šçš„ filter æ“ä½œä¼šè¿‡æ»¤æ‰æ‰€æœ‰CLOSEDçš„taskï¼›</li><li>ç¬¬ä¸‰ï¼ŒmapToInt æ“ä½œåŸºäºæ¯ä¸ªtaskå®ä¾‹çš„ Task::getPoints æ–¹æ³•å°†taskæµè½¬æ¢æˆIntegeré›†åˆï¼›</li><li>æœ€åï¼Œé€šè¿‡sumæ–¹æ³•è®¡ç®—æ€»å’Œï¼Œå¾—å‡ºæœ€åçš„ç»“æœã€‚</li></ul> 
<p>åœ¨å­¦ä¹ ä¸‹ä¸€ä¸ªä¾‹å­ä¹‹å‰ï¼Œè¿˜éœ€è¦è®°ä½ä¸€äº›steamsï¼ˆ<a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps" rel="nofollow">ç‚¹æ­¤æ›´å¤šç»†èŠ‚</a>ï¼‰çš„çŸ¥è¯†ç‚¹ã€‚Steamä¹‹ä¸Šçš„æ“ä½œå¯åˆ†ä¸ºä¸­é—´æ“ä½œå’Œç»ˆæ­¢æ“ä½œã€‚è¯¦æƒ…å¯å‚è€ƒï¼šStream API<br> ä¸­é—´æ“ä½œä¼šè¿”å›ä¸€ä¸ªæ–°çš„steamâ€”â€”æ‰§è¡Œä¸€ä¸ªä¸­é—´æ“ä½œï¼ˆä¾‹å¦‚ <strong>filter</strong> ï¼‰å¹¶ä¸ä¼šæ‰§è¡Œå®é™…çš„è¿‡æ»¤æ“ä½œï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„steamï¼Œå¹¶å°†åŸsteamä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ æ”¾å…¥æ–°åˆ›å»ºçš„steamã€‚<br> ç»ˆæ­¢æ“ä½œï¼ˆä¾‹å¦‚ <strong>forEach</strong> æˆ–è€… <strong>sum</strong> ï¼‰ï¼Œä¼šéå†steamå¹¶å¾—å‡ºç»“æœæˆ–è€…é™„å¸¦ç»“æœï¼›åœ¨æ‰§è¡Œç»ˆæ­¢æ“ä½œä¹‹åï¼Œsteamå¤„ç†çº¿å·²ç»å¤„ç†å®Œæ¯•ï¼Œå°±ä¸èƒ½ä½¿ç”¨äº†ã€‚åœ¨å‡ ä¹æ‰€æœ‰æƒ…å†µä¸‹ï¼Œç»ˆæ­¢æ“ä½œéƒ½æ˜¯ç«‹åˆ»å¯¹steamè¿›è¡Œéå†ã€‚<br> steamçš„å¦ä¸€ä¸ªä»·å€¼æ˜¯åˆ›é€ æ€§åœ°æ”¯æŒå¹¶è¡Œå¤„ç†ï¼ˆparallel processingï¼‰ã€‚å¯¹äºä¸Šè¿°çš„tasksé›†åˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç è®¡ç®—æ‰€æœ‰ä»»åŠ¡çš„ç‚¹æ•°ä¹‹å’Œï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Calculate total points of all tasks</span>
<span class="token keyword">final</span> <span class="token keyword">double</span> totalPoints <span class="token operator">=</span> tasks
   <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> task <span class="token operator">-&gt;</span> task<span class="token punctuation">.</span><span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token comment">// or map( Task::getPoints ) </span>
   <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Total points (all tasks): "</span> <span class="token operator">+</span> totalPoints <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<strong>parallel</strong>æ–¹æ³•å¹¶è¡Œå¤„ç†æ‰€æœ‰çš„taskï¼Œå¹¶ä½¿ç”¨<strong>reduce</strong>æ–¹æ³•è®¡ç®—æœ€ç»ˆçš„ç»“æœã€‚æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Total</span> pointsï¼ˆall tasksï¼‰<span class="token operator">:</span> <span class="token number">26.0</span>
</code></pre> 
<p>å¯¹äºä¸€ä¸ªé›†åˆï¼Œç»å¸¸éœ€è¦æ ¹æ®æŸäº›æ¡ä»¶å¯¹å…¶ä¸­çš„å…ƒç´ åˆ†ç»„ã€‚åˆ©ç”¨steamæä¾›çš„APIå¯ä»¥å¾ˆå¿«å®Œæˆè¿™ç±»ä»»åŠ¡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Group tasks by their status</span>
<span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">Status</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span> <span class="token class-name">Task</span> <span class="token punctuation">&gt;</span> <span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> tasks
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span> <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">Task</span><span class="token operator">::</span><span class="token function">getStatus</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> map <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>æ§åˆ¶å°çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>CLOSED<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span>CLOSED<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> OPEN<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span>OPEN<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>OPEN<span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> 
<p>æœ€åä¸€ä¸ªå…³äºtasksé›†åˆçš„ä¾‹å­é—®é¢˜æ˜¯ï¼šå¦‚ä½•è®¡ç®—é›†åˆä¸­æ¯ä¸ªä»»åŠ¡çš„ç‚¹æ•°åœ¨é›†åˆä¸­æ‰€å çš„æ¯”é‡ï¼Œå…·ä½“å¤„ç†çš„ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Calculate the weight of each tasks (as percent of total points) </span>
<span class="token keyword">final</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">String</span> <span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> tasks
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                        <span class="token comment">// Stream&lt; String &gt;</span>
    <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span> <span class="token class-name">Task</span><span class="token operator">::</span><span class="token function">getPoints</span> <span class="token punctuation">)</span>                     <span class="token comment">// IntStream</span>
    <span class="token punctuation">.</span><span class="token function">asLongStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment">// LongStream</span>
    <span class="token punctuation">.</span><span class="token function">mapToDouble</span><span class="token punctuation">(</span> points <span class="token operator">-&gt;</span> points <span class="token operator">/</span> totalPoints <span class="token punctuation">)</span>   <span class="token comment">// DoubleStream</span>
    <span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                         <span class="token comment">// Stream&lt; Double &gt;</span>
    <span class="token punctuation">.</span><span class="token function">mapToLong</span><span class="token punctuation">(</span> weigth <span class="token operator">-&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">long</span> <span class="token punctuation">)</span><span class="token punctuation">(</span> weigth <span class="token operator">*</span> <span class="token number">100</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token comment">// LongStream</span>
    <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span> percentage <span class="token operator">-&gt;</span> percentage <span class="token operator">+</span> <span class="token string">"%"</span> <span class="token punctuation">)</span>      <span class="token comment">// Stream&lt; String&gt; </span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span> <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// List&lt; String &gt; </span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> result <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>æ§åˆ¶å°è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span><span class="token number">19</span><span class="token operator">%</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token operator">%</span><span class="token punctuation">]</span>
</code></pre> 
<p>æœ€åï¼Œæ­£å¦‚ä¹‹å‰æ‰€è¯´ï¼ŒSteam APIä¸ä»…å¯ä»¥ä½œç”¨äºJavaé›†åˆï¼Œä¼ ç»Ÿçš„IOæ“ä½œï¼ˆä»æ–‡ä»¶æˆ–è€…ç½‘ç»œä¸€è¡Œä¸€è¡Œå¾—è¯»å–æ•°æ®ï¼‰å¯ä»¥å—ç›Šäºsteamå¤„ç†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå°ä¾‹å­ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span> filename <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span><span class="token punctuation">(</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lines <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    lines<span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Done!"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Streamçš„æ–¹æ³• onClose è¿”å›ä¸€ä¸ªç­‰ä»·çš„æœ‰é¢å¤–å¥æŸ„çš„Streamï¼Œå½“Streamçš„ close() æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™è¿™ä¸ªå¥æŸ„ä¼šè¢«æ‰§è¡Œã€‚<br> Stream APIã€Lambdaè¡¨è¾¾å¼è¿˜æœ‰æ¥å£é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•æ”¯æŒçš„æ–¹æ³•å¼•ç”¨ï¼Œæ˜¯Java 8å¯¹è½¯ä»¶å¼€å‘çš„ç°ä»£èŒƒå¼çš„å“åº”ã€‚<br> Streamæµä¸Lambdaè¡¨è¾¾å¼ã€æ–¹æ³•å¼•ç”¨ç­‰ç»“åˆä½¿ç”¨ï¼Œæ•ˆæœè¿˜æ˜¯æ¯”è¾ƒä¸é”™çš„ï¼Œå¯ä»¥å¤šåŠ ç»ƒä¹ ã€‚</p> 
<h4><a id="DateTime_APIJSR_310_861"></a>Date/Time API(JSR 310)</h4> 
<p>Java 8å¼•å…¥äº†<a href="https://jcp.org/en/jsr/detail?id=310" rel="nofollow">æ–°çš„Date-Time API(JSR 310)</a>æ¥æ”¹è¿›æ—¶é—´ã€æ—¥æœŸçš„å¤„ç†ã€‚æ—¶é—´å’Œæ—¥æœŸçš„ç®¡ç†ä¸€ç›´æ˜¯æœ€ä»¤Javaå¼€å‘è€…ç—›è‹¦çš„é—®é¢˜ã€‚<strong>java.util.Date</strong>å’Œåæ¥çš„<strong>java.util.Calendar</strong>ä¸€ç›´æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆç”šè‡³ä»¤å¼€å‘è€…æ›´åŠ è¿·èŒ«ï¼‰ã€‚<br> å› ä¸ºä¸Šé¢è¿™äº›åŸå› ï¼Œè¯ç”Ÿäº†ç¬¬ä¸‰æ–¹åº“Joda-Timeï¼Œå¯ä»¥æ›¿ä»£Javaçš„æ—¶é—´ç®¡ç†APIã€‚Java 8ä¸­æ–°çš„æ—¶é—´å’Œæ—¥æœŸç®¡ç†APIæ·±å—Joda-Timeå½±å“ï¼Œå¹¶å¸æ”¶äº†å¾ˆå¤šJoda-Timeçš„ç²¾åã€‚æ–°çš„java.timeåŒ…åŒ…å«äº†æ‰€æœ‰å…³äºæ—¥æœŸã€æ—¶é—´ã€æ—¶åŒºã€Instantï¼ˆè·Ÿæ—¥æœŸç±»ä¼¼ä½†æ˜¯ç²¾ç¡®åˆ°çº³ç§’ï¼‰ã€durationï¼ˆæŒç»­æ—¶é—´ï¼‰å’Œæ—¶é’Ÿæ“ä½œçš„ç±»ã€‚æ–°è®¾è®¡çš„APIè®¤çœŸè€ƒè™‘äº†è¿™äº›ç±»çš„ä¸å˜æ€§ï¼ˆä»java.util.Calendarå¸å–çš„æ•™è®­ï¼‰ï¼Œå¦‚æœæŸä¸ªå®ä¾‹éœ€è¦ä¿®æ”¹ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚<br> æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹java.timeåŒ…ä¸­çš„å…³é”®ç±»å’Œå„è‡ªçš„ä½¿ç”¨ä¾‹å­ã€‚é¦–å…ˆï¼Œ<strong>Clock</strong> ç±»ä½¿ç”¨æ—¶åŒºæ¥è¿”å›å½“å‰çš„çº³ç§’æ—¶é—´å’Œæ—¥æœŸã€‚<strong>Clock</strong> å¯ä»¥æ›¿ä»£ <strong>System.currentTimeMillis()</strong> å’Œ <strong>TimeZone.getDefault()</strong> ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// Get the system clock as UTC offset </span>
<span class="token keyword">final</span> <span class="token class-name">Clock</span> clock <span class="token operator">=</span> <span class="token class-name">Clock</span><span class="token punctuation">.</span><span class="token function">systemUTC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> clock<span class="token punctuation">.</span><span class="token function">instant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> clock<span class="token punctuation">.</span><span class="token function">millis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p> 
<pre><code class="prism language-java"><span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>T15<span class="token operator">:</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">29.282</span>Z
<span class="token number">1397315969360</span>
</code></pre> 
<p>ç¬¬äºŒï¼Œå…³æ³¨ä¸‹ <strong>LocalDate</strong> å’Œ <strong>LocalTime</strong> ç±»ã€‚<strong>LocalDate</strong> ä»…ä»…åŒ…å«ISO-8601æ—¥å†ç³»ç»Ÿä¸­çš„æ—¥æœŸéƒ¨åˆ†ï¼›<strong>LocalTime</strong>åˆ™ä»…ä»…åŒ…å«è¯¥æ—¥å†ç³»ç»Ÿä¸­çš„æ—¶é—´éƒ¨åˆ†ã€‚è¿™ä¸¤ä¸ªç±»çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨Clockå¯¹è±¡æ„å»ºå¾—åˆ°ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// Get the local date and local time</span>
<span class="token keyword">final</span> <span class="token class-name">LocalDate</span> date <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">LocalDate</span> dateFromClock <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span> clock <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> date <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> dateFromClock <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// Get the local date and local time</span>
<span class="token keyword">final</span> <span class="token class-name">LocalTime</span> time <span class="token operator">=</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">LocalTime</span> timeFromClock <span class="token operator">=</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span> clock <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> time <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> timeFromClock <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä¸Šè¿°ä¾‹å­çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>
<span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>
<span class="token number">11</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">54.568</span>
<span class="token number">15</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">54.568</span>
</code></pre> 
<p><strong>LocalDateTime</strong> ç±»åŒ…å«äº†LocalDateå’ŒLocalTimeçš„ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒ…å«ISO-8601æ—¥å†ç³»ç»Ÿä¸­çš„æ—¶åŒºä¿¡æ¯ã€‚è¿™é‡Œæœ‰ä¸€äº›<a href="https://www.javacodegeeks.com/2014/04/java-8-date-time-api-tutorial-localdatetime.html" rel="nofollow">å…³äºLocalDateå’ŒLocalTimeçš„ä¾‹å­</a>ï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Get the local date/time</span>
<span class="token keyword">final</span> <span class="token class-name">LocalDateTime</span> datetime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">LocalDateTime</span> datetimeFromClock <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span> clock <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> datetime <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> datetimeFromClock <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä¸Šè¿°è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>T11<span class="token operator">:</span><span class="token number">37</span><span class="token operator">:</span><span class="token number">52.309</span>
<span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>T15<span class="token operator">:</span><span class="token number">37</span><span class="token operator">:</span><span class="token number">52.309</span>
</code></pre> 
<p>å¦‚æœä½ éœ€è¦ç‰¹å®šæ—¶åŒºçš„data/timeä¿¡æ¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<strong>ZoneDateTime</strong>ï¼Œå®ƒä¿å­˜æœ‰ISO-8601æ—¥æœŸç³»ç»Ÿçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œä¸”æœ‰æ—¶åŒºä¿¡æ¯ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨ä¸åŒæ—¶åŒºçš„ä¾‹å­ï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Get the zoned date/time</span>
<span class="token keyword">final</span> <span class="token class-name">ZonedDateTime</span> zonedDatetime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">ZonedDateTime</span> zonedDatetimeFromClock <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span> clock <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">ZonedDateTime</span> zonedDatetimeFromZone <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span> <span class="token string">"America/Los_Angeles"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> zonedDatetime <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> zonedDatetimeFromClock <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> zonedDatetimeFromZone <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p> 
<pre><code class="prism language-java"><span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>T11<span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">01.017</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">[</span><span class="token class-name">America</span><span class="token operator">/</span><span class="token class-name">New_York</span><span class="token punctuation">]</span>
<span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>T15<span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">01.017</span>Z
<span class="token number">2014</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>T08<span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">01.017</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">[</span><span class="token class-name">America</span><span class="token operator">/</span><span class="token class-name">Los_Angeles</span><span class="token punctuation">]</span>
</code></pre> 
<p>æœ€åçœ‹ä¸‹<strong>Duration</strong>ç±»ï¼Œå®ƒæŒæœ‰çš„æ—¶é—´ç²¾ç¡®åˆ°ç§’å’Œçº³ç§’ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å¾—è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„ä¸åŒï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Get duration between two dates</span>
<span class="token keyword">final</span> <span class="token class-name">LocalDateTime</span> from <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span> <span class="token number">2014</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span>APRIL<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">LocalDateTime</span> <span class="token keyword">to</span> <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span> <span class="token number">2015</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span>APRIL<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">59</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">final</span> <span class="token class-name">Duration</span> duration <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span> from<span class="token punctuation">,</span> <span class="token keyword">to</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Duration in days: "</span> <span class="token operator">+</span> duration<span class="token punctuation">.</span><span class="token function">toDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Duration in hours: "</span> <span class="token operator">+</span> duration<span class="token punctuation">.</span><span class="token function">toHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™ä¸ªä¾‹å­ç”¨äºè®¡ç®—2014å¹´4æœˆ16æ—¥å’Œ2015å¹´4æœˆ16æ—¥ä¹‹é—´çš„å¤©æ•°å’Œå°æ—¶æ•°ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Duration</span> in days<span class="token operator">:</span> <span class="token number">365</span>
<span class="token class-name">Duration</span> in hours<span class="token operator">:</span> <span class="token number">8783</span>
</code></pre> 
<p>å¯¹äºJava 8çš„æ–°æ—¥æœŸæ—¶é—´çš„æ€»ä½“å°è±¡è¿˜æ˜¯æ¯”è¾ƒç§¯æçš„ï¼Œä¸€éƒ¨åˆ†æ˜¯å› ä¸ºJoda-Timeçš„ç§¯æå½±å“ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯å› ä¸ºå®˜æ–¹ç»ˆäºå¬å–äº†å¼€å‘äººå‘˜çš„éœ€æ±‚ã€‚å¦‚æœå¸Œæœ›äº†è§£æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒ<a href="http://docs.oracle.com/javase/tutorial/datetime/index.html" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p> 
<h4><a id="Nashorn_JavaScript_946"></a>Nashorn JavaScriptå¼•æ“</h4> 
<p>Java 8æä¾›äº†æ–°çš„<a href="http://www.javacodegeeks.com/2014/02/java-8-compiling-lambda-expressions-in-the-new-nashorn-js-engine.html" rel="nofollow">Nashorn JavaScript</a>å¼•æ“ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨JVMä¸Šå¼€å‘å’Œè¿è¡ŒJSåº”ç”¨ã€‚Nashorn JavaScriptå¼•æ“æ˜¯javax.script.ScriptEngineçš„å¦ä¸€ä¸ªå®ç°ç‰ˆæœ¬ï¼Œè¿™ç±»Scriptå¼•æ“éµå¾ªç›¸åŒçš„è§„åˆ™ï¼Œå…è®¸Javaå’ŒJavaScriptäº¤äº’ä½¿ç”¨ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">ScriptEngineManager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScriptEngineManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ScriptEngine</span> engine <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getEngineByName</span><span class="token punctuation">(</span> <span class="token string">"JavaScript"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> engine<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"Result:"</span> <span class="token operator">+</span> engine<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span> <span class="token string">"function f() { return 1; }; f() + 1;"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™ä¸ªä»£ç çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name"><span class="token namespace">jdk<span class="token punctuation">.</span>nashorn<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scripting<span class="token punctuation">.</span></span>NashornScriptEngine</span>
<span class="token class-name">Result</span><span class="token operator">:</span> <span class="token number">2</span>
</code></pre> 
<h4><a id="Base64_959"></a>Base64</h4> 
<p><a href="http://www.javacodegeeks.com/2014/04/base64-in-java-8-its-not-too-late-to-join-in-the-fun.html" rel="nofollow">å¯¹Base64ç¼–ç çš„æ”¯æŒ</a>å·²ç»è¢«åŠ å…¥åˆ°Java 8å®˜æ–¹åº“ä¸­ï¼Œè¿™æ ·ä¸éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°±å¯ä»¥è¿›è¡ŒBase64ç¼–ç ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>base64</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Base64</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Base64s</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> text <span class="token operator">=</span> <span class="token string">"Base64 finally in Java 8!"</span><span class="token punctuation">;</span>
 
        <span class="token keyword">final</span> <span class="token class-name">String</span> encoded <span class="token operator">=</span> <span class="token class-name">Base64</span>
            <span class="token punctuation">.</span><span class="token function">getEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span> text<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8 <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> encoded <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">final</span> <span class="token class-name">String</span> decoded <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span> 
            <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span> encoded <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8 <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> decoded <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">QmFzZTY0IGZpbmFsbHkgaW4gSmF2YSA4IQ</span><span class="token operator">==</span>
<span class="token class-name">Base64</span> <span class="token keyword">finally</span> in <span class="token class-name">Java</span> <span class="token number">8</span><span class="token operator">!</span>
</code></pre> 
<p>æ–°çš„Base64APIä¹Ÿæ”¯æŒURLå’ŒMINEçš„ç¼–ç è§£ç ã€‚<br> (<strong>Base64.<em>getUrlEncoder</em>()</strong> / <strong>Base64.<em>getUrlDecoder</em>()</strong>, <strong>Base64.<em>getMimeEncoder</em>()</strong> / <strong>Base64.<em>getMimeDecoder</em>()</strong>)ã€‚</p> 
<h4><a id="_990"></a>å¹¶è¡Œæ•°ç»„</h4> 
<p>Java8ç‰ˆæœ¬æ–°å¢äº†å¾ˆå¤šæ–°çš„æ–¹æ³•ï¼Œç”¨äºæ”¯æŒå¹¶è¡Œæ•°ç»„å¤„ç†ã€‚æœ€é‡è¦çš„æ–¹æ³•æ˜¯ <strong>parallelSort()</strong> ï¼Œå¯ä»¥æ˜¾è‘—åŠ å¿«å¤šæ ¸æœºå™¨ä¸Šçš„æ•°ç»„æ’åºã€‚ä¸‹é¢çš„ä¾‹å­è®ºè¯äº†<strong>parallexXxx</strong> ç³»åˆ—çš„æ–¹æ³•ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacodegeeks<span class="token punctuation">.</span>java8<span class="token punctuation">.</span>parallel<span class="token punctuation">.</span>arrays</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParallelArrays</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arrayOfLong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">long</span> <span class="token punctuation">[</span> <span class="token number">20000</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>        
 
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">parallelSetAll</span><span class="token punctuation">(</span> arrayOfLong<span class="token punctuation">,</span> 
            index <span class="token operator">-&gt;</span> <span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span> <span class="token number">1000000</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span> arrayOfLong <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> 
            i <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span> i <span class="token operator">+</span> <span class="token string">" "</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">parallelSort</span><span class="token punctuation">(</span> arrayOfLong <span class="token punctuation">)</span><span class="token punctuation">;</span>        
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span> arrayOfLong <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> 
            i <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span> i <span class="token operator">+</span> <span class="token string">" "</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¸Šè¿°è¿™äº›ä»£ç ä½¿ç”¨**parallelSetAll()<strong>æ–¹æ³•ç”Ÿæˆ20000ä¸ªéšæœºæ•°ï¼Œç„¶åä½¿ç”¨</strong>parallelSort()**æ–¹æ³•è¿›è¡Œæ’åºã€‚è¿™ä¸ªç¨‹åºä¼šè¾“å‡ºä¹±åºæ•°ç»„å’Œæ’åºæ•°ç»„çš„å‰10ä¸ªå…ƒç´ ã€‚ä¸Šè¿°ä¾‹å­çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Unsorted</span><span class="token operator">:</span> <span class="token number">591217</span> <span class="token number">891976</span> <span class="token number">443951</span> <span class="token number">424479</span> <span class="token number">766825</span> <span class="token number">351964</span> <span class="token number">242997</span> <span class="token number">642839</span> <span class="token number">119108</span> <span class="token number">552378</span> 
<span class="token class-name">Sorted</span><span class="token operator">:</span> <span class="token number">39</span> <span class="token number">220</span> <span class="token number">263</span> <span class="token number">268</span> <span class="token number">325</span> <span class="token number">607</span> <span class="token number">655</span> <span class="token number">678</span> <span class="token number">723</span> <span class="token number">793</span>
</code></pre> 
<h4><a id="_1020"></a>å¹¶å‘æ€§</h4> 
<p>åŸºäºæ–°å¢çš„lambdaè¡¨è¾¾å¼å’Œsteamç‰¹æ€§ï¼Œä¸ºJava 8ä¸­ä¸º<strong>java.util.concurrent.ConcurrentHashMap</strong> ç±»æ·»åŠ äº†æ–°çš„æ–¹æ³•æ¥æ”¯æŒèšç„¦æ“ä½œï¼›å¦å¤–ï¼Œä¹Ÿä¸º<strong>java.util.concurrentForkJoinPool <strong>ç±»æ·»åŠ äº†æ–°çš„æ–¹æ³•æ¥æ”¯æŒé€šç”¨çº¿ç¨‹æ± æ“ä½œï¼ˆæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒ<a href="http://academy.javacodegeeks.com/course/java-concurrency-essentials/" rel="nofollow">å¹¶å‘ç¼–ç¨‹</a>ï¼‰ã€‚<br> Java 8è¿˜æ·»åŠ äº†æ–°çš„</strong>java.util.concurrent.locks.StampedLock</strong> ç±»ï¼Œç”¨äºæ”¯æŒåŸºäºå®¹é‡çš„é”â€”â€”è¯¥é”æœ‰ä¸‰ä¸ªæ¨¡å‹ç”¨äºæ”¯æŒè¯»å†™æ“ä½œï¼ˆå¯ä»¥æŠŠè¿™ä¸ªé”å½“åšæ˜¯<strong>java.util.concurrent.locks.ReadWriteLock</strong> çš„æ›¿ä»£è€…ï¼‰ã€‚<br> åœ¨**java.util.concurrent.atomic **åŒ…ä¸­ä¹Ÿæ–°å¢äº†ä¸å°‘å·¥å…·ç±»ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š</p> 
<ul><li>DoubleAccumulator</li><li>DoubleAdder</li><li>LongAccumulator</li><li>LongAdder</li></ul> 
<h3><a id="Java_1029"></a>æ–°çš„Javaå·¥å…·</h3> 
<h4><a id="Nashornjjs_1030"></a>Nashornå¼•æ“ï¼šjjs</h4> 
<p><strong>jjs</strong>æ˜¯ä¸€ä¸ªåŸºäºæ ‡å‡†Nashornå¼•æ“çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ¥å—jsæºç å¹¶æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ª<strong>func.js</strong>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
     <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
 
<span class="token function">print</span><span class="token punctuation">(</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼šjjs func.jsï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœæ˜¯ï¼š</p> 
<pre><code class="prism language-javascript"><span class="token number">2</span>
</code></pre> 
<p>å¦‚æœéœ€è¦äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒ<a href="http://docs.oracle.com/javase/8/docs/technotes/tools/unix/jjs.html" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p> 
<h4><a id="jdeps_1045"></a>ç±»ä¾èµ–åˆ†æå™¨ï¼šjdeps</h4> 
<p><strong>jdeps</strong>æ˜¯ä¸€ä¸ªç›¸å½“æ£’çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå¯ä»¥å±•ç¤ºåŒ…å±‚çº§å’Œç±»å±‚çº§çš„Javaç±»ä¾èµ–å…³ç³»ï¼Œå®ƒä»¥**.class**æ–‡ä»¶ã€ç›®å½•æˆ–è€…Jaræ–‡ä»¶ä¸ºè¾“å…¥ï¼Œç„¶åä¼šæŠŠä¾èµ–å…³ç³»è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚<br> æˆ‘ä»¬å¯ä»¥åˆ©ç”¨jedpsåˆ†æä¸‹Spring Frameworkåº“ï¼Œä¸ºäº†è®©ç»“æœå°‘ä¸€ç‚¹ï¼Œä»…ä»…åˆ†æä¸€ä¸ªJARæ–‡ä»¶ï¼šorg.springframework.core-3.0.5.RELEASE.jarã€‚</p> 
<pre><code class="prism language-javascript">jdeps org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token operator">-</span><span class="token number">3.0</span><span class="token number">.5</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token punctuation">.</span>jar
</code></pre> 
<p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºå¾ˆå¤šç»“æœï¼Œæˆ‘ä»¬ä»…çœ‹ä¸‹å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼šä¾èµ–å…³ç³»æŒ‰ç…§åŒ…åˆ†ç»„ï¼Œå¦‚æœåœ¨classpathä¸Šæ‰¾ä¸åˆ°ä¾èµ–ï¼Œåˆ™æ˜¾ç¤º"not found".</p> 
<pre><code class="prism language-javascript">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token operator">-</span><span class="token number">3.0</span><span class="token number">.5</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token punctuation">.</span>jar <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">C</span><span class="token operator">:</span>\Program Files\Java\jdk1<span class="token punctuation">.</span><span class="token number">8.0</span>\jre\lib\rt<span class="token punctuation">.</span>jar
   org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token function">core</span> <span class="token punctuation">(</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token operator">-</span><span class="token number">3.0</span><span class="token number">.5</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token punctuation">.</span>jar<span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>io                                            
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang                                          
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation                               
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref                                      
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect                                  
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>util                                          
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent                               
      <span class="token operator">-</span><span class="token operator">&gt;</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>logging                         not found
      <span class="token operator">-</span><span class="token operator">&gt;</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>asm                            not found
      <span class="token operator">-</span><span class="token operator">&gt;</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>asm<span class="token punctuation">.</span>commons                    not found
   org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span><span class="token function">annotation</span> <span class="token punctuation">(</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token operator">-</span><span class="token number">3.0</span><span class="token number">.5</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token punctuation">.</span>jar<span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang                                          
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation                               
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect                                  
      <span class="token operator">-</span><span class="token operator">&gt;</span> java<span class="token punctuation">.</span>util
</code></pre> 
<p>æ›´å¤šçš„ç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="http://docs.oracle.com/javase/8/docs/technotes/tools/unix/jdeps.html" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p> 
<h3><a id="JVM_1074"></a>JVMçš„æ–°ç‰¹æ€§</h3> 
<p>ä½¿ç”¨ Metaspace ï¼ˆ<a href="http://openjdk.java.net/jeps/122" rel="nofollow">JEP 122</a>ï¼‰ä»£æ›¿æŒä¹…ä»£ï¼ˆPermGen spaceï¼‰ã€‚<br> åœ¨JVMå‚æ•°æ–¹é¢ï¼Œä½¿ç”¨ <strong>-XX:MetaSpaceSize</strong>å’Œ <strong>-XX:MaxMetaspaceSize</strong> ä»£æ›¿åŸæ¥çš„ <strong>-XX:PermSize</strong> å’Œ <strong>-XX:MaxPermSize</strong>ã€‚</p> 
<h2><a id="h1_id9Java_9__1078"></a></h2> 
<h2 id="9">Java 9 æ–°ç‰¹æ€§</h2> 
<p>Java9 æ˜¯Java8åä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ›´æ–°ï¼ŒåŒ…å«æ–°ç‰¹æ€§æ¯”è¾ƒå¤šï¼Œæ­¤ç¯‡æ–‡ç« åªæ€»ç»“ä¸‹Java 9 ç‰ˆæœ¬çš„ä¸€äº›é‡è¦çš„æ–°ç‰¹æ€§ã€‚å¹¶ä¸å®Œå…¨ã€‚<br> Java 9 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://docs.oracle.com/javase/9/whatsnew/toc.htm#JSNEW-GUID-C23AFD78-C777-460B-8ACE-58BE5EA681F6" rel="nofollow">Java å¹³å°ï¼Œæ ‡å‡†ç‰ˆ Oracle JDK 9 ä¸­çš„æ–°å¢åŠŸèƒ½</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="_1083"></a>æ¨¡å—åŒ–</h3> 
<p>Java 9 ä¸­çš„æ¨¡å—åŒ–æ˜¯å¯¹ Java çš„ä¸€æ¬¡é‡å¤§æ”¹è¿›ã€‚ä½†æ˜¯æ¨¡å—åŒ–å¹¶ä¸æ˜¯æœ€è¿‘æ‰æå‡ºæ¥çš„ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ maven æ„å»ºå·¥å…·ï¼Œå°±æ˜¯å…¸å‹çš„æ¨¡å—åŒ–æ„å»ºå·¥å…·ã€‚æ¨¡å—åŒ–ä¸ä»…è®©æ¨¡å—å‘½åæ¸…æ™°ï¼Œå†™å‡ºé«˜å†…èšä½è€¦åˆçš„ä»£ç ï¼Œæ›´å¯ä»¥æ–¹ä¾¿å¤„ç†æ¨¡å—ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚<br> module æ˜¯æ–°å¢çš„Javaä»£ç è®¿é—®æƒé™çº§åˆ«ï¼Œæ¯ä¸ªmoduleå¯ä»¥åŒ…å«å¤šä¸ªpackageã€‚<br> é€šè¿‡<strong>module-info.java</strong>æ–‡ä»¶æ¥å£°æ˜è¯¥æ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶å¤¹ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œ**exports **å…³é”®å­—å¯ä»¥ç”¨æ¥æ§åˆ¶æ¨¡å—å†…å“ªäº›åŒ…å¯¹å¤–æš´éœ²ã€‚</p> 
<pre><code class="prism language-java"> <span class="token keyword">module</span> <span class="token namespace">store<span class="token punctuation">.</span>api</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">exports</span> <span class="token namespace">com<span class="token punctuation">.</span>dingtalk<span class="token punctuation">.</span>store<span class="token punctuation">.</span>api</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>ä½¿ç”¨moduleåï¼Œå³ä½¿åŒ…ä¸­çš„ç±»æ˜¯publicçš„ï¼Œå¦‚æœæœªé€šè¿‡exportsæ˜¾å¼å¯¼å‡ºå…¶ç¨‹åºåŒ…ï¼Œåˆ™å¤–éƒ¨æ¨¡å—æ˜¯ä¸å¯è°ƒç”¨çš„ã€‚<br> å¦‚æœä¸€ä¸ªæ¨¡å—æƒ³è¦ä½¿ç”¨è¢«å¦ä¸€ä¸ªæ¨¡å—å¯¼å‡ºçš„packageåŒ…ä¸­çš„ç±»ï¼Œå¯ä»¥ç”¨<strong>requires</strong>å…³é”®å­—åœ¨å…¶module-info.javaæ–‡ä»¶ä¸­æ¥å¯¼å…¥ï¼ˆè¯»å–ï¼‰ç›®æ ‡æ¨¡å—çš„packageåŒ…ã€‚</p> 
<pre><code class="prism language-java"> <span class="token keyword">module</span> <span class="token namespace">store<span class="token punctuation">.</span>service</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">requires</span> <span class="token namespace">com<span class="token punctuation">.</span>dingtalk<span class="token punctuation">.</span>store<span class="token punctuation">.</span>api</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>Java9 module ä¸Maven module å¾ˆåƒï¼Œä½†åŠŸèƒ½å®Œå…¨ä¸ä¸€æ ·ï¼Œåè€…æ˜¯ä½œä¸ºä¾èµ–æ„å»ºæ¥æ–¹ä¾¿ç®¡ç†åº”ç”¨ä»£ç ï¼Œè€ŒJava Moduleæ˜¯åœ¨äºå®‰å…¨æ€§ã€è®¿é—®æ€§æ§åˆ¶ï¼Œé€šè¿‡exports/requires æ§åˆ¶æ¨¡å—å†…éœ€è¦æš´éœ²å’Œä¾èµ–çš„å…·ä½“åŒ…ã€‚</p> 
<h3><a id="_1100"></a>æ¥å£æ”¯æŒå®šä¹‰ç§æœ‰æ–¹æ³•</h3> 
<p>åœ¨ Java 8 ä¸­å¢åŠ äº†é»˜è®¤æ–¹æ³•ï¼Œåœ¨ Java 9 ä¸­åˆå¢åŠ äº†ç§æœ‰æ–¹æ³•ï¼Œè¿™æ—¶å¼€å§‹æ¥å£ä¸­ä¸ä»…ä»…æœ‰äº†å®šä¹‰ï¼Œè¿˜å…·æœ‰äº†è¡Œä¸ºã€‚æˆ‘æƒ³è¿™æ˜¯å‡ºäºä»£ç æ„é€ ä¸Šçš„è€ƒè™‘ï¼Œå¦‚æœæ²¡æœ‰ç§æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆå½“å¤šä¸ªé»˜è®¤æ–¹æ³•çš„è¡Œä¸ºä¸€æ ·æ—¶ï¼Œå°±è¦å†™å¤šä¸ªç›¸åŒçš„ä»£ç ã€‚è€Œæœ‰äº†ç§æœ‰æ–¹æ³•ï¼Œäº‹æƒ…å°±å˜å¾—ä¸ä¸€æ ·äº†ã€‚<br> ä¸¾ä¸ªä¾‹å­ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Jdk9Interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ChinaPeople</span> chinaPeople <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChinaPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chinaPeople<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chinaPeople<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chinaPeople<span class="token punctuation">.</span><span class="token function">doXxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ChinaPeople</span> <span class="token keyword">implements</span> <span class="token class-name">People</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"èººç€ç¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">People</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">doXxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å–æ°´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¾‹å­ä¸­çš„æ¥å£ people ä¸­çš„ eat() å’Œ doXxx() é»˜è®¤è¡Œä¸ºä¸€è‡´ï¼Œä½¿ç”¨ç§æœ‰æ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„æŠ½å–ä¸€ä¸ªæ–¹æ³•å‡ºæ¥ã€‚<br> è¾“å‡ºç»“æœï¼š</p> 
<pre><code class="prism language-java">èººç€ç¡
å–æ°´
å–æ°´
</code></pre> 
<h3><a id="_1144"></a>é›†åˆå·¥å‚æ–¹æ³•</h3> 
<p>åœ¨ Java 9 ä¸­ä¸ºé›†åˆçš„åˆ›å»ºå¢åŠ äº†é™æ€å·¥å‚åˆ›å»ºæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ of æ–¹æ³•ï¼Œé€šè¿‡é™æ€å·¥å‚ of æ–¹æ³•åˆ›å»ºçš„é›†åˆæ˜¯<strong>åªè¯»é›†åˆ</strong>ï¼Œé‡Œé¢çš„å¯¹è±¡<strong>ä¸å¯æ”¹å˜</strong>ã€‚å¹¶ä¸”<strong>ä¸èƒ½å­˜åœ¨ null å€¼</strong>ï¼Œå¯¹äº set å’Œ map é›†åˆï¼Œä¹Ÿ<strong>ä¸èƒ½å­˜åœ¨ key å€¼é‡å¤</strong>ã€‚è¿™æ ·ä¸ä»…<strong>çº¿ç¨‹å®‰å…¨</strong>ï¼Œè€Œä¸”<strong>æ¶ˆè€—çš„å†…å­˜ä¹Ÿæ›´å°</strong>ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// å·¥å‚æ–¹æ³•åˆ›å»ºé›†åˆ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringSet <span class="token operator">=</span> <span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stringIntegerMap <span class="token operator">=</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"key3"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stringIntegerMap2 <span class="token operator">=</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">ofEntries</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é›†åˆè¾“å‡º</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringIntegerMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringIntegerMap2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">]</span>
<span class="token punctuation">[</span>d<span class="token punctuation">,</span> a<span class="token punctuation">,</span> c<span class="token punctuation">,</span> b<span class="token punctuation">]</span>
<span class="token punctuation">{<!-- --></span>key2<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> key1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> key3<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span>key2<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> key1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">}</span>
</code></pre> 
<p>è¿™ç§åªè¯»é›†åˆåœ¨ Java 9 ä¹‹å‰åˆ›å»ºæ˜¯é€šè¿‡ Collections.unmodifiableList ä¿®æ”¹é›†åˆæ“ä½œæƒé™å®ç°çš„ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arrayList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"CSDN"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"é˜¿æè¯´è¯´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®ä¸ºåªè¯»é›†åˆ</span>
arrayList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>arrayList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>é™æ€å·¥å‚ of æ–¹æ³•åˆ›å»ºçš„é›†åˆè¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œå°±æ˜¯<strong>å·¥å‚å†…éƒ¨ä¼šè‡ªç”±å¤ç”¨å·²æœ‰å®ä¾‹æˆ–è€…åˆ›å»ºæ–°çš„å®ä¾‹</strong>ï¼Œæ‰€ä»¥åº”è¯¥é¿å…å¯¹ of åˆ›å»ºçš„é›†åˆè¿›è¡Œåˆ¤ç­‰æˆ–è€… haseCode æ¯”è¾ƒç­‰æ“ä½œã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// å·¥å‚å¯ä»¥è‡ªç”±åˆ›å»ºæ–°çš„å®ä¾‹æˆ–è€…å¤ç”¨ç°æœ‰å®ä¾‹ï¼Œæ‰€ä»¥ ä½¿ç”¨ of åˆ›å»ºçš„é›†åˆï¼Œé¿å… == æˆ–è€… hashCode åˆ¤æ–­æ“ä½œ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList2 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringList<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringList2<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// 3910595</span>
<span class="token comment">// 3910595</span>
</code></pre> 
<h3><a id="StreamAPI_1186"></a>å¢å¼ºæµï¼ˆStreamï¼‰API</h3> 
<p>Stream æµæ“ä½œè‡ªä» Java 8 å¼•å…¥ä»¥æ¥ï¼Œä¸€ç›´å¹¿å—å¥½è¯„ã€‚<br> å½“ç„¶ï¼Œå­¦ä¹  Stream ä¹‹å‰è¦å…ˆå­¦ä¹  Lambda ï¼Œä¹Ÿæ˜¯Java 8çš„å†…å®¹ã€‚<br> åœ¨ Java 9 ä¸­ï¼Œåˆå¯¹ Stream è¿›è¡Œäº†å¢å¼ºï¼Œä¸»è¦å¢åŠ äº† 4 ä¸ªæ–°çš„æ“ä½œæ–¹æ³•ï¼šdropWhileï¼ŒtakeWhileï¼ŒofNullableï¼Œiterateã€‚<br> 1ã€takeWhile: ä»å¤´å¼€å§‹<strong>ç­›é€‰</strong>ï¼Œé‡åˆ°ä¸æ»¡è¶³çš„å°±ç»“æŸ</p> 
<pre><code class="prism language-java"><span class="token comment">// takeWhile ,ä»å¤´å¼€å§‹ç­›é€‰ï¼Œé‡åˆ°ä¸æ»¡è¶³çš„å°±ç»“æŸäº†</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> listResult <span class="token operator">=</span> list1<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">takeWhile</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>listResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// takeWhile ,ä»å¤´å¼€å§‹ç­›é€‰ï¼Œé‡åˆ°ä¸æ»¡è¶³çš„å°±ç»“æŸ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> listResult2 <span class="token operator">=</span> list2<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">takeWhile</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>listResult2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
è¾“å‡ºç»“æœï¼š
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
</code></pre> 
<p>2ã€dropWhile: ä»å¤´å¼€å§‹<strong>åˆ é™¤</strong>ï¼Œé‡åˆ°ä¸æ»¡è¶³çš„å°±ç»“æŸ</p> 
<pre><code class="prism language-java"><span class="token comment">// dropWhile ,ä»å¤´å¼€å§‹åˆ é™¤ï¼Œé‡åˆ°ä¸æ»¡è¶³çš„å°±ç»“æŸ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> listResult <span class="token operator">=</span> list1<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dropWhile</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>listResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// dropWhile ,ä»å¤´å¼€å§‹åˆ é™¤ï¼Œé‡åˆ°ä¸æ»¡è¶³çš„å°±ç»“æŸ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> listResult2 <span class="token operator">=</span> list2<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dropWhile</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>listResult2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
è¾“å‡ºç»“æœï¼š
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
</code></pre> 
<p>3ã€ofNullable: åˆ›å»ºæ”¯æŒå…¨ null çš„ Stream</p> 
<pre><code class="prism language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç©ºæŒ‡é’ˆå¼‚å¸¸</span>
<span class="token comment">// stream = Stream.of(null);</span>
stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
è¾“å‡ºç»“æœï¼š
<span class="token number">12</span>null
</code></pre> 
<p>4ã€iterate: å¯ä»¥é‡è½½è¿­ä»£å™¨ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> x <span class="token operator">-&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">,</span> x <span class="token operator">-&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
è¾“å‡ºç»“æœï¼š
<span class="token number">0123456789</span>
</code></pre> 
<p>åœ¨ Stream å¢å¼ºä¹‹å¤–ï¼Œè¿˜å¢å¼ºäº† Optional ï¼ŒOptional å¢åŠ äº†å¯ä»¥è½¬æ¢æˆ Stream çš„æ–¹æ³•ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="HTTP__2_Client_1252"></a>HTTP / 2 Client</h3> 
<p>Java 9 å†…ç½®äº†æ–°çš„ HTTP/2 å®¢æˆ·ç«¯ï¼Œè¯·æ±‚æ›´åŠ æ–¹ä¾¿ã€‚<br> éšä¾¿è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ç½‘é¡µã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">HttpClient</span> client <span class="token operator">=</span> <span class="token class-name">HttpClient</span><span class="token punctuation">.</span><span class="token function">newHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">URI</span> uri <span class="token operator">=</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"http://www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">HttpRequest</span> req <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">,</span> <span class="token string">"Java"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">HttpResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token class-name">HttpResponse<span class="token punctuation">.</span>BodyHandler</span><span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> body <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºå¾—åˆ°çš„ç»“æœï¼Œè¿™é‡Œæ˜¯è¿™ä¸ªç½‘ç«™çš„æŠ¥é”™ä¿¡æ¯ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">There</span> is no method xxxAction in <span class="token class-name">ApiController</span>
</code></pre> 
<h3><a id="Java_REPL__JShell_1267"></a>Java REPL - JShell</h3> 
<p>äº¤äº’å¼çš„ç¼–ç¨‹ç¯å¢ƒåœ¨å…¶ä»–è¯­è¨€å¦‚ Python ä¸Šæ—©å°±æœ‰äº†ï¼Œè€Œ Java ä¸Šçš„äº¤äº’å¼è¯­è¨€åªåˆ° Java 9 æ‰å‡ºç°ã€‚äº¤äº’å¼çš„ç¼–ç¨‹å¯ä»¥è®©å¼€å‘è€…åœ¨è¾“å…¥ä»£ç çš„æ—¶å€™å°±è·å–åˆ°ç¨‹åºçš„è¿è¡Œç»“æœï¼Œè€Œä¸ç”¨åƒä¹‹å‰ä¸€æ ·æ–°å»ºæ–‡ä»¶ã€åˆ›å»ºç±»ã€å¯¼åŒ…ã€æµ‹è¯•ä¸€ç³»åˆ—æµç¨‹ã€‚<br> JShell ä¸­æ”¯æŒ tab è¡¥å…¨ä»£ç ä»¥åŠè‡ªåŠ¨æ·»åŠ åˆ†å·ï¼Œä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¼”ç¤º JShell çš„ä½¿ç”¨ã€‚<br> 1ã€è¿›å…¥ JShell. æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</p> 
<pre><code class="prism language-java"><span class="token class-name">C</span><span class="token operator">:</span>\<span class="token class-name">Users</span><span class="token operator">&gt;</span>jshell
<span class="token operator">|</span>  æ¬¢è¿ä½¿ç”¨ <span class="token class-name">JShell</span> <span class="token operator">--</span> ç‰ˆæœ¬ <span class="token number">9</span>
<span class="token operator">|</span>  è¦å¤§è‡´äº†è§£è¯¥ç‰ˆæœ¬<span class="token punctuation">,</span> è¯·é”®å…¥<span class="token operator">:</span> <span class="token operator">/</span>help intro
jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>help
<span class="token operator">|</span>  é”®å…¥ <span class="token class-name">Java</span> è¯­è¨€è¡¨è¾¾å¼<span class="token punctuation">,</span> è¯­å¥æˆ–å£°æ˜ã€‚
<span class="token operator">|</span>  æˆ–è€…é”®å…¥ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€<span class="token operator">:</span>
<span class="token operator">|</span>  <span class="token operator">/</span>list <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>       åˆ—å‡ºæ‚¨é”®å…¥çš„æº
<span class="token operator">|</span>  <span class="token operator">/</span>edit <span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span>
<span class="token operator">|</span>       ç¼–è¾‘æŒ‰åç§°æˆ– id å¼•ç”¨çš„æºæ¡ç›®
<span class="token operator">|</span>  <span class="token operator">/</span>drop <span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span>
<span class="token operator">|</span>       åˆ é™¤æŒ‰åç§°æˆ– id å¼•ç”¨çš„æºæ¡ç›®
<span class="token operator">|</span>  <span class="token operator">/</span>save <span class="token punctuation">[</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>history<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span> <span class="token operator">&lt;</span>æ–‡ä»¶<span class="token operator">&gt;</span>
<span class="token operator">|</span>       å°†ç‰‡æ®µæºä¿å­˜åˆ°æ–‡ä»¶ã€‚
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token keyword">open</span> <span class="token generics"><span class="token punctuation">&lt;</span>file<span class="token punctuation">&gt;</span></span>
<span class="token operator">|</span>       æ‰“å¼€æ–‡ä»¶ä½œä¸ºæºè¾“å…¥
<span class="token operator">|</span>  <span class="token operator">/</span>vars <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>       åˆ—å‡ºå·²å£°æ˜å˜é‡åŠå…¶å€¼
<span class="token operator">|</span>  <span class="token operator">/</span>methods <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>       åˆ—å‡ºå·²å£°æ˜æ–¹æ³•åŠå…¶ç­¾å
<span class="token operator">|</span>  <span class="token operator">/</span>types <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>       åˆ—å‡ºå·²å£°æ˜çš„ç±»å‹
<span class="token operator">|</span>  <span class="token operator">/</span>imports
<span class="token operator">|</span>       åˆ—å‡ºå¯¼å…¥çš„é¡¹
<span class="token operator">|</span>  <span class="token operator">/</span>exit
<span class="token operator">|</span>       é€€å‡º jshell
<span class="token operator">|</span>  <span class="token operator">/</span>env <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">module</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>add<span class="token operator">-</span>modules <span class="token operator">&lt;</span>æ¨¡å—<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>       æŸ¥çœ‹æˆ–æ›´æ”¹è¯„ä¼°ä¸Šä¸‹æ–‡
<span class="token operator">|</span>  <span class="token operator">/</span>reset <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">module</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>add<span class="token operator">-</span>modules <span class="token operator">&lt;</span>æ¨¡å—<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>       é‡å¯ jshell
<span class="token operator">|</span>  <span class="token operator">/</span>reload <span class="token punctuation">[</span><span class="token operator">-</span>restore<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>quiet<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">module</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>       é‡ç½®å’Œé‡æ”¾ç›¸å…³å†å²è®°å½• <span class="token operator">--</span> å½“å‰å†å²è®°å½•æˆ–ä¸Šä¸€ä¸ªå†å²è®°å½• <span class="token punctuation">(</span><span class="token operator">-</span>restore<span class="token punctuation">)</span>
<span class="token operator">|</span>  <span class="token operator">/</span>history
<span class="token operator">|</span>       æ‚¨é”®å…¥çš„å†…å®¹çš„å†å²è®°å½•
<span class="token operator">|</span>  <span class="token operator">/</span>help <span class="token punctuation">[</span><span class="token generics"><span class="token punctuation">&lt;</span>command<span class="token punctuation">&gt;</span></span><span class="token operator">|</span><span class="token generics"><span class="token punctuation">&lt;</span>subject<span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span>
<span class="token operator">|</span>       è·å– jshell çš„ç›¸å…³ä¿¡æ¯
<span class="token operator">|</span>  <span class="token operator">/</span>set editor<span class="token operator">|</span>start<span class="token operator">|</span>feedback<span class="token operator">|</span>mode<span class="token operator">|</span>prompt<span class="token operator">|</span>truncation<span class="token operator">|</span>format <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>       è®¾ç½® jshell é…ç½®ä¿¡æ¯
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token operator">?</span> <span class="token punctuation">[</span><span class="token generics"><span class="token punctuation">&lt;</span>command<span class="token punctuation">&gt;</span></span><span class="token operator">|</span><span class="token generics"><span class="token punctuation">&lt;</span>subject<span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span>
<span class="token operator">|</span>       è·å– jshell çš„ç›¸å…³ä¿¡æ¯
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token operator">!</span>
<span class="token operator">|</span>       é‡æ–°è¿è¡Œä¸Šä¸€ä¸ªç‰‡æ®µ
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>
<span class="token operator">|</span>       æŒ‰ id é‡æ–°è¿è¡Œç‰‡æ®µ
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token operator">-</span><span class="token generics"><span class="token punctuation">&lt;</span>n<span class="token punctuation">&gt;</span></span>
<span class="token operator">|</span>       é‡æ–°è¿è¡Œå‰é¢çš„ç¬¬ n ä¸ªç‰‡æ®µ
<span class="token operator">|</span>
<span class="token operator">|</span>  æœ‰å…³è¯¦ç»†ä¿¡æ¯<span class="token punctuation">,</span> è¯·é”®å…¥ <span class="token char">'/help'</span><span class="token punctuation">,</span> åè·Ÿ
<span class="token operator">|</span>  å‘½ä»¤æˆ–ä¸»é¢˜çš„åç§°ã€‚
<span class="token operator">|</span>  ä¾‹å¦‚ '<span class="token operator">/</span>help <span class="token operator">/</span>list<span class="token char">' æˆ– '</span><span class="token operator">/</span>help intro'ã€‚ä¸»é¢˜<span class="token operator">:</span>
<span class="token operator">|</span>
<span class="token operator">|</span>  intro
<span class="token operator">|</span>       jshell å·¥å…·çš„ç®€ä»‹
<span class="token operator">|</span>  shortcuts
<span class="token operator">|</span>       ç‰‡æ®µå’Œå‘½ä»¤è¾“å…¥æç¤º<span class="token punctuation">,</span> ä¿¡æ¯è®¿é—®ä»¥åŠ
<span class="token operator">|</span>       è‡ªåŠ¨ä»£ç ç”Ÿæˆçš„æŒ‰é”®è¯´æ˜
<span class="token operator">|</span>  context
<span class="token operator">|</span>       <span class="token operator">/</span>env <span class="token operator">/</span>reload å’Œ <span class="token operator">/</span>reset çš„è¯„ä¼°ä¸Šä¸‹æ–‡é€‰é¡¹

jshell<span class="token operator">&gt;</span>
</code></pre> 
<p>2ã€å®šä¹‰ä¸€ä¸ªå˜é‡ï¼ša = 10ï¼Œéå†ä» 0 åˆ° a çš„æ•°å­—</p> 
<pre><code class="prism language-java">jshell<span class="token operator">&gt;</span> <span class="token keyword">int</span> a <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
a <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token number">10</span>
jshell<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>a<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token number">0</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">5</span>
<span class="token number">6</span>
<span class="token number">7</span>
<span class="token number">8</span>
<span class="token number">9</span>
</code></pre> 
<p>3ã€å®šä¹‰ä¸€ä¸ªé›†åˆï¼Œèµ‹å€¼ 1,2,3,4,5ã€‚ç„¶åè¾“å‡ºé›†åˆ</p> 
<pre><code class="prism language-java">jshell<span class="token operator">&gt;</span> <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
jshell<span class="token operator">&gt;</span> list
list <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
</code></pre> 
<p>4ã€æŸ¥çœ‹è¾“å…¥è¿‡çš„ä»£ç </p> 
<pre><code class="prism language-java">jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>list
   <span class="token number">1</span> <span class="token operator">:</span> <span class="token keyword">int</span> a <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
   <span class="token number">2</span> <span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>a<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
   <span class="token number">3</span> <span class="token operator">:</span> <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token number">4</span> <span class="token operator">:</span> list
</code></pre> 
<p>5ã€åˆ—å‡ºå¯¼å…¥çš„åŒ…</p> 
<pre><code class="prism language-java">jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>imports
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>prefs<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span>
</code></pre> 
<p>6ã€å°†ä»£ç ä¿å­˜åˆ°æ–‡ä»¶å¹¶é€€å‡º</p> 
<pre><code class="prism language-java">jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>save d<span class="token operator">:</span><span class="token operator">/</span><span class="token class-name">JShell</span><span class="token punctuation">.</span>java
jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>exit
  å†è§
</code></pre> 
<p>åœ¨ D ç›˜çœ‹åˆ°çš„ä¿å­˜çš„ä»£ç ç‰‡æ®µã€‚</p> 
<h3><a id="JVM__1385"></a>JVM è°ƒä¼˜çš„æ–°ç‰¹æ€§</h3> 
<p>ç¬¬ä¸€ä¸ªï¼šåˆ é™¤ JDK 8 ä¸­å·²å¼ƒç”¨çš„åƒåœ¾æ”¶é›†å™¨ (GC) ç»„åˆ</p> 
<ul><li> <p>è¿™æ„å‘³ç€ä»¥ä¸‹ GC ç»„åˆä¸å†å­˜åœ¨ï¼š</p> 
  <ul><li>DefNew + CMS</li><li>ParNew + SerialOld</li><li>å¢é‡CMS</li></ul> </li><li> <p>å¹¶å‘æ ‡è®°æ‰«æ (CMS) çš„â€œå‰å°â€æ¨¡å¼ä¹Ÿå·²è¢«åˆ é™¤ã€‚ä»¥ä¸‹å‘½ä»¤è¡Œæ ‡å¿—å·²è¢«åˆ é™¤ï¼š</p> 
  <ul><li>-Xincgc</li><li>-XX:+CMSIncrementalMode</li><li>-XX:+UseCMSCompactAtFullCollection</li><li>-XX:+CMSFullGCsBeforeCompaction</li><li>-XX:+UseCMSCollectionPassing</li></ul> </li><li> <p>å‘½ä»¤è¡Œæ ‡å¿—-XX:+UseParNewGCä¸å†æœ‰æ•ˆã€‚ParNew åªèƒ½ä¸ CMS ä¸€èµ·ä½¿ç”¨ï¼Œè€Œ CMS éœ€è¦ ParNewã€‚å› æ­¤ï¼Œè¯¥-XX:+UseParNewGCæ ‡å¿—å·²è¢«å¼ƒç”¨ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚</p> </li></ul> 
<p>ç¬¬äºŒä¸ªï¼šä½¿ G1 æˆä¸ºé»˜è®¤åƒåœ¾æ”¶é›†å™¨</p> 
<ul><li>ä½¿åƒåœ¾ä¼˜å…ˆ (G1) æˆä¸º 32 ä½å’Œ 64 ä½æœåŠ¡å™¨é…ç½®ä¸Šçš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ (GC)ã€‚å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨ä½æš‚åœæ”¶é›†å™¨ï¼ˆä¾‹å¦‚ G1ï¼‰æ¯”ä»¥å‰é»˜è®¤çš„é¢å‘ååé‡çš„æ”¶é›†å™¨ï¼ˆä¾‹å¦‚ Parallel GCï¼‰æä¾›æ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚</li><li>å¢å¼ºåƒåœ¾ä¼˜å…ˆ (G1) åƒåœ¾æ”¶é›†å™¨ä»¥è‡ªåŠ¨ç¡®å®šå‡ ä¸ªé‡è¦çš„å†…å­˜å›æ”¶è®¾ç½®ã€‚ä»¥å‰å¿…é¡»æ‰‹åŠ¨è®¾ç½®è¿™äº›è®¾ç½®ä»¥è·å¾—æœ€ä½³ç»“æœã€‚æ­¤å¤–ï¼Œä¿®å¤äº† G1 åƒåœ¾æ”¶é›†å™¨çš„å¯ç”¨æ€§ã€ç¡®å®šæ€§å’Œæ€§èƒ½é—®é¢˜ã€‚</li><li>è¯·å‚é˜…Java å¹³å°ä¸­çš„ Garbage-First Garbage Collector ï¼Œæ ‡å‡†ç‰ˆ HotSpot è™šæ‹Ÿæœºåƒåœ¾æ”¶é›†è°ƒä¼˜æŒ‡å—</li></ul> 
<p>ç¬¬ä¸‰ä¸ªï¼šå¼ƒç”¨å¹¶å‘æ ‡è®°æ‰«æ (CMS) åƒåœ¾æ”¶é›†å™¨</p> 
<ul><li>å¼ƒç”¨å¹¶å‘æ ‡è®°æ‰«æ (CMS) åƒåœ¾æ”¶é›†å™¨ã€‚-XX:+UseConcMarkSweepGCä½¿ç”¨è¯¥é€‰é¡¹åœ¨å‘½ä»¤è¡Œä¸Šè¯·æ±‚æ—¶ä¼šå‘å‡ºè­¦å‘Šæ¶ˆæ¯ã€‚Garbage-First (G1) åƒåœ¾æ”¶é›†å™¨æ—¨åœ¨æ›¿ä»£ CMS çš„å¤§å¤šæ•°ç”¨é€”ã€‚</li></ul> 
<h3><a id="_1410"></a>å…¶ä»–æ›´æ–°</h3> 
<p>Java 9 ä¸­å¢åŠ æˆ–è€…ä¼˜åŒ–çš„åŠŸèƒ½è¿œä¸æ­¢è¿™äº›ï¼Œä¸Šé¢åªæ˜¯åˆ—ä¸¾äº†å¸¸ç”¨çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œæ›´å¤šçš„æ–°ç‰¹æ€§å¦‚ï¼š</p> 
<ul><li>ä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿ _ ä½œä¸ºå˜é‡åï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå…³é”®å­—ã€‚</li><li>Javadoc æ”¯æŒ HTML5 å¹¶ä¸”æ”¯æŒæœç´¢åŠŸèƒ½ã€‚</li><li>Nashorn å¼•æ“å‡çº§ï¼Œæ›´å¥½çš„æ”¯æŒ Javascript.</li><li>String å­˜å‚¨ç»“æ„å˜æ›´ä» char -&gt; byte</li><li>å¤šJdkç‰ˆæœ¬å…±å­˜jarï¼šåœ¨åŒä¸€ä¸ªJaråŒ…å¯ä»¥åŒ…å«å¤šä¸ªJavaç‰ˆæœ¬çš„classæ–‡ä»¶ï¼Œåœ¨ä¸åŒJdkç¯å¢ƒä¸‹ä½¿ç”¨å¯¹åº”è¯¥ jdk ç‰ˆæœ¬çš„ jarã€‚ï¼ˆè¿™å¯¹ç®—æ˜¯ç”¨æˆ·å¾ˆå‹å¥½çš„åŠŸèƒ½ï¼‰</li><li>â€¦</li></ul> 
<p>æ–°ç‰¹æ€§å¾ˆå¤šï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±äº†è§£ä¸‹ã€‚<br> Java 9 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š[Java å¹³å°ï¼Œæ ‡å‡†ç‰ˆ Oracle JDK 9 ä¸­çš„æ–°å¢åŠŸèƒ½](Java å¹³å°ï¼Œæ ‡å‡†ç‰ˆ Oracle JDK 9 ä¸­çš„æ–°å¢åŠŸèƒ½)</p> 
<h2><a id="h1_id10Java_10__1423"></a></h2> 
<h2 id="10">Java 10 æ–°ç‰¹æ€§</h2> 
<p>è‡ªä» Java 9 å¼€å§‹ï¼ŒOracle è°ƒæ•´äº† Java ç‰ˆæœ¬çš„å‘å¸ƒç­–ç•¥ï¼Œä¸å†æ˜¯ä¹‹å‰çš„ N å¹´ä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ 6 ä¸ªæœˆä¸€ä¸ªå°ç‰ˆæœ¬ï¼Œä¸‰å¹´ä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼Œè¿™æ ·å¯ä»¥è®© Java çš„æœ€æ–°æ”¹å˜è¿…é€Ÿä¸Šçº¿ï¼Œè€Œå°ç‰ˆæœ¬çš„ç»´æŠ¤å‘¨æœŸç¼©çŸ­åˆ°ä¸‹ä¸ªç‰ˆæœ¬å‘å¸ƒä¹‹å‰ï¼Œå¤§ç‰ˆæœ¬çš„ç»´æŠ¤å‘¨æœŸåˆ™æ˜¯ 3 å¹´ä¹‹ä¹…ã€‚è€Œ 10 å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå°ç‰ˆæœ¬ï¼Œå› ä¸º Java çš„åç»­ç‰ˆæœ¬åŸºæœ¬éƒ½ä¼šåŒ…å«ä¹‹å‰æ–°ç‰¹æ€§ï¼Œæ‰€ä»¥è¿˜æ˜¯æŠŠ Java 10 å¸¦æ¥çš„æ”¹å˜å•ç‹¬å†™ä¸€å†™ï¼ˆä¸å…¨ï¼‰ã€‚<br> Java 10 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼šJDK 10 å‘è¡Œè¯´æ˜<br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼šJavaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£<br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="_1428"></a>åŸºäºæ—¶é—´çš„ç‰ˆæœ¬å·</h3> 
<p>å°±åƒä¸Šé¢è¯´çš„ï¼ŒJava è°ƒæ•´äº†å‘å¸ƒç­–ç•¥ï¼Œä¸ºäº†é€‚åº”è¿™ç§å‘å¸ƒèŠ‚å¥ï¼Œéšç€æ”¹å˜çš„è¿˜æœ‰ Java ç‰ˆæœ¬å·çš„è®°å½•æ–¹å¼ã€‚<br> ç‰ˆæœ¬å·çš„æ–°æ¨¡å¼æ˜¯ï¼š<strong><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          F 
         
        
          E 
         
        
          A 
         
        
          T 
         
        
          U 
         
        
          R 
         
        
          E 
         
        
          . 
         
        
       
         FEATURE. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0576em;">FE</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mord mathnormal" style="margin-right: 0.109em;">U</span><span class="mord mathnormal" style="margin-right: 0.0576em;">RE</span><span class="mord">.</span></span></span></span></span>INTERIM.<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          U 
         
        
          P 
         
        
          D 
         
        
          A 
         
        
          T 
         
        
          E 
         
        
          . 
         
        
       
         UPDATE. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">U</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.0576em;">TE</span><span class="mord">.</span></span></span></span></span>PATCH</strong></p> 
<ul><li>$FEATURE ï¼šåŸºäºå‘å¸ƒç‰ˆæœ¬ï¼Œå¦‚ Java 10 çš„ 10 ã€‚</li><li>$INTERIM ï¼šé—®é¢˜ä¿®å¤å’ŒåŠŸèƒ½å¢å¼ºæ—¶ + 1ï¼Œé»˜è®¤æ˜¯ 0 ã€‚</li><li>$UPDATE ï¼šåœ¨è¿›è¡Œå…¼å®¹æ›´æ–°ï¼Œä¿®å¤æ–°åŠŸèƒ½å®‰å…¨é—®é¢˜æ—¶ +1ã€‚</li><li>$PATCH ï¼šç‰¹æ®Šé—®é¢˜ä¿®å¤æ—¶ +1ã€‚</li></ul> 
<p>æŸ¥çœ‹è‡ªå·±çš„ Java 10 ç‰ˆæœ¬ã€‚</p> 
<pre><code class="prism language-java">$ java <span class="token operator">-</span>version
java version <span class="token string">"10.0.1"</span> <span class="token number">2018</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">17</span>
<span class="token class-name">Java</span><span class="token punctuation">(</span>TM<span class="token punctuation">)</span> SE <span class="token class-name">Runtime</span> <span class="token class-name">Environment</span> <span class="token number">18.3</span> <span class="token punctuation">(</span>build <span class="token number">10.0</span><span class="token number">.1</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token class-name">Java</span> <span class="token class-name">HotSpot</span><span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span><span class="token operator">-</span><span class="token class-name">Bit</span> <span class="token class-name">Server</span> VM <span class="token number">18.3</span> <span class="token punctuation">(</span>build <span class="token number">10.0</span><span class="token number">.1</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">,</span> mixed mode<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_1444"></a>å±€éƒ¨ç±»å‹æ¨æ–­</h3> 
<p>JEP 286 ææ¡ˆè®© Java å¢åŠ äº†å±€éƒ¨ç±»å‹æ¨æ–­ï¼ˆLocal-Variable Type Inferenceï¼‰åŠŸèƒ½ï¼Œè¿™è®© Java å¯ä»¥åƒ Js é‡Œçš„ var æˆ–è€…å…¶ä»–è¯­è¨€çš„ auto ä¸€æ ·å¯ä»¥è‡ªåŠ¨æ¨æ–­æ•°æ®ç±»å‹ã€‚è¿™å…¶å®åªæ˜¯ä¸€ä¸ªæ–°çš„è¯­æ³•ç³–ï¼Œåº•å±‚å¹¶æ²¡æœ‰å˜åŒ–ï¼Œåœ¨ç¼–è¯‘æ—¶å°±å·²ç»æŠŠ var è½¬åŒ–æˆå…·ä½“çš„æ•°æ®ç±»å‹äº†ï¼Œä½†æ˜¯è¿™æ ·å¯ä»¥å‡å°‘ä»£ç çš„ç¼–å†™ã€‚<br> ä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ var è¯­æ³•ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">var</span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"CSDN"</span><span class="token punctuation">,</span><span class="token string">"é˜¿æè¯´è¯´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">"hello java 10"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å¦‚æœä½ åç¼–è¯‘ç¼–è¯‘åçš„è¿™æ®µä»£ç ï¼Œä½ ä¼šå‘ç°è¿˜æ˜¯ç†Ÿæ‚‰çš„ä»£ç ç‰‡æ®µã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"å¾®ä¿¡"</span><span class="token punctuation">,</span> <span class="token string">"wlw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> string <span class="token operator">=</span> <span class="token string">"hello java 10"</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>var çœ‹ä¼¼å¥½ç”¨ï¼Œå…¶å®ä¹Ÿæœ‰å¾ˆå¤šé™åˆ¶ï¼Œå®˜æ–¹ä»‹ç»äº† var åªèƒ½ç”¨äºä¸‹é¢çš„å‡ ç§æƒ…å†µã€‚</p> 
<ol><li>ä»…é™å¸¦æœ‰åˆå§‹åŒ–çš„ç¨‹åºçš„å±€éƒ¨å˜é‡ã€‚</li><li>for å¾ªç¯æˆ–è€…å¢å¼ºfor å¾ªç¯ä¸­ã€‚</li><li>for å¾ªç¯ä¸­çš„å£°æ˜ã€‚</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// æƒ…å†µ1ï¼Œæ²¡æœ‰åˆå§‹åŒ–ä¼šæŠ¥é”™</span>
    <span class="token comment">// var list;</span>
    <span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token comment">// æƒ…å†µ2</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> integer <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token comment">// æƒ…å†µ3</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å°½ç®¡å¯¹ var çš„ä½¿ç”¨åœºæ™¯å¢åŠ äº†å¾ˆå¤šé™åˆ¶ï¼Œä½†åœ¨å®é™…ä½¿ç”¨æ—¶ä½ è¿˜æ˜¯è¦æ³¨æ„ï¼Œå°±åƒä¸‹é¢çš„ä»£ç ï¼Œä½ å¯èƒ½ä¸€çœ¼å¹¶ä¸èƒ½çœ‹å‡º result çš„æ•°æ®ç±»å‹ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">var</span> query <span class="token operator">=</span> <span class="token string">"xxx"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> dbUtil<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_Java__JIT__1489"></a>åŸºäº Java çš„ JIT ç¼–è¯‘å™¨ï¼ˆå®éªŒæ€§ï¼‰</h3> 
<p>è¿™ä¸ªåŠŸèƒ½è®©åŸºäº Java å¼€å‘çš„ JIT ç¼–è¯‘å™¨ **Graal **ç»“åˆ Java 10 ç”¨åœ¨ Linux /x64 å¹³å°ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ JIT ç¼–è¯‘å™¨ï¼Œæœ‰äººè¯´è¿™ä¹Ÿæ˜¯ Java 10 ä¸­æœ€å…·æœ‰æœªæ¥æ„Ÿçš„å¼•å…¥ã€‚Graal å…¶å®åœ¨ Java 9 ä¸­å°±å·²ç»å¼•å…¥äº†ï¼Œå®ƒå¸¦æ¥äº† Java ä¸­çš„ AOT ï¼ˆAhead Of Timeï¼‰ç¼–è¯‘ï¼Œè¿˜æ”¯æŒå¤šç§è¯­è¨€ï¼Œå¦‚ Jsã€Pythonã€Rubyã€Rã€ä»¥åŠå…¶ä»–åŸºäº JVM ï¼ˆå¦‚ Javaã€Kotlinï¼‰çš„å’ŒåŸºäº LLVM ï¼ˆå¦‚ Cã€C++ï¼‰çš„è¯­è¨€ã€‚<br> æƒ³åˆ‡æ¢åˆ° Graal å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ jvm å‚æ•°ã€‚</p> 
<pre><code class="prism language-java"><span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">UnlockExperimentalVMOptions</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">UseJVMCICompiler</span>
</code></pre> 
<p>è¿™é‡Œé¢æœ‰ä¸€ç‚¹æˆ‘è§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œçœ‹è¿™ä¸ªå›¾ã€‚<br> <img src="https://images2.imgbox.com/ea/bf/8Qtpfxhr_o.png" alt="image.png"><br> è¿™å°±å¾ˆæœ‰æ„æ€äº†ï¼ŒGraal æ˜¯ Java è¯­è¨€ç¼–å†™çš„ï¼Œç”¨ Java ç¼–å†™çš„ç¼–è¯‘å™¨ï¼Œç„¶åç”¨æ¥å°† Java å­—èŠ‚ç ç¼–è¯‘æœºå™¨ä»£ç ã€‚<br> Graal å®˜ç½‘ï¼š<a href="https://www.graalvm.org/" rel="nofollow">https://www.graalvm.org/(opens new window)</a></p> 
<h3><a id="_1499"></a>ç±»æ•°æ®å…±äº«</h3> 
<p>JVM å¯åŠ¨æ—¶æœ‰ä¸€æ­¥æ˜¯éœ€è¦åœ¨å†…å­˜ä¸­åŠ è½½ç±»ï¼Œè€Œå¦‚æœæœ‰å¤šä¸ª jarï¼ŒåŠ è½½ç¬¬ä¸€ä¸ª jar çš„é€Ÿåº¦æ˜¯æœ€æ…¢çš„ã€‚è¿™å°±å»¶é•¿äº†ç¨‹åºçš„å¯åŠ¨æ—¶é—´ï¼Œä¸ºäº†å‡å°‘è¿™ä¸ªæ—¶é—´ï¼ŒJava 10 å¼•å…¥äº†åº”ç”¨ç¨‹åºç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰æœºåˆ¶ï¼Œå®ƒå¯ä»¥æŠŠä½ æƒ³å…±äº«çš„ç±»å…±äº«åœ¨ç¨‹åºä¹‹é—´ï¼Œä½¿ä¸åŒçš„ Java è¿›ç¨‹ä¹‹é—´å…±äº«è¿™ä¸ªç±»æ¥å‡å°‘è¿™ä¸ªç±»å ç”¨çš„ç©ºé—´ä»¥åŠåŠ è½½é€Ÿåº¦ã€‚</p> 
<h3><a id="G1GC_1501"></a>G1å¹¶è¡Œå…¨GC</h3> 
<p>æ—©åœ¨ Java 9 æ—¶å°±å·²ç»å¼•å…¥äº† G1 åƒåœ¾æ”¶é›†å™¨ï¼ŒG1 çš„ä¼˜ç‚¹å¾ˆå¤šã€‚è€Œåœ¨ Java 10 ä¸­è¿˜æ˜¯åšäº†å°å°è°ƒæ•´ï¼Œå½“ G1 çš„å¹¶å‘æ”¶é›†çº¿ç¨‹ä¸èƒ½å¿«é€Ÿçš„å®Œæˆå…¨ GC æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°<strong>å¹¶è¡Œ</strong>æ”¶é›†ï¼Œè¿™å¯ä»¥å‡å°‘åœ¨æœ€åæƒ…å†µä¸‹çš„ GC é€Ÿåº¦ã€‚</p> 
<h3><a id="Unicode__1503"></a>Unicode è¯­è¨€æ ‡ç­¾æ‰©å±•</h3> 
<p>è¿™ä¸ªææ¡ˆè®© JDK å®ç°äº†æœ€æ–°çš„ <a href="http://www.unicode.org/reports/tr35/tr35.html#Locale_Extension_Key_and_Type_Data" rel="nofollow">LDML è§„èŒƒ (opens new window)</a>ä¸­æŒ‡å®šçš„æ›´å¤šçš„æ‰©å±•ã€‚<br> ä¸»è¦å¢åŠ äº†ä¸‹é¢å‡ ä¸ªæ‰©å±•æ–¹æ³•ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>temporal<span class="token punctuation">.</span></span>WeekFields</span><span class="token operator">::</span><span class="token function">of</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Calendar</span><span class="token operator">::</span><span class="token punctuation">{<!-- --></span>getFirstDayOfWeek<span class="token punctuation">,</span>getMinimalDaysInWeek<span class="token punctuation">}</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Currency</span><span class="token operator">::</span><span class="token function">getInstance</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Locale</span><span class="token operator">::</span><span class="token function">getDisplayName</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>spi<span class="token punctuation">.</span></span>LocaleNameProvider</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span>DateFormat</span><span class="token operator">::</span><span class="token function">get</span><span class="token operator">*</span><span class="token class-name">Instance</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span>DateFormatSymbols</span><span class="token operator">::</span><span class="token function">getInstance</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span>DecimalFormatSymbols</span><span class="token operator">::</span><span class="token function">getInstance</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span>NumberFormat</span><span class="token operator">::</span><span class="token function">get</span><span class="token operator">*</span><span class="token class-name">Instance</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DateTimeFormatter</span><span class="token operator">::</span><span class="token function">localizedBy</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DateTimeFormatterBuilder</span><span class="token operator">::</span><span class="token function">getLocalizedDateTimePattern</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DecimalStyle</span><span class="token operator">::</span><span class="token function">of</span>
</code></pre> 
<p>æµ‹è¯•ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Currency</span> chinaCurrency <span class="token operator">=</span> <span class="token class-name">Currency</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span>CHINA<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Currency</span> usCurrency <span class="token operator">=</span> <span class="token class-name">Currency</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span>US<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¬åœ°è´§å¸ï¼š"</span> <span class="token operator">+</span> chinaCurrency<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"US.è´§å¸ï¼š"</span> <span class="token operator">+</span> usCurrency<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> displayName <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> displayLanguage <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> displayCountry <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayCountry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¬åœ°åç§°ï¼š"</span> <span class="token operator">+</span> displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¬åœ°è¯­è¨€ï¼š"</span> <span class="token operator">+</span> displayLanguage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¬åœ°å›½å®¶ï¼š"</span> <span class="token operator">+</span> displayCountry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> firstDayOfWeek <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirstDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¬åœ°æ¯å‘¨ç¬¬ä¸€å¤©ï¼š"</span> <span class="token operator">+</span> firstDayOfWeek<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç»“æœï¼š</p> 
<pre><code class="prism language-java">æœ¬åœ°è´§å¸ï¼šCNY
US<span class="token punctuation">.</span>è´§å¸ï¼šUSD
æœ¬åœ°åç§°ï¼šä¸­æ–‡ <span class="token punctuation">(</span>ä¸­å›½<span class="token punctuation">)</span>
æœ¬åœ°è¯­è¨€ï¼šä¸­æ–‡
æœ¬åœ°å›½å®¶ï¼šä¸­å›½
æœ¬åœ°æ¯å‘¨ç¬¬ä¸€å¤©ï¼š<span class="token number">1</span>
</code></pre> 
<h3><a id="API_1545"></a>APIæ›´æ–°</h3> 
<p>Java 10 åˆ é™¤äº†éƒ¨åˆ† APIï¼Œä¹Ÿå¢åŠ äº†ä¸€äº›å®ç”¨æ–¹æ³•ã€‚æ¯”å¦‚å¯ä»¥é€šè¿‡ Collection.copyOf å¤åˆ¶å¾—åˆ°ä¸€ä¸ªä¸å¯æ”¹å˜é›†åˆï¼Œå³ä½¿åŸæ¥çš„é›†åˆå…ƒç´ å‘ç”Ÿäº†å˜åŒ–ä¹Ÿä¸ä¼šæœ‰å½±å“ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"wechat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"wlw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> copyList <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>copyList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// result</span>
<span class="token comment">// [wechat, wn8398]</span>
</code></pre> 
<p>ä¹Ÿä¸º Optional å¢åŠ äº†ä¸€ä¸ªæ–°çš„æ–¹æ³• orElseThrowã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥è·å–åˆ° optional ä¸­çš„ value , ä½†æ˜¯å¦‚æœ value ä¸º null ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br> å¦å¤–åœ¨ Stream æœ€åæ”¶é›†æ•°æ®çš„æ—¶å€™ï¼ŒCollectors å¯ä»¥ç›´æ¥æŒ‡å®šæ”¶é›†çš„é›†åˆä¸ºä¸å¯å˜é›†åˆï¼Œåƒä¸‹é¢è¿™æ ·ã€‚</p> 
<pre><code class="prism language-java">list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toUnmodifiableList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toUnmodifiableSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_1563"></a>å…¶ä»–æ›´æ–°</h3> 
<p>Java 10 çš„æ›´æ–°å†…å®¹ä¸æ­¢è¿™äº›ï¼Œä¸Šé¢åªæ˜¯åˆ—ä¸¾äº†å¸¸ç”¨çš„ä»¥åŠæ¯”è¾ƒæœ‰æ„æ€çš„æ–°ç‰¹æ€§ã€‚è¿˜æœ‰éƒ¨åˆ†æ›´æ–°å¦‚ï¼š<br> 1ã€JEP 312ï¼šThread-Local Handshakesï¼ŒJVM å†…éƒ¨åŠŸèƒ½ï¼Œå¯ä»¥æé«˜ JVM æ€§èƒ½ã€‚<br> 2ã€JEP 313ï¼šåˆ é™¤äº† javah å·¥å…·ï¼Œè¯´æ˜¯åˆ é™¤ï¼Œå…¶å®åŠŸèƒ½å·²ç»åŒ…å«åœ¨ Java 8 ä¸­çš„ javac é‡Œã€‚<br> 3ã€JEP 316ï¼šè®© JVM å¯ä»¥åœ¨å¤‡ç”¨çš„å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ NV-DIMMï¼‰ä¸Šåˆ†é…å †å†…å­˜ï¼Œè€Œä¸ç”¨æ›´æ”¹ç¨‹åºä»£ç ã€‚<br> 4ã€JEP 319ï¼šåœ¨ JDK ä¸­æä¾›ä¸€ç»„é»˜è®¤çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰è¯ä¹¦ã€‚</p> 
<p>Java 10 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/10-relnote-issues.html" rel="nofollow">JDK 10 å‘è¡Œè¯´æ˜</a></p> 
<h2><a id="h1_id11Java_11__1571"></a></h2> 
<h2 id="11">Java 11 æ–°ç‰¹æ€§</h2> 
<p>Java 11 æ˜¯ Java 8 ä¹‹åçš„ç¬¬ä¸€ä¸ª LTS ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¹Ÿè‡ªä» Java 11 å¼€å§‹ï¼Œ Oracle JDK ä¸å†å¯ä»¥å…è´¹çš„ç”¨äºå•†ä¸šç”¨é€”ï¼Œå½“ç„¶å¦‚æœä½ æ˜¯ä¸ªäººä½¿ç”¨ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨ Open JDK ï¼Œé‚£ä¹ˆè¿˜æ˜¯å¯ä»¥å…è´¹ä½¿ç”¨çš„ã€‚</p> 
<p>Java 11 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/11-relnote-issues.html#NewFeature" rel="nofollow">JDK 11 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="String_API_1577"></a>String APIæ”¹åŠ¨</h3> 
<p>å­—ç¬¦ä¸²ç»å¯¹æ˜¯ Java ä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªç±»äº†ï¼ŒString ç±»çš„æ–¹æ³•ä½¿ç”¨ç‡ä¹Ÿéƒ½éå¸¸çš„é«˜ï¼Œåœ¨ Java 11 ä¸­åˆä¸º String ç±»å¸¦æ¥äº†ä¸€ç³»åˆ—çš„å¥½ç”¨æ“ä½œã€‚</p> 
<ol><li>isBlank()åˆ¤ç©º</li></ol> 
<pre><code class="prism language-java"><span class="token comment">// åˆ¤ç©ºï¼Œblanké‡Œæˆ‘æ”¾å…¥äº†å…¨è§’ç©ºæ ¼ï¼ŒåŠè§’ç©ºæ ¼ï¼ŒTAB</span>
<span class="token class-name">String</span> blank <span class="token operator">=</span> <span class="token string">"ã€€ã€€  "</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>blank<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token comment">// true</span>
</code></pre> 
<ol start="2"><li>lines()åˆ†å‰²è·å–å­—ç¬¦ä¸²æµ</li></ol> 
<pre><code class="prism language-java"><span class="token comment">// lines è¿”å›ä¸€ä¸ª Stream</span>
<span class="token class-name">String</span> line <span class="token operator">=</span> <span class="token string">"a\nb\nc"</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lines <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨ lambda éå†</span>
lines<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>
<span class="token comment">// c</span>
</code></pre> 
<ol start="3"><li>repeat()å¤åˆ¶å­—ç¬¦ä¸²</li></ol> 
<pre><code class="prism language-java"><span class="token comment">// å¤åˆ¶å­—ç¬¦ä¸²</span>
<span class="token class-name">String</span> repeat <span class="token operator">=</span> <span class="token string">"CSDN/WX-é˜¿æè¯´è¯´"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> repeat3 <span class="token operator">=</span> repeat<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>repeat3<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token comment">// CSDN/WX-é˜¿æè¯´è¯´CSDN/WX-é˜¿æè¯´è¯´CSDN/WX-é˜¿æè¯´è¯´</span>
</code></pre> 
<ol start="4"><li>strip()å»é™¤å‰åç©ºç™½å­—ç¬¦</li></ol> 
<pre><code class="prism language-java"><span class="token comment">// å»é™¤å‰åç©ºç™½</span>
<span class="token class-name">String</span> strip <span class="token operator">=</span> <span class="token string">"   ã€€ https://www.baidu.com ã€€"</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=="</span> <span class="token operator">+</span> strip<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å»é™¤å‰åç©ºç™½å­—ç¬¦ï¼Œå¦‚å…¨è§’ç©ºæ ¼ï¼ŒTAB</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=="</span> <span class="token operator">+</span> strip<span class="token punctuation">.</span><span class="token function">strip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å»å‰é¢ç©ºç™½å­—ç¬¦ï¼Œå¦‚å…¨è§’ç©ºæ ¼ï¼ŒTAB</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=="</span> <span class="token operator">+</span> strip<span class="token punctuation">.</span><span class="token function">stripLeading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å»åé¢ç©ºç™½å­—ç¬¦ï¼Œå¦‚å…¨è§’ç©ºæ ¼ï¼ŒTAB</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=="</span> <span class="token operator">+</span> strip<span class="token punctuation">.</span><span class="token function">stripTrailing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token comment">// ==ã€€ https://www.baidu.com ã€€==</span>
<span class="token comment">// ==https://www.baidu.com==</span>
<span class="token comment">// ==https://www.baidu.com ã€€==</span>
<span class="token comment">// ==   ã€€ https://www.baidu.com==</span>
</code></pre> 
<h3><a id="File_API_1634"></a>File APIæ”¹åŠ¨</h3> 
<p>è¯»å†™æ–‡ä»¶å˜å¾—æ›´åŠ æ–¹ä¾¿</p> 
<pre><code class="prism language-java"><span class="token comment">// åˆ›å»ºä¸´æ—¶æ–‡ä»¶</span>
<span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempFile</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token string">".txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¯»å–æ–‡ä»¶</span>
<span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç»“æœ</span>
<span class="token comment">//C:\Users\ADMINI~1\AppData\Local\Temp\test10960104919895436673.txt</span>
<span class="token comment">//https://www.baidu.com</span>
</code></pre> 
<h3><a id="HTTP_Client_1649"></a>HTTP Client</h3> 
<p>åœ¨ Java 11 ä¸­ Http Client API å¾—åˆ°äº†æ ‡å‡†åŒ–çš„æ”¯æŒã€‚ä¸”æ”¯æŒ HTTP/1.1 å’Œ HTTP/2 ï¼Œä¹Ÿæ”¯æŒ websocketsã€‚<br> ä½ å¯ä»¥åƒè¿™æ ·å‘èµ·ä¸€ä¸ªè¯·æ±‚:</p> 
<pre><code class="prism language-java"><span class="token class-name">HttpClient</span> client <span class="token operator">=</span> <span class="token class-name">HttpClient</span><span class="token punctuation">.</span><span class="token function">newHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">HttpRequest</span> request <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span>URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"https://www.hao123.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¼‚æ­¥</span>
client<span class="token punctuation">.</span><span class="token function">sendAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">HttpResponse<span class="token punctuation">.</span>BodyHandlers</span><span class="token punctuation">.</span><span class="token function">ofString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">thenApply</span><span class="token punctuation">(</span><span class="token class-name">HttpResponse</span><span class="token operator">::</span><span class="token function">body</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">thenAccept</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åŒæ­¥</span>
<span class="token class-name">HttpResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">HttpResponse<span class="token punctuation">.</span>BodyHandlers</span><span class="token punctuation">.</span><span class="token function">ofString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>æ›´å¤šçš„å¦‚åŒæ­¥å¼‚æ­¥è¯·æ±‚ï¼Œå¹¶å‘è®¿é—®ï¼Œè®¾ç½®ä»£ç†ç­‰æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒ OpenJDK å®˜æ–¹æ–‡æ¡£ï¼š<br> <a href="http://openjdk.java.net/groups/net/httpclient/recipes-incubating.html" rel="nofollow">http://openjdk.java.net/groups/net/httpclient/recipes-incubating.html(opens new window)</a></p> 
<h3><a id="Lambda__1669"></a>Lambda å±€éƒ¨å˜é‡æ¨æ–­</h3> 
<p>åœ¨ Java 10 ä¸­å¼•å…¥äº† var è¯­æ³•ï¼Œå¯ä»¥è‡ªåŠ¨æ¨æ–­å˜é‡ç±»å‹ã€‚åœ¨ Java 11 ä¸­è¿™ä¸ªè¯­æ³•ç³–å¯ä»¥åœ¨ Lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨äº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">var</span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"CSDN"</span><span class="token punctuation">,</span> <span class="token string">"é˜¿æè¯´è¯´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"website"</span><span class="token punctuation">,</span> <span class="token string">"https://blog.csdn.net/weixin_40972073"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashMap<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">var</span> k<span class="token punctuation">,</span> <span class="token keyword">var</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//è¾“å‡º</span>
<span class="token comment">//website: https://blog.csdn.net/weixin_40972073</span>
<span class="token comment">//CSDN: é˜¿æè¯´è¯´</span>
</code></pre> 
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ(var k,var v) ä¸­ï¼Œk å’Œ v çš„ç±»å‹è¦ä¹ˆéƒ½ç”¨ var ï¼Œè¦ä¹ˆéƒ½ä¸å†™ï¼Œè¦ä¹ˆéƒ½å†™æ­£ç¡®çš„å˜é‡ç±»å‹ã€‚è€Œä¸èƒ½ var å’Œå…¶ä»–å˜é‡ç±»å‹æ··ç”¨ã€‚<br> <img src="https://images2.imgbox.com/da/15/OB8DWHHZ_o.png" alt="image.png"></p> 
<h3><a id="Java_1684"></a>å•å‘½ä»¤è¿è¡ŒJava</h3> 
<p>è‡ªä»å­¦ä¹  Java çš„ç¬¬ä¸€å¤©ï¼Œæˆ‘ä»¬å°±çŸ¥é“è¿è¡Œä¸€ä¸ª Java æ–‡ä»¶ï¼Œè¦å…ˆç”¨ javac å‘½ä»¤ç¼–è¯‘ï¼Œå†ç”¨ java å‘½ä»¤è¿è¡Œï¼Œè€Œç°åœ¨åªè¦ä¸€ä¸ª java å‘½ä»¤å°±å¯ä»¥è¿è¡Œäº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CSDN: é˜¿æè¯´è¯´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//java -Dfile.encoding=UTF-8  MainTest.java</span>
<span class="token comment">//CSDN: é˜¿æè¯´è¯´</span>
</code></pre> 
<h3><a id="_1696"></a>å…è´¹çš„é£è¡Œè®°å½•å™¨</h3> 
<p>å•†ä¸šç‰ˆ JDK ä¸­ä¸€ç›´æœ‰ä¸€æ¬¾ä½å¼€é”€çš„äº‹ä»¶ä¿¡æ¯æ”¶é›†å·¥å…·ï¼Œä¹Ÿå°±æ˜¯é£è¡Œè®°å½•å™¨ï¼ˆJava Flight Recorderï¼‰ï¼Œå®ƒå¯ä»¥å¯¹ JVM è¿›è¡Œæ£€æŸ¥ã€åˆ†æã€è®°å½•ç­‰ã€‚å½“å‡ºç°æœªçŸ¥å¼‚å¸¸æ—¶å¯ä»¥é€šè¿‡è®°å½•è¿›è¡Œæ•…éšœåˆ†æã€‚è¿™ä¸ªå¥½ç”¨çš„å·¥å…·åœ¨ Java 11 ä¸­å°†å¼€æºå…è´¹ã€‚æ‰€æœ‰äººéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½äº†ã€‚</p> 
<h3><a id="_1698"></a>å…¶ä»–æ›´æ–°</h3> 
<ol><li>JEP 309 - æ·»åŠ åŠ¨æ€æ–‡ä»¶å¸¸é‡ã€‚</li><li>JEP 318 - æ·»åŠ  Epsilon åƒåœ¾æ”¶é›†å™¨ã€‚</li><li>JEP 320 - åˆ é™¤ Java EE å’Œ corba æ¨¡å—ï¼ˆjava.xml.ws, java.xml.bind, java.activation, java.xml.ws.annotation, java.corba, java.transaction, java.se.ee, jdk.xml.ws, jdk.xml.bindï¼‰ã€‚</li><li>JEP 329 - å¢åŠ åŠ å¯†ç®—æ³• chacha20,poly1305 çš„å®ç°ã€‚</li><li>JEP 333 - å¼•å…¥å®éªŒæ€§çš„ ZGC åƒåœ¾æ”¶é›†å™¨ï¼Œä¿è¯åœæ‘†æ—¶é—´ä¸ä¼šè¶…è¿‡ 10msã€‚</li><li>JEP 335 - åºŸå¼ƒ Nashorn JavaScript å¼•æ“</li></ol> 
<p>Java 11 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/11-relnote-issues.html#NewFeature" rel="nofollow">JDK 11 å‘è¡Œè¯´æ˜</a></p> 
<h2><a id="h1_id12Java_12__1708"></a></h2> 
<h2 id="12">Java 12 æ–°ç‰¹æ€§</h2> 
<p>Java 12 æ—©åœ¨ 2019 å¹´ 3 æœˆ 19 æ—¥å‘å¸ƒï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªé•¿ä¹…æ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ã€‚æ­¤ç¯‡æ–‡ç« å†™ä¸€ä¸‹éƒ¨åˆ†Java 12çš„æ–°ç‰¹æ€§ã€‚<br> Java 12 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼šJDK 12 å‘è¡Œè¯´æ˜<br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼šJavaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£<br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="Switch___1713"></a>Switch è¡¨è¾¾å¼ æ”¹è¿›</h3> 
<p>åœ¨ Java 12 ä¸­ï¼Œå¯¹ <strong>Switch</strong> è¡¨è¾¾å¼çš„å†™æ³•è¿›è¡Œäº†æ”¹è¿›ï¼Œè™½ç„¶æ˜¯ä¸€ä¸ªè¯­æ³•ç³–çš„æ”¹è¿›ï¼Œä¹Ÿè®© <strong>Switch</strong> çš„ä»£ç ç¼–å†™å˜å¾—æ›´åŠ ä¼˜é›…ã€‚å…ˆçœ‹ä¸€ä¸‹åœ¨ Java 12 ä¹‹å‰çš„ <strong>Switch</strong> çš„å†™æ³•ã€‚<br> ç”±äº Switch è¡¨è¾¾å¼åœ¨ Java 12 ä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªæ­£å¼å‘å¸ƒçš„åŠŸèƒ½ï¼Œè¿˜å¤„äºé¢„è§ˆæµ‹è¯•é˜¶æ®µï¼Œæ‰€ä»¥æƒ³è¦ä½¿ç”¨ Java 12 å»ç¼–è¯‘è¿è¡Œå°±éœ€è¦æ‰“å¼€åŠŸèƒ½é¢„è§ˆå‚æ•°ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Java 14 ä»¥åŠæ›´é«˜ç‰ˆæœ¬ï¼Œå°±å¯ä»¥ç›´æ¥è·³è¿‡è¿™ä¸ªéƒ¨åˆ†äº†ã€‚</p> 
<pre><code class="prism language-java"># ç¼–è¯‘æ—¶
<span class="token punctuation">.</span>/bin<span class="token operator">/</span>javac <span class="token operator">--</span>enable<span class="token operator">-</span>preview <span class="token operator">-</span>source <span class="token number">12</span> <span class="token punctuation">.</span>/<span class="token class-name">Xxx</span><span class="token punctuation">.</span>java
# è¿è¡Œæ—¶
<span class="token punctuation">.</span>/bin<span class="token operator">/</span>java <span class="token operator">--</span>enable<span class="token operator">-</span>preview <span class="token class-name">Xxx</span>
</code></pre> 
<p>Java 12ä»¥å‰çš„switchå†™æ³•</p> 
<pre><code class="prism language-java"><span class="token comment">// é€šè¿‡ä¼ å…¥æœˆä»½ï¼Œè¾“å‡ºæœˆä»½æ‰€å±çš„å­£èŠ‚</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">switchJava12Before</span><span class="token punctuation">(</span><span class="token class-name">String</span> day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">"march"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"april"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"may"</span><span class="token operator">:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ˜¥å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"june"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"july"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"august"</span><span class="token operator">:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¤å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"september"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"october"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"november"</span><span class="token operator">:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç§‹å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"december"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"january"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"february"</span><span class="token operator">:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å†¬å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Java 12çš„å†™æ³•</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">switchJava12</span><span class="token punctuation">(</span><span class="token class-name">String</span> day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">"march"</span><span class="token punctuation">,</span> <span class="token string">"april"</span><span class="token punctuation">,</span> <span class="token string">"may"</span>            <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ˜¥å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"june"</span><span class="token punctuation">,</span> <span class="token string">"july"</span><span class="token punctuation">,</span> <span class="token string">"august"</span>           <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¤å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"september"</span><span class="token punctuation">,</span> <span class="token string">"october"</span><span class="token punctuation">,</span> <span class="token string">"november"</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç§‹å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"december"</span><span class="token punctuation">,</span> <span class="token string">"january"</span><span class="token punctuation">,</span> <span class="token string">"february"</span>  <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å†¬å¤©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å¦å¤–è¿˜å¯ä½¿ç”¨è¿”å›å€¼èµ‹å€¼</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> season <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token string">"march"</span><span class="token punctuation">,</span> <span class="token string">"april"</span><span class="token punctuation">,</span> <span class="token string">"may"</span>            <span class="token operator">-&gt;</span> <span class="token string">"æ˜¥å¤©"</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"june"</span><span class="token punctuation">,</span> <span class="token string">"july"</span><span class="token punctuation">,</span> <span class="token string">"august"</span>           <span class="token operator">-&gt;</span> <span class="token string">"å¤å¤©"</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"september"</span><span class="token punctuation">,</span> <span class="token string">"october"</span><span class="token punctuation">,</span> <span class="token string">"november"</span> <span class="token operator">-&gt;</span> <span class="token string">"ç§‹å¤©"</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"december"</span><span class="token punctuation">,</span> <span class="token string">"january"</span><span class="token punctuation">,</span> <span class="token string">"february"</span>  <span class="token operator">-&gt;</span> <span class="token string">"å†¬å¤©"</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//throw new RuntimeException("day error")</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"day error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token string">"day error"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰å­£èŠ‚æ˜¯:"</span> <span class="token operator">+</span> season<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_Filesmismatch_1776"></a>æ–‡ä»¶å¯¹æ¯” Files.mismatch</h3> 
<p>åœ¨ Java ä¸­å¯¹äºæ–‡ä»¶çš„æ“ä½œå·²ç»åœ¨ Java 11 ä¸­è¿›è¡Œäº†ä¸€æ¬¡å¢å¼ºï¼Œè¿™æ¬¡ Java 12 åˆå¸¦æ¥äº†æ–‡ä»¶å¯¹æ¯”åŠŸèƒ½ã€‚<br> å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå†…å®¹ä¸€è‡´ï¼Œä¼šè¿”å› -1 ï¼Œå¦‚æœå†…å®¹ä¸åŒï¼Œä¼šè¿”å›ä¸åŒçš„å­—èŠ‚å¼€å§‹ä½ç½®ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶</span>
<span class="token class-name">Path</span> pathA <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createFile</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Path</span> pathB <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createFile</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å†™å…¥ç›¸åŒå†…å®¹</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>pathA<span class="token punctuation">,</span><span class="token string">"abc"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span>WRITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>pathB<span class="token punctuation">,</span><span class="token string">"abc"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span>WRITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> mismatch <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">mismatch</span><span class="token punctuation">(</span>pathA<span class="token punctuation">,</span> pathB<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mismatch<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¿½åŠ ä¸åŒå†…å®¹</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>pathA<span class="token punctuation">,</span><span class="token string">"123"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span>APPEND<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>pathB<span class="token punctuation">,</span><span class="token string">"321"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span>APPEND<span class="token punctuation">)</span><span class="token punctuation">;</span>
mismatch <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">mismatch</span><span class="token punctuation">(</span>pathA<span class="token punctuation">,</span> pathB<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mismatch<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ é™¤åˆ›å»ºçš„æ–‡ä»¶</span>
pathA<span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pathB<span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// RESULT</span>
<span class="token comment">// -1</span>
<span class="token comment">// 3</span>
</code></pre> 
<h3><a id="Compact_Number_1804"></a>Compact Number</h3> 
<p>ç®€åŒ–çš„æ•°å­—æ ¼å¼å¯ä»¥ç›´æ¥è½¬æ¢æ•°å­—æ˜¾ç¤ºæ ¼å¼ï¼Œæ¯”å¦‚ 1000 -&gt; 1Kï¼Œ1000000 -&gt; 1M ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Compact Formatting is:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">NumberFormat</span> upvotes <span class="token operator">=</span> <span class="token class-name">NumberFormat</span><span class="token punctuation">.</span><span class="token function">getCompactNumberInstance</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">"en"</span><span class="token punctuation">,</span> <span class="token string">"US"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Style</span><span class="token punctuation">.</span>SHORT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®å°æ•°ä½æ•°</span>
upvotes<span class="token punctuation">.</span><span class="token function">setMaximumFractionDigits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>upvotes<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">12345678</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java"><span class="token number">100</span>
<span class="token number">1</span>K
<span class="token number">10</span>K
<span class="token number">100</span>K
<span class="token number">1</span>M
<span class="token number">1.2</span>K
<span class="token number">123.5</span>K
<span class="token number">12.3</span>M
</code></pre> 
<h3><a id="JVM__1833"></a>JVM ç›¸å…³æ›´æ–°</h3> 
<p><strong>Shenandoah åƒåœ¾æ”¶é›†å™¨</strong><br> Java 12 å¢åŠ äº† Shenandoah ä¸€ä¸ªä½åœé¡¿çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå®ƒå¯ä»¥å’Œ Java åº”ç”¨ç¨‹åºä¸­çš„æ‰§è¡Œçº¿ç¨‹åŒæ—¶è¿›è¡Œï¼Œç”¨æ¥æ”¶é›†åƒåœ¾è¿›è¡Œå†…å®¹å›æ”¶ï¼Œè¿™æ ·å°±å¯ä»¥è®©åœé¡¿æ—¶é—´æ›´å°‘ã€‚<br> æ›´å¤šå…³äº Shenandoah åƒåœ¾æ”¶é›†å™¨çš„ä»‹ç»å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼šShenandoah GC ä»‹ç» (opens new window)ã€‚<br> <strong>ZGC å¹¶å‘ç±»å¸è½½</strong><br> Z åƒåœ¾æ”¶é›†å™¨ç°åœ¨æ”¯æŒç±»å¸è½½ï¼Œé€šè¿‡å¸è½½ä¸ä½¿ç”¨çš„ç±»æ¥é‡Šæ”¾è¿™äº›ç±»ç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œä»è€Œå‡å°‘åº”ç”¨ç¨‹åºçš„æ€»ä½“å ç”¨ç©ºé—´ã€‚å› ä¸ºæ˜¯å¹¶å‘æ‰§è¡Œï¼Œæ‰€ä»¥ä¸ä¼šåœæ­¢ Java åº”ç”¨ç¨‹åºçº¿ç¨‹çš„æ‰§è¡Œï¼Œä¹Ÿå› æ­¤å¯¹ GC çš„æš‚åœæ—¶é—´å½±å“å¾®ä¹å…¶å¾®ã€‚é»˜è®¤æƒ…å†µä¸‹å¯ç”¨æ­¤åŠŸèƒ½ï¼Œä½†å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œé€‰é¡¹ç¦ç”¨** -XX:-ClassUnloading**ã€‚<br> <strong>JVM å¸¸é‡ API</strong><br> åœ¨åŒ…** java.lang.invoke.constant** ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—çš„åŸºäºå€¼çš„ç¬¦å·å¼•ç”¨ï¼Œå¯ä»¥ç”¨æ¥æè¿°å„ç§å¯åŠ è½½å¸¸é‡ã€‚å¯ä»¥æ›´å®¹æ˜“çš„å¯¹å…³é”®ç±»æ–‡ä»¶å’Œè¿è¡Œæ—¶æ„å»ºçš„åä¹‰æè¿°è¿›è¡Œå»ºæ¨¡ï¼Œç‰¹åˆ«æ˜¯å¯¹é‚£äº›ä»å¸¸é‡æ± ä¸­åŠ è½½çš„å¸¸é‡ï¼Œä¹Ÿè®©å¼€å‘è€…å¯ä»¥æ›´ç®€å•æ ‡å‡†çš„å¤„ç†å¯åŠ è½½å¸¸é‡ã€‚<br> <strong>é»˜è®¤ä½¿ç”¨ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰</strong><br> è¿™å·²ç»ä¸æ˜¯ JDK ç¬¬ä¸€æ¬¡æ”¹è¿› CDSï¼ˆClass Data Sharingï¼‰ åŠŸèƒ½äº†ï¼ŒCDS å¯ä»¥è®© JVM åœ¨åŒä¸€å°æœºå™¨æˆ–è™šæ‹Ÿæœºä¸Šå¯åŠ¨å¤šä¸ªåº”ç”¨çš„é€Ÿåº¦é€Ÿåº¦å¤§å¤§å¢åŠ ã€‚åŸç†æ˜¯åœ¨å¯åŠ¨åº”ç”¨æ—¶å…±äº«ä¸€äº›ç±»åŠ è½½ä¿¡æ¯ï¼Œè¿™æ ·å¯åŠ¨æ–°è¿›ç¨‹æ—¶å°±å¯ä»¥ä½¿ç”¨å…±äº«çš„æ•°æ®ã€‚åœ¨ Java 12 ä¹‹å‰æ­¤åŠŸèƒ½éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼ŒJava 12 è°ƒæ•´ä¸ºé»˜è®¤å¼€å¯ã€‚<br> <strong>å¾®åŸºå‡†å¥—ä»¶</strong><br> Java 12 ä¸­æ·»åŠ ä¸€å¥—æ–°çš„åŸºäº JMH çš„åŸºæœ¬çš„å¾®åŸºå‡†æµ‹è¯•å¥—ä»¶ã€‚<br> JMH çš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒæ–‡ç«  JMH - Java ä»£ç æ€§èƒ½æµ‹è¯•çš„ç»ˆæåˆ©å™¨ (opens new window)ã€‚</p> 
<h3><a id="_1846"></a>å…¶ä»–æ›´æ–°</h3> 
<p>åœ¨ Java 11 æ”¯æŒäº† Unicode 10 ä¹‹åï¼Œ Java 12 æ”¯æŒäº† Unicode 11ï¼Œæ”¯æŒæ“ä½œæ›´å¤šçš„è¡¨æƒ…ã€ç¬¦å·ã€‚</p> 
<h2><a id="h1_id13Java_13__1848"></a></h2> 
<h2 id="13">Java 13 æ–°ç‰¹æ€§</h2> 
<p>Java 13 æ—©åœ¨ 2019 å¹´ 9 æœˆå°±å·²ç»å‘å¸ƒï¼Œè™½ç„¶ä¸æ˜¯é•¿ä¹…æ”¯æŒç‰ˆæœ¬ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†ä¸å°‘æ–°åŠŸèƒ½ã€‚æ­¤ç¯‡æ–‡ç« å†™ä¸€ä¸‹éƒ¨åˆ†Java 13çš„æ–°ç‰¹æ€§ã€‚<br> Java 13 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/13-relnote-issues.html#NewFeature" rel="nofollow">JDK 13 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="Switch___1853"></a>Switch è¡¨è¾¾å¼ (äºŒæ¬¡é¢„è§ˆ)</h3> 
<p>åœ¨Java 12 ä¸­å¯¹ Switch è¿›è¡Œäº†ä¸€æ¬¡å¢å¼ºï¼Œè¿™æ¬¡åˆå¯¹Switchè¿›è¡Œäº†å¢å¼ºã€‚<br> åœ¨ Java 13 ä¸­ï¼Œåˆå¯¹ switch è¡¨è¾¾å¼è¿›è¡Œäº†å¢å¼ºï¼Œå¢åŠ äº† yield å…³é”®è¯ç”¨äºè¿”å›å€¼ï¼Œç›¸æ¯” break ï¼Œè¯­ä¹‰æ›´åŠ æ˜ç¡®äº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">switchJava13</span><span class="token punctuation">(</span><span class="token class-name">String</span> month<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">"march"</span><span class="token punctuation">,</span> <span class="token string">"april"</span><span class="token punctuation">,</span> <span class="token string">"may"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"æ˜¥å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"june"</span><span class="token punctuation">,</span> <span class="token string">"july"</span><span class="token punctuation">,</span> <span class="token string">"august"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"å¤å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"september"</span><span class="token punctuation">,</span> <span class="token string">"october"</span><span class="token punctuation">,</span> <span class="token string">"november"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"ç§‹å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"december"</span><span class="token punctuation">,</span> <span class="token string">"january"</span><span class="token punctuation">,</span> <span class="token string">"february"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"å†¬å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"month error"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_CDS__1872"></a>åŠ¨æ€ CDS å­˜æ¡£</h3> 
<p>JVM å¯åŠ¨æ—¶æœ‰ä¸€æ­¥æ˜¯éœ€è¦åœ¨å†…å­˜ä¸­åŠ è½½ç±»ï¼Œè€Œå¦‚æœæœ‰å¤šä¸ª jarï¼ŒåŠ è½½ç¬¬ä¸€ä¸ª jar çš„é€Ÿåº¦æ˜¯æœ€æ…¢çš„ã€‚è¿™å°±å»¶é•¿äº†ç¨‹åºçš„å¯åŠ¨æ—¶é—´ï¼Œä¸ºäº†å‡å°‘è¿™ä¸ªæ—¶é—´ï¼ŒJava 10 å¼•å…¥äº†åº”ç”¨ç¨‹åºç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰æœºåˆ¶ï¼Œå®ƒå¯ä»¥æŠŠä½ æƒ³å…±äº«çš„ç±»å…±äº«åœ¨ç¨‹åºä¹‹é—´ï¼Œä½¿ä¸åŒçš„ Java è¿›ç¨‹ä¹‹é—´å…±äº«è¿™ä¸ªç±»æ¥å‡å°‘è¿™ä¸ªç±»å ç”¨çš„ç©ºé—´ä»¥åŠåŠ è½½é€Ÿåº¦ã€‚ä¸è¿‡ Java 10 ä¸­ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½çš„æ­¥éª¤æ¯”è¾ƒç¹çã€‚<br> è€Œ Java 13 ä¸­çš„ AppCDSï¼Œå…è®¸ Java åº”ç”¨åœ¨ç¨‹åºæ‰§è¡Œç»“æŸæ—¶ï¼ˆå¦‚æœ JVM æ²¡æœ‰å´©æºƒï¼‰è¿›è¡ŒåŠ¨æ€å­˜æ¡£ï¼›å­˜å‚¨çš„å†…å®¹åŒ…æ‹¬æ‰€æœ‰åŠ è½½çš„åº”ç”¨ç±»å‹ç±»å’Œä½¿ç”¨çš„ç±»åº“ï¼Œè¿™äº›å­˜å‚¨çš„ç±»åº“æœ¬æ¥å¹¶ä¸å­˜åœ¨äºé»˜è®¤çš„ CDS å­˜æ¡£ä¸­ã€‚ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ç¨‹åºå¯åŠ¨æ—¶å¢åŠ å¯åŠ¨å‚æ•° ã€‚</p> 
<pre><code class="prism language-java"># <span class="token class-name">ArchiveClassesAtExit</span>ï¼Œç¨‹åºç»“æŸæ—¶åŠ¨æ€å­˜æ¡£
bin<span class="token operator">/</span>java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token class-name">ArchiveClassesAtExit</span><span class="token operator">=</span>hello<span class="token punctuation">.</span>jsa <span class="token operator">-</span>cp hello<span class="token punctuation">.</span>jar <span class="token class-name">Hello</span>
# <span class="token class-name">SharedArchiveFile</span>ï¼Œä½¿ç”¨æŒ‡å®šå­˜æ¡£å¯åŠ¨
bin<span class="token operator">/</span>java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token class-name">SharedArchiveFile</span><span class="token operator">=</span>hello<span class="token punctuation">.</span>jsa <span class="token operator">-</span>cp hello<span class="token punctuation">.</span>jar <span class="token class-name">Hello</span>
</code></pre> 
<h3><a id="ZGC__1881"></a>ZGCï¼Œå½’è¿˜æœªä½¿ç”¨çš„å†…å­˜ (å®éªŒæ€§)</h3> 
<p>åœ¨ Java 13 ä¹‹å‰ï¼ŒZGC è™½ç„¶åœ¨æ¸…ç†å†…å­˜æ—¶å¯¼è‡´çš„åœé¡¿æ—¶é—´éå¸¸å°‘ï¼Œä½†æ˜¯å³ä½¿å†…å­˜å·²ç»é•¿æ—¶é—´æ²¡æœ‰ä½¿ç”¨ï¼ŒZGC ä¹Ÿä¸ä¼šå°†å†…å­˜è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œè¿™å¯¹é‚£äº›ååˆ†å…³æ³¨å†…å­˜å ç”¨çš„åº”ç”¨ç¨‹åºéå¸¸ä¸å‹å¥½ã€‚<br> æ¯”å¦‚ï¼š</p> 
<ul><li>èµ„æºæŒ‰ä½¿ç”¨é‡ä»˜è´¹çš„äº‘ä¸Šå®¹å™¨ç¯å¢ƒã€‚</li><li>åº”ç”¨è™½ç„¶é•¿æ—¶é—´é—²ç½®ï¼Œä½†æ˜¯å ç”¨äº†å†…å­˜ï¼Œå¯¼è‡´è¿è¡Œçš„å…¶ä»–ç¨‹åºå†…å­˜ç´§å¼ ã€‚</li></ul> 
<p>è€Œæ–°å¢çš„è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥è®© ZGC å½’è¿˜é•¿æ—¶é—´æ²¡æœ‰ä½¿ç”¨çš„å†…å­˜ç»™æ“ä½œç³»ç»Ÿï¼Œè¿™å¯¹æŸäº›ç”¨æˆ·æ¥è¯´ååˆ†å‹å¥½ã€‚</p> 
<h3><a id="_Socket_API_1889"></a>é‡æ–°å®ç° Socket API</h3> 
<p>java.net.Socket å’Œ java.net.ServerSocket ç±»æ—©åœ¨ Java 1.0 æ—¶å°±å·²ç»å¼•å…¥äº†ï¼Œå®ƒä»¬çš„å®ç°çš„ Java ä»£ç å’Œ C è¯­è¨€ä»£ç çš„æ··åˆï¼Œç»´æŠ¤å’Œè°ƒè¯•éƒ½ååˆ†ä¸æ˜“ï¼›è€Œä¸”è¿™ä¸ªå®ç°è¿˜å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œæœ‰æ—¶å€™æ’æŸ¥èµ·æ¥ä¹Ÿå¾ˆå›°éš¾ã€‚<br> å› æ­¤ï¼Œåœ¨ Java 13 ä¸­å¼•å…¥äº†æ–°çš„å®ç°æ–¹å¼ï¼Œä½¿ç”¨äº†æ–°çš„å®ç° NioSocketImpl æ¥ä»£æ›¿è€æ—§çš„ PlainSocketImpl å®ç°ã€‚è™½ç„¶åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯è€çš„æ–¹å¼åœ¨å½“å‰ä»¥åŠæœªæ¥å‡ ä¸ªç‰ˆæœ¬å†…ä¸ä¼šåˆ é™¤ï¼Œç”¨æˆ·éšæ—¶å¯ä»¥é€šè¿‡ -Djdk.net.usePlainSocketImpl å‚æ•°åˆ‡æ¢å›è€çš„å®ç°æ–¹å¼ï¼Œä»¥å…¼å®¹æ„å¤–æƒ…å†µã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">boolean</span> running <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>running<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Socket</span> clientSocket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//do something with clientSocket</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä½¿ç”¨ Java 13 è¿è¡Œï¼Œé€šè¿‡å‚æ•° -XX:+TraceClassLoading è¿½è¸ªåŠ è½½çš„ç±»ï¼Œæ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ° NioSocketImplã€‚</p> 
<pre><code class="prism language-java">âœ  develop <span class="token punctuation">.</span>/jdk<span class="token operator">-</span><span class="token number">13.0</span><span class="token number">.2</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>bin<span class="token operator">/</span>java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">TraceClassLoading</span> <span class="token class-name">Test</span><span class="token punctuation">.</span>java <span class="token operator">|</span> grep <span class="token class-name">SocketImpl</span>
<span class="token punctuation">[</span><span class="token number">0.699</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.699</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketImpl</span>$$<span class="token class-name">Lambda</span>$<span class="token number">173</span><span class="token operator">/</span><span class="token number">0x0000000800c37440</span> source<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketImpl</span>
<span class="token punctuation">[</span><span class="token number">0.702</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>PlatformSocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.702</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>ch<span class="token punctuation">.</span></span>NioSocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.713</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>ch<span class="token punctuation">.</span></span>NioSocketImpl</span>$<span class="token class-name">FileDescriptorCloser</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
</code></pre> 
<p>ä½†åœ¨ Java 12 å¹¶ä¸æ˜¯ NioSocketImpl</p> 
<pre><code class="prism language-java">âœ  develop <span class="token punctuation">.</span>/jdk<span class="token operator">-</span><span class="token number">12.0</span><span class="token number">.2</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>bin<span class="token operator">/</span>java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">TraceClassLoading</span> <span class="token class-name">Test</span><span class="token punctuation">.</span>java <span class="token operator">|</span> grep <span class="token class-name">SocketImpl</span>
<span class="token punctuation">[</span><span class="token number">0.665</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.665</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>AbstractPlainSocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.665</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>PlainSocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.665</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocksSocketImpl</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
<span class="token punctuation">[</span><span class="token number">0.666</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>info   <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">class</span><span class="token punctuation">,</span>load<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>AbstractPlainSocketImpl</span>$<span class="token number">1</span> source<span class="token operator">:</span> jrt<span class="token operator">:</span><span class="token operator">/</span>java<span class="token punctuation">.</span>base
</code></pre> 
<h3><a id="__1928"></a>æ–‡æœ¬å— (é¢„è§ˆ)</h3> 
<p>åœ¨è¿™ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ª JSON èµ‹å€¼ç»™å­—ç¬¦ä¸²ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token string">"{\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"upperSummary\": null,\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"sensitiveTypeList\": null,\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"gmtModified\": \"2022-08-23 10:50:09\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"lowerGraph\": null,\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"signature\": \"\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"appName\": \"xxx\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"lowerSummary\": null,\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"gmtCreate\": \"2022-08-23 10:50:09\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"type\": \"CALL\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"name\": \"xxxx\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"subType\": \"yyy\",\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"id\": 1,\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"projectId\": 1,\n"</span>
    <span class="token operator">+</span> <span class="token string">"    \"status\": 1\n"</span>
    <span class="token operator">+</span> <span class="token string">"}"</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç»ˆäºä¸ç”¨å†™ä¸‘é™‹çš„é•¿å­—ç¬¦ä¸²äº†ï¼Œä» Java 13 å¼€å§‹ä½ å¯ä»¥ä½¿ç”¨æ–‡æœ¬å—çš„æ–¹å¼å®šä¹‰å­—ç¬¦ä¸²äº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> content2 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
        {
        "upperSummary": null,
        "sensitiveTypeList": null,
        "gmtModified": "2022-08-23 10:50:09",
        "lowerGraph": null,
        "signature": "",
        "appName": "xxx",
        "lowerSummary": null,
        "gmtCreate": "2022-08-23 10:50:09",
        "type": "CALL",
        "name": "xxxx",
        "subType": "yyy",
        "id": 1,
        "projectId": 1,
        "status": 1
    }
                 """</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä¸è¿‡è¿™æ˜¯ä¸€ä¸ªé¢„è§ˆåŠŸèƒ½ï¼Œå¦‚æœä½ è¦æ˜¯åœ¨ Java 13 ä¸­ä½¿ç”¨éœ€è¦æ‰‹åŠ¨å¼€å¯é¢„è§ˆåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨ Java 15 ä¸­æ­£å¼å‘å¸ƒã€‚</p> 
<h2><a id="h1_id14Java_14__1970"></a></h2> 
<h2 id="14">Java 14 æ–°ç‰¹æ€§</h2> 
<p>Java 14æ—©åœ¨ 2019 å¹´ 9 æœˆå°±å·²ç»å‘å¸ƒï¼Œè™½ç„¶ä¸æ˜¯é•¿ä¹…æ”¯æŒç‰ˆæœ¬ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†ä¸å°‘æ–°åŠŸèƒ½ã€‚æ­¤ç¯‡æ–‡ç« å†™ä¸€ä¸‹éƒ¨åˆ†Java 14çš„æ–°ç‰¹æ€§ã€‚<br> Java 14å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/14-relnote-issues.html#NewFeature" rel="nofollow">JDK 14 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="instanceof__1975"></a>instanceof ç±»å‹åˆ¤æ–­ï¼ˆé¢„è§ˆï¼‰</h3> 
<p>åœ¨ Java 14 ä¹‹å‰ï¼Œä½¿ç”¨ instanceof è¿›è¡Œç±»å‹åˆ¤æ–­ä¹‹åï¼Œéœ€è¦è¿›è¡Œå¯¹è±¡ç±»å‹è½¬æ¢åæ‰èƒ½ä½¿ç”¨ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Java14BeaforInstanceof</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">ArrayList</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>è€Œåœ¨ Java 14 ä¸­ï¼Œå¯ä»¥åœ¨åˆ¤æ–­ç±»å‹æ—¶æŒ‡å®šå˜é‡åç§°è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ–¹ä¾¿äº†ä½¿ç”¨ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Java14Instanceof</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åœ¨ä½¿ç”¨ instanceof åˆ¤æ–­ç±»å‹æˆç«‹åï¼Œä¼šè‡ªåŠ¨å¼ºåˆ¶è½¬æ¢ç±»å‹ä¸ºæŒ‡å®šç±»å‹ã€‚</p> 
<h3><a id="_2004"></a>æ‰“åŒ…å·¥å…·ï¼ˆå­µåŒ–ï¼‰</h3> 
<p>åœ¨ Java 14 ä¸­ï¼Œå¼•å…¥äº†æ‰“åŒ…å·¥å…·ï¼Œå‘½ä»¤æ˜¯ jpackageï¼Œä½¿ç”¨ jpackage å‘½ä»¤å¯ä»¥æŠŠ JAR åŒ…æ‰“åŒ…æˆä¸åŒæ“ä½œç³»ç»Ÿæ”¯æŒçš„è½¯ä»¶æ ¼å¼ã€‚</p> 
<pre><code class="prism language-java">jpackage <span class="token operator">--</span>name myapp <span class="token operator">--</span>input lib <span class="token operator">--</span>main<span class="token operator">-</span>jar main<span class="token punctuation">.</span>jar <span class="token operator">--</span>main<span class="token operator">-</span><span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">myapp<span class="token punctuation">.</span></span>Main</span>
</code></pre> 
<p>å¸¸è§å¹³å°æ ¼å¼å¦‚ä¸‹ï¼š</p> 
<ol><li>Linux: deb and rpm</li><li>macOS: pkg and dmg</li><li>Windows: msi and exe</li></ol> 
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œjpackage ä¸æ”¯æŒäº¤å‰ç¼–è¯‘ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ windows å¹³å°ä¸Šæ˜¯ä¸èƒ½æ‰“åŒ…æˆ macOS æˆ–è€… Linux ç³»ç»Ÿçš„è½¯ä»¶æ ¼å¼çš„ã€‚</p> 
<h3><a id="G1__NUMA_2016"></a>G1 æ”¯æŒ NUMAï¼ˆéç»Ÿä¸€å†…å­˜è®¿é—®ï¼‰</h3> 
<p>G1 æ”¶é›†å™¨ç°åœ¨å¯ä»¥æ„ŸçŸ¥ NUMA å†…å­˜åˆ†é…æ–¹å¼ï¼Œä»¥æé«˜ G1 çš„æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨ +XX:+UseNUMA å¯ç”¨è¿™é¡¹åŠŸèƒ½ã€‚<br> æ›´å¤šé˜…è¯»æ–‡æ¡£ï¼š<a href="https://openjdk.java.net/jeps/345" rel="nofollow">https://openjdk.java.net/jeps/345</a></p> 
<h3><a id="_NullPointerExceptions_2019"></a>æ›´æœ‰ç”¨çš„ NullPointerExceptions</h3> 
<p>NullPointerException ä¸€ç›´éƒ½æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„å¼‚å¸¸ï¼Œä½†æ˜¯åœ¨ Java 14 ä¹‹å‰ï¼Œå¦‚æœä¸€è¡Œæœ‰å¤šä¸ªè¡¨è¾¾å¼æ—¶ï¼Œè¿™æ—¶æŠ¥äº†ç©ºæŒ‡é’ˆåï¼Œå•çº¯çš„ä»æŠ¥é”™ä¿¡æ¯æ¥çœ‹ï¼Œå¯èƒ½å¹¶ä¸çŸ¥é“æ˜¯å“ªä¸ªå¯¹è±¡ä¸º NULL ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Java14NullPointerExceptions</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> content1 <span class="token operator">=</span> <span class="token string">"www.baidu.com"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> content2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> length <span class="token operator">=</span> content1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> content2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åœ¨ Java 14 ä¹‹å‰ï¼Œä»ä¸‹é¢çš„æŠ¥é”™ä¸­æˆ‘ä»¬åªèƒ½å¾—åˆ°é”™è¯¯å‡ºç°çš„è¡Œæ•°ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®å®šæ˜¯ conteng1 è¿˜æ˜¯ content2 ä¸º nullã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>NullPointerException</span>
	at <span class="token class-name"><span class="token namespace">other<span class="token punctuation">.</span></span>Other</span><span class="token punctuation">.</span><span class="token function">java14NullPointerExceptions</span><span class="token punctuation">(</span><span class="token class-name">Other</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">88</span><span class="token punctuation">)</span>
</code></pre> 
<p>ä½†æ˜¯åœ¨ Java 14 ä¸­ï¼Œä¼šæ¸…æ™°çš„å‘Šè¯‰ä½  because â€œcontent2â€ is null ã€‚</p> 
<h3><a id="Records__2038"></a>Records (é¢„è§ˆ)</h3> 
<p>record æ˜¯ä¸€ç§å…¨æ–°çš„ç±»å‹ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª final ç±»ï¼ŒåŒæ—¶æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯ final ä¿®é¥°ï¼Œå®ƒä¼šè‡ªåŠ¨ç¼–è¯‘å‡º public get hashcode ã€equalsã€toString ç­‰æ–¹æ³•ï¼Œå‡å°‘äº†ä»£ç ç¼–å†™é‡ã€‚<br> ç¤ºä¾‹ï¼šç¼–å†™ä¸€ä¸ª Dog record ç±»ï¼Œå®šä¹‰ name å’Œ age å±æ€§ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">record</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä½¿ç”¨</p> 
<pre><code class="prism language-java"><span class="token class-name">Dog</span> dog1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"ç‰§ç¾ŠçŠ¬"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dog</span> dog2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"ç”°å›­çŠ¬"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dog</span> dog3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"å“ˆå£«å¥‡"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Dog</span><span class="token punctuation">[</span>name<span class="token operator">=</span>ç‰§ç¾ŠçŠ¬<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token class-name">Dog</span><span class="token punctuation">[</span>name<span class="token operator">=</span>ç”°å›­çŠ¬<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token class-name">Dog</span><span class="token punctuation">[</span>name<span class="token operator">=</span>å“ˆå£«å¥‡<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> 
<p>è¿™ä¸ªåŠŸèƒ½åœ¨ Java 15 ä¸­è¿›è¡ŒäºŒæ¬¡é¢„è§ˆï¼Œåœ¨ Java 16 ä¸­æ­£å¼å‘å¸ƒã€‚</p> 
<h3><a id="Switch___2061"></a>Switch è¡¨è¾¾å¼ (æ ‡å‡†)</h3> 
<p>Switch è¡¨è¾¾å¼æ”¹è¿›ä» Java 12 å°±å·²ç»å¼€å§‹äº†ï¼ŒJava 12 è®© switch æ”¯æŒäº† case L-&gt; è¯­æ³•ï¼ŒJava 13 å¼•å…¥äº† yield å…³é”®è¯ç”¨äºè¿”å›ç»“æœï¼Œä½†æ˜¯åœ¨ Java 12 å’Œ 13 ä¸­åŠŸèƒ½éƒ½æ˜¯é¢„è§ˆç‰ˆçš„ï¼Œè€Œåœ¨ Java 14 ä¸­ï¼Œæ­£å¼è½¬æ­£ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// é€šè¿‡ä¼ å…¥æœˆä»½ï¼Œè¾“å‡ºæœˆä»½æ‰€å±çš„å­£èŠ‚</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">switchJava12</span><span class="token punctuation">(</span><span class="token class-name">String</span> month<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">"march"</span><span class="token punctuation">,</span> <span class="token string">"april"</span><span class="token punctuation">,</span> <span class="token string">"may"</span>            <span class="token operator">-&gt;</span> <span class="token string">"æ˜¥å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"june"</span><span class="token punctuation">,</span> <span class="token string">"july"</span><span class="token punctuation">,</span> <span class="token string">"august"</span>           <span class="token operator">-&gt;</span> <span class="token string">"å¤å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"september"</span><span class="token punctuation">,</span> <span class="token string">"october"</span><span class="token punctuation">,</span> <span class="token string">"november"</span> <span class="token operator">-&gt;</span> <span class="token string">"ç§‹å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"december"</span><span class="token punctuation">,</span> <span class="token string">"january"</span><span class="token punctuation">,</span> <span class="token string">"february"</span>  <span class="token operator">-&gt;</span> <span class="token string">"å†¬å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">"month erro"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// é€šè¿‡ä¼ å…¥æœˆä»½ï¼Œè¾“å‡ºæœˆä»½æ‰€å±çš„å­£èŠ‚</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">switchJava13</span><span class="token punctuation">(</span><span class="token class-name">String</span> month<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">"march"</span><span class="token punctuation">,</span> <span class="token string">"april"</span><span class="token punctuation">,</span> <span class="token string">"may"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"æ˜¥å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"june"</span><span class="token punctuation">,</span> <span class="token string">"july"</span><span class="token punctuation">,</span> <span class="token string">"august"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"å¤å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"september"</span><span class="token punctuation">,</span> <span class="token string">"october"</span><span class="token punctuation">,</span> <span class="token string">"november"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"ç§‹å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"december"</span><span class="token punctuation">,</span> <span class="token string">"january"</span><span class="token punctuation">,</span> <span class="token string">"february"</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"å†¬å¤©"</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">yield</span> <span class="token string">"month error"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_2090"></a>æ–‡æœ¬å—ï¼ˆäºŒæ¬¡é¢„è§ˆï¼‰</h3> 
<p>æ–‡æœ¬å—æ˜¯ Java 13 å¼•å…¥çš„è¯­æ³•ï¼Œåœ¨ Java 14 ä¸­å¯¹å…¶è¿›è¡Œäº†å¢å¼ºã€‚æ–‡æœ¬å—ä¾æ—§æ˜¯é¢„è§ˆåŠŸèƒ½ï¼Œè¿™æ¬¡æ›´æ–°å¢åŠ äº†ä¸¤ä¸ªè½¬ä¹‰ç¬¦ã€‚</p> 
<ol><li>\ ç»“å°¾ä¸æ¢è¡Œ</li><li>\s è¡¨ç¤ºä¸€ä¸ªç©ºæ ¼</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token string">""</span>"
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"upperSummary"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\
            <span class="token string">"sensitiveTypeList"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token string">"gmtModified"</span><span class="token operator">:</span> <span class="token string">"2022-08-23\s10:50:09"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
         <span class="token string">""</span>"<span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"upperSummary"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token string">"sensitiveTypeList"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">"gmtModified"</span><span class="token operator">:</span> <span class="token string">"2022-08-23 10:50:09"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>æ–‡æœ¬å—åŠŸèƒ½åœ¨ Java 15 ä¸­æ­£å¼å‘å¸ƒã€‚</p> 
<h3><a id="_2114"></a>å…¶ä»–æ›´æ–°</h3> 
<ol><li>JEP 362ï¼šåºŸå¼ƒå¯¹ Solaris å’Œ SPARC ç«¯å£æ”¯æŒä» Java 14 å¼€å§‹ï¼Œæ”¾å¼ƒå¯¹ Solaris/SPARC, Solaris/x64, å’Œ Linux/SPARC ç«¯å£çš„æ”¯æŒï¼Œæ”¾å¼ƒä¸€éƒ¨åˆ†å¼€å‘è¿™åŠ¿å¿…ä¼šåŠ å¿« Java æ•´ä½“çš„å¼€å‘èŠ‚å¥ã€‚</li></ol> 
<blockquote> 
 <p>ç›¸å…³é˜…è¯»ï¼š<a href="https://openjdk.java.net/jeps/362" rel="nofollow">https://openjdk.java.net/jeps/362</a></p> 
</blockquote> 
<ol start="2"><li>JEP 363ï¼š ç§»é™¤ CMS åƒåœ¾æ”¶é›†å™¨</li></ol> 
<p>ç§»é™¤å¯¹ CMSï¼ˆConcurrent Mark Sweepï¼‰ åƒåœ¾æ”¶é›†å™¨çš„æ”¯æŒï¼Œå…¶å®æ—©åœ¨ Java 9 å°±å¼€å§‹ç§»é™¤ CMS åƒåœ¾æ”¶é›†å™¨äº†ï¼Œåªä¸è¿‡åœ¨ Java 14 ä¸­è¢«æ­£å¼åˆ é™¤ã€‚</p> 
<ol start="3"><li>JEP 364ï¼šmacOS ä¸Šçš„ ZGCï¼ˆå®éªŒæ€§ï¼‰</li></ol> 
<p>Java 11 åœ¨ Linux ä¸Šå¼•å…¥äº† Z åƒåœ¾æ”¶é›†å™¨ (ZGC)ï¼Œç°åœ¨å®ƒå¯ä»¥ç§»æ¤åˆ° macOSã€‚</p> 
<ol start="4"><li>JEP 365ï¼šWindows ä¸Šçš„ ZGCï¼ˆå®éªŒæ€§ï¼‰</li></ol> 
<p>Java 11 åœ¨ Linux ä¸Šå¼•å…¥äº† Z åƒåœ¾æ”¶é›†å™¨ (ZGC)ï¼Œç°åœ¨å®ƒå¯ä»¥ç§»æ¤åˆ° Windows ä¸Šï¼ˆç‰ˆæœ¬å¤§äº 1803ï¼‰ã€‚</p> 
<ol start="5"><li>JEP 366ï¼šå¼ƒç”¨ ParallelScavenge + SerialOld GC ç»„åˆ</li></ol> 
<p>ç”±äºä½¿ç”¨åœºæ™¯ä¸å¤šï¼Œç»´æŠ¤å·¥ä½œå¤ªå¤§ï¼ŒåºŸå¼ƒä¹‹ã€‚ç›¸å…³é˜…è¯»ï¼š<a href="https://openjdk.java.net/jeps/366" rel="nofollow">https://openjdk.java.net/jeps/366</a></p> 
<ol start="6"><li>JEP 367ï¼šåˆ é™¤ Pack200 å·¥å…·å’Œ API</li></ol> 
<h2><a id="h1_id15Java_15__2138"></a></h2> 
<h2 id="15">Java 15 æ–°ç‰¹æ€§</h2> 
<p>Java 15 åœ¨ 2020 å¹´ 9 æœˆå‘å¸ƒã€‚<br> Java 15 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/15-relnote-issues.html#NewFeature" rel="nofollow">JDK 15 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="EdDSA_2143"></a>çˆ±å¾·åæ›²çº¿ç®—æ³•ï¼ˆEdDSAï¼‰</h3> 
<p>Java 15 ä¸­å¢åŠ äº†ä¸€ä¸ªæ–°çš„å¯†ç å­¦ç®—æ³•ï¼Œçˆ±å¾·åæ›²çº¿ç®—æ³•ï¼ˆEdDSAï¼‰ç­¾åç®—æ³•ã€‚å®ƒæ˜¯ç”± Schnorr ç®—æ³•å‘å±•è€Œæ¥ï¼Œåœ¨ RFC8032 ä¸­è¢«å®šä¹‰å®ç°ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">InvalidKeyException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">KeyPair</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">KeyPairGenerator</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">NoSuchAlgorithmException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">Signature</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">SignatureException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Base64</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> JEP339 <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchAlgorithmException</span><span class="token punctuation">,</span> <span class="token class-name">InvalidKeyException</span><span class="token punctuation">,</span> <span class="token class-name">SignatureException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">KeyPairGenerator</span> kpg <span class="token operator">=</span> <span class="token class-name">KeyPairGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"Ed25519"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">KeyPair</span> kp <span class="token operator">=</span> kpg<span class="token punctuation">.</span><span class="token function">generateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> msg <span class="token operator">=</span> <span class="token string">"www.baidu.com"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Signature</span> sig <span class="token operator">=</span> <span class="token class-name">Signature</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"Ed25519"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sig<span class="token punctuation">.</span><span class="token function">initSign</span><span class="token punctuation">(</span>kp<span class="token punctuation">.</span><span class="token function">getPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sig<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> s <span class="token operator">=</span> sig<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¾“å‡ºç»“æœ</p> 
<pre><code class="prism language-java"><span class="token class-name">VXlpxapU</span><span class="token operator">+</span><span class="token class-name">LSWjVQ0QNJvdpUh6VI6PjSwOQ2pHu65bCfnLR13OyWKunlc9rc</span><span class="token operator">+</span><span class="token number">7</span>SMxCh2Mnqf7TmC<span class="token operator">/</span>iOG8oimbAw<span class="token operator">==</span>
</code></pre> 
<h3><a id="Sealed_Classes_2173"></a>Sealed Classesï¼ˆå¯†å°ç±»ï¼‰é¢„è§ˆ</h3> 
<p>åœ¨ Java ä¸­å¦‚æœæƒ³è®©ä¸€ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿å’Œä¿®æ”¹ï¼Œè¿™æ—¶æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ final å…³é”®å­—å¯¹ç±»è¿›è¡Œä¿®é¥°ã€‚ä¸è¿‡è¿™ç§è¦ä¹ˆå¯ä»¥ç»§æ‰¿ï¼Œè¦ä¹ˆä¸èƒ½ç»§æ‰¿çš„æœºåˆ¶ä¸å¤Ÿçµæ´»ï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½æƒ³è®©æŸä¸ªç±»å¯ä»¥è¢«æŸäº›ç±»å‹ç»§æ‰¿ï¼Œä½†æ˜¯åˆä¸èƒ½éšæ„ç»§æ‰¿ï¼Œæ˜¯åšä¸åˆ°çš„ã€‚Java 15 å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº† **sealed <strong>ç±»ï¼Œè¢« sealed ä¿®é¥°çš„ç±»å¯ä»¥æŒ‡å®šå­ç±»ã€‚è¿™æ ·è¿™ä¸ªç±»å°±åªèƒ½è¢«æŒ‡å®šçš„ç±»ç»§æ‰¿ã€‚<br> è€Œä¸” <strong>sealed <strong>ä¿®é¥°çš„ç±»çš„æœºåˆ¶å…·æœ‰ä¼ é€’æ€§ï¼Œå®ƒçš„</strong>å­ç±»</strong>å¿…é¡»ä½¿ç”¨æŒ‡å®šçš„å…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œä¸”åªèƒ½æ˜¯</strong> finalã€sealedã€non-sealed **ä¸‰è€…ä¹‹ä¸€ã€‚</p> 
<p>ç¤ºä¾‹ï¼šçŠ¬ç±»ï¼ˆDogï¼‰åªèƒ½è¢«ç‰§ç¾ŠçŠ¬ï¼ˆCollieï¼‰å’Œç”°å›­çŠ¬ï¼ˆTuGouï¼‰ç»§æ‰¿ï¼Œä½¿ç”¨ sealed å…³é”®å­—ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">permits</span> <span class="token class-name">Collie</span><span class="token punctuation">,</span> <span class="token class-name">TuGou</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ç‰§ç¾ŠçŠ¬ï¼ˆCollieï¼‰åªèƒ½è¢«è¾¹å¢ƒç‰§ç¾ŠçŠ¬ï¼ˆBorderCollieï¼‰ç»§æ‰¿ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">Collie</span> <span class="token keyword">implements</span> <span class="token class-name">Dog</span> <span class="token keyword">permits</span> <span class="token class-name">BorderCollie</span> <span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> 
<p>è¾¹å¢ƒç‰§ç¾ŠçŠ¬ï¼ˆBorderCollieï¼‰ä¸èƒ½è¢«ç»§æ‰¿ï¼Œä½¿ç”¨ final å…³é”®å­—ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">BorderCollie</span> <span class="token keyword">extends</span> <span class="token class-name">Collie</span><span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ç”°å›­çŠ¬ï¼ˆToGouï¼‰å¯ä»¥è¢«ä»»æ„ç»§æ‰¿ï¼Œä½¿ç”¨ non-sealed å…³é”®å­—ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">non-sealed</span> <span class="token keyword">class</span> <span class="token class-name">TuGou</span> <span class="token keyword">implements</span> <span class="token class-name">Dog</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Hidden_Classes_2199"></a>Hidden Classesï¼ˆéšè—ç±»ï¼‰</h3> 
<p>è¿™ä¸ªç‰¹æ€§è®©å¼€å‘è€…å¯ä»¥å¼•å…¥ä¸€ä¸ªæ— æ³•è¢«å…¶ä»–åœ°æ–¹å‘ç°ä½¿ç”¨ï¼Œä¸”ç±»çš„ç”Ÿå‘½å‘¨æœŸæœ‰é™çš„ç±»ã€‚è¿™å¯¹è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»çš„ä½¿ç”¨æ–¹å¼ååˆ†æœ‰åˆ©ï¼Œå¯ä»¥å‡å°‘å†…å­˜å ç”¨ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JEP371Test</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">lookup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token string">"www.baidu.com"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æŠŠç±» JEP371Test ç¼–è¯‘åçš„ Class è½¬æ¢æˆ Base64ï¼Œç„¶åä½¿ç”¨ Java 15 æ–°ç‰¹æ€§åŠ è½½è°ƒç”¨ç±»ä¸­çš„ lookup æ–¹æ³•ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>invoke<span class="token punctuation">.</span></span><span class="token class-name">MethodHandle</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>invoke<span class="token punctuation">.</span></span><span class="token class-name">MethodHandles</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>invoke<span class="token punctuation">.</span></span><span class="token class-name">MethodType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Base64</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> JEP371 <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> CLASS_INFO <span class="token operator">=</span> <span class="token string">"yv66vgAAADQAFAoAAgADBwAEDAAFAAYBABBqYXZhL2xhbmcvT2JqZWN0AQAGPGluaXQ+AQADKClWCAAIAQAOd3d3LndkYnl0ZS5jb20HAAoBABVjb20vd2RieXRlL0pFUDM3MVRlc3QBAARDb2RlAQAPTGluZU51bWJlclRhYmxlAQASTG9jYWxWYXJpYWJsZVRhYmxlAQAEdGhpcwEAF0xjb20vd2RieXRlL0pFUDM3MVRlc3Q7AQAGbG9va3VwAQAUKClMamF2YS9sYW5nL1N0cmluZzsBAApTb3VyY2VGaWxlAQAPSkVQMzcxVGVzdC5qYXZhACEACQACAAAAAAACAAEABQAGAAEACwAAAC8AAQABAAAABSq3AAGxAAAAAgAMAAAABgABAAAAAwANAAAADAABAAAABQAOAA8AAAAJABAAEQABAAsAAAAbAAEAAAAAAAMSB7AAAAABAAwAAAAGAAEAAAAEAAEAEgAAAAIAEw=="</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classInBytes <span class="token operator">=</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>CLASS_INFO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> proxy <span class="token operator">=</span> <span class="token class-name">MethodHandles</span><span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">defineHiddenClass</span><span class="token punctuation">(</span>classInBytes<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">MethodHandles<span class="token punctuation">.</span>Lookup<span class="token punctuation">.</span>ClassOption</span><span class="token punctuation">.</span>NESTMATE<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">lookupClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MethodHandle</span> mh <span class="token operator">=</span> <span class="token class-name">MethodHandles</span><span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findStatic</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token string">"lookup"</span><span class="token punctuation">,</span> <span class="token class-name">MethodType</span><span class="token punctuation">.</span><span class="token function">methodType</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> mh<span class="token punctuation">.</span><span class="token function">invokeExact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span></span>JEP371Test</span><span class="token operator">/</span><span class="token number">0x0000000800c01800</span>
www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
</code></pre> 
<h3><a id="_Nashorn_JavaScript__2237"></a>ç§»é™¤ Nashorn JavaScript å¼•æ“</h3> 
<p>Nashorn JavaScript å¼•æ“åœ¨ Java 8 ä¸­è¢«å¼•å…¥ï¼Œåœ¨ Java 11 ä¸­è¢«æ ‡è®°ä¸ºåºŸå¼ƒã€‚ç”±äº ECMAScript è¯­è¨€å‘å±•å¾ˆå¿«ï¼Œç»´æŠ¤ Nashorn JavaScript çš„æˆæœ¬è¿‡äºé«˜æ˜‚ï¼Œåœ¨ Java 15 ä¸­è¢«å½»åº•åˆ é™¤ã€‚</p> 
<blockquote> 
 <p>é˜…è¯»ï¼š<a href="https://openjdk.java.net/jeps/174" rel="nofollow">Nashorn JavaScript Engine (opens new window)</a>ï¼Œ<a href="https://openjdk.java.net/jeps/335" rel="nofollow">Deprecate the Nashorn JavaScript Engine(opens new window)</a></p> 
</blockquote> 
<h3><a id="_DatagramSocket_API_2241"></a>é‡æ–°å®ç° DatagramSocket API</h3> 
<p>Java 13 ä¸­é‡æ–°å®ç°äº†æ—§çš„ Socket APIï¼Œåœ¨ä»‹ç» Java 13 æ—¶è¿˜æœ‰ä¸€éƒ¨åˆ†åšäº†è¿™æ–¹é¢çš„ä»‹ç»ã€‚<br> ç°åœ¨ï¼ŒJava 15 é‡æ–°å®ç°äº†é—ç•™çš„ DatagramSocket</p> 
<h3><a id="Biased_Locking_2244"></a>ç¦ç”¨å’ŒåºŸå¼ƒåå‘é”ï¼ˆBiased Lockingï¼‰</h3> 
<p>åœ¨ä¹‹å‰ï¼ŒJVM åœ¨å¤„ç†åŒæ­¥æ“ä½œï¼Œå¦‚ä½¿ç”¨ <strong>synchronized</strong> åŒæ­¥æ—¶ï¼Œæœ‰ä¸€å¥—é”çš„å‡çº§æœºåˆ¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé”æœºåˆ¶å°±æ˜¯åå‘é”ã€‚ç„¶è€Œé€šè¿‡ç›®å‰çš„ Java å¼€å‘ç¯å¢ƒæ¥çœ‹ï¼Œä½¿ç”¨è¿™äº›è¢« synchronized åŒæ­¥çš„ç±»çš„æœºä¼šå¹¶ä¸å¤šï¼Œå¦‚å¼€å‘è€…æ›´å–œæ¬¢ä½¿ç”¨ **HashMap **æˆ–è€… **ArrayList **è€Œé <strong>HashTable <strong>å’Œ <strong>Vector</strong>ã€‚<br> å³ä½¿æ¢ä¸ªè§’åº¦ï¼Œå½“åˆä½¿ç”¨åå‘é”æ˜¯ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¦‚ä»Šçœ‹æ¥æ€§èƒ½æå‡çš„ç¨‹åº¦å’Œä½¿ç”¨æ¬¡æ•°éƒ½ä¸å¤ªæœ‰ç”¨ã€‚è€Œåå‘é”çš„å¼•å…¥å¢åŠ äº† JVM çš„å¤æ‚æ€§ã€‚<br> æ‰€ä»¥ç°åœ¨åå‘é”è¢«é»˜è®¤ç¦ç”¨ï¼Œåœ¨ä¸ä¹…çš„å°†æ¥å°†ä¼šå½»åº•åˆ é™¤ï¼Œå¯¹äº Java 15ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨</strong> -XX:+UseBiasedLocking</strong> å¯ç”¨åå‘é”å®šï¼Œä½†å®ƒä¼šæç¤º è¿™æ˜¯ä¸€ä¸ªå·²å¼ƒç”¨çš„ APIã€‚</p> 
<h3><a id="instanceof___2248"></a>instanceof ç±»å‹åŒ¹é… (äºŒæ¬¡é¢„è§ˆ)</h3> 
<p>instanceof ç±»å‹åŒ¹é…åœ¨ Java 14 ä¸­å·²ç»æ”¹è¿›ï¼Œè¿™æ¬¡ä»…ä»…å†æ¬¡é¢„è§ˆï¼Œæ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œç”¨äºæ¥å—æ›´å¤šçš„ä½¿ç”¨åé¦ˆã€‚è¿™ä¸ªç‰¹æ€§åœ¨ Java 16 ä¸­æˆä¸ºæ­£å¼ç‰¹æ€§ã€‚<br> åœ¨ä¹‹å‰ï¼Œä½¿ç”¨ instanceof è¿›è¡Œç±»å‹åˆ¤æ–­ä¹‹åï¼Œéœ€è¦è¿›è¡Œå¯¹è±¡ç±»å‹è½¬æ¢åæ‰èƒ½ä½¿ç”¨ã€‚</p> 
<h3><a id="ZGC__2251"></a>ZGC: å¯æ‰©å±•ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆæ­£å¼å‘å¸ƒï¼‰</h3> 
<p>ZGC åƒåœ¾æ”¶é›†å™¨åœ¨ Java 11 ä¸­è¢«å¼•å…¥ï¼Œä½†æ˜¯å› ä¸ºæ”¶é›†å™¨çš„å¤æ‚æ€§ï¼Œå½“åˆå†³å®šé€æ¸å¼•å…¥ã€‚ç„¶åä¸æ–­çš„å¬å–ç”¨æˆ·çš„åé¦ˆå»ºè®®ä¿®å¤é—®é¢˜ã€‚è€Œç°åœ¨ï¼Œå·²ç»å¾ˆä¹…æ²¡æœ‰æ”¶åˆ°ç”¨æˆ·çš„é—®é¢˜åé¦ˆäº†ï¼ŒZGC æ˜¯æ—¶å€™æŠ•å…¥æ­£å¼ä½¿ç”¨é˜¶æ®µäº†ã€‚æ‰€ä»¥åœ¨ Java 15 ä¸­ ZGC æ­£å¼å‘å¸ƒï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‚æ•°å¯ç”¨ ZGCã€‚</p> 
<pre><code class="prism language-java"> java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">UseZGC</span> className
</code></pre> 
<h3><a id="_2256"></a>æ–‡æœ¬å—</h3> 
<p>æ–‡æœ¬å—åœ¨ Java 12 <a href="https://openjdk.java.net/jeps/326" rel="nofollow">JEP 326 åŸå§‹å­—ç¬¦ä¸²æ–‡å­— (opens new window)</a>ä¸­å¼•å…¥ï¼Œ<br> åœ¨ Java 13 JEP 355ï¼š<a href="https://openjdk.java.net/jeps/355" rel="nofollow">æ–‡æœ¬å—ï¼ˆé¢„è§ˆï¼‰ (opens new window)</a>ä¸­å¼€å§‹é¢„è§ˆï¼Œ<br> åœ¨ Java 14 JEP 368ï¼š<a href="https://openjdk.java.net/jeps/368" rel="nofollow">æ–‡æœ¬å—ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰ (opens new window)</a>ï¼Œ<br> è€Œç°åœ¨ï¼Œåœ¨ Java 15 ï¼Œæ–‡æœ¬å—æ˜¯æ­£å¼çš„åŠŸèƒ½ç‰¹æ€§äº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token string">""</span>"
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"upperSummary"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\
            <span class="token string">"sensitiveTypeList"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token string">"gmtModified"</span><span class="token operator">:</span> <span class="token string">"2022-08-23\s10:50:09"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
         <span class="token string">""</span>"<span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h3><a id="Shenandoah__2272"></a>Shenandoah: ä½åœé¡¿æ—¶é—´çš„åƒåœ¾æ”¶é›†å™¨</h3> 
<p>Shenandoah åƒåœ¾æ”¶é›†å™¨åœ¨ Java 12 ä¸­å¼€å§‹å¼•å…¥ï¼ŒJava 15 ä¸­æˆä¸ºäº†æ­£å¼åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‚æ•°å¯ç”¨ Shenandoah åƒåœ¾æ”¶é›†å™¨ã€‚</p> 
<pre><code class="prism language-java">java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span><span class="token class-name">UseShenandoahGC</span>
</code></pre> 
<p>ä½†æ˜¯ openJDK 15 ä¸­é»˜è®¤æ˜¯æ²¡æœ‰ Shenandoah æ”¶é›†å™¨ï¼Œæƒ³è¦ä½¿ç”¨æ­¤åŠŸèƒ½å¯ä»¥ä¸‹è½½ <a href="https://adoptopenjdk.net/" rel="nofollow">AdoptOpenJDK (opens new window)</a>ã€‚</p> 
<blockquote> 
 <p>ä¸ºä»€ä¹ˆ openJDK ä¸­æ²¡æœ‰ Shenandoah åƒåœ¾æ”¶é›†å™¨ï¼Ÿ<br> Shenandoah æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€ä½æš‚åœæ—¶é—´çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå®ƒæ˜¯ Red Hat ä¸»å¯¼çš„é¡¹ç›®ã€‚å½“ Red Hat ç¬¬ä¸€æ¬¡æè®®å°† Shenandoah è´¡çŒ®ç»™ OpenJDK æ—¶ï¼ŒOracle æ˜ç¡®è¡¨ç¤ºä¸æƒ³æ”¯æŒå®ƒï¼ŒOpenJDK ä½œä¸ºä¸€ä¸ªå…è´¹è½¯ä»¶ï¼Œä¸æƒ³æ”¯æŒ Red Hat çš„ Shenandoah å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚<br> æœ€å Red Hat é€‰æ‹©å’Œ Oracle åˆä½œè®¾è®¡ä¸€ä¸ªçœŸæ­£å¹²å‡€çš„å¯æ’æ‹”åƒåœ¾æ”¶é›†å™¨æ¥å£ï¼Œå…è®¸ä»»ä½•äººè½»æ¾é€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä»¥åŒ…å«åœ¨ä»–ä»¬çš„æ„å»ºä¸­ã€‚æœ€ç»ˆ Shenandoah è¿›å…¥äº† JDK 12ï¼Œä½†æ˜¯æ²¡æœ‰æ„å»ºè¿› OpenJDKã€‚</p> 
</blockquote> 
<h3><a id="Records_2282"></a>Recordsï¼ˆäºŒæ¬¡é¢„è§ˆï¼‰</h3> 
<p>åœ¨ Java 14 ä¸­å¼•å…¥äº† Record ç±»ï¼ŒJava 15 ä¸­å¯¹ Record è¿›è¡Œäº†å¢å¼ºã€‚ä½¿å®ƒå¯ä»¥æ”¯æŒå¯†å°ç±»å‹ã€Record æ³¨è§£ä»¥åŠç›¸å…³çš„åå°„ API ç­‰ã€‚<br> ç¤ºä¾‹ï¼šRecord æ”¯æŒå¯†å°ï¼ˆsealedï¼‰ç±»å‹ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">interface</span> <span class="token class-name">DataBase</span> <span class="token keyword">permits</span> <span class="token class-name">DataBaseSelect</span><span class="token punctuation">,</span> <span class="token class-name">DataBaseUpdate</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token keyword">record</span> <span class="token class-name">DataBaseSelect</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Deprecated</span> <span class="token class-name">String</span> table<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">)</span> <span class="token keyword">implements</span> <span class="token class-name">DataBase</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token keyword">record</span> <span class="token class-name">DataBaseUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">implements</span> <span class="token class-name">DataBase</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åœ¨ java.lang.Class å¢åŠ äº†ä¸¤ä¸ªå…¬å…±æ–¹æ³•ç”¨äºè·å– Record ç±»ä¿¡æ¯ï¼š</p> 
<ol><li>RecordComponent[] getRecordComponents()</li><li>boolean isRecord()</li></ol> 
<h3><a id="_2299"></a>å…¶ä»–æ›´æ–°</h3> 
<ol><li>JEP 381ï¼šåˆ é™¤ Solaris å’Œ SPARC ç«¯å£</li></ol> 
<p>Java 14 JEP 362 (opens new window)å¼ƒç”¨äº† Solaris/SPARCã€Solaris/x64 å’Œ Linux/SPARC ç«¯å£ï¼Œç°åœ¨å®ƒåœ¨ Java 15 ä¸­è¢«æ­£å¼åˆ é™¤ã€‚</p> 
<ol start="2"><li>JEP 383ï¼šå¤–éƒ¨å†…å­˜è®¿é—® APIï¼ˆç¬¬äºŒä¸ªå­µåŒ–å™¨ï¼‰</li><li>JEP 385ï¼šåºŸå¼ƒ RMI æ¿€æ´»æœºåˆ¶</li></ol> 
<p>åªæ˜¯åºŸå¼ƒ RMI æ¿€æ´»æœºåˆ¶ï¼Œä¸å½±å“ RMI å…¶ä»–åŠŸèƒ½ã€‚</p> 
<h2><a id="h1_id16Java_16__2309"></a></h2> 
<h2 id="16">Java 16 æ–°ç‰¹æ€§</h2> 
<p>Java 16 åœ¨ 2021 å¹´ 3 æœˆ 16 æ—¥æ­£å¼å‘å¸ƒï¼Œåœ¨è¯­æ³•ä¸Šçš„æ–°ç‰¹æ€§æ›´æ–°æ¯”è¾ƒå¤šï¼Œä¸»è¦æ˜¯ä¸€äº›ä¹‹å‰ç‰ˆæœ¬å¼•å…¥çš„é¢„è§ˆç‰¹æ€§æ­£å¼å‘å¸ƒã€‚æ¯”å¦‚Java14ä¸­çš„æ‰“åŒ…å·¥å…·ã€instanceofã€Recordç±»ã€‚<br> Java 16 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/16all-relnotes.html" rel="nofollow">JDK 16 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="instanceof__2314"></a>instanceof æ¨¡å¼åŒ¹é…</h3> 
<p>æ”¹è¿› instanceof åœ¨ Java 14 ä¸­å·²ç»æå‡ºï¼Œåœ¨ Java 15 ä¸­ç»§ç»­é¢„è§ˆï¼Œè€Œç°åœ¨ï¼Œåœ¨ Java 16 ä¸­æˆä¸ºæ­£å¼åŠŸèƒ½ã€‚<br> åœ¨ä¹‹å‰ï¼Œä½¿ç”¨ instanceof éœ€è¦å¦‚ä¸‹æ“ä½œï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>    <span class="token comment">// grr...</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å¤šä½™çš„ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼Œè€Œç°åœ¨</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Let pattern matching do the work!</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Records_2330"></a>Records</h3> 
<p>Record æˆä¸º Java 16 çš„æ­£å¼åŠŸèƒ½ï¼Œä¸‹é¢æ˜¯ä»‹ç» Java 14 æ—¶å…³äº Record çš„ä»‹ç»ã€‚<br> record æ˜¯ä¸€ç§å…¨æ–°çš„ç±»å‹ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª final ç±»ï¼ŒåŒæ—¶æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯ final ä¿®é¥°ï¼Œå®ƒä¼šè‡ªåŠ¨ç¼–è¯‘å‡º public get hashcode ã€equalsã€toString ç­‰æ–¹æ³•ï¼Œå‡å°‘äº†ä»£ç ç¼–å†™é‡ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">Dog</span> dog1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"ç‰§ç¾ŠçŠ¬"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dog</span> dog2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"ç”°å›­çŠ¬"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dog</span> dog3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"å“ˆå£«å¥‡"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="Sealed_Classes_2341"></a>Sealed Classesï¼ˆå¯†å°ç±»ï¼‰é¢„è§ˆ</h3> 
<p>Sealed Classes å†æ¬¡é¢„è§ˆï¼Œåœ¨ Java 15 æ–°ç‰¹æ€§ä»‹ç»æ–‡ç« é‡Œå·²ç»ä»‹ç»è¿‡ç›¸å…³åŠŸèƒ½ï¼Œå¹¶ä¸”ç»™å‡ºäº†è¯¦ç»†çš„ä½¿ç”¨æ¼”ç¤ºï¼Œè¿™é‡Œä¸å†é‡å¤ä»‹ç»ã€‚<br> ä¸‹é¢æ˜¯ä¸€æ®µå¼•ç”¨ï¼š<br> æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ Java ä¸­å¦‚æœæƒ³è®©ä¸€ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿å’Œä¿®æ”¹ï¼Œè¿™æ—¶æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ final å…³é”®å­—å¯¹ç±»è¿›è¡Œä¿®é¥°ã€‚ä¸è¿‡è¿™ç§è¦ä¹ˆå¯ä»¥ç»§æ‰¿ï¼Œè¦ä¹ˆä¸èƒ½ç»§æ‰¿çš„æœºåˆ¶ä¸å¤Ÿçµæ´»ï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½æƒ³è®©æŸä¸ªç±»å¯ä»¥è¢«æŸäº›ç±»å‹ç»§æ‰¿ï¼Œä½†æ˜¯åˆä¸èƒ½éšæ„ç»§æ‰¿ï¼Œæ˜¯åšä¸åˆ°çš„ã€‚<strong>Java 15 å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº† sealed ç±»ï¼Œè¢« sealed ä¿®é¥°çš„ç±»å¯ä»¥æŒ‡å®šå­ç±»</strong>ã€‚è¿™æ ·è¿™ä¸ªç±»å°±åªèƒ½è¢«æŒ‡å®šçš„ç±»ç»§æ‰¿ã€‚<br> è€Œä¸” sealed ä¿®é¥°çš„ç±»çš„æœºåˆ¶å…·æœ‰ä¼ é€’æ€§ï¼Œå®ƒçš„å­ç±»å¿…é¡»ä½¿ç”¨æŒ‡å®šçš„å…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œä¸”åªèƒ½æ˜¯ <strong>finalã€sealedã€non-sealed</strong> ä¸‰è€…ä¹‹ä¸€ã€‚</p> 
<h2><a id="h1_id17Java_17__2346"></a></h2> 
<h2 id="17">Java 17 æ–°ç‰¹æ€§</h2> 
<p>Java 17 åœ¨ 2021 å¹´ 9 æœˆ 14 æ—¥æ­£å¼å‘å¸ƒï¼ŒJava 17 æ˜¯ä¸€ä¸ªé•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ã€‚æ¥çœ‹å‡ ä¸ªé‡è¦çš„ã€‚<br> Java 17 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/17-relnote-issues.html#NewFeature" rel="nofollow">JDK 17 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a><br> <img src="https://images2.imgbox.com/85/b7/0ODPfeug_o.png" alt="image.png"></p> 
<h3><a id="_2352"></a>æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰</h3> 
<p>æ—¢ç„¶æ˜¯æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼Œé‚£ä¹ˆè¯´æ˜åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰ï¼Œæ˜¯å§‹ç»ˆä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰çš„ã€‚å…¶å®åœ¨ Java SE 1.2 ä¹‹å‰ï¼Œæ‰€æœ‰çš„æµ®ç‚¹è®¡ç®—éƒ½æ˜¯ä¸¥æ ¼çš„ï¼Œä½†æ˜¯ä»¥å½“åˆçš„æƒ…å†µæ¥çœ‹ï¼Œè¿‡äºä¸¥æ ¼çš„æµ®ç‚¹è®¡ç®—åœ¨å½“åˆæµè¡Œçš„ x86 æ¶æ„å’Œ x87 æµ®ç‚¹åè®®å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œéœ€è¦å¤§é‡çš„é¢å¤–çš„æŒ‡ä»¤å¼€é”€ï¼Œæ‰€ä»¥åœ¨ Java SE 1.2 å¼€å§‹ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨å…³é”®å­— strictfpï¼ˆstrict float pointï¼‰ æ‰èƒ½å¯ç”¨ä¸¥æ ¼çš„æµ®ç‚¹è®¡ç®—ã€‚<br> ä½†æ˜¯åœ¨ 2021 å¹´çš„ä»Šå¤©ï¼Œç¡¬ä»¶æ—©å·²å‘ç”Ÿå·¨å˜ï¼Œå½“åˆçš„é—®é¢˜å·²ç»ä¸å­˜åœ¨äº†ï¼Œæ‰€ä»¥ä» Java 17 å¼€å§‹ï¼Œæ¢å¤äº†å§‹ç»ˆä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰è¿™ä¸€ç‰¹æ€§ã€‚<br> æ‰©å±•ï¼šstrictfp æ˜¯ Java ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œå¤§å¤šæ•°äººå¯èƒ½æ²¡æœ‰æ³¨æ„è¿‡å®ƒï¼Œå®ƒå¯ä»¥ç”¨åœ¨<strong>ç±»ã€æ¥å£æˆ–è€…æ–¹æ³•</strong>ä¸Šï¼Œè¢« strictfp ä¿®é¥°çš„éƒ¨åˆ†ä¸­çš„ float å’Œ double è¡¨è¾¾å¼ä¼šè¿›è¡Œä¸¥æ ¼æµ®ç‚¹è®¡ç®—ã€‚</p> 
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­çš„ testStrictfp() è¢« strictfp ä¿®é¥°ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">testStrictfp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">strictfp</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testStrictfp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">float</span> aFloat <span class="token operator">=</span> <span class="token number">0.6666666666666666666f</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> aDouble <span class="token operator">=</span> <span class="token number">0.88888888888888888d</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> sum <span class="token operator">=</span> aFloat <span class="token operator">+</span> aDouble<span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sum: "</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_2370"></a>å¢å¼ºçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</h3> 
<p>ä¸ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨ RPNGï¼ˆpseudorandom number generatorï¼‰å¢åŠ äº†æ–°çš„æ¥å£ç±»å‹å’Œå®ç°ï¼Œè®©åœ¨ä»£ç ä¸­ä½¿ç”¨å„ç§ PRNG ç®—æ³•å˜å¾—å®¹æ˜“è®¸å¤šã€‚<br> è¿™æ¬¡å¢åŠ äº† **RandomGenerator **æ¥å£ï¼Œä¸ºæ‰€æœ‰çš„ PRNG ç®—æ³•æä¾›ç»Ÿä¸€çš„ APIï¼Œå¹¶ä¸”å¯ä»¥è·å–ä¸åŒç±»å‹çš„ PRNG å¯¹è±¡æµã€‚åŒæ—¶ä¹Ÿæä¾›äº†ä¸€ä¸ªæ–°ç±» **RandomGeneratorFactory **ç”¨äºæ„é€ å„ç§ **RandomGenerator **å®ä¾‹ï¼Œåœ¨ **RandomGeneratorFactory **ä¸­ä½¿ç”¨ **ServiceLoader.provider **æ¥åŠ è½½å„ç§ PRNG å®ç°ã€‚<br> ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼šéšä¾¿é€‰æ‹©ä¸€ä¸ª PRNG ç®—æ³•ç”Ÿæˆ 5 ä¸ª 10 ä»¥å†…çš„éšæœºæ•°ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>random<span class="token punctuation">.</span></span><span class="token class-name">RandomGenerator</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>random<span class="token punctuation">.</span></span><span class="token class-name">RandomGeneratorFactory</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> JEP356 <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RandomGeneratorFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RandomGenerator</span><span class="token punctuation">&gt;</span></span> l128X256MixRandom <span class="token operator">=</span> <span class="token class-name">RandomGeneratorFactory</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"L128X256MixRandom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºéšæœºæ•°ç§å­</span>
        <span class="token class-name">RandomGenerator</span> randomGenerator <span class="token operator">=</span> l128X256MixRandom<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>randomGenerator<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java"><span class="token number">7</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">4</span>
<span class="token number">6</span>
</code></pre> 
<p>ä½ ä¹Ÿå¯ä»¥éå†å‡ºæ‰€æœ‰çš„ PRNG ç®—æ³•ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">RandomGeneratorFactory</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>factory <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>factory<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> factory<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¾“å‡ºï¼š</p> 
<pre><code class="prism language-java">LXM<span class="token operator">:</span><span class="token class-name">L32X64MixRandom</span>
LXM<span class="token operator">:</span><span class="token class-name">L128X128MixRandom</span>
LXM<span class="token operator">:</span><span class="token class-name">L64X128MixRandom</span>
<span class="token class-name">Legacy</span><span class="token operator">:</span><span class="token class-name">SecureRandom</span>
LXM<span class="token operator">:</span><span class="token class-name">L128X1024MixRandom</span>
LXM<span class="token operator">:</span><span class="token class-name">L64X128StarStarRandom</span>
<span class="token class-name">Xoshiro</span><span class="token operator">:</span><span class="token class-name">Xoshiro256PlusPlus</span>
LXM<span class="token operator">:</span><span class="token class-name">L64X256MixRandom</span>
<span class="token class-name">Legacy</span><span class="token operator">:</span><span class="token class-name">Random</span>
<span class="token class-name">Xoroshiro</span><span class="token operator">:</span><span class="token class-name">Xoroshiro128PlusPlus</span>
LXM<span class="token operator">:</span><span class="token class-name">L128X256MixRandom</span>
<span class="token class-name">Legacy</span><span class="token operator">:</span><span class="token class-name">SplittableRandom</span>
LXM<span class="token operator">:</span><span class="token class-name">L64X1024MixRandom</span>
</code></pre> 
<p>å¯ä»¥çœ‹åˆ° Legacy:Random ä¹Ÿåœ¨å…¶ä¸­ï¼Œæ–°çš„ API å…¼å®¹äº†è€çš„ Random æ–¹å¼ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ–°çš„ API è°ƒç”¨ Random ç±»ç”Ÿæˆéšæœºæ•°ã€‚</p> 
<pre><code class="prism language-java"><span class="token comment">// ä½¿ç”¨ Random</span>
<span class="token class-name">RandomGeneratorFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RandomGenerator</span><span class="token punctuation">&gt;</span></span> l128X256MixRandom <span class="token operator">=</span> <span class="token class-name">RandomGeneratorFactory</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Random"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºéšæœºæ•°ç§å­</span>
<span class="token class-name">RandomGenerator</span> randomGenerator <span class="token operator">=</span> l128X256MixRandom<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>randomGenerator<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_macOS__2433"></a>ä½¿ç”¨æ–°çš„ macOS æ¸²æŸ“åº“</h3> 
<p>macOS ä¸ºäº†æé«˜å›¾å½¢çš„æ¸²æŸ“æ€§èƒ½ï¼Œåœ¨ 2018 å¹´ 9 æœˆæŠ›å¼ƒäº†ä¹‹å‰çš„ OpenGL æ¸²æŸ“åº“ ï¼Œè€Œä½¿ç”¨äº† Apple Metal è¿›è¡Œä»£æ›¿ã€‚Java 17 è¿™æ¬¡æ›´æ–°å¼€å§‹æ”¯æŒ Apple Metalï¼Œä¸è¿‡å¯¹äº API æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œè¿™ä¸€äº›éƒ½æ˜¯å†…éƒ¨ä¿®æ”¹ã€‚</p> 
<h3><a id="_macOSAArch64__2435"></a>æ”¯æŒ macOS/AArch64 æ¶æ„</h3> 
<p>èµ·å› æ˜¯ Apple åœ¨ 2020 å¹´ 6 æœˆçš„ WWDC æ¼”è®²ä¸­å®£å¸ƒï¼Œå°†å¼€å¯ä¸€é¡¹é•¿æœŸçš„å°† Macintosh è®¡ç®—æœºç³»åˆ—ä» x64 è¿‡åº¦åˆ° AArch64 çš„é•¿æœŸè®¡åˆ’ï¼Œå› æ­¤éœ€è¦å°½å¿«çš„è®© JDK æ”¯æŒ macOS/AArch64 ã€‚<br> Linux ä¸Šçš„ AArch64 æ”¯æŒä»¥åŠåœ¨ Java 16 æ—¶å·²ç»æ”¯æŒã€‚</p> 
<h3><a id="_Applet_API_2438"></a>åˆ é™¤å·²å¼ƒç”¨çš„ Applet API</h3> 
<p>Applet æ˜¯ä½¿ç”¨ Java ç¼–å†™çš„å¯ä»¥åµŒå…¥åˆ° HTML ä¸­çš„å°åº”ç”¨ç¨‹åºï¼ŒåµŒå…¥æ–¹å¼æ˜¯é€šè¿‡æ™®é€šçš„ HTML æ ‡è®°è¯­æ³•ï¼Œç”±äºæ—©å·²è¿‡æ—¶ï¼Œå‡ ä¹æ²¡æœ‰åœºæ™¯åœ¨ä½¿ç”¨äº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>applet code<span class="token operator">=</span><span class="token string">"Hello.class"</span> height<span class="token operator">=</span><span class="token number">200</span> width<span class="token operator">=</span><span class="token number">200</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>applet<span class="token operator">&gt;</span>
</code></pre> 
<p>Applet API åœ¨ Java 9 æ—¶å·²ç»æ ‡è®°äº†åºŸå¼ƒï¼Œç°åœ¨ Java 17 ä¸­å°†å½»åº•åˆ é™¤ã€‚</p> 
<h3><a id="_JDK__2444"></a>æ›´å¼ºçš„ JDK å†…éƒ¨å°è£…</h3> 
<p>å¦‚ Java 16 çš„ JEP 396 ä¸­æè¿°çš„ä¸€æ ·ï¼Œä¸ºäº†æé«˜ JDK çš„å®‰å…¨æ€§ï¼Œä½¿ --illegal-access é€‰é¡¹çš„é»˜è®¤æ¨¡å¼ä»å…è®¸æ›´æ”¹ä¸ºæ‹’ç»ã€‚é€šè¿‡æ­¤æ›´æ”¹ï¼ŒJDK çš„å†…éƒ¨åŒ…å’Œ APIï¼ˆ<a href="https://openjdk.java.net/jeps/260#Description" rel="nofollow">å…³é”®å†…éƒ¨ API (opens new window)</a>é™¤å¤–ï¼‰å°†ä¸å†é»˜è®¤æ‰“å¼€ã€‚<br> ä½†æ˜¯åœ¨ Java 17 ä¸­ï¼Œé™¤äº† sun.misc.Unsafe ï¼Œä½¿ç”¨ --illegal-access å‘½ä»¤ä¹Ÿä¸èƒ½æ‰“å¼€ JDK å†…éƒ¨çš„å¼ºå°è£…æ¨¡å¼äº†ï¼Œé™¤äº† sun.misc.Unsafe API ã€‚<br> åœ¨ Java 17 ä¸­ä½¿ç”¨ --illegal-access é€‰é¡¹å°†ä¼šå¾—åˆ°ä¸€ä¸ªå‘½ä»¤å·²ç»ç§»é™¤çš„è­¦å‘Šã€‚</p> 
<pre><code class="prism language-java">âœ  bin <span class="token punctuation">.</span>/java <span class="token operator">-</span>version
openjdk version <span class="token string">"17"</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">14</span>
<span class="token class-name">OpenJDK</span> <span class="token class-name">Runtime</span> <span class="token class-name">Environment</span> <span class="token punctuation">(</span>build <span class="token number">17</span><span class="token operator">+</span><span class="token number">35</span><span class="token operator">-</span><span class="token number">2724</span><span class="token punctuation">)</span>
<span class="token class-name">OpenJDK</span> <span class="token number">64</span><span class="token operator">-</span><span class="token class-name">Bit</span> <span class="token class-name">Server</span> VM <span class="token punctuation">(</span>build <span class="token number">17</span><span class="token operator">+</span><span class="token number">35</span><span class="token operator">-</span><span class="token number">2724</span><span class="token punctuation">,</span> mixed mode<span class="token punctuation">,</span> sharing<span class="token punctuation">)</span>
âœ  bin <span class="token punctuation">.</span>/java <span class="token operator">--</span>illegal<span class="token operator">-</span>access<span class="token operator">=</span>warn
<span class="token class-name">OpenJDK</span> <span class="token number">64</span><span class="token operator">-</span><span class="token class-name">Bit</span> <span class="token class-name">Server</span> VM warning<span class="token operator">:</span> <span class="token class-name">Ignoring</span> option <span class="token operator">--</span>illegal<span class="token operator">-</span>access<span class="token operator">=</span>warn<span class="token punctuation">;</span> support was removed in <span class="token number">17.0</span>
</code></pre> 
<h3><a id="switch__2456"></a>switch çš„ç±»å‹åŒ¹é…ï¼ˆé¢„è§ˆï¼‰</h3> 
<p>å¦‚ instanceof ä¸€æ ·ï¼Œä¸º switch ä¹Ÿå¢åŠ äº†ç±»å‹åŒ¹é…è‡ªåŠ¨è½¬æ¢åŠŸèƒ½ã€‚<br> åœ¨ä¹‹å‰ï¼Œä½¿ç”¨ instanceof éœ€è¦å¦‚ä¸‹æ“ä½œï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>    <span class="token comment">// grr...</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å¤šä½™çš„ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼Œè€Œç°åœ¨ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Let pattern matching do the work!</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">formatterPatternSwitch</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token class-name">Integer</span> i <span class="token operator">-&gt;</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"int %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Long</span> l    <span class="token operator">-&gt;</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"long %d"</span><span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Double</span> d  <span class="token operator">-&gt;</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"double %f"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> s  <span class="token operator">-&gt;</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"String %s"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>        <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å¯¹<strong>null</strong>ä¹Ÿæœ‰æ–°çš„æ–¹å¼ï¼š</p> 
<pre><code class="prism language-java"><span class="token comment">// Java 17 ä¹‹å‰</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testFooBar</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"oops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">"Foo"</span><span class="token punctuation">,</span> <span class="token string">"Bar"</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Great"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>           <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Ok"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// Java 17</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testFooBar</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token keyword">null</span>         <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Oops"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"Foo"</span><span class="token punctuation">,</span> <span class="token string">"Bar"</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Great"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>           <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Ok"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_RMI_Activation_2506"></a>ç§»é™¤ RMI Activation</h3> 
<p>ç§»é™¤äº†åœ¨ JEP 385 ä¸­è¢«æ ‡è®°åºŸé™¤çš„ RMIï¼ˆRemote Method Invocationï¼‰Activationï¼Œä½†æ˜¯ RMI å…¶ä»–éƒ¨åˆ†ä¸ä¼šå—å½±å“ã€‚<br> RMI Activation åœ¨ Java 15 ä¸­çš„ JEP 385 å·²ç»è¢«æ ‡è®°ä¸ºè¿‡æ—¶åºŸå¼ƒï¼Œè‡³ä»Šæ²¡æœ‰æ”¶åˆ°ä¸è‰¯åé¦ˆï¼Œå› æ­¤å†³å®šåœ¨ Java 17 ä¸­æ­£å¼ç§»é™¤ã€‚</p> 
<h3><a id="Sealed_Classes_2509"></a>å¯†å°ç±»ï¼ˆSealed Classesï¼‰</h3> 
<p><strong>Sealed Classes</strong> åœ¨ Java 15 ä¸­çš„ JEP 360 ä¸­æå‡ºï¼Œåœ¨ Java 16 ä¸­çš„ JEP 397 å†æ¬¡é¢„è§ˆï¼Œç°åœ¨ Java 17 ä¸­æˆä¸ºæ­£å¼çš„åŠŸèƒ½ï¼Œç›¸æ¯” Java 16 å¹¶æ²¡æœ‰åŠŸèƒ½å˜åŒ–ï¼Œè¿™é‡Œä¸å†é‡å¤ä»‹ç»ï¼Œæƒ³äº†è§£çš„å¯ä»¥å‚è€ƒä¹‹å‰ç« èŠ‚ã€‚</p> 
<h3><a id="_AOT__JIT__2511"></a>ç§»é™¤å®éªŒæ€§çš„ AOT å’Œ JIT ç¼–è¯‘å™¨</h3> 
<p>åœ¨ Java 9 çš„ JEP 295 ä¸­ï¼Œå¼•å…¥äº†å®éªŒæ€§çš„æå‰ç¼–è¯‘ jaotc å·¥å…·ï¼Œä½†æ˜¯è¿™ä¸ªç‰¹æ€§è‡ªä»å¼•å…¥ä¾èµ–ç”¨å¤„éƒ½ä¸å¤ªå¤§ï¼Œè€Œä¸”éœ€è¦å¤§é‡çš„ç»´æŠ¤å·¥ä½œï¼Œæ‰€ä»¥åœ¨ Java 17 ä¸­å†³å®šåˆ é™¤è¿™ä¸ªç‰¹æ€§ã€‚</p> 
<p>ä¸»è¦ç§»é™¤äº†ä¸‰ä¸ª JDK æ¨¡å—ï¼š</p> 
<ul><li>jdk.aot - jaotc å·¥å…·ã€‚</li><li>Jdk.internal.vm.compiler - Graal ç¼–è¯‘å™¨ã€‚</li><li>jdk.internal.vm.compiler.management</li></ul> 
<p>åŒæ—¶ä¹Ÿç§»é™¤äº†éƒ¨åˆ†ä¸ AOT ç¼–è¯‘ç›¸å…³çš„ HotSpot ä»£ç ï¼š</p> 
<ul><li>src/hotspot/share/aot â€” dumps and loads AOT code</li><li>Additional code guarded by #if INCLUDE_AOT</li></ul> 
<h3><a id="_Security_Manager_2524"></a>å¼ƒç”¨ Security Manager</h3> 
<p><strong>Security Manager</strong> åœ¨ JDK 1.0 æ—¶å°±å·²ç»å¼•å…¥ï¼Œä½†æ˜¯å®ƒä¸€ç›´éƒ½ä¸æ˜¯ä¿æŠ¤æœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯ Java ä»£ç çš„ä¸»è¦æ‰‹æ®µï¼Œä¸ºäº† Java çš„ç»§ç»­å‘å±•ï¼Œå†³å®šå¼ƒç”¨ Security Managerï¼Œåœ¨ä¸ä¹…çš„æœªæ¥è¿›è¡Œåˆ é™¤ã€‚</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Deprecated</span><span class="token punctuation">(</span>since<span class="token operator">=</span><span class="token string">"17"</span><span class="token punctuation">,</span> forRemoval<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityManager</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_API__2532"></a>å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ API ï¼ˆå­µåŒ–ï¼‰</h3> 
<p>æ–°çš„ API å…è®¸ Java å¼€å‘è€…ä¸ JVM ä¹‹å¤–çš„ä»£ç å’Œæ•°æ®è¿›è¡Œäº¤äº’ï¼Œé€šè¿‡è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼Œå¯ä»¥åœ¨ä¸ä½¿ç”¨ JNI çš„æƒ…å†µä¸‹è°ƒç”¨æœ¬åœ°åº“ã€‚<br> <em>è¿™æ˜¯ä¸€ä¸ªå­µåŒ–åŠŸèƒ½ï¼›éœ€è¦æ·»åŠ  --add-modules jdk.incubator.foreign æ¥ç¼–è¯‘å’Œè¿è¡Œ Java ä»£ç ã€‚</em></p> 
<ul><li>Java 14 <a href="https://openjdk.java.net/jeps/370" rel="nofollow">JEP 370 (opens new window)</a>å¼•å…¥äº†å¤–éƒ¨å†…å­˜è®¿é—® APIï¼ˆå­µåŒ–å™¨ï¼‰</li><li>Java 15 <a href="https://openjdk.java.net/jeps/383" rel="nofollow">JEP 383 (opens new window)</a>å¼•å…¥äº†å¤–éƒ¨å†…å­˜è®¿é—® APIï¼ˆç¬¬äºŒå­µåŒ–å™¨ï¼‰</li><li>Java 16 <a href="https://openjdk.java.net/jeps/389" rel="nofollow">JEP 389 (opens new window)</a>å¼•å…¥äº†å¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆå­µåŒ–å™¨ï¼‰</li><li>Java 16 <a href="https://openjdk.java.net/jeps/393" rel="nofollow">JEP 393 (opens new window)</a>å¼•å…¥äº†å¤–éƒ¨å†…å­˜è®¿é—® APIï¼ˆç¬¬ä¸‰å­µåŒ–å™¨ï¼‰</li><li>Java 17 <a href="https://openjdk.java.net/jeps/412" rel="nofollow">JEP 412 (opens new window)</a>å¼•å…¥äº†å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ APIï¼ˆå­µåŒ–å™¨ï¼‰</li></ul> 
<h3><a id="Vector_API_2541"></a>Vector APIï¼ˆäºŒæ¬¡å­µåŒ–ï¼‰</h3> 
<p>åœ¨ Java 16 ä¸­å¼•å…¥ä¸€ä¸ªæ–°çš„ API æ¥è¿›è¡Œå‘é‡è®¡ç®—ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶å¯é çš„ç¼–è¯‘ä¸ºæ”¯æŒçš„ CPU æ¶æ„ï¼Œä»è€Œå®ç°æ›´ä¼˜çš„è®¡ç®—èƒ½åŠ›ã€‚<br> ç°åœ¨ Java 17 ä¸­æ”¹è¿›äº† Vector API æ€§èƒ½ï¼Œå¢å¼ºäº†ä¾‹å¦‚å¯¹å­—ç¬¦çš„æ“ä½œã€å­—èŠ‚å‘é‡ä¸å¸ƒå°”æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢ç­‰åŠŸèƒ½ã€‚</p> 
<h3><a id="_2544"></a>æŒ‡å®šä¸Šä¸‹æ–‡çš„ååºåˆ—åŒ–è¿‡æ»¤å™¨</h3> 
<p>Java ä¸­çš„åºåˆ—åŒ–ä¸€ç›´éƒ½æ˜¯éå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå¦‚æœæ²¡æœ‰åºåˆ—åŒ–åŠŸèƒ½ï¼ŒJava å¯èƒ½éƒ½ä¸ä¼šå æ®å¼€å‘è¯­è¨€çš„ä¸»å¯¼åœ°ä½ï¼Œåºåˆ—åŒ–è®©è¿œç¨‹å¤„ç†å˜å¾—å®¹æ˜“å’Œé€æ˜ï¼ŒåŒæ—¶ä¹Ÿä¿ƒè¿›äº† Java EE çš„æˆåŠŸã€‚<br> ä½†æ˜¯ Java åºåˆ—åŒ–çš„é—®é¢˜ä¹Ÿå¾ˆå¤šï¼Œå®ƒå‡ ä¹ä¼šçŠ¯ä¸‹æ‰€æœ‰çš„å¯ä»¥æƒ³è±¡çš„é”™è¯¯ï¼Œä¸ºå¼€å‘è€…å¸¦æ¥æŒç»­çš„ç»´æŠ¤å·¥ä½œã€‚ä½†æ˜¯è¦è¯´æ˜çš„æ˜¯åºåˆ—åŒ–çš„æ¦‚å¿µæ˜¯æ²¡æœ‰é”™çš„ï¼ŒæŠŠå¯¹è±¡è½¬æ¢ä¸ºå¯ä»¥åœ¨ JVM ä¹‹é—´è‡ªç”±ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¦ä¸€ç«¯é‡æ–°æ„å»ºçš„èƒ½åŠ›æ˜¯å®Œå…¨åˆç†çš„æƒ³æ³•ï¼Œé—®é¢˜åœ¨äº Java ä¸­çš„åºåˆ—åŒ–è®¾è®¡å­˜åœ¨é£é™©ï¼Œä»¥è‡³äºçˆ†å‡ºè¿‡å¾ˆå¤šå’Œåºåˆ—åŒ–ç›¸å…³çš„æ¼æ´ã€‚<br> ååºåˆ—åŒ–å±é™©çš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸å¥½éªŒè¯å°†è¦è¿›è¡Œååºåˆ—åŒ–çš„å†…å®¹æ˜¯å¦å­˜åœ¨é£é™©ï¼Œè€Œä¼ å…¥çš„æ•°æ®æµå¯ä»¥è‡ªç”±å¼•ç”¨å¯¹è±¡ï¼Œå¾ˆæœ‰å¯èƒ½è¿™ä¸ªæ•°æ®æµå°±æ˜¯æ”»å‡»è€…ç²¾å¿ƒæ„é€ çš„æ¶æ„ä»£ç ã€‚<br> æ‰€ä»¥ï¼ŒJEP 415 å…è®¸åœ¨ååºåˆ—åŒ–æ—¶ï¼Œé€šè¿‡ä¸€ä¸ªè¿‡æ»¤é…ç½®ï¼Œæ¥å‘ŠçŸ¥æœ¬æ¬¡ååºåˆ—åŒ–å…è®¸æˆ–è€…ç¦æ­¢æ“ä½œçš„ç±»ï¼Œååºåˆ—åŒ–æ—¶ç¢°åˆ°è¢«ç¦æ­¢çš„ç±»ï¼Œåˆ™ä¼šååºåˆ—åŒ–å¤±è´¥ã€‚</p> 
<blockquote> 
 <p>æ‰©å±•é˜…è¯»ï¼š<a href="https://openjdk.org/jeps/415" rel="nofollow">https://openjdk.org/jeps/415</a></p> 
</blockquote> 
<h2><a id="h1_id18Java_18__2552"></a></h2> 
<h2 id="18">Java 18 æ–°ç‰¹æ€§</h2> 
<p>Java 18 åœ¨ 2022 å¹´ 3 æœˆ 22 æ—¥æ­£å¼å‘å¸ƒï¼ŒJava 18 ä¸æ˜¯ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œè¿™æ¬¡æ›´æ–°å…±å¸¦æ¥ 9 ä¸ªæ–°åŠŸèƒ½ã€‚<br> Java 18 å…¨éƒ¨çš„æ–°ç‰¹æ€§ï¼Œè¯·çœ‹å®˜ç½‘ï¼š<a href="https://www.oracle.com/java/technologies/javase/18-relnote-issues.html#NewFeature" rel="nofollow">JDK 18 å‘è¡Œè¯´æ˜</a><br> Javaå„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å…¥å£ï¼š<a href="https://docs.oracle.com/en/java/javase/index.html" rel="nofollow">Javaå¹³å°ï¼Œæ ‡å‡†ç‰ˆæ–‡æ¡£</a><br> Javaå„ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://jdk.java.net/archive/" rel="nofollow">https://jdk.java.net/archive/</a></p> 
<h3><a id="UTF8_2557"></a>é»˜è®¤UTF-8å­—ç¬¦ç¼–ç </h3> 
<p>JDK ä¸€ç›´éƒ½æ˜¯æ”¯æŒ UTF-8 å­—ç¬¦ç¼–ç ï¼Œè¿™æ¬¡æ˜¯æŠŠ UTF-8 è®¾ç½®ä¸ºäº†é»˜è®¤ç¼–ç ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸åŠ ä»»ä½•æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ‰€æœ‰éœ€è¦ç”¨åˆ°ç¼–ç çš„ JDK APIéƒ½ä½¿ç”¨ UTF-8 ç¼–ç ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å› ä¸ºä¸åŒç³»ç»Ÿï¼Œä¸åŒåœ°åŒºï¼Œä¸åŒç¯å¢ƒä¹‹é—´äº§ç”Ÿçš„ç¼–ç é—®é¢˜ã€‚<br> ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥è¾“å‡º JDK çš„å½“å‰ç¼–ç ã€‚</p> 
<pre><code class="prism language-java"># <span class="token class-name">Mac</span> ç³»ç»Ÿï¼Œé»˜è®¤ UTF<span class="token operator">-</span><span class="token number">8</span>
âœ  <span class="token operator">~</span> java <span class="token operator">-</span><span class="token class-name">XshowSettings</span><span class="token operator">:</span>properties <span class="token operator">-</span>version <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">1</span> <span class="token operator">|</span> grep file<span class="token punctuation">.</span>encoding
    file<span class="token punctuation">.</span>encoding <span class="token operator">=</span> UTF<span class="token operator">-</span><span class="token number">8</span>
    file<span class="token punctuation">.</span>encoding<span class="token punctuation">.</span>pkg <span class="token operator">=</span> sun<span class="token punctuation">.</span>io
âœ  <span class="token operator">~</span>
</code></pre> 
<h3><a id="_Web__2567"></a>ç®€å•çš„ Web æœåŠ¡å™¨</h3> 
<p>åœ¨ Java 18 ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªæ–°å‘½ä»¤ jwebserverï¼Œè¿è¡Œè¿™ä¸ªå‘½ä»¤å¯ä»¥å¯åŠ¨ä¸€ä¸ªç®€å•çš„ ã€æœ€å°åŒ–çš„é™æ€ Web æœåŠ¡å™¨ï¼Œå®ƒä¸æ”¯æŒ CGI å’Œ Servletï¼Œæ‰€ä»¥æœ€å¥½çš„ä½¿ç”¨åœºæ™¯æ˜¯ç”¨æ¥æµ‹è¯•ã€æ•™è‚²ã€æ¼”ç¤ºç­‰éœ€æ±‚ã€‚<br> å…¶å®åœ¨å¦‚ Pythonã€Rubyã€PHPã€Erlang ç­‰è®¸å¤šå¹³å°éƒ½æä¾›äº†å¼€ç®±å³ç”¨çš„ Web æœåŠ¡å™¨ï¼Œå¯è§ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼ŒJava ä¸€ç›´æ²¡æœ‰è¿™æ–¹é¢çš„æ”¯æŒï¼Œç°åœ¨å¯ä»¥äº†ã€‚<br> åœ¨ Java 18 ä¸­ï¼Œä½¿ç”¨ jwebserver å¯åŠ¨ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œé»˜è®¤å‘å¸ƒçš„æ˜¯å½“å‰ç›®å½•ã€‚</p> 
<p>åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªç½‘é¡µæ–‡ä»¶ index.html</p> 
<pre><code class="prism language-java"><span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
<span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"Content-Type"</span> content<span class="token operator">=</span><span class="token string">"text/html; charset=utf-8"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">&gt;</span></span>CSDN<span class="token operator">-</span>é˜¿æè¯´è¯´<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> 
<p>å¯åŠ¨ jwebserver</p> 
<pre><code class="prism language-java"><span class="token class-name">Binding</span> <span class="token keyword">to</span> <span class="token namespace">loopback</span> by <span class="token class-name"><span class="token namespace">default<span class="token punctuation">.</span></span> For</span> all interfaces use <span class="token string">"-b 0.0.0.0"</span> or <span class="token string">"-b ::"</span><span class="token punctuation">.</span>
<span class="token class-name">Serving</span> <span class="token class-name">D</span><span class="token operator">:</span>\javaprojects\java18<span class="token operator">-</span>example\src\test\java\other and subdirectories on
 <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> port <span class="token number">8000</span>
URL http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8000</span><span class="token operator">/</span>
</code></pre> 
<p>é€šè¿‡ help å‚æ•°å¯ä»¥æŸ¥çœ‹ jwebserver æ”¯æŒçš„å‚æ•°ã€‚</p> 
<pre><code class="prism language-java">âœ  bin <span class="token punctuation">.</span>/jwebserver <span class="token operator">--</span>help
<span class="token class-name">Usage</span><span class="token operator">:</span> jwebserver <span class="token punctuation">[</span><span class="token operator">-</span>b bind address<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>p port<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>d directory<span class="token punctuation">]</span>
                  <span class="token punctuation">[</span><span class="token operator">-</span>o none<span class="token operator">|</span>info<span class="token operator">|</span>verbose<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>h <span class="token keyword">to</span> <span class="token namespace">show</span> options<span class="token punctuation">]</span>
                  <span class="token punctuation">[</span><span class="token operator">-</span>version <span class="token keyword">to</span> <span class="token namespace">show</span> version information<span class="token punctuation">]</span>
<span class="token class-name">Options</span><span class="token operator">:</span>
<span class="token operator">-</span>b<span class="token punctuation">,</span> <span class="token operator">--</span>bind<span class="token operator">-</span>address    <span class="token operator">-</span> ç»‘å®šåœ°å€<span class="token punctuation">.</span> <span class="token class-name">Default</span><span class="token operator">:</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token punctuation">(</span>loopback<span class="token punctuation">)</span><span class="token punctuation">.</span>
                        <span class="token class-name">For</span> all interfaces use <span class="token string">"-b 0.0.0.0"</span> or <span class="token string">"-b ::"</span><span class="token punctuation">.</span>
<span class="token operator">-</span>d<span class="token punctuation">,</span> <span class="token operator">--</span>directory       <span class="token operator">-</span> æŒ‡å®šç›®å½•<span class="token punctuation">.</span> <span class="token class-name">Default</span><span class="token operator">:</span> current directory<span class="token punctuation">.</span>
<span class="token operator">-</span>o<span class="token punctuation">,</span> <span class="token operator">--</span>output          <span class="token operator">-</span> <span class="token class-name">Output</span> format<span class="token punctuation">.</span> none<span class="token operator">|</span>info<span class="token operator">|</span><span class="token class-name"><span class="token namespace">verbose<span class="token punctuation">.</span></span> Default</span><span class="token operator">:</span> info<span class="token punctuation">.</span>
<span class="token operator">-</span>p<span class="token punctuation">,</span> <span class="token operator">--</span>port            <span class="token operator">-</span> ç»‘å®šç«¯å£<span class="token punctuation">.</span> <span class="token class-name">Default</span><span class="token operator">:</span> <span class="token number">8000.</span>
<span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">--</span>help        <span class="token operator">-</span> <span class="token class-name">Prints</span> <span class="token keyword">this</span> help message and exits<span class="token punctuation">.</span>
<span class="token operator">-</span>version<span class="token punctuation">,</span> <span class="token operator">--</span>version   <span class="token operator">-</span> <span class="token class-name">Prints</span> version information and <span class="token class-name"><span class="token namespace">exits<span class="token punctuation">.</span></span>
To</span> stop the server<span class="token punctuation">,</span> press <span class="token class-name">Ctrl</span> <span class="token operator">+</span> <span class="token class-name">C</span><span class="token punctuation">.</span>
</code></pre> 
<h3><a id="Javadoc__2606"></a>Javadoc ä¸­æ”¯æŒä»£ç ç‰‡æ®µ</h3> 
<p>åœ¨ Java 18 ä¹‹å‰ï¼Œå·²ç»æ”¯æŒåœ¨ Javadoc ä¸­å¼•å…¥ä»£ç ç‰‡æ®µï¼Œè¿™æ ·å¯ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹æ›´å¥½çš„å±•ç¤ºæè¿°ä¿¡æ¯ï¼Œä½†æ˜¯ä¹‹å‰çš„æ”¯æŒåŠŸèƒ½æœ‰é™ï¼Œæ¯”å¦‚æˆ‘æƒ³é«˜äº®ä»£ç ç‰‡æ®µä¸­çš„æŸä¸€æ®µä»£ç æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚ç°åœ¨ Java 18 ä¼˜åŒ–äº†è¿™ä¸ªé—®é¢˜ï¼Œå¢åŠ äº† <strong>@snippet</strong> æ¥å¼•å…¥æ›´é«˜çº§çš„ä»£ç ç‰‡æ®µã€‚<br> åœ¨ Java 18 ä¹‹å‰ï¼Œä½¿ç”¨ </p> 
<pre>{@code â€¦}</pre> æ¥å¼•å…¥ä»£ç ç‰‡æ®µã€‚ 
<p></p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * åœ¨ Java 18 ä¹‹åå¯ä»¥ä½¿ç”¨æ–°çš„æ–¹å¼
 * ä¸‹é¢çš„ä»£ç æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ {@code Optional.isPresent}:
 * {@snippet :
 * if (v.isPresent()) {
 *     System.out.println("v: " + v.get());
 * }
 * }
 *
 * é«˜äº®æ˜¾ç¤º println
 *
 * {@snippet :
 * class HelloWorld {
 *     public static void main(String... args) {
 *         System.out.println("Hello World!");      // @highlight substring="println"
 *     }
 * }
 * }
 *
 */</span>
</code></pre> 
<p>æ˜¾ç¤ºæ•ˆæœï¼š<br> <img src="https://images2.imgbox.com/1b/58/iT6VKqyN_o.png" alt="image.png"></p> 
<h3><a id="_2634"></a>ä½¿ç”¨æ–¹æ³•å¥æŸ„é‡æ–°å®ç°åå°„æ ¸å¿ƒåŠŸèƒ½</h3> 
<p>Java 18 æ”¹è¿›äº†** java.lang.reflect.Method**ã€**Constructor **çš„å®ç°é€»è¾‘ï¼Œä½¿ä¹‹æ€§èƒ½æ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ã€‚è¿™é¡¹æ”¹åŠ¨ä¸ä¼šæ”¹åŠ¨ç›¸å…³ API ï¼Œè¿™æ„å‘³ç€å¼€å‘ä¸­ä¸éœ€è¦æ”¹åŠ¨åå°„ç›¸å…³ä»£ç ï¼Œå°±å¯ä»¥ä½“éªŒåˆ°æ€§èƒ½æ›´å¥½åå°„ã€‚<br> OpenJDK å®˜æ–¹ç»™å‡ºäº†æ–°è€å®ç°çš„åå°„æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœã€‚<br> Java 18 ä¹‹å‰ï¼š</p> 
<pre><code class="prism language-java"><span class="token class-name">Benchmark</span>                                     <span class="token class-name">Mode</span>  <span class="token class-name">Cnt</span>   <span class="token class-name">Score</span>  <span class="token class-name">Error</span>  <span class="token class-name">Units</span>
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>constructorConst     avgt   <span class="token number">10</span>  <span class="token number">68.049</span> Â± <span class="token number">0.872</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>constructorPoly      avgt   <span class="token number">10</span>  <span class="token number">94.132</span> Â± <span class="token number">1.805</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>constructorVar       avgt   <span class="token number">10</span>  <span class="token number">64.543</span> Â± <span class="token number">0.799</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceFieldConst   avgt   <span class="token number">10</span>  <span class="token number">35.361</span> Â± <span class="token number">0.492</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceFieldPoly    avgt   <span class="token number">10</span>  <span class="token number">67.089</span> Â± <span class="token number">3.288</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceFieldVar     avgt   <span class="token number">10</span>  <span class="token number">35.745</span> Â± <span class="token number">0.554</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceMethodConst  avgt   <span class="token number">10</span>  <span class="token number">77.925</span> Â± <span class="token number">2.026</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceMethodPoly   avgt   <span class="token number">10</span>  <span class="token number">96.094</span> Â± <span class="token number">2.269</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceMethodVar    avgt   <span class="token number">10</span>  <span class="token number">80.002</span> Â± <span class="token number">4.267</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticFieldConst     avgt   <span class="token number">10</span>  <span class="token number">33.442</span> Â± <span class="token number">2.659</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticFieldPoly      avgt   <span class="token number">10</span>  <span class="token number">51.918</span> Â± <span class="token number">1.522</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticFieldVar       avgt   <span class="token number">10</span>  <span class="token number">33.967</span> Â± <span class="token number">0.451</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticMethodConst    avgt   <span class="token number">10</span>  <span class="token number">75.380</span> Â± <span class="token number">1.660</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticMethodPoly     avgt   <span class="token number">10</span>  <span class="token number">93.553</span> Â± <span class="token number">1.037</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticMethodVar      avgt   <span class="token number">10</span>  <span class="token number">76.728</span> Â± <span class="token number">1.614</span>  ns<span class="token operator">/</span>op
</code></pre> 
<p>Java 18 çš„æ–°å®ç°:</p> 
<pre><code class="prism language-java"><span class="token class-name">Benchmark</span>                                     <span class="token class-name">Mode</span>  <span class="token class-name">Cnt</span>    <span class="token class-name">Score</span>   <span class="token class-name">Error</span>  <span class="token class-name">Units</span>
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>constructorConst     avgt   <span class="token number">10</span>   <span class="token number">32.392</span> Â± <span class="token number">0.473</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>constructorPoly      avgt   <span class="token number">10</span>  <span class="token number">113.947</span> Â± <span class="token number">1.205</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>constructorVar       avgt   <span class="token number">10</span>   <span class="token number">76.885</span> Â± <span class="token number">1.128</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceFieldConst   avgt   <span class="token number">10</span>   <span class="token number">18.569</span> Â± <span class="token number">0.161</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceFieldPoly    avgt   <span class="token number">10</span>   <span class="token number">98.671</span> Â± <span class="token number">2.015</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceFieldVar     avgt   <span class="token number">10</span>   <span class="token number">54.193</span> Â± <span class="token number">3.510</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceMethodConst  avgt   <span class="token number">10</span>   <span class="token number">33.421</span> Â± <span class="token number">0.406</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceMethodPoly   avgt   <span class="token number">10</span>  <span class="token number">109.129</span> Â± <span class="token number">1.959</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>instanceMethodVar    avgt   <span class="token number">10</span>   <span class="token number">90.420</span> Â± <span class="token number">2.187</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticFieldConst     avgt   <span class="token number">10</span>   <span class="token number">19.080</span> Â± <span class="token number">0.179</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticFieldPoly      avgt   <span class="token number">10</span>   <span class="token number">92.130</span> Â± <span class="token number">2.729</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticFieldVar       avgt   <span class="token number">10</span>   <span class="token number">53.899</span> Â± <span class="token number">1.051</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticMethodConst    avgt   <span class="token number">10</span>   <span class="token number">35.907</span> Â± <span class="token number">0.456</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticMethodPoly     avgt   <span class="token number">10</span>  <span class="token number">102.895</span> Â± <span class="token number">1.604</span>  ns<span class="token operator">/</span>op
<span class="token class-name">ReflectionSpeedBenchmark</span><span class="token punctuation">.</span>staticMethodVar      avgt   <span class="token number">10</span>   <span class="token number">82.123</span> Â± <span class="token number">0.629</span>  ns<span class="token operator">/</span>op
</code></pre> 
<h3><a id="Vector_API_2675"></a>Vector APIï¼ˆä¸‰æ¬¡å­µåŒ–ï¼‰</h3> 
<p>åœ¨ Java 16 ä¸­å¼•å…¥ä¸€ä¸ªæ–°çš„ API æ¥è¿›è¡Œå‘é‡è®¡ç®—ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶å¯é çš„ç¼–è¯‘ä¸ºæ”¯æŒçš„ CPU æ¶æ„ï¼Œä»è€Œå®ç°æ›´ä¼˜çš„è®¡ç®—èƒ½åŠ›ã€‚<br> åœ¨ Java 17 ä¸­æ”¹è¿›äº† Vector API æ€§èƒ½ï¼Œå¢å¼ºäº†ä¾‹å¦‚å¯¹å­—ç¬¦çš„æ“ä½œã€å­—èŠ‚å‘é‡ä¸å¸ƒå°”æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢ç­‰åŠŸèƒ½ã€‚<br> ç°åœ¨åœ¨ JDK 18 ä¸­å°†ç»§ç»­ä¼˜åŒ–å…¶æ€§èƒ½ã€‚</p> 
<h3><a id="_SPI_2679"></a>äº’è”ç½‘åœ°å€è§£æ SPI</h3> 
<p>å¯¹äºäº’è”ç½‘åœ°å€è§£æ SPIï¼Œä¸ºä¸»æœºåœ°å€å’ŒåŸŸååœ°å€è§£æå®šä¹‰ä¸€ä¸ª SPIï¼Œä»¥ä¾¿ java.net.InetAddress å¯ä»¥ä½¿ç”¨å¹³å°å†…ç½®è§£æå™¨ä»¥å¤–çš„è§£æå™¨ã€‚</p> 
<pre><code class="prism language-java"><span class="token class-name">InetAddress</span> inetAddress <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"www.csdn.net"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>inetAddress<span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//39.106.226.142</span>
</code></pre> 
<h3><a id="_2687"></a>å…¶ä»–æ›´æ–°</h3> 
<ol><li>JEP 419 <a href="https://openjdk.java.net/jeps/419" rel="nofollow">Foreign Function &amp; Memory API (äºŒæ¬¡å­µåŒ–)(opens new window)</a></li><li>JEP 420 <a href="https://openjdk.java.net/jeps/420" rel="nofollow">switch æ¨¡å¼åŒ¹é…ï¼ˆäºŒæ¬¡é¢„è§ˆï¼‰(opens new window)</a></li><li>JEP 421 <a href="https://openjdk.java.net/jeps/421" rel="nofollow">å¼ƒç”¨å®Œæˆåˆ é™¤(opens new window)</a></li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/31e9fa595afad5b907e7ead5f293f7e2/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">åˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€è¯­ä¹‰åˆ†å‰²ã€å®ä¾‹åˆ†å‰²çš„åŒºåˆ«ã€æ¬è¿ã€‘</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af6efcc7de830bc386cfed2101743ca6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°uni-appé…ç½®ext.json</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹çˆ±å¥½è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>