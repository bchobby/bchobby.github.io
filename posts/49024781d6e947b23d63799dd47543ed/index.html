<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>unity面试八股文 - 框架设计与资源管理 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="unity面试八股文 - 框架设计与资源管理" />
<meta property="og:description" content="Unity项目框架是如何设计的？有哪些原则 在设计Unity项目框架时，通常会遵循一些基本的原则和步骤。以下是主要的一些原则：
模块化：每个功能都应该被作为一个独立的模块来处理，这样可以方便修改和维护。
低耦合：不同模块之间应尽可能减少直接交互，使用事件或者接口等方式进行通信。
高内聚：每个模块应尽量只做一件事情，并且做好它。
可扩展性：设计框架时要考虑到未来可能需要添加或者修改功能的需求，所以需要有良好的扩展性。
可维护性：代码结构清晰、注释充分、命名规范等都能提高代码的可读性和维护性。
以下是一个简单的Unity项目框架设计流程：
确定游戏类型和核心玩法。
根据需求分析出需要哪些系统（比如角色系统、战斗系统、UI系统等）。
为每个系统创建相应的目录，并在目录下创建对应类文件。
设计各个类之间关系，如何交互和通信。
编写具体实现代码，并进行测试优化。
资源管理是如何做的，如何更新与打空包 在Unity中，资源管理是一个非常重要的部分。
基本步骤和原则：
资源分类：根据资源类型（如场景、音频、模型、贴图等）进行分类存放，有利于维护和查找。
使用AssetBundle：AssetBundle是Unity用于实现动态加载和更新的一种方式。你可以将游戏中的各种资源打包成AssetBundle，然后在运行时动态加载。
优化内存使用：尽量避免不必要的内存占用。比如对于不再使用的资源，应该及时销毁或者卸载。
版本控制：对项目中所有重要文件进行版本控制，以便追踪每个文件的修改历史，并在需要时回滚到之前的版本。
关于更新与打空包：
在Unity中，你可以通过构建AssetBundle来实现热更新。当有新内容需要添加或者旧内容需要修改时，只需构建出相应的AssetBundle并上传到服务器即可。客户端在启动游戏时检测到新版本后会自动下载并加载新版AssetBundles。
打空包通常指生成一个不含任何内容（或只含极少必须内容）但结构完整可运行且能从服务器下载更新数据包填充自身内容以达到完全功能状态游戏安装包，在移动平台上这样做可以显著减小安装包大小以提高用户体验。
注意这里所说“空”并非真正意义上无任何东西而是相较完全版来说去除了大部分非必须启动项而言。“空”的定义因项目需求可能会有所变化。
具体操作过程可能涉及多个环节如服务器配置、客户端代码编写等，请根据具体需求设定合适流程。
资源管理的平台，版本，渠道是如何管理的 在Unity中，资源管理的平台、版本和渠道通常需要通过一些特定的工具和策略来进行管理。以下是一些基本的方法：
平台管理： Unity提供了跨平台发布功能，可以方便地将游戏发布到不同的平台上。在项目设置中，你可以选择目标平台，并对该平台进行特定的优化设置。
同时，在代码中也可以使用预处理指令（如#if UNITY_ANDROID, #if UNITY_IOS等）来编写针对不同平台的代码。
版本管理： 版本控制系统（如Git、SVN等）是用于跟踪文件变更历史以及协同开发非常重要的工具。每次提交都会记录下当前所有文件状态，当需要时还能回滚到之前任意一个提交状态。
除此之外，Unity内部也有一个简单版控制系统——Asset Serialization模式。它允许你以文本或二进制格式保存场景和预设体等资源，并且支持多人同时编辑一个场景。
渠道管理： 对于渠道管理，你可能需要构建不同版本的应用以适配各个发行渠道（如Google Play Store, App Store, Steam等）。这可能涉及改变游戏内购买系统、广告SDK或者其他第三方插件配置等内容。
此外，在打包时候添加相应标识符区分不同渠道包也是常见做法。例如通过Scripting Define Symbols定义预处理指令区分各个市场版本，在编译时动态改变某些代码执行流程。
以上就是在Unity中进行资源管理相关操作所采取方法概述，请根据实际项目需求选择合适方式。
项目框架是如何让美术，策划，程序愉快的工作的 在一个项目中，美术、策划和程序员都有各自的专业领域和任务，而一个良好的项目框架应该能够让他们愉快地一起工作。以下是一些实现这个目标的方法：
明确角色与职责：每个团队成员都应清楚自己的角色和职责。这样可以防止工作重叠或者遗漏，并且让每个人都知道他们需要完成什么。
良好的沟通：团队成员之间需要保持开放、诚实和频繁的沟通。定期进行会议以更新项目进度，同时也要鼓励团队成员提出问题和建议。
使用合适的工具：选择适合你们团队需求的软件或平台来协同工作。例如使用版本控制系统（如Git）来管理代码，使用Trello或Jira等项目管理软件来跟踪任务进度。
规范化流程：建立并坚持执行规范化流程可以帮助提高效率并减少错误。例如设定命名规则、文件组织结构等。
模块化设计: 采用模块化设计思想，在编码时尽可能使得各部分解耦，降低依赖性，提高代码复用性。这样不仅方便程序自身开发与维护，并且在一定程度上也能让美术与策划更容易理解整体结构及其对应部分功能实现方式。
尊重专业意见: 尊重每位参与者在其专业领域能力及其意见表达权，在决策时充分考虑各方面因素以达到最优决策结果。
提供足够资源支持: 确保所有人都有足夠时间和资源去完成他们所负责任务, 这包括了必要硬件设备, 软件, 教育资料等.
真机调试，看打印日志你是如何处理的 调试移动设备上的应用并查看其打印日志，通常需要使用一些特定的工具和技术。以下是一些基本步骤：
连接设备：首先，你需要将移动设备通过USB线连接到电脑。确保你已经在设备上开启了开发者模式以及USB调试。
Android平台：
如果你正在开发的是Android应用，可以使用Android Studio或者adb（Android Debug Bridge）命令行工具来查看和过滤日志信息。在Android Studio中，打开Logcat窗口即可实时查看到连接设备输出的日志。使用adb命令行工具时，可以在终端输入adb logcat命令来显示所有日志信息。 iOS平台：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/49024781d6e947b23d63799dd47543ed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-16T18:15:08+08:00" />
<meta property="article:modified_time" content="2023-10-16T18:15:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">unity面试八股文 - 框架设计与资源管理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Unity_0"></a>Unity项目框架是如何设计的？有哪些原则</h3> 
<p>在设计Unity项目框架时，通常会遵循一些基本的原则和步骤。以下是主要的一些原则：</p> 
<ul><li> <p>模块化：每个功能都应该被作为一个独立的模块来处理，这样可以方便修改和维护。</p> </li><li> <p>低耦合：不同模块之间应尽可能减少直接交互，使用事件或者接口等方式进行通信。</p> </li><li> <p>高内聚：每个模块应尽量只做一件事情，并且做好它。</p> </li><li> <p>可扩展性：设计框架时要考虑到未来可能需要添加或者修改功能的需求，所以需要有良好的扩展性。</p> </li><li> <p>可维护性：代码结构清晰、注释充分、命名规范等都能提高代码的可读性和维护性。</p> </li></ul> 
<p><strong>以下是一个简单的Unity项目框架设计流程</strong>：</p> 
<ul><li> <p>确定游戏类型和核心玩法。</p> </li><li> <p>根据需求分析出需要哪些系统（比如角色系统、战斗系统、UI系统等）。</p> </li><li> <p>为每个系统创建相应的目录，并在目录下创建对应类文件。</p> </li><li> <p>设计各个类之间关系，如何交互和通信。</p> </li><li> <p>编写具体实现代码，并进行测试优化。</p> </li></ul> 
<h3><a id="_25"></a>资源管理是如何做的，如何更新与打空包</h3> 
<p>在Unity中，资源管理是一个非常重要的部分。</p> 
<p><strong>基本步骤和原则</strong>：</p> 
<ul><li> <p>资源分类：根据资源类型（如场景、音频、模型、贴图等）进行分类存放，有利于维护和查找。</p> </li><li> <p>使用AssetBundle：AssetBundle是Unity用于实现动态加载和更新的一种方式。你可以将游戏中的各种资源打包成AssetBundle，然后在运行时动态加载。</p> </li><li> <p>优化内存使用：尽量避免不必要的内存占用。比如对于不再使用的资源，应该及时销毁或者卸载。</p> </li><li> <p>版本控制：对项目中所有重要文件进行版本控制，以便追踪每个文件的修改历史，并在需要时回滚到之前的版本。</p> </li></ul> 
<p><strong>关于更新与打空包：</strong></p> 
<p>在Unity中，你可以通过构建AssetBundle来实现热更新。当有新内容需要添加或者旧内容需要修改时，只需构建出相应的AssetBundle并上传到服务器即可。客户端在启动游戏时检测到新版本后会自动下载并加载新版AssetBundles。</p> 
<p>打空包通常指生成一个不含任何内容（或只含极少必须内容）但结构完整可运行且能从服务器下载更新数据包填充自身内容以达到完全功能状态游戏安装包，在移动平台上这样做可以显著减小安装包大小以提高用户体验。</p> 
<p>注意这里所说“空”并非真正意义上无任何东西而是相较完全版来说去除了大部分非必须启动项而言。“空”的定义因项目需求可能会有所变化。</p> 
<p>具体操作过程可能涉及多个环节如服务器配置、客户端代码编写等，请根据具体需求设定合适流程。</p> 
<h3><a id="_46"></a>资源管理的平台，版本，渠道是如何管理的</h3> 
<p>在Unity中，资源管理的平台、版本和渠道通常需要通过一些特定的工具和策略来进行管理。以下是一些基本的方法：</p> 
<ul><li><strong>平台管理</strong>：</li></ul> 
<p>Unity提供了跨平台发布功能，可以方便地将游戏发布到不同的平台上。在项目设置中，你可以选择目标平台，并对该平台进行特定的优化设置。</p> 
<p>同时，在代码中也可以使用预处理指令（如#if UNITY_ANDROID, #if UNITY_IOS等）来编写针对不同平台的代码。</p> 
<ul><li><strong>版本管理：</strong></li></ul> 
<p>版本控制系统（如Git、SVN等）是用于跟踪文件变更历史以及协同开发非常重要的工具。每次提交都会记录下当前所有文件状态，当需要时还能回滚到之前任意一个提交状态。</p> 
<p>除此之外，Unity内部也有一个简单版控制系统——Asset Serialization模式。它允许你以文本或二进制格式保存场景和预设体等资源，并且支持多人同时编辑一个场景。</p> 
<ul><li><strong>渠道管理</strong>：</li></ul> 
<p>对于渠道管理，你可能需要构建不同版本的应用以适配各个发行渠道（如Google Play Store, App Store, Steam等）。这可能涉及改变游戏内购买系统、广告SDK或者其他第三方插件配置等内容。</p> 
<p>此外，在打包时候添加相应标识符区分不同渠道包也是常见做法。例如通过Scripting Define Symbols定义预处理指令区分各个市场版本，在编译时动态改变某些代码执行流程。</p> 
<p>以上就是在Unity中进行资源管理相关操作所采取方法概述，请根据实际项目需求选择合适方式。</p> 
<h3><a id="_68"></a>项目框架是如何让美术，策划，程序愉快的工作的</h3> 
<p>在一个项目中，美术、策划和程序员都有各自的专业领域和任务，而一个良好的项目框架应该能够让他们愉快地一起工作。以下是一些实现这个目标的方法：</p> 
<ul><li> <p><strong>明确角色与职责</strong>：每个团队成员都应清楚自己的角色和职责。这样可以防止工作重叠或者遗漏，并且让每个人都知道他们需要完成什么。</p> </li><li> <p><strong>良好的沟通</strong>：团队成员之间需要保持开放、诚实和频繁的沟通。定期进行会议以更新项目进度，同时也要鼓励团队成员提出问题和建议。</p> </li><li> <p><strong>使用合适的工具</strong>：选择适合你们团队需求的软件或平台来协同工作。例如使用版本控制系统（如Git）来管理代码，使用Trello或Jira等项目管理软件来跟踪任务进度。</p> </li><li> <p><strong>规范化流程</strong>：建立并坚持执行规范化流程可以帮助提高效率并减少错误。例如设定命名规则、文件组织结构等。</p> </li><li> <p><strong>模块化设计</strong>: 采用模块化设计思想，在编码时尽可能使得各部分解耦，降低依赖性，提高代码复用性。这样不仅方便程序自身开发与维护，并且在一定程度上也能让美术与策划更容易理解整体结构及其对应部分功能实现方式。</p> </li><li> <p><strong>尊重专业意见</strong>: 尊重每位参与者在其专业领域能力及其意见表达权，在决策时充分考虑各方面因素以达到最优决策结果。</p> </li><li> <p><strong>提供足够资源支持</strong>: 确保所有人都有足夠时间和资源去完成他们所负责任务, 这包括了必要硬件设备, 软件, 教育资料等.</p> </li></ul> 
<h3><a id="_84"></a>真机调试，看打印日志你是如何处理的</h3> 
<p>调试移动设备上的应用并查看其打印日志，通常需要使用一些特定的工具和技术。以下是一些基本步骤：</p> 
<ol><li> <p><strong>连接设备</strong>：首先，你需要将移动设备通过USB线连接到电脑。确保你已经在设备上开启了开发者模式以及USB调试。</p> </li><li> <p><strong>Android平台</strong>：</p> 
  <ul><li>如果你正在开发的是Android应用，可以使用Android Studio或者adb（Android Debug Bridge）命令行工具来查看和过滤日志信息。</li><li>在Android Studio中，打开Logcat窗口即可实时查看到连接设备输出的日志。</li><li>使用adb命令行工具时，可以在终端输入<code>adb logcat</code>命令来显示所有日志信息。</li></ul> </li><li> <p><strong>iOS平台</strong>：</p> 
  <ul><li>对于iOS应用，你可以使用Xcode进行调试和查看控制台输出。</li><li>连接iPhone或iPad后，在Xcode中选择该设备作为目标设备，并运行项目即可在控制台窗口实时查看输出信息。</li></ul> </li><li> <p><strong>过滤与搜索日志</strong></p> 
  <ul><li>无论是在Logcat还是Xcode中都提供了搜索功能，这对于从大量信息中找出关键错误非常有帮助。</li><li>同样地，在编写代码时候也可以加入特定标签或关键词使得能够更快地过滤出相关日志。</li></ul> </li><li> <p><strong>清理与导出</strong></p> 
  <ul><li>当需要清空当前所有显示内容以便观察新产生日志时，都支持一键清理功能。</li><li>当需要保存某段时间内产生的所有或部分内容时也支持导出功能。</li></ul> </li></ol> 
<h3><a id="Unity_107"></a>Unity如何避免多人提交代码冲突</h3> 
<p>在Unity项目中，多人合作时避免代码冲突的方法主要有以下几种：</p> 
<ol><li> <p><strong>使用版本控制系统</strong>：像Git这样的版本控制系统可以帮助你管理和跟踪代码的变更。当两个开发者同时修改了同一部分代码时，Git会标记出冲突并让开发者手动解决。</p> </li><li> <p><strong>规定工作流程</strong>：团队成员应该在开始新任务之前先更新他们本地的项目副本，这样可以尽早发现和解决潜在的合并问题。此外，每次提交应该尽可能小且具有明确目标，以降低产生大量冲突的风险。</p> </li><li> <p><strong>模块化设计</strong>：通过模块化设计能够减少不必要的依赖关系，并让团队成员能够专注于他们自己负责的部分。这样就能降低多人同时修改同一段代码而导致冲突的情形。</p> </li><li> <p><strong>清晰明确地划分职责区域</strong>：每个团队成员都应该清楚知道自己负责哪些文件或哪些功能模块。避免无谓交叉操作。</p> </li><li> <p><strong>定期进行代码审查</strong>: 这是一个很好机会检查是否存在潜在问题，并讨论最佳实践和编码规范等问题。</p> </li><li> <p><strong>使用Unity特定工具</strong>: Unity提供了一些用于协作开发场景、预设等资源类型文件（如UnityYAMLMerge）工具, 这也是非常有效避免或处理资源文件类型导致提交冲突问题.</p> </li><li> <p><strong>良好沟通</strong>: 按照计划进行工作, 并保持与其他团队成员之间频繁沟通以及同步进度状态.</p> </li></ol> 
<h3><a id="_124"></a>你用了哪些设计模式，分别是什么？解决什么问题</h3> 
<p>开发者使用一些设计模式来提高代码的可读性、可扩展性和可维护性。</p> 
<p>以下是在软件开发过程中常见的一些设计模式：</p> 
<ol><li> <p>工厂模式：这种模型被用于创建对象，而不需要指定这些对象应该属于哪个具体类。它解决了直接实例化类时可能出现的耦合问题。</p> </li><li> <p>单例模式：这种模式确保一个类只有一个实例，并提供全局访问点。例如，在配置管理或日志记录等场景下可以使用单例。</p> </li><li> <p>观察者模式：当对象间存在一对多关系时，如何通知依赖对象状态改变就需要观察者模式。例如在事件驱动系统中会非常有用。</p> </li><li> <p>策略模式：它定义了算法族，并分别封装起来，让他们之间可以互相替换。策略让算法独立于使用它的客户端变化。</p> </li><li> <p>装饰器/适配器 模式: 这两种都是结构型设计,装饰器为已有功能动态添加更多功能,适配器则将不兼容接口转换为兼容接口.</p> </li></ol> 
<h3><a id="_138"></a>你的项目是如何做热更新的？</h3> 
<p>Unity项目的热更新通常包括资源更新和代码逻辑更新两部分。这里主要介绍一下比较常见的几种方式：资源AssetBundle 和 代码 ILRuntime，HybridCLR。</p> 
<ol><li> <p>AssetBundle：AssetBundle 是 Unity3D 的一种资源打包方式，可以将场景、模型、贴图、材质、Shader 等各种类型的资源进行打包，并在运行时动态加载。你可以把游戏中会频繁更改或者追加的内容做成 AssetBundle，然后放在服务器上。当需要更新时，客户端从服务器下载最新的 AssetBundle 即可实现热更新。</p> </li><li> <p>ILRuntime：对于代码逻辑的热更，ILRuntime 是一个不错的选择。它是一个针对 .NET 平台（C#）开发并且完全开源免费的跨平台即时编译执行环境，在支持所有 C# 语言特性同时还具备轻量级虚拟机所必须具备的跨平台能力（如 iOS/Android）。你可以将部分游戏逻辑编写在 DLL 中，并使用 ILRuntime 进行加载运行，当需要更新游戏逻辑时只需要重新下载 DLL 文件即可。</p> </li><li> <p>HybridCLR：一种Unity热更新框架，主要用于游戏逻辑的热更新。这个框架可以让你在C#中编写游戏逻辑，并将其编译为DLL文件。然后，你可以在运行时动态加载和执行这些DLL文件。HybridCLR的工作原理基于.NET的Common Language Runtime (CLR)，它能够在运行时加载和执行.NET程序集（比如C#编译出来的DLL）。因此，通过HybridCLR，你可以轻松地实现代码逻辑的热更新</p> </li></ol> 
<h3><a id="_147"></a>框架设计里面你常用的第三方库和插件是哪些？解决哪些问题？</h3> 
<p>在Unity开发中，有很多优秀的第三方库和插件可以提升开发效率，解决各种问题。以下是一些常用的：</p> 
<ol><li> <p><strong>DOTween</strong>：这是一个高效、易用、全功能的动画引擎。它可以让你更简单地创建各种动画，如移动、旋转、缩放等。</p> </li><li> <p><strong>TextMeshPro</strong>：这是一个高级文本渲染插件，提供了丰富的文本样式和布局选项，以及更强大的性能。</p> </li><li> <p><strong>Cinemachine</strong>：Cinemachine 是 Unity 官方出品的一个摄像机系统插件。它为游戏摄像机制作提供了许多便利性工具和自动化系统。</p> </li><li> <p><strong>UniRx</strong>：UniRx 是 Reactive Extensions (Rx) 的 Unity 版本。它使得你可以使用响应式编程风格来处理复杂事件和数据流。</p> </li><li> <p><strong>Odin Inspector</strong>：这个插件允许你在Unity编辑器中创建更强大且易于使用的检视面板，并添加自定义行为和验证器等功能。</p> </li><li> <p><strong>Photon Unity Networking (PUN)</strong>: 这是一款网络库, 专门用于实现Unity游戏项目中实时在线多人交互部分.</p> </li><li> <p><strong>Shader Graph</strong>: 这是一个可视化着色器编辑工具, 让开发者不需要写代码就能创造出复杂美观的图形特效.</p> </li></ol> 
<p>以上只列出了部分常见第三方库与插件，在实际开发过程中可能还会有其他需求特定或者项目特定地选择其他组件或者框架。</p> 
<h3><a id="ECSDOTS_166"></a>聊聊ECS框架，DOTS模式。</h3> 
<p>Entity Component System (ECS) 是一种新的编程架构模型，它是 Unity 的 Data-Oriented Technology Stack (DOTS) 的核心部分。ECS、Jobs System 和 Burst Compiler 构成了 DOTS 框架。</p> 
<ol><li> <p><strong>ECS（Entity Component System）</strong>：在 ECS 中，数据和行为被分离开来。实体（Entities）仅作为唯一标识符存在，组件（Components）包含数据，系统（Systems）则包含行为。这种设计使得数据存储更加紧凑、连续，从而大大提高了缓存命中率和性能。</p> </li><li> <p><strong>Jobs System</strong>：Unity 的 Jobs 系统允许你利用多核处理器的优势来提高游戏性能。通过将任务拆分成小块，并在多个线程上并行运行它们，可以显著提升效率。</p> </li><li> <p><strong>Burst Compiler</strong>：Burst 是一个数学优化编译器，专门针对 Unity 的 C# Job 系统进行优化。它可以将 C# 代码转换为高效的本地代码。</p> </li></ol> 
<p>DOTS 模式是 Unity 提出的一种面向数据驱动编程模式，在该模式下开发者需要以数据为中心进行思考和设计程序结构。由于其能够有效地利用现代硬件架构特性，在很多情况下都能带来显著的性能提升。</p> 
<p>需要注意的是虽然 DOTS/ECS 提供了很强大的性能优势, 但同时也增加了开发复杂度</p> 
<h3><a id="Addressable__179"></a>Addressable 管理资源的优势有哪些</h3> 
<p>Addressable Asset System 是 Unity 提供的一种新的资源管理系统，它有很多优势：</p> 
<ol><li> <p><strong>简化资源管理</strong>：Addressables 通过使用字符串地址来引用对象，而不是直接引用对象实例，这使得资源加载和卸载更加灵活和方便。</p> </li><li> <p><strong>按需加载</strong>：你可以在需要时加载或卸载资源，而不是在游戏启动时就把所有内容都加载进内存。这样可以降低内存使用量，并提高游戏性能。</p> </li><li> <p><strong>异步加载</strong>：Addressables 支持异步操作，可以避免长时间的阻塞操作导致游戏卡顿。</p> </li><li> <p><strong>远程和本地资源</strong>：你可以从网络上或者本地文件系统中获取 Addressable 资源。这对于在线游戏或者需要下载更新内容的应用来说非常有用。</p> </li><li> <p><strong>自动依赖跟踪</strong>：Addressables 会自动处理资源之间的依赖关系，在你请求一个对象时会自动加载所需的所有相关对象，并在所有相关对象都不再被使用时将它们一起卸载。</p> </li><li> <p><strong>内存管理优化</strong>: Addressable 系统提供了强大且灵活的内存管理机制, 可以根据场景变化有效地控制并优化内存使用.</p> </li><li> <p><strong>打包策略</strong>: 游戏开发者可以根据项目需求设定合适的打包策略, 这对于控制项目大小以及分发更新等场景非常有帮助.</p> </li></ol> 
<p>因此, 使用 Addressable Asset System 可以大大简化 Unity 中复杂且重要的资源管理工作.</p> 
<h3><a id="Unity_198"></a>Unity如何对接网络游戏服务器？</h3> 
<p>在 Unity 中对接网络游戏服务器主要可以使用 Unity 自带的UNET（Unity Networking）系统，或者使用第三方网络库如 Photon、Mirror 等。以下是一个基本的步骤：</p> 
<ol><li> <p><strong>选择网络库</strong>：根据你的需求选择合适的网络库。如果你需要高性能、大规模多人在线支持，可能需要考虑像 Photon 这样的专业解决方案。</p> </li><li> <p><strong>建立连接</strong>：在客户端和服务器上初始化所选网络库，并建立连接。这通常涉及到输入服务器地址和端口号。</p> </li><li> <p><strong>同步数据</strong>：设计并实现数据同步机制，使得所有客户端都能看到相同的游戏状态。这可能包括玩家位置、动画状态、游戏对象等信息。</p> </li><li> <p><strong>处理断线重连</strong>：设计断线重连机制以应对玩家意外掉线或者网络不稳定情况。</p> </li><li> <p><strong>安全防护</strong>：实施必要的安全措施来防止作弊行为，例如加密通信内容，验证客户端发送过来的数据等。</p> </li><li> <p><strong>性能优化</strong>: 对于大型多人在线游戏, 需要进行一些性能优化, 如减少不必要传输, 压缩数据等.</p> </li></ol> 
<p>以上只是一个简单概述，并且每个步骤都有很多具体细节需要去处理和优化。</p> 
<h4><a id="_Photon__215"></a>以 Photon 为例：</h4> 
<ol><li> <p><strong>安装 Photon Unity SDK</strong>：首先在 Unity 中导入 Photon 的 Unity SDK。这个 SDK 包括了你需要连接到 Photon 服务器和实现网络功能所需的所有组件和脚本。</p> </li><li> <p><strong>创建并配置PhotonServerSettings</strong>：在Unity编辑器中，选择“Window &gt; Photon Unity Networking &gt; Highlight Server Settings”，在Inspector窗口中输入你的应用ID（从Photon网站获取）。</p> </li><li> <p><strong>连接到服务器</strong>：使用 <code>PhotonNetwork.ConnectUsingSettings()</code> 方法连接到 Photon 服务器。你可以传递一个游戏版本号作为参数，只有相同版本号的玩家才能一起玩游戏。</p> </li><li> <p><strong>加入或创建房间</strong>：连接成功后，使用 <code>PhotonNetwork.JoinOrCreateRoom()</code> 方法加入或创建一个游戏房间。每个房间都有一些属性如最大玩家数、是否公开等。</p> </li><li> <p><strong>同步数据</strong>：Photon 提供了多种方式来同步数据：</p> 
  <ul><li> <p>使用 <code>PhotonView</code> 和 <code>PhotonTransformView</code> 组件来自动同步 GameObject 的变化。</p> </li><li> <p>使用 RPC (Remote Procedure Call) 来调用远程方法。</p> </li><li> <p>使用 Custom Properties 来存储和共享其他类型的数据。</p> </li></ul> </li><li> <p><strong>处理断线重连与游戏暂停</strong>: 在网络不稳定或者用户切换至其他应用时, 游戏可能会被暂停或者掉线, 这时就需要处理断线重连与游戏暂停问题.</p> </li><li> <p><strong>优化性能</strong>: 对于大型多人在线游戏, 需要进行一些性能优化, 如减少不必要传输, 压缩数据等.</p> </li><li> <p><strong>安全防护</strong>: 实施必要的安全措施来防止作弊行为，例如验证客户端发送过来的数据等。</p> </li></ol> 
<h4><a id="_Socket__240"></a>以 Socket 为例：</h4> 
<ol><li> <p><strong>创建 Socket</strong>：在 Unity 中，你可以使用 <code>System.Net.Sockets.Socket</code> 类来创建一个新的 socket。你需要为其指定地址族（通常是 IPv4 或 IPv6）、套接字类型（流或数据报）和协议类型（TCP 或 UDP）。</p> </li><li> <p><strong>连接到服务器</strong>：使用 Socket 的 <code>Connect</code> 方法连接到服务器。你需要提供服务器的 IP 地址和端口号。</p> </li><li> <p><strong>发送和接收数据</strong>：通过 Socket 的 <code>Send</code> 和 <code>Receive</code> 方法来发送和接收数据。由于这些方法会阻塞当前线程直到操作完成，所以通常需要将网络代码放在单独的线程或者使用异步方法。</p> </li><li> <p><strong>处理数据</strong>：当从服务器接收数据时，你需要解析这些数据并更新游戏状态。同样地，当游戏状态发生变化时，也要将相关信息打包成字节并通过 socket 发送给服务器。</p> </li><li> <p><strong>关闭 Socket</strong>：当不再需要与服务器通信时，应该调用 Socket 的 <code>Shutdown</code> 和 <code>Close</code> 方法来关闭连接并释放资源。</p> </li><li> <p><strong>异常处理</strong>: 在与网络相关的代码中, 异常可能随时发生, 如超时、断开连接等, 适当地处理这些异常对于保证程序稳定运行非常重要.</p> </li><li> <p><strong>优化性能</strong>: 对于大型多人在线游戏, 需要进行一些性能优化, 如减少不必要传输, 压缩数据等.</p> </li><li> <p><strong>安全防护</strong>: 实施必要的安全措施来防止作弊行为或被攻击，例如加密通信内容、验证客户端发送过来的数据等。</p> </li></ol> 
<p>注意，在 Unity 中进行网络编程还有其他一些细节问题需要考虑，比如 Unity 主线程与网络线程之间如何交互、如何避免内存泄漏等。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fb972d66763cfd8931012fc333b2a9eb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">经典的ABA问题与解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a185f38a443d3331720070ac68da05bc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">p4 使用操作记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>