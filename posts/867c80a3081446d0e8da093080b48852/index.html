<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>04-Nacos服务注册中心应用实践（记录） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="04-Nacos服务注册中心应用实践（记录）" />
<meta property="og:description" content="目录
注册中心简介
背景分析
Nacos概述
构建Nacos服务
准备工作
下载与安装
初始化配置
服务启动与访问
服务注册与调用入门（重点）
业务描述
生产者服务创建及注册
消费者服务发现及调用
小节面试分析
服务负载均衡设计及实现（重点）
业务描述
LoadBalancerClient应用
@LoadBalanced
Ribbon负载均衡策略(了解)
小节面试分析
基于Feign的远程服务调用（重点）
背景分析
Feign是什么
Feign应用实践（掌握）
Feign配置进阶实践
Feign 调用过程分析（了解）
小节面试分析
总结(Summary)
重难点分析
FAQ分析
Bug分析
注册中心简介 背景分析 在微服务中，首先需要面对的问题就是如何查找服务(软件即服务)，其次,就是如何在不同的服务之间进行通信？如何更好更方便的管理应用中的每一个服务，如何建立各个服务之间联系的纽带，由此注册中心诞生（例如淘宝网卖家提供服务，买家调用服务）。
市面上常用注册中心有Zookeeper(雅虎Apache),Eureka(Netfix),Nacos(Alibaba),Consul(Google),那他们分别都有什么特点，我们如何进行选型呢？我们主要从社区活跃度,稳定性,功能,性能等方面进行考虑即可.本次微服务的学习,我们选择Nacos,它很好的支持了阿里的双11活动,不仅可以做注册中心，还可以作为配置中心，稳定性和性能都很好。
Nacos概述 Nacos（DynamicNaming and Configuration Service）是一个应用于服务注册与发现、配置管理的平台。它孵化于阿里巴巴，成长于十年双十一的洪峰考验，沉淀了简单易用、稳定可靠、性能卓越的核心竞争力。其官网地址如下：
https://nacos.io/zh-cn/docs/quick-start.html 构建Nacos服务 准备工作 第一：确保你电脑已配置JAVA_HOME环境变量(Nacos启动时需要)，例如：
第二：确保你的MySQL版本为5.7以上（MariaDB10.5以上)，例如
下载与安装 第一步：Nacos下载,可在浏览器直接输入如下地址：
Releases · alibaba/nacos · GitHuban easy-to-use dynamic service discovery, configuration and service management platform for building cloud native applications. - Releases · alibaba/nacoshttps://github." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/867c80a3081446d0e8da093080b48852/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-24T20:38:51+08:00" />
<meta property="article:modified_time" content="2021-11-24T20:38:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">04-Nacos服务注册中心应用实践（记录）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%AE%80%E4%BB%8B" rel="nofollow" title="注册中心简介">注册中心简介</a></p> 
<p id="%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90" rel="nofollow" title="背景分析">背景分析</a></p> 
<p id="Nacos%E6%A6%82%E8%BF%B0-toc" style="margin-left:0px;"><a href="#Nacos%E6%A6%82%E8%BF%B0" rel="nofollow" title="Nacos概述">Nacos概述</a></p> 
<p id="%E6%9E%84%E5%BB%BANacos%E6%9C%8D%E5%8A%A1-toc" style="margin-left:0px;"><a href="#%E6%9E%84%E5%BB%BANacos%E6%9C%8D%E5%8A%A1" rel="nofollow" title="构建Nacos服务">构建Nacos服务</a></p> 
<p id="%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow" title="准备工作">准备工作</a></p> 
<p id="%C2%A0%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85" rel="nofollow" title=" 下载与安装"> 下载与安装</a></p> 
<p id="%C2%A0%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE" rel="nofollow" title=" 初始化配置"> 初始化配置</a></p> 
<p id="%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AE%BF%E9%97%AE-toc" style="margin-left:40px;"><a href="#%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AE%BF%E9%97%AE" rel="nofollow" title="服务启动与访问">服务启动与访问</a></p> 
<p id="%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E8%B0%83%E7%94%A8%E5%85%A5%E9%97%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E8%B0%83%E7%94%A8%E5%85%A5%E9%97%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" rel="nofollow" title="服务注册与调用入门（重点）">服务注册与调用入门（重点）</a></p> 
<p id="%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0" rel="nofollow" title="业务描述">业务描述</a></p> 
<p id="%E7%94%9F%E4%BA%A7%E8%80%85%E6%9C%8D%E5%8A%A1%E5%88%9B%E5%BB%BA%E5%8F%8A%E6%B3%A8%E5%86%8C-toc" style="margin-left:40px;"><a href="#%E7%94%9F%E4%BA%A7%E8%80%85%E6%9C%8D%E5%8A%A1%E5%88%9B%E5%BB%BA%E5%8F%8A%E6%B3%A8%E5%86%8C" rel="nofollow" title="生产者服务创建及注册">生产者服务创建及注册</a></p> 
<p id="%E6%B6%88%E8%B4%B9%E8%80%85%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E5%8F%8A%E8%B0%83%E7%94%A8-toc" style="margin-left:40px;"><a href="#%E6%B6%88%E8%B4%B9%E8%80%85%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E5%8F%8A%E8%B0%83%E7%94%A8" rel="nofollow" title="消费者服务发现及调用">消费者服务发现及调用</a></p> 
<p id="%C2%A0%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90" rel="nofollow" title=" 小节面试分析"> 小节面试分析</a></p> 
<p id="%E6%9C%8D%E5%8A%A1%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AE%BE%E8%AE%A1%E5%8F%8A%E5%AE%9E%E7%8E%B0%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E6%9C%8D%E5%8A%A1%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AE%BE%E8%AE%A1%E5%8F%8A%E5%AE%9E%E7%8E%B0%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" rel="nofollow" title="服务负载均衡设计及实现（重点）">服务负载均衡设计及实现（重点）</a></p> 
<p id="%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0" rel="nofollow" title="业务描述">业务描述</a></p> 
<p id="LoadBalancerClient%E5%BA%94%E7%94%A8-toc" style="margin-left:40px;"><a href="#LoadBalancerClient%E5%BA%94%E7%94%A8" rel="nofollow" title="LoadBalancerClient应用">LoadBalancerClient应用</a></p> 
<p id="%40LoadBalanced-toc" style="margin-left:40px;"><a href="#%40LoadBalanced" rel="nofollow" title="@LoadBalanced">@LoadBalanced</a></p> 
<p id="Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5(%E4%BA%86%E8%A7%A3)-toc" style="margin-left:40px;"><a href="#Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%28%E4%BA%86%E8%A7%A3%29" rel="nofollow" title="Ribbon负载均衡策略(了解)">Ribbon负载均衡策略(了解)</a></p> 
<p id="%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90" rel="nofollow" title="小节面试分析">小节面试分析</a></p> 
<p id="%E5%9F%BA%E4%BA%8EFeign%E7%9A%84%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E5%9F%BA%E4%BA%8EFeign%E7%9A%84%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" rel="nofollow" title="基于Feign的远程服务调用（重点）">基于Feign的远程服务调用（重点）</a></p> 
<p id="%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90" rel="nofollow" title="背景分析">背景分析</a></p> 
<p id="Feign%E6%98%AF%E4%BB%80%E4%B9%88-toc" style="margin-left:40px;"><a href="#Feign%E6%98%AF%E4%BB%80%E4%B9%88" rel="nofollow" title="Feign是什么">Feign是什么</a></p> 
<p id="Feign%E5%BA%94%E7%94%A8%E5%AE%9E%E8%B7%B5%EF%BC%88%E6%8E%8C%E6%8F%A1%EF%BC%89-toc" style="margin-left:40px;"><a href="#Feign%E5%BA%94%E7%94%A8%E5%AE%9E%E8%B7%B5%EF%BC%88%E6%8E%8C%E6%8F%A1%EF%BC%89" rel="nofollow" title="Feign应用实践（掌握）">Feign应用实践（掌握）</a></p> 
<p id="Feign%E9%85%8D%E7%BD%AE%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5-toc" style="margin-left:40px;"><a href="#Feign%E9%85%8D%E7%BD%AE%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5" rel="nofollow" title="Feign配置进阶实践">Feign配置进阶实践</a></p> 
<p id="Feign%20%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89-toc" style="margin-left:40px;"><a href="#Feign%20%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89" rel="nofollow" title="Feign 调用过程分析（了解）">Feign 调用过程分析（了解）</a></p> 
<p id="%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90" rel="nofollow" title="小节面试分析">小节面试分析</a></p> 
<p id="%E6%80%BB%E7%BB%93(Summary)-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93%28Summary%29" rel="nofollow" title="总结(Summary)">总结(Summary)</a></p> 
<p id="%E9%87%8D%E9%9A%BE%E7%82%B9%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E9%87%8D%E9%9A%BE%E7%82%B9%E5%88%86%E6%9E%90" rel="nofollow" title="重难点分析">重难点分析</a></p> 
<p id="FAQ%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#FAQ%E5%88%86%E6%9E%90" rel="nofollow" title="FAQ分析">FAQ分析</a></p> 
<p id="Bug%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#Bug%E5%88%86%E6%9E%90" rel="nofollow" title="Bug分析">Bug分析</a></p> 
<hr id="hr-toc"> 
<h2 id="%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%AE%80%E4%BB%8B">注册中心简介</h2> 
<h3 id="%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90">背景分析</h3> 
<p>在微服务中，首先需要面对的问题就是如何查找服务(软件即服务)，其次,就是如何在不同的服务之间进行通信？如何更好更方便的管理应用中的每一个服务，如何建立各个服务之间联系的纽带，由此注册中心诞生（例如淘宝网卖家提供服务，买家调用服务）。<br> 市面上常用注册中心有Zookeeper(雅虎Apache),Eureka(Netfix),Nacos(Alibaba),Consul(Google),那他们分别都有什么特点，我们如何进行选型呢？我们主要从社区活跃度,稳定性,功能,性能等方面进行考虑即可.本次微服务的学习,我们选择Nacos,它很好的支持了阿里的双11活动,不仅可以做注册中心，还可以作为配置中心，稳定性和性能都很好。</p> 
<h2 id="Nacos%E6%A6%82%E8%BF%B0">Nacos概述</h2> 
<p>Nacos（DynamicNaming and Configuration Service）是一个应用于服务注册与发现、配置管理的平台。它孵化于阿里巴巴，成长于十年双十一的洪峰考验，沉淀了简单易用、稳定可靠、性能卓越的核心竞争力。其官网地址如下：</p> 
<pre><code class="language-html">https://nacos.io/zh-cn/docs/quick-start.html
</code></pre> 
<h2 id="%E6%9E%84%E5%BB%BANacos%E6%9C%8D%E5%8A%A1">构建Nacos服务</h2> 
<h3 id="%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">准备工作</h3> 
<p>第一：确保你电脑已配置JAVA_HOME环境变量(Nacos启动时需要)，例如：</p> 
<p><img alt="" src="https://images2.imgbox.com/06/da/j4I15jIM_o.png"></p> 
<p> 第二：确保你的MySQL版本为5.7以上（MariaDB10.5以上)，例如</p> 
<p> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/5a/01/ICUeTn42_o.png"></p> 
<h2 id="%C2%A0%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85"> 下载与安装</h2> 
<p>第一步：Nacos下载,可在浏览器直接输入如下地址：</p> 
<p><a class="has-card" href="https://github.com/alibaba/nacos/releases" title="Releases · alibaba/nacos · GitHub"><span class="link-card-box"><span class="link-title">Releases · alibaba/nacos · GitHub</span><span class="link-desc">an easy-to-use dynamic service discovery, configuration and service management platform for building cloud native applications. - Releases · alibaba/nacos</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/80/99/UkHOYs1A_o.png">https://github.com/alibaba/nacos/releases</span></span></a>第二步：选择对应版本，直接下载，如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/f0/a2/aw2g1G4v_o.png"></p> 
<p> 第三步：解压Nacos（最好不要解压到中文目录下），其目录结构如下：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/8e/c2/fJXcgKmp_o.png"></p> 
<h2 id="%C2%A0%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE"> 初始化配置</h2> 
<p>第一步：登陆mysql，执行老师发给同学们的sql脚本。例如,我们可以使用mysql自带客户端,在命令行首先登录mysql,然后执行如下指令:</p> 
<blockquote> 
 <p> source d:/nacos-mysql.sql </p> 
</blockquote> 
<p> 执行成功以后，会创建一个nacos_config数据库，打开数据库会看到一些表，例如；</p> 
<p> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/3e/95/ZIW3t8ih_o.png"></p> 
<p> 说明:在执行此文件时,要求mysql的版本大于5.7版本(MariaDB最好10.5.11),否则会出现如下错误:</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/25/ec/ImUfuSZ3_o.png"></p> 
<p> 第二步：打开/conf/application.properties里打开默认配置，并基于你当前环境配置要连接的数据库，连接数据库时使用的用户名和密码(假如前面有"#"要将其去掉)：</p> 
<blockquote> 
 <p>### If use MySQL as datasource:<br> spring.datasource.platform=mysql</p> 
 <p>### Count of DB:<br> db.num=1</p> 
 <p>### Connect URL of DB:<br> db.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC<br> db.user.0=root<br> db.password.0=root<br>  </p> 
</blockquote> 
<h3 id="%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AE%BF%E9%97%AE">服务启动与访问</h3> 
<p>第一步:启动Nacos服务。</p> 
<p>Linux/Unix/Mac启动命令(standalone代表着单机模式运行，非集群模式):</p> 
<blockquote> 
 <p>./startup.sh -m standalone</p> 
</blockquote> 
<p>Windows启动命令(standalone代表着单机模式运行，非集群模式):</p> 
<blockquote> 
 <p>startup.cmd -m standalone</p> 
</blockquote> 
<p>说明:<br> 1)执行执行令时要么配置环境变量,要么直接在nacos/bin目录下去执行.<br> 2)nacos启动时需要本地环境变量中配置了JAVA_HOME(对应jdk的安装目录),<br> 3)一定要确保你连接的数据库(nacos_config)是存在的.<br> 4)假如所有的配置都正确,还连不上，检查一下你有几个数据库(mysql,…)</p> 
<p>第二步:访问Nacos服务。</p> 
<p>打开浏览器，输入http://localhost:8848/nacos地址，出现如下登陆页面：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/b9/37/J3YoDXOb_o.png"></p> 
<p> 其中，默认账号密码为nacos/nacos.</p> 
<h2 id="%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E8%B0%83%E7%94%A8%E5%85%A5%E9%97%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89">服务注册与调用入门（重点）</h2> 
<h3 id="%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0">业务描述</h3> 
<p>创建两个项目Module分别为服务提供者和服务消费者（假如已有则无需创建），两者都要注册到NacosServer中(这个server本质上就是一个web服务，端口默认为8848)，然后服务提供者可以为服务消费者提供远端调用服务(例如支付服务为服务提供方，订单服务为服务消费方)，如图所示：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/bb/7b/TvYX6U66_o.png"></p> 
<h3 id="%E7%94%9F%E4%BA%A7%E8%80%85%E6%9C%8D%E5%8A%A1%E5%88%9B%E5%BB%BA%E5%8F%8A%E6%B3%A8%E5%86%8C">生产者服务创建及注册</h3> 
<p>第一步：创建服务提供者工程(module名为sca-provider,假如已有则无需创建），继承parent工程(01-sca),其pom.xml文件内容如下：</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;parent&gt;
        &lt;artifactId&gt;01-sca&lt;/artifactId&gt;
        &lt;groupId&gt;com.jt&lt;/groupId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/parent&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;artifactId&gt;sca-provider&lt;/artifactId&gt;
    &lt;dependencies&gt;
        &lt;!--Web服务--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!--服务的注册和发现(我们要讲服务注册到nacos)--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre> 
<p>第二步：创建并修改配置文件application.yml(或者application.properties)，实现服务注册，关键代码如下：</p> 
<pre><code class="language-XML">server:
   port: 8081
spring:
  application:
    name: sca-provider #进行服务注册必须配置服务名
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
</code></pre> 
<p>注意：服务名不要使用下划线(“_”),应使用横杠(“-”),这是规则。<br> 第三步：创建启动类(假如已有则无需定义)，关键代码如下：</p> 
<pre><code class="language-java">package com.jt;

@SpringBootApplication
public class ProviderApplication {

    public static void main(String[] args) {
        SpringApplication.run(ProviderApplication.class, args);
    }
  }
</code></pre> 
<p>第四步：启动启动类，然后刷先nacos服务，检测是否服务注册成功，如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/ea/0c/o0S3GCKh_o.png"></p> 
<p> 第五步:停掉sca-provider服务，然后不断刷新nacos服务列表，检查服务的健康状态。</p> 
<h3 id="%E6%B6%88%E8%B4%B9%E8%80%85%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E5%8F%8A%E8%B0%83%E7%94%A8">消费者服务发现及调用</h3> 
<p>第一步: 在sca-provider项目中创建服务提供方对象，基于此对象对外提供服务,例如:</p> 
<pre><code class="language-java">    package com.jt.provider.controller;
    /**定义Controller对象(这个对象在spring mvc中给他的定义是handler),
     * 基于此对象处理客户端的请求*/
    @RestController
    public class ProviderController{
        //@Value默认读取项目配置文件中配置的内容
        //8080为没有读到server.port的值时,给定的默认值
        @Value("${server.port:8080}")
        private String server;
        //http://localhost:8081/provider/echo/tedu
        @GetMapping("/provider/echo/{msg}")
        public String doRestEcho1(@PathVariable String msg){
            return server+" say hello "+msg;
        }
    }
</code></pre> 
<p>第二步：创建服务消费者工程（module名为sca-consumer，假如已有则无需创建），继承parent工程（01-sca），其pom.xml文件内容如下：</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;parent&gt;
        &lt;artifactId&gt;01-sca&lt;/artifactId&gt;
        &lt;groupId&gt;com.jt&lt;/groupId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/parent&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;artifactId&gt;sca-consumer&lt;/artifactId&gt;
    
   &lt;dependencies&gt;
    &lt;!--Web服务--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--服务的注册和发现(我们要讲服务注册到nacos)--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre> 
<p>第三步：创建sca-consumer服务中的配置文件application.yml，关键代码如下：</p> 
<pre><code class="language-XML">server:
  port: 8090
spring:
  application:
    name: sca-consumer #服务注册时，服务名必须配置
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848 #从哪里去查找服务
</code></pre> 
<p>第四步：创建消费端启动类并实现服务消费，关键代码如下：</p> 
<pre><code class="language-java">package com.jt;
@SpringBootApplication
public class ConsumerApplication {
    public static void main(String[] args) {
        SpringApplication.run(ConsumerApplication.class,args);
    }
}
</code></pre> 
<p>第五步:在sca-consumer启动类中添加如下方法,用于创建RestTemplate对象.</p> 
<pre><code class="language-java">@Bean
public RestTemplate restTemplate(){//基于此对象实现远端服务调用
    return new RestTemplate();
}
</code></pre> 
<p>第六步:定义sca-consumer服务的消费端Controller,在此对象方法内部实现远端服务调用</p> 
<pre><code class="language-java">package com.jt.consumer.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;


/**
 * 定义服务消费端Controller,在这个Controller对象
 * 的方法中实现对远端服务sca-provider的调用
 */
@RestController
public class ConsumerController {
    /**
     * 从spring容器获取一个RestTemplate对象,
     * 基于此对象实现远端服务调用
     */
    @Autowired
    private RestTemplate restTemplate;
    /**
     * 在此方法中通过一个RestTemplate对象调用远端sca-provider中的服务
     * @return
     * 访问此方法的url: http://localhost:8090/consumer/doRestEcho1
     */
    @GetMapping("/consumer/doRestEcho1")
    public String doRestEcho01(){
        //1.定义要调用的远端服务的url
        String url="http://localhost:8081/provider/echo/8090";
        //2.基于restTemplate对象中的相关方法进行服务调用
        return restTemplate.getForObject(url, String.class);
    }

}
</code></pre> 
<p>第七步：启动消费者服务，并在浏览器输入http://localhost:8090/consumer/doRestEcho1地址进行访问，假如访问成功会出现，如图所示效果：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/41/2f/tgmECQBR_o.png"></p> 
<h2 id="%C2%A0%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90"> 小节面试分析</h2> 
<p>为什么要将服务注册到nacos?(为了更好的查找这些服务)<br> 在Nacos中服务提供者是如何向Nacos注册中心(Registry)续约的？(5秒心跳)<br> 对于Nacos服务来讲它是如何判定服务实例的状态？(检测心跳包，15,30)<br> 服务消费方是如何调用服务提供方的服务的？(RestTemplate)<br>  </p> 
<h2 id="%E6%9C%8D%E5%8A%A1%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AE%BE%E8%AE%A1%E5%8F%8A%E5%AE%9E%E7%8E%B0%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89">服务负载均衡设计及实现（重点）</h2> 
<h3>业务描述</h3> 
<p>一个服务实例可以处理请求是有限的,假如服务实例的并发访问比较大,我们会启动多个服务实例,让这些服务实例采用一定策略均衡(轮询,权重,随机,hash等)的处理并发请求,在Nacos中服务的负载均衡(Nacos客户端负载均衡)是如何应用的?</p> 
<h3 id="LoadBalancerClient%E5%BA%94%E7%94%A8">LoadBalancerClient应用</h3> 
<p>LoadBalancerClient对象可以从nacos中基于服务名获取服务实例，然后在工程中基于特点算法实现负载均衡方式的调用，案例实现如下：</p> 
<p>第一步:修改ConsumerController类,注入LoadBalancerClient对象,并添加doRestEcho2方法,然后进行服务访问.<br>  </p> 
<pre><code class="language-java">
  @Autowired
  private LoadBalancerClient loadBalancerClient;
  
  @Value("${spring.application.name:8090}")
  private String appName;
   
  @GetMapping("/consumer/doRestEcho02")
 public String doRestEcho02(){
     ServiceInstance serviceInstance = loadBalancerClient.choose("sca-provider");
     String url = String.format("http://%s:%s/provider/echo/%s",serviceInstance.getHost(),serviceInstance.getPort(),appName);
     System.out.println("request url:"+url);
     return restTemplate.getForObject(url, String.class);
     }
 }
</code></pre> 
<p>第二步：打开Idea服务启动配置，如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/b5/6e/2JAAqS3I_o.png"></p> 
<p> 第三步：修改并发运行选项(假如没有找到这个选项我们需要通过搜索引擎基于组合查询的方法,去找到对应的解决方案,例如搜索 idea allow parallel run)，如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/ef/3b/ZgICWoAK_o.png"></p> 
<p> 第四步：修改sca-provider的配置文件端口，分别以8081，8082端口方式进行启动。</p> 
<pre><code class="language-XML">server:
  port: 8082
spring:
  application:
    name: sca-provider
  cloud:
    nacos:
      server-addr: localhost:8848
</code></pre> 
<p>第五步：启动成功以后，访问nacos的服务列表，检测服务是否成功注册，如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/9a/c1/ezkwjm7a_o.png"></p> 
<p> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/24/25/V83sF0Fw_o.png"></p> 
<p> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/61/8c/1TwS7V8I_o.png"></p> 
<p></p> 
<p>第六步：启动sca-consumer项目模块，打开浏览器对consumer服务进行访问，访问时不断刷新，检测页面数据变化，例如：</p> 
<p>说明，这里多个实例并发提供服务的方式为负载均衡，这里的负载均衡实现默认是因为Nacos集成了Ribbon来实现的，Ribbon配合RestTemplate，可以非常容易的实现服务之间的访问。Ribbon是Spring Cloud核心组件之一，它提供的最重要的功能就是客户端的负载均衡(客户端可以采用一定算法,例如轮询访问，访问服务端实例信息)，这个功能可以让我们轻松地将面向服务的REST模版请求自动转换成客户端负载均衡方式的服务调用。</p> 
<h3 id="%40LoadBalanced">@LoadBalanced</h3> 
<p>当使用RestTemplate进行远程服务调用时，假如需要负载均衡,还可以在RestTemplate对象构建时，使用@LoadBalanced对构建RestTemplate的方法进行修饰，例如在ConsumerApplication中构建名字为loadBalancedRestTemplate的RestTemplate对象：</p> 
<pre><code class="language-java">@Bean
@LoadBalanced
public RestTemplate loadBalancedRestTemplate(){
    return new RestTemplate();
}
</code></pre> 
<p>在需要RestTemplate实现负载均衡调用的地方进行依赖注入.例如在ConsumerController类中添加loadBalancedRestTemplate属性</p> 
<pre><code class="language-java">@Autowired
private RestTemplate loadBalancedRestTemplate;
</code></pre> 
<p>接下来，可以在对应的服务端调用方的方法内，基于RestTemplate借助服务名进行服务调用， 例如：</p> 
<pre><code class="language-java">@GetMapping("/consumer/doRestEcho3")
public String doRestEcho03(){
    String url=String.format("http://%s/provider/echo/%s","sca-provider",appName);
    //向服务提供方发起http请求,获取响应数据
    return loadBalancedRestTemplate.getForObject(
            url,//要请求的服务的地址
            String.class);//String.class为请求服务的响应结果类型
}
</code></pre> 
<p>RestTemplate在发送请求的时候会被LoadBalancerInterceptor拦截，它的作用就是用于RestTemplate的负载均衡，LoadBalancerInterceptor将负载均衡的核心逻辑交给了loadBalancer，核心代码如下所示(了解):</p> 
<pre><code class="language-java">public ClientHttpResponse intercept(final HttpRequest request, 
    final byte[] body, final ClientHttpRequestExecution execution) throws IOException {
	final URI originalUri = request.getURI();
	String serviceName = originalUri.getHost();
	return this.loadBalancer.execute(serviceName, 
    requestFactory.createRequest(request, body, execution));
}
</code></pre> 
<p>@LoadBalanced注解是属于Spring，而不是Ribbon的，Spring在初始化容器的时候，如果检测到Bean被@LoadBalanced注解，Spring会为其设置LoadBalancerInterceptor的拦截器。</p> 
<h3 id="Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5(%E4%BA%86%E8%A7%A3)">Ribbon负载均衡策略(了解)</h3> 
<p>基于Ribbon方式的负载均衡，Netflix默认提供了七种负载均衡策略，对于SpringCloud Alibaba解决方案中又提供了NacosRule策略，默认的负载均衡策略是轮训策略。如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/b1/ce/UZZNK6pT_o.png"></p> 
<p> 当系统提供的负载均衡策略不能满足我们需求时，我们还可以基于IRule接口自己定义策略.</p> 
<h3 id="%E5%B0%8F%E8%8A%82%E9%9D%A2%E8%AF%95%E5%88%86%E6%9E%90">小节面试分析</h3> 
<p>@Bean注解的作用?(一般用于配置类内部,描述相关方法,用于告诉spring此方法的返回值要交给spring管理,bean的名字默认为方法名,假如需要指定名字可以@Bean(“bean的名字”),最多的应用场景是整合第三方的资源-对象)</p> 
<p><br> @Autowired注解的作用?(此注解用于描述属性,构造方法,set方法等,用于告诉spring框架,按找一定的规则为属性进行DI操作,默认按属性,方法参数类型查找对应的对象,假如只找到一个,则直接注入,类型多个时还会按照属性名或方法参数名进行值的注入,假如名字也不同,就出报错.)</p> 
<p><br> Nacos中的负责均衡底层是如何实现的?(通过Ribbon实现,Ribbon中定义了一些负载均衡算法,然后基于这些算法从服务实例中获取一个实例为消费方法提供服务)</p> 
<p><br> Ribbon 是什么？(Netflix公司提供的负载均衡客户端,一般应用于服务的消费方法)</p> 
<p><br> Ribbon 可以解决什么问题? (基于负载均衡策略进行服务调用, 所有策略都会实现IRule接口)</p> 
<p><br> Ribbon 内置的负载策略都有哪些?(8种,可以通过查看IRule接口的实现类进行分析)</p> 
<p><br> @LoadBalanced的作用是什么？(描述RestTemplate对象,用于告诉Spring框架，在使用</p> 
<p>RestTempalte进行服务调用时，这个调用过程会被一个拦截器进行拦截,然后在拦截器内部,启动负载均衡策略。)</p> 
<p><br> 我们可以自己定义负载均衡策略吗？(可以，基于IRule接口进行策略定义,也可以参考NacosRule进行实现)<br>  </p> 
<h2 id="%E5%9F%BA%E4%BA%8EFeign%E7%9A%84%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89">基于Feign的远程服务调用（重点）</h2> 
<h3>背景分析</h3> 
<p>服务消费方基于rest方式请求服务提供方的服务时，一种直接的方式就是自己拼接url，拼接参数然后实现服务调用，但每次服务调用都需要这样拼接，代码量复杂且不易维护，此时Feign诞生。</p> 
<h3 id="Feign%E6%98%AF%E4%BB%80%E4%B9%88">Feign是什么</h3> 
<p>Feign 是一种声明式Web服务客户端，底层封装了对Rest技术的应用,通过Feign可以简化服务消费方对远程服务提供方法的调用实现。如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/3c/79/CefjPCp5_o.png"></p> 
<p> Feign 最早是由 Netflix 公司进行维护的，后来 Netflix 不再对其进行维护，最终 Feign 由一些社区进行维护，更名为 OpenFeign。</p> 
<h3 id="Feign%E5%BA%94%E7%94%A8%E5%AE%9E%E8%B7%B5%EF%BC%88%E6%8E%8C%E6%8F%A1%EF%BC%89">Feign应用实践（掌握）</h3> 
<p>第一步：在服务消费方，添加项目依赖(SpringCloud团队基于OpenFeign研发了starter)，代码如下：</p> 
<pre><code class="language-XML">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> 
<p>第二步：在启动类上添加@EnableFeignClients注解，代码如下：</p> 
<pre><code class="language-java">@EnableFeignClients
@SpringBootApplication
public class ConsumerApplication {…}
</code></pre> 
<p>第三步：定义Http请求API，基于此API借助OpenFeign访问远端服务，代码如下：</p> 
<pre><code class="language-java">package com.jt.consumer.service;
@FeignClient(name="sca-provider")//sca-provider为服务提供者名称
public interface RemoteProviderService{
    @GetMapping("/provider/echo/{string}")//前提是远端需要有这个服务
    public String echoMessage(@PathVariable("string") String string);
}
</code></pre> 
<p>其中，@FeignClient描述的接口底层会为其创建实现类。</p> 
<p>第四步：创建FeignConsumerController中并添加feign访问，代码如下：</p> 
<pre><code class="language-java">package com.jt.consumer.controller;
@RestController
@RequestMapping("/consumer/ ")
public class FeignConsumerController {
    @Autowired
    private RemoteProviderService remoteProviderService;
    /**基于feign方式的服务调用*/
    @GetMapping("/echo/{msg}")
    public String doFeignEcho(@PathVariable  String msg){
        //基于feign方式进行远端服务调用(前提是服务必须存在)
        return remoteProviderService.echoMessage(msg);
    }
}
</code></pre> 
<p>第五步：启动消费者服务，在浏览器中直接通过feign客户端进行访问，如图所示（反复刷新检测其响应结果）：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/cc/16/6PnFHZto_o.png"></p> 
<p> 说明，feign方式的远程服务调用，底层会自动基于ribbon组件实现负载均衡。</p> 
<h3 id="Feign%E9%85%8D%E7%BD%AE%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5">Feign配置进阶实践</h3> 
<p>一个服务提供方通常会提供很多资源服务,服务消费方基于同一个服务提供方写了很多服务调用接口,此时假如没有指定contextId,服务<br> 启动就会失败,例如，假如在服务消费方再添加一个如下接口,消费方启动时就会启动失败,例如:</p> 
<pre><code class="language-java"> @FeignClient(name="sca-provider")
 public interface RemoteOtherService {
     @GetMapping("/doSomeThing")
     public String doSomeThing();
}
</code></pre> 
<p>其启动异常如下：</p> 
<blockquote> 
 <p>The bean 'optimization-user.FeignClientSpecification', defined in null, could not be registered. A bean with that name has already been defined in null and overriding is disabled.<br>  </p> 
</blockquote> 
<p>此时我们需要为远程调用服务接口指定一个contextId,作为远程调用服务的唯一标识（这个标识是Bean对象的名字）即可,例如:</p> 
<pre><code class="language-java">@FeignClient(name="sca-provider",contextId="remoteProviderService")//sca-provider为服务提供者名称
interface RemoteProviderService{
    @GetMapping("/provider/echo/{string}")//前提是远端需要有这个服务
    public String echoMessage(@PathVariable("string") String string);
}
</code></pre> 
<p>还有,当我们在进行远程服务调用时,假如调用的服务突然不可用了或者调用过程超时了,怎么办呢?一般服务消费端会给出具体的容错方案,例如，在Feign应用中通过FallbackFactory接口的实现类进行默认的相关处理，例如:</p> 
<p>第一步:定义FallbackFactory接口的实现,代码如下:</p> 
<pre><code class="language-java">package com.cy.service.factory;
/**
 * 基于此对象处理RemoteProviderService接口调用时出现的服务中断,超时等问题
 */
@Component
public class ProviderFallbackFactory implements FallbackFactory&lt;RemoteProviderService&gt; {
    /**
     * 此方法会在RemoteProviderService接口服务调用时,出现了异常后执行.
     * @param throwable 用于接收异常
     */
    @Override
    public RemoteProviderService create(Throwable throwable) {
        return (msg)-&gt;{
                return "服务维护中,稍等片刻再访问";
        };
    }
}
</code></pre> 
<p>第二步:在Feign访问接口中应用FallbackFactory对象,例如:</p> 
<pre><code class="language-java">@FeignClient(name = "sca-provider", contextId = "remoteProviderService",
             fallbackFactory = ProviderFallbackFactory.class)//sca-provider为nacos中的服务名
public interface RemoteProviderService {
    @GetMapping("/provider/echo/{msg}")
    public String echoMsg(@PathVariable String msg);
}
</code></pre> 
<p>第三步:在配置文件application.yml中添加如下配置,启动feign方式调用时的服务中断处理机制.</p> 
<pre><code class="language-XML">feign:  
  hystrix:
    enabled: true #默认值为false
</code></pre> 
<p>第四步:在服务提供方对应的调用方法中添加Thread.sleep(5000)模拟耗时操作,然后启动服务进行访问测试.</p> 
<h3 id="Feign%20%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89">Feign 调用过程分析（了解）</h3> 
<p>Feign应用过程分析（底层逻辑先了解）：<br> 1)通过 @EnableFeignCleints 注解告诉springcloud,启动 Feign Starter 组件。<br> 2) Feign Starter 会在项目启动过程中注册全局配置，扫描包下所由@FeignClient注解描述的接口，然后由系统底层创建接口实现类(JDK代理类)，并构建类的对象，然后交给spring管理(注册 IOC 容器)。<br> 3) Feign接口被调用时，底层代理对象会将接口中的请求信息通过编码器创建 Request对象，基于此对象进行远程过程调用。<br> 4) Feign客户端请求对象会经Ribbon进行负载均衡，挑选出一个健康的 Server 实例（instance）。<br> 5) Feign客户端会携带 Request 调用远端服务并返回一个响应。<br> 6) Feign客户端对象对Response信息进行解析然后返回客户端。</p> 
<h3>小节面试分析</h3> 
<p>为什么使用feign?(基于Feign可以更加友好的实现服务调用，简化服务消费方对服务提供方方法的调用)。</p> 
<p><br> @FeignClient注解的作用是什么？(告诉Feign Starter，在项目启动时，为此注解描述的接口创建实现类-代理类)</p> 
<p><br> Feign方式的调用，底层负载均衡是如何实现的？(Ribbon)</p> 
<p><br> @EnableFeignCleints 注解的作用是什么？（描述配置类，例如启动类）</p> 
<h2 id="%E6%80%BB%E7%BB%93(Summary)">总结(Summary)</h2> 
<h3 id="%E9%87%8D%E9%9A%BE%E7%82%B9%E5%88%86%E6%9E%90">重难点分析</h3> 
<p>何为注册中心？(用于记录服务信息的一个web服务，例如淘宝平台，滴滴平台，美团外卖平台，……)</p> 
<p><br> 注册中心的核心对象？(服务提供方，服务消费方，注册中心-Registry)</p> 
<p><br> 市面上常用注册中心？(Google-Consul,Alibaba-Nacos,…)</p> 
<p><br> Nacos安装、启动、服务的注册、发现机制以及实现过程</p> 
<p><br> 服务调用时RestTemplate对象的应用。</p> 
<p><br> 基于Feign方式的服务调用及基本原理？</p> 
<h3 id="FAQ%E5%88%86%E6%9E%90">FAQ分析</h3> 
<p>Nacos是什么，提供了什么特性(服务的注册、发现、配置)？</p> 
<p><br> 你为什么会选择Nacos?（活跃度、稳定、性能、学习成本）</p> 
<p><br> Nacos的官网？(nacos.io)</p> 
<p><br> Nacos在github的源码？(github.com/alibaba/nacos)</p> 
<p><br> Nacos在windows环境下安装?(解压即可使用)</p> 
<p><br> Nacos在windows中的的初步配置？(application.properties访问数据库的数据源)</p> 
<p><br> Nacos服务注册的基本过程？（服务启动时发送web请求）</p> 
<p><br> Nacos服务消费的基本过程？（服务启动时获取服务实例，然后调用服务）</p> 
<p><br> Nacos服务负载均衡逻辑及设计实现？(Ribbon)</p> 
<p><br> 注册中心的核心数据是什么？（服务的名字和它对应的网络地址）</p> 
<p><br> 注册中心中心核心数据的存取为什么会采用读写锁?(底层安全和性能)</p> 
<p><br> Nacos健康检查的方式？(基于心跳包机制进行实现)</p> 
<p><br> Nacos是如何保证高可用的?(重试，本地缓存、集群)</p> 
<p><br> RestTemplate的基本作用是什么？</p> 
<p><br> Feign是什么，它的应用是怎样的，feign应用过程中的代理对象是如何创建的（JDK）？</p> 
<p><br> Feign方式的调用过程，其负载均衡是如何实现？(Ribbon)</p> 
<h3 id="Bug%E5%88%86%E6%9E%90">Bug分析</h3> 
<ul><li>404</li><li>400</li><li>405</li><li>500</li><li>………</li></ul> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/702185143bd3e71fa57ea1facdff5bc1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue, js 传递自身DOM元素，并添加class名称</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/83200aaff0e787f1d5c5d5a27255a667/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VOT Toolkit工具配置和使用--Python版本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>