<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>è®°ä¸€æ¬¡ K8s æ§åˆ¶å¹³é¢æ’éšœçš„è¡€æ³ªç»å†ï¼ - ç¼–ç¨‹çˆ±å¥½è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="è®°ä¸€æ¬¡ K8s æ§åˆ¶å¹³é¢æ’éšœçš„è¡€æ³ªç»å†ï¼" />
<meta property="og:description" content="é›†ç¾¤ä»¥åŠç¯å¢ƒä¿¡æ¯çš„ä¿¡æ¯ï¼š
k8s v1.18.4
3 èŠ‚ç‚¹ Master å‡ä¸º 8 æ ¸ 16Gi, 50Gi-SSD
å·®å¼‚åŒ–é…ç½®çš„ 19 èŠ‚ç‚¹ Minion
control-plane ç»„ä»¶ (kube-apiserver,etcd,kube-controller-manager, kube-scheduler) ä»¥ static-pod çš„æ¨¡å¼è¿›è¡Œéƒ¨ç½²
3 ä¸ª kube-apiserver å‰ç«¯æœ‰ä¸€ä¸ª VIP è¿›è¡Œæµé‡çš„ LoadBalance
è…¾è®¯äº‘çš„ SSD æ€§èƒ½å¤§æ¦‚æ˜¯ 130MB/s
æ•…éšœæè¿° åœ¨ 2021-9-10 ä¸‹åˆâ€œè¯¡å¼‚â€çš„äº‹æƒ…å¼€å§‹å‡ºç°ï¼škubectl å¶å°”å¡ä½æ— æ³•æ­£å¸¸ CRUDW æ ‡å‡†èµ„æº (Pod, Node ç­‰)ï¼Œæ­¤æ—¶å·²ç»æ„è¯†åˆ°æ˜¯éƒ¨åˆ†çš„ kube-apiserver æ— æ³•æ­£å¸¸å·¥ä½œï¼Œç„¶åå°è¯•åˆ†åˆ«æ¥å…¥ 3 å° kube-apiserver æ‰€åœ¨å®¿ä¸»æœºï¼Œå‘ç°ä»¥ä¸‹ä¸æ­£å¸¸çš„æƒ…å†µï¼š
ç°åœºçš„ä¿¡æ¯ k8s control-plane kube-apiserver Pod ä¿¡æ¯ $Â kubectlÂ getÂ podsÂ -nÂ kube-systemÂ kube-apiserver-x.x.x.xÂ -oÂ yaml ... containerStatuses: -Â containerID:Â docker://xxxxx ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/92c0befac7d9127104a4d055e8b5b9a6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-27T08:20:00+08:00" />
<meta property="article:modified_time" content="2022-01-27T08:20:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹çˆ±å¥½è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹çˆ±å¥½è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">è®°ä¸€æ¬¡ K8s æ§åˆ¶å¹³é¢æ’éšœçš„è¡€æ³ªç»å†ï¼</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align:center;"><img title="å¼•å¯¼å…³æ³¨" src="https://images2.imgbox.com/1a/48/64xxMV1X_o.gif" alt="22f0a0ab0709fa159bff47429de50a59.gif"><br></p> 
 <p>é›†ç¾¤ä»¥åŠç¯å¢ƒä¿¡æ¯çš„ä¿¡æ¯ï¼š</p> 
 <ul><li><p>k8s v1.18.4</p></li><li><p>3 èŠ‚ç‚¹ Master å‡ä¸º 8 æ ¸ 16Gi, 50Gi-SSD</p></li><li><p>å·®å¼‚åŒ–é…ç½®çš„ 19 èŠ‚ç‚¹ Minion</p></li><li><p>control-plane ç»„ä»¶ (kube-apiserver,etcd,kube-controller-manager, kube-scheduler) ä»¥ static-pod çš„æ¨¡å¼è¿›è¡Œéƒ¨ç½²</p></li><li><p>3 ä¸ª kube-apiserver å‰ç«¯æœ‰ä¸€ä¸ª VIP è¿›è¡Œæµé‡çš„ LoadBalance</p></li><li><p>è…¾è®¯äº‘çš„ SSD æ€§èƒ½å¤§æ¦‚æ˜¯ 130MB/s</p></li></ul> 
 <h3>æ•…éšœæè¿°</h3> 
 <blockquote> 
  <p>åœ¨ 2021-9-10 ä¸‹åˆâ€œè¯¡å¼‚â€çš„äº‹æƒ…å¼€å§‹å‡ºç°ï¼škubectl å¶å°”å¡ä½æ— æ³•æ­£å¸¸ CRUDW æ ‡å‡†èµ„æº (Pod, Node ç­‰)ï¼Œæ­¤æ—¶å·²ç»æ„è¯†åˆ°æ˜¯éƒ¨åˆ†çš„ kube-apiserver æ— æ³•æ­£å¸¸å·¥ä½œï¼Œç„¶åå°è¯•åˆ†åˆ«æ¥å…¥ 3 å° kube-apiserver æ‰€åœ¨å®¿ä¸»æœºï¼Œå‘ç°ä»¥ä¸‹ä¸æ­£å¸¸çš„æƒ…å†µï¼š</p> 
 </blockquote> 
 <h3>ç°åœºçš„ä¿¡æ¯</h3> 
 <h4>k8s control-plane kube-apiserver Pod ä¿¡æ¯</h4> 
 <pre class="has"><code class="language-go">$Â kubectlÂ getÂ podsÂ -nÂ kube-systemÂ kube-apiserver-x.x.x.xÂ -oÂ yaml
...
Â Â containerStatuses:
Â Â -Â containerID:Â docker://xxxxx
Â Â Â Â ....
Â Â Â Â lastState:
Â Â Â Â Â Â terminated:
Â Â Â Â Â Â Â Â containerID:Â docker://yyyy
Â Â Â Â Â Â Â Â exitCode:Â 137
Â Â Â Â Â Â Â Â finishedAt:Â "2021-09-10T09:29:02Z"
Â Â Â Â Â Â Â Â reason:Â OOMKilled
Â Â Â Â Â Â Â Â startedAt:Â "2020-12-09T07:02:23Z"
Â Â Â Â name:Â kube-apiserver
Â Â Â Â ready:Â true
Â Â Â Â restartCount:Â 1
Â Â Â Â started:Â true
Â Â Â Â state:
Â Â Â Â Â Â running:
Â Â Â Â Â Â Â Â startedAt:Â "2021-09-10T09:29:08Z"
...</code></pre> 
 <blockquote> 
  <p>9 æœˆ 10 æ—¥ï¼Œ kube-apiserver å› ä¸º OOM è¢« Kill è¿‡</p> 
 </blockquote> 
 <h4>å‘¨è¾¹ç›‘æ§</h4> 
 <h5>IaaS å±‚æä¾›ç›‘æ§ä¿¡æ¯ (control-plane æ‰€åœ¨å®¿ä¸»çš„é»‘ç›’ç›‘æ§ä¿¡æ¯)ï¼š</h5> 
 <img src="https://images2.imgbox.com/eb/8c/AdDq9KQq_o.png" alt="ce5876ca19a36ddcbd8839f4b5d55f98.png"> 
 <img src="https://images2.imgbox.com/a8/90/yCAjMbqm_o.png" alt="cb3debfd10d7265eb46d0f66813d4cf7.png"> 
 <p>æœ‰æ•ˆä¿¡æ¯ :</p> 
 <ul><li><p>å†…å­˜ ,CPU, è¯»å–ç£ç›˜å‘ˆç°æ­£ç›¸å…³ï¼Œå¹¶ä¸”åœ¨ 9 æœˆ 10 æ—¥å¼€å§‹æ˜æ˜¾ä¸‹é™å„æ–¹é¢æŒ‡æ ‡å›å½’æ­£å¸¸</p></li></ul> 
 <h5>Kube-apiserver Prometheus çš„ç›‘æ§ä¿¡æ¯ :</h5> 
 <img src="https://images2.imgbox.com/6f/d0/RzGTKbo5_o.png" alt="60456a5b93f84c1ee15214941bece594.png"> 
 <p>æœ‰æ•ˆä¿¡æ¯ :</p> 
 <ul><li><p>kube-apiserver çš„ IO å‡ºç°äº†é—®é¢˜ï¼Œprometheus åœ¨ä¸­é€”çš„æŸæ®µäº‹ä»¶æ— æ³•æ­£å¸¸çš„åˆ®å– kube-apiserver çš„ metrics æŒ‡æ ‡</p></li><li><p>kube-apiserver å ç”¨çš„å†…å­˜å•è°ƒé€’å¢ï¼Œå†…éƒ¨ workqueue çš„ <code>ADD</code>iops å¾ˆé«˜</p></li></ul> 
 <h5>å®æ—¶çš„ Debug ä¿¡æ¯</h5> 
 <img src="https://images2.imgbox.com/ce/76/kYgxyq4i_o.png" alt="670708d20fb33f6c89d6d971c59d9de3.png"> 
 <img src="https://images2.imgbox.com/91/a5/1Ko8tNI8_o.png" alt="a66f8933c9fc9771a4df5af28c704623.png"> 
 <img src="https://images2.imgbox.com/ba/d8/o61VpR8m_o.png" alt="2ef239593e9ff0af345740dad667e1d9.png"> 
 <img src="https://images2.imgbox.com/a5/f4/EeAMJBOn_o.png" alt="639b63e4af7d80ecda370234d2ea1314.png"> 
 <p>æœ‰æ•ˆä¿¡æ¯ :</p> 
 <ul><li><p>ä¸¤ä¸ª Master èŠ‚ç‚¹çš„å†…å­˜éƒ½å‡ ä¹è¢«å ç”¨äº† 80%~90% çš„æ ·å­</p></li><li><p>å¤§é‡çš„å†…å­˜éƒ½è¢« <code>kube-apiserver</code> è¿›ç¨‹åƒæ‰äº†</p></li><li><p>æœ‰ä¸€å° Master ç»„ä»¶æ ¼å¤–ç‰¹æ®Šï¼Œé™¤äº†å†…å­˜ä¹‹å¤–ï¼ŒCPU ä¹Ÿå·²ç»è¢«æ‰“æ»¡ï¼Œå¹¶ä¸”å¤§é‡çš„ CPU é™·å…¥å†…æ ¸æ€ï¼Œwa å¾ˆé«˜</p></li><li><p>æœºå™¨ä¸Šå‡ ä¹æ¯ä¸ªè¿›ç¨‹éƒ½ " ç–¯ " äº†ï¼Œéƒ½åœ¨è¿›è¡Œå¤§é‡çš„è¯»ç›˜æ“ä½œï¼Œæ¥å…¥çš„ shell å·²ç»åŸºæœ¬ä¸å¯ç”¨</p></li><li><p>å”¯ä¸€å†…å­˜æ¶ˆè€—ç›¸å¯¹è¾ƒä½ï¼ˆå½“æ—¶å ç”¨ 8Giï¼‰çš„ Master èŠ‚ç‚¹ä¸Šï¼Œkube-apiserver æ›¾ç»è¢« OOM-Kill è¿‡</p></li></ul> 
 <h3>ä¸€äº›ç–‘é—®ä»¥åŠç›¸å…³çš„çŒœæƒ³</h3> 
 <p>é‚£ä¹ˆä¸ºä»€ä¹ˆ kube-apiserver æ¶ˆè€—å¤§é‡å†…å­˜ï¼Ÿ</p> 
 <ol><li><p>å­˜åœ¨ Client åœ¨è¿›è¡Œå…¨é‡ List æ ¸å¿ƒèµ„æº</p></li><li><p>etcd æ— æ³•æä¾›æ­£å¸¸æœåŠ¡ï¼Œå¼•å‘ kube-apiserver æ— æ³•æ­£å¸¸ä¸ºå…¶ä»–çš„ control-plane ç»„ä»¶æ— æ³•æä¾›é€‰ä¸»æœåŠ¡ï¼Œkube-controller-manager, kube-scheduler ä¸æ–­é‡å¯ï¼Œä¸æ–­ ListAndWatch è¿›è€Œæ‰“å®æ•´ä¸ªæœºå™¨</p></li><li><p>kube-apiserver ä»£ç æœ‰ bugï¼Œå­˜åœ¨å†…å­˜æ³„æ¼</p></li></ol> 
 <p>etcd é›†ç¾¤ä¸ºä½•æ— æ³•æ­£å¸¸å·¥ä½œï¼Ÿ</p> 
 <ol><li><p>etcd é›†ç¾¤å†…ç½‘ç»œæŠ–åŠ¨</p></li><li><p>ç£ç›˜æ€§èƒ½ä¸‹é™ï¼Œæ— æ³•æ»¡è¶³æ­£å¸¸çš„ etcd å·¥ä½œ</p></li><li><p>etcd æ‰€åœ¨å®¿ä¸»æœºè®¡ç®—èµ„æºåŒ®ä¹ (CPU, RAM)ï¼Œetcd åªèƒ½åˆ†é…åˆ°å¾ˆå°‘çš„æ—¶é—´è½®ç‰‡ã€‚è€Œä»£ç ä¸­è®¾ç½®çš„ç½‘ç»œæè¿°ç¬¦çš„ Deadline åˆ°æœŸ</p></li></ol> 
 <p>kube-controller-managerï¼Œkube-scheduler è¿™ç§æ— çŠ¶æ€æœåŠ¡ä¸ºä»€ä¹ˆä¼šå¤§é‡çš„è¯»ç›˜ï¼Ÿ</p> 
 <ol><li><p>kube-controller-managerï¼Œkube-scheduler è¯»å–æœ¬åœ°çš„é…ç½®æ–‡ä»¶</p></li><li><p>æ“ä½œç³»ç»Ÿå†…å­˜æåº¦ç´§ç¼©çš„æƒ…å†µä¸‹ï¼Œä¼šå°†éƒ¨åˆ†ä»£ç æ®µå¾ˆå¤§çš„è¿›ç¨‹çš„å†…å­˜é¡µé©±é€ã€‚ä¿è¯è¢«è°ƒåº¦çš„è¿›ç¨‹èƒ½å¤Ÿè¿è¡Œã€‚å½“è¢«é©±é€çš„è¿›ç¨‹å†åº¦è¢«è°ƒåº¦çš„æ—¶å€™ä¼šé‡æ–°è¯»å…¥å†…å­˜ã€‚è¿™æ ·ä¼šå¯¼è‡´ I/O å¢åŠ </p></li></ol> 
 <h3>ä¸€äº›æ—¥å¿—</h3> 
 <p>kube-apiserver ç›¸å…³ :</p> 
 <pre class="has"><code class="language-go">I0907Â 07:04:17.611412Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[1140445702]:Â "Get"Â url:/apis/storage.k8s.io/v1/volumeattachments/csi-b8d912ae5f2cd6d9cfaecc515568c455afdc729fd4c721e4a6ed24ae09d9bcb6,user-agent:kube-controller-manager/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb/system:serviceaccount:kube-system:attachdetach-controller,client:10.0.0.42Â (started:Â 2021-09-07Â 07:04:16.635225967Â +0800Â CSTÂ m=+23472113.230522917)Â (totalÂ time:Â 976.1773ms):
Trace[1140445702]:Â [976.164659ms]Â [976.159045ms]Â AboutÂ toÂ writeÂ aÂ response
I0907Â 07:04:17.611478Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[630463685]:Â "Get"Â url:/apis/storage.k8s.io/v1/volumeattachments/csi-30c942388d7a835b685e5d5a44a15943bfc87b228e3b9ed2fa01ed071fbc1ada,user-agent:kube-controller-manager/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb/system:serviceaccount:kube-system:attachdetach-controller,client:10.0.0.42Â (started:Â 2021-09-07Â 07:04:16.627643544Â +0800Â CSTÂ m=+23472113.222940496)Â (totalÂ time:Â 983.823847ms):
Trace[630463685]:Â [983.812225ms]Â [983.803546ms]Â AboutÂ toÂ writeÂ aÂ response
I0907Â 07:04:17.611617Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[1538026391]:Â "Get"Â url:/apis/storage.k8s.io/v1/volumeattachments/csi-3360a8de64a82e17aa96f373f6dc185489bbc653824b3099c81a6fce754a3f6f,user-agent:kube-controller-manager/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb/system:serviceaccount:kube-system:attachdetach-controller,client:10.0.0.42Â (started:Â 2021-09-07Â 07:04:16.565151702Â +0800Â CSTÂ m=+23472113.160448667)Â (totalÂ time:Â 1.046416117s):
Trace[1538026391]:Â [1.046397533s]Â [1.046390931s]Â AboutÂ toÂ writeÂ aÂ response

#Â ....Næ¡ç±»ä¼¼çš„æ—¥å¿—....
I0907Â 07:04:24.171900Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[1679666311]:Â "Get"Â url:/apis/storage.k8s.io/v1/volumeattachments/csi-b5ee4d68917fbf1262cc0a8047d9c37133a4a766f53f3566c40f868edd8a0bf0,user-agent:kube-controller-manager/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb/system:serviceaccount:kube-system:attachdetach-controller,client:10.0.0.42Â (started:Â 2021-09-07Â 07:04:17.116692376Â +0800Â CSTÂ m=+23472113.711989328)Â (totalÂ time:Â 5.467094616s):
Trace[1679666311]:Â [4.69843064s]Â [4.698422403s]Â AboutÂ toÂ writeÂ aÂ response
Trace[1679666311]:Â [5.467093266s]Â [768.662626ms]Â TransformedÂ responseÂ object
I0907Â 07:04:24.142154Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[2029984150]:Â "Get"Â url:/apis/storage.k8s.io/v1/volumeattachments/csi-29407a58f021e9911d3ed9b5745dddfd40e61d64e1ecc62cf71ab9e037f83107,user-agent:kube-controller-manager/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb/system:serviceaccount:kube-system:attachdetach-controller,client:10.0.0.42Â (started:Â 2021-09-07Â 07:04:17.102181932Â +0800Â CSTÂ m=+23472113.697478883)Â (totalÂ time:Â 5.50528966s):
Trace[2029984150]:Â [4.704869664s]Â [4.704865103s]Â AboutÂ toÂ writeÂ aÂ response
Trace[2029984150]:Â [5.505288975s]Â [800.419311ms]Â TransformedÂ responseÂ object
E0907Â 07:04:37.327057Â Â Â Â Â Â Â 1Â authentication.go:53]Â UnableÂ toÂ authenticateÂ theÂ requestÂ dueÂ toÂ anÂ error:Â [invalidÂ bearerÂ token,Â contextÂ canceled]
I0907Â 07:04:40.391602Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[2032502471]:Â "Update"Â url:/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/10.0.0.8,user-agent:kubelet/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb,client:10.0.0.8Â (started:Â 2021-09-07Â 07:04:17.392952999Â +0800Â CSTÂ m=+23472113.988249966)Â (totalÂ time:Â 20.164329656s):
Trace[2032502471]:Â [286.281637ms]Â [286.281637ms]Â AboutÂ toÂ convertÂ toÂ expectedÂ version
Trace[2032502471]:Â [481.650367ms]Â [195.36873ms]Â ConversionÂ done
Trace[2032502471]:Â [674.825685ms]Â [193.175318ms]Â AboutÂ toÂ storeÂ objectÂ inÂ database
Trace[2032502471]:Â [20.164329656s]Â [19.489503971s]Â END
I0907Â 07:04:41.502454Â Â Â Â Â Â Â 1Â trace.go:116]Â Trace[951110924]:Â "Get"Â url:/apis/storage.k8s.io/v1/volumeattachments/csi-0938f8852ff15a3937d619216756f9bfa5b0d91c0eb95a881b3caccbf8e87fb2,user-agent:kube-controller-manager/v1.18.4Â (linux/amd64)Â kubernetes/f8797eb/system:serviceaccount:kube-system:attachdetach-controller,client:10.0.0.42Â (started:Â 2021-09-07Â 07:04:17.29109778Â +0800Â CSTÂ m=+23472113.886395069)Â (totalÂ time:Â 20.41128212s):
Trace[951110924]:Â [12.839487235s]Â [12.839478549s]Â AboutÂ toÂ writeÂ aÂ response
Trace[951110924]:Â [20.411280569s]Â [7.571793334s]Â TransformedÂ responseÂ object

W0907Â 07:10:39.496915Â Â Â Â Â Â Â 1Â clientconn.go:1208]Â grpc:Â addrConn.createTransportÂ failedÂ toÂ connectÂ toÂ {https://etcd0:2379Â Â &lt;nil&gt;Â 0Â &lt;nil&gt;}.Â ErrÂ :connectionÂ error:Â descÂ =Â "transport:Â ErrorÂ whileÂ dialingÂ contextÂ deadlineÂ exceeded".Â Reconnecting...
I0907Â 07:10:39.514215Â Â Â Â Â Â Â 1Â clientconn.go:882]Â blockingPicker:Â theÂ pickedÂ transportÂ isÂ notÂ ready,Â loopÂ backÂ toÂ repick
E0907Â 07:10:39.514473Â Â Â Â Â Â Â 1Â status.go:71]Â apiserverÂ receivedÂ anÂ errorÂ thatÂ isÂ notÂ anÂ metav1.Status:Â &amp;errors.errorString{s:"contextÂ canceled"}
E0907Â 07:10:39.514538Â Â Â Â Â Â Â 1Â status.go:71]Â apiserverÂ receivedÂ anÂ errorÂ thatÂ isÂ notÂ anÂ metav1.Status:Â &amp;errors.errorString{s:"contextÂ canceled"}
I0907Â 07:10:39.514662Â Â Â Â Â Â Â 1Â clientconn.go:882]Â blockingPicker:Â theÂ pickedÂ transportÂ isÂ notÂ ready,Â loopÂ backÂ toÂ repick
E0907Â 07:10:39.514679Â Â Â Â Â Â Â 1Â status.go:71]Â apiserverÂ receivedÂ anÂ errorÂ thatÂ isÂ notÂ anÂ metav1.Status:Â &amp;errors.errorString{s:"contextÂ canceled"}
E0907Â 07:10:39.514858Â Â Â Â Â Â Â 1Â status.go:71]Â apiserverÂ receivedÂ anÂ errorÂ thatÂ isÂ notÂ anÂ metav1.Status:Â &amp;errors.errorString{s:"contextÂ canceled"}
W0907Â 07:10:39.514925Â Â Â Â Â Â Â 1Â clientconn.go:1208]Â grpc:Â addrConn.createTransportÂ failedÂ toÂ connectÂ toÂ {https://etcd0:2379Â Â &lt;nil&gt;Â 0Â &lt;nil&gt;}.Â ErrÂ :connectionÂ error:Â descÂ =Â "transport:Â ErrorÂ whileÂ dialingÂ contextÂ deadlineÂ exceeded".Â Reconnecting...</code></pre> 
 <blockquote> 
  <p>å¯ä»¥çœ‹åˆ°å¯¹ etcd çš„æ“ä½œè€—æ—¶è¶Šæ¥è¶Šæ…¢ã€‚å¹¶ä¸”æœ€åç”šè‡³ä¸¢å¤±äº†ä¸ etcd çš„è¿æ¥</p> 
 </blockquote> 
 <p>etcd æ—¥å¿—ã€å·²ç»ä¸¢å¤± 9 æœˆ 7 æ—¥çš„æ—¥å¿—ã€‘:</p> 
 <pre class="has"><code class="language-go">{"level":"warn","ts":"2021-09-10T17:14:50.559+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49824","server-name":"","error":"readÂ tcpÂ 10.0.0.8:2380-&gt;10.0.0.42:49824:Â i/oÂ timeout"}
{"level":"warn","ts":"2021-09-10T17:14:58.993+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.6:54656","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:15:03.961+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.6:54642","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:15:32.253+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.6:54658","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:15:49.299+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49690","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:15:55.930+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49736","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:16:29.446+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.6:54664","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:16:24.026+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49696","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:16:36.625+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49714","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:17:54.241+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49878","server-name":"","error":"readÂ tcpÂ 10.0.0.8:2380-&gt;10.0.0.42:49878:Â i/oÂ timeout"}
{"level":"warn","ts":"2021-09-10T17:18:31.712+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49728","server-name":"","error":"EOF"}
{"level":"warn","ts":"2021-09-10T17:18:31.785+0800","caller":"embed/config_logging.go:279","msg":"rejectedÂ connection","remote-addr":"10.0.0.42:49800","server-name":"","error":"EOF"}</code></pre> 
 <blockquote> 
  <p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥èŠ‚ç‚¹çš„ etcd ä¸é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹çš„é€šä¿¡ä¹Ÿå¼‚å¸¸äº†ã€‚æ— æ³•æ­£å¸¸å¯¹å¤–æä¾›æœåŠ¡</p> 
 </blockquote> 
 <h3>æ·±å…¥è°ƒæŸ¥</h3> 
 <h4>æŸ¥çœ‹ kube-apiserver Heap-Profile</h4> 
 <img src="https://images2.imgbox.com/6d/3e/ULx0Zc8O_o.png" alt="a70ff193de91ac0cb27642a995a20836.png"> 
 <p>è·å–åˆ° kube-apiserver æœ€è¿‘çš„ Profile å¯ä»¥å‘ç°å¤§é‡çš„å†…å­˜éƒ½è¢« <code>registry(*Store).DeleteCollection</code> åƒæ‰äº†ã€‚DeleteCollection ä¼šå…ˆè¿›è¡Œ List æ“ä½œï¼Œç„¶åå¹¶å‘åˆ é™¤æ¯ä¸ª Itemã€‚ç¬é—´åƒæ‰å¤§é‡å†…å­˜ä¹Ÿåœ¨æƒ…ç†ä¹‹ä¸­ã€‚ä¹Ÿè®¸æˆ‘è¿™ä¹ˆå€’éœ‰ï¼Œè¿™æ¬¡æŠ“çš„æ—¶å€™å°±æ­£å¥½å¤„äº Delete çš„ç–¯ç‹‚è°ƒç”¨æœŸé—´ï¼Œä¼‘æ¯ 10 åˆ†é’Ÿï¼Œç­‰ä¸‹å†æŠ“ä¸€æ¬¡çœ‹çœ‹ã€‚</p> 
 <p>æ€ä¹ˆå›äº‹ï¼Ÿæ€ä¹ˆ <code>DeleteCollection</code> è¿˜æ˜¯æŒæœ‰è¿™ä¹ˆå¤šå†…å­˜ã€‚æ­¤å¤„å…¶å®å·²ç»å¼€å§‹æ€€ç–‘ kube-apiserver æœ‰ goroutine æ³„æ¼çš„å¯èƒ½äº†ã€‚</p> 
 <blockquote> 
  <p>çœ‹æ¥ heap çš„ Profile æ— æ³•æä¾›è¶³å¤Ÿçš„ä¿¡æ¯è¿›è¡Œè¿›ä¸€æ­¥çš„é—®é¢˜ç¡®å®šï¼Œç»§ç»­æŠ“å– kube-apiserver goroutine çš„ profile</p> 
 </blockquote> 
 <h4>æŸ¥çœ‹ kube-apiserver goroutine-profile</h4> 
 <p>1.8W goroutine</p> 
 <pre class="has"><code class="language-go">goroutineÂ 18970952966Â [chanÂ send,Â 429Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc00f082ba0,Â 0xc04e059b90,Â 0x9,Â 0x9,Â 0xc235e37570)
--
goroutineÂ 18971918521Â [chanÂ send,Â 394Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc01f5a7c20,Â 0xc025cf8750,Â 0x9,Â 0x9,Â 0xc128042620)
--
goroutineÂ 18975541850Â [chanÂ send,Â 261Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc08bb1c780,Â 0xc095222240,Â 0x9,Â 0x9,Â 0xc128667340)
--
goroutineÂ 18972733441Â [chanÂ send,Â 363Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc015c2c9c0,Â 0xc0db776240,Â 0x9,Â 0x9,Â 0xc124b0f570)
--
goroutineÂ 18973170460Â [chanÂ send,Â 347Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc07a804c60,Â 0xc04ee83200,Â 0x9,Â 0x9,Â 0xc23e555c00)
--
goroutineÂ 18974040729Â [chanÂ send,Â 316Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc028d40780,Â 0xc243ea0cf0,Â 0x9,Â 0x9,Â 0xc14a6be770)
--
goroutineÂ 18974695712Â [chanÂ send,Â 292Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc04573b5c0,Â 0xc04f0af290,Â 0x9,Â 0x9,Â 0xc1982732d0)
--
goroutineÂ 18974885774Â [chanÂ send,Â 285Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc26065b9e0,Â 0xc06f025710,Â 0x9,Â 0x9,Â 0xc229945f80)
--
goroutineÂ 18971511296Â [chanÂ send,Â 408Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc021e74480,Â 0xc0313a54d0,Â 0x9,Â 0x9,Â 0xc1825177a0)
--
goroutineÂ 18975459144Â [chanÂ send,Â 263Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc26cb9d1a0,Â 0xc17672b440,Â 0x9,Â 0x9,Â 0xc156fcd810)
--
goroutineÂ 18973661056Â [chanÂ send,Â 331Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc2ba3f1680,Â 0xc19df40870,Â 0x9,Â 0x9,Â 0xc24b888a10)
--
goroutineÂ 18973633598Â [chanÂ send,Â 331Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc24a0ef5c0,Â 0xc05472a900,Â 0x9,Â 0x9,Â 0xc01ec14af0)
--
goroutineÂ 18974804879Â [chanÂ send,Â 288Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc0863f9ce0,Â 0xc04fcee090,Â 0x9,Â 0x9,Â 0xc2257a1d50)
--
goroutineÂ 18974203255Â [chanÂ send,Â 310Â minutes]:
k8s.io/kubernetes/vendor/k8s.io/apiserver/pkg/registry/generic/registry.(*Store).DeleteCollection.func1(0xc2727ed8c0,Â 0xc021d4ae10,Â 0x9,Â 0x9,Â 0xc173af3570)
#Â ...è¿˜æœ‰å¾ˆå¤šï¼Œå°±ä¸åˆ—ä¸¾äº†...</code></pre> 
 <p>æœç„¶å¤§é‡å¯†é›†çš„ goroutine å…¨éƒ¨éƒ½ Block åœ¨ chan sendï¼Œå¹¶ä¸”æ—¶é—´ä¸Šå¾ˆå¯†é›†ã€‚DeleteCollection è¯¥æ¥å£çš„è°ƒç”¨ä¸€èˆ¬éƒ½æ˜¯ kube-controller-manager çš„ namespace_deleterã€‚å¦‚æœ kube-apiserver çš„æ¥å£è°ƒç”¨å¼‚å¸¸ä¼šè¿›è¡Œ Backoffï¼Œç„¶åç»§ç»­è¯·æ±‚ï¼Œæ­¤å¤„çš„å¼‚å¸¸æ˜¯<strong>å’Œ kube-apiserver çš„é€šè®¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯ kube-apiserver æ— æ³•æ­£å¸¸å’Œ etcd äº¤äº’</strong></p> 
 <p>æŸ¥çœ‹ kube-controller-manager çš„æ—¥å¿—</p> 
 <pre class="has"><code class="language-go">E1027Â 15:15:01.016712Â Â Â Â Â Â Â 1Â leaderelection.go:320]Â errorÂ retrievingÂ resourceÂ lockÂ kube-system/kube-controller-manager:Â etcdserver:Â requestÂ timedÂ out
I1027Â 15:15:01.950682Â Â Â Â Â Â Â 1Â leaderelection.go:277]Â failedÂ toÂ renewÂ leaseÂ kube-system/kube-controller-manager:Â timedÂ outÂ waitingÂ forÂ theÂ condition
F1027Â 15:15:01.950760Â Â Â Â Â Â Â 1Â controllermanager.go:279]Â leaderelectionÂ lost
I1027Â 15:15:01.962210Â Â Â Â Â Â Â 1Â certificate_controller.go:131]Â ShuttingÂ downÂ certificateÂ controllerÂ "csrsigning"</code></pre> 
 <p>è™½ç„¶æ²¡æœ‰è¾“å‡ºè°ƒç”¨ DeleteCollection ç›¸å…³çš„æ—¥å¿—ï¼Œä½†æ˜¯ kube-controller-manager è¿›è¡Œ LeaderElection çš„ ConfigMap ä¹Ÿæ— æ³•æ­£å¸¸çš„åˆ·æ–°äº†ã€‚å¹¶ä¸”æŠ¥é”™ä¹Ÿéå¸¸æ˜ç¡®çš„æŒ‡å‡ºæ˜¯ kube-apiserver è¯·æ±‚ etcd å‡ºç° timeoutã€‚</p> 
 <h4>kube-apiserver DeleteCollection å®ç°</h4> 
 <pre class="has"><code class="language-go">funcÂ (eÂ *Store)Â DeleteCollection(ctxÂ context.Context,Â deleteValidationÂ rest.ValidateObjectFunc,Â optionsÂ *metav1.DeleteOptions,Â listOptionsÂ *metainternalversion.ListOptions)Â (runtime.Object,Â error)Â {

Â Â Â Â ...
Â listObj,Â errÂ :=Â e.List(ctx,Â listOptions)
Â ifÂ errÂ !=Â nilÂ {
Â Â returnÂ nil,Â err
Â }
Â items,Â errÂ :=Â meta.ExtractList(listObj)
Â ...
Â wgÂ :=Â sync.WaitGroup{}
Â toProcessÂ :=Â make(chanÂ int,Â 2*workersNumber)
Â errsÂ :=Â make(chanÂ error,Â workersNumber+1)

Â goÂ func()Â {
Â Â deferÂ utilruntime.HandleCrash(func(panicReasonÂ interface{})Â {
Â Â Â errsÂ &lt;-Â fmt.Errorf("DeleteCollectionÂ distributorÂ panicked:Â %v",Â panicReason)
Â Â })
Â Â forÂ iÂ :=Â 0;Â iÂ &lt;Â len(items);Â i++Â {
Â Â Â toProcessÂ &lt;-Â i
Â Â }
Â Â close(toProcess)
Â }()

Â wg.Add(workersNumber)
Â forÂ iÂ :=Â 0;Â iÂ &lt;Â workersNumber;Â i++Â {
Â Â goÂ func()Â {
Â Â Â //Â panicsÂ don'tÂ crossÂ goroutineÂ boundaries
Â Â Â deferÂ utilruntime.HandleCrash(func(panicReasonÂ interface{})Â {
Â Â Â Â errsÂ &lt;-Â fmt.Errorf("DeleteCollectionÂ goroutineÂ panicked:Â %v",Â panicReason)
Â Â Â })
Â Â Â deferÂ wg.Done()

Â Â Â forÂ indexÂ :=Â rangeÂ toProcessÂ {
Â Â Â Â Â Â Â ...
Â Â Â Â ifÂ _,Â _,Â errÂ :=Â e.Delete(ctx,Â accessor.GetName(),Â deleteValidation,Â options.DeepCopy());Â errÂ !=Â nilÂ &amp;&amp;Â !apierrors.IsNotFound(err)Â {
Â Â Â Â Â klog.V(4).InfoS("DeleteÂ objectÂ inÂ DeleteCollectionÂ failed",Â "object",Â klog.KObj(accessor),Â "err",Â err)
Â Â Â Â Â errsÂ &lt;-Â err
Â Â Â Â Â return
Â Â Â Â }
Â Â Â }
Â Â }()
Â }
Â wg.Wait()
Â selectÂ {
Â caseÂ errÂ :=Â &lt;-errs:
Â Â returnÂ nil,Â err
Â default:
Â Â returnÂ listObj,Â nil
Â }
}</code></pre> 
 <blockquote> 
  <p>å¦‚æœ <code>e.Delete</code> å‘ç”Ÿå¼‚å¸¸ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬åœºæ™¯ä¸‹çš„ etcd å¼‚å¸¸ï¼‰ã€‚worker goroutine å°†ä¼šæ­£å¸¸é€€å‡ºï¼Œä½†æ˜¯ä»»åŠ¡åˆ†é… goroutine æ— æ³•æ­£å¸¸é€€å‡ºï¼ŒBlock åœ¨å‘é€ toProcess chan çš„ä»£ç å—ä¸­ã€‚å¦‚æœè¯¥ Goroutine æ— æ³•ç»“æŸï¼Œé‚£ä¹ˆé€šè¿‡ etcd çš„ List æ¥å£è·å–åˆ°çš„ <strong>items</strong> ä¹Ÿæ— æ³•è¢« GCï¼Œåœ¨å†…å­˜ä¸­å¤§é‡å †ç§¯ï¼Œå¯¼è‡´ OOM</p> 
 </blockquote> 
 <h3>æ€»ç»“</h3> 
 <ol><li><p>æ’éšœä¹‹å‰éœ€è¦å¯¹æ­£å¸¸æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜ç¡®çš„å®šä½ï¼Œä½•è°“â€œæ­£å¸¸â€ï¼Ÿ</p></li></ol> 
 <blockquote> 
  <p>æ ¹æ®ä¹‹å‰çš„å®è·µç»éªŒ : 100Nodeï¼Œ1400Pod, 50 Configmap, 300 event.<code>kube-apiserver</code> æ¶ˆè€—çš„èµ„æºå¤§æ¦‚åœ¨ 2Gi çš„å†…å­˜ä»¥åŠå•æ ¸å¿ƒ 10% çš„è®¡ç®—èµ„æº .</p> 
 </blockquote> 
 <ol><li><p>æœ¬æ¬¡æ’éšœè¿‡ç¨‹ä¸­å¤§æ¦‚å¦‚ä¸‹ :</p></li></ol> 
 <ul><li><p>é€šè¿‡ä¸€äº›ä¸æ­£å¸¸çš„è¡¨ç°ï¼Œæ„Ÿè§‰åˆ°é—®é¢˜çš„å­˜åœ¨</p></li><li><p>å¤§æ¦‚ç¡®å®šå¼•å‘æ•…éšœçš„ç»„ä»¶ï¼Œé€šè¿‡ç®¡ç†å·¥å…·è·å–è¯¥ç»„ä»¶ç›¸å…³çš„ä¿¡æ¯</p></li><li><p>åœ¨ç›¸å…³çš„ç›‘æ§ç³»ç»Ÿä¸­å¯»æ‰¾å¼‚å¸¸å‘ç”Ÿçš„æ—¶é—´ï¼Œæå–ç›¸å…³çš„æœ‰æ•ˆä¿¡æ¯æ¯”å¦‚ CPUï¼ŒRAMï¼ŒDisk çš„æ¶ˆè€—</p></li><li><p>å¯¹è§¦å‘æ•…éšœçš„åŸå› åšå‡è®¾</p></li><li><p>æŸ¥æ‰¾ç›¸å…³ç»„ä»¶çš„æ—¥å¿— , Profile æ¥å°è¯å‡è®¾</p></li></ul> 
 <ol><li><p>å¦‚ä½•é˜²æ­¢ control-plane é“¾å¼å´©æºƒ</p></li></ol> 
 <ul><li><p>æ˜ç¡®è®¾ç½® kube-apiserver çš„ CPU èµ„æºå†…å­˜èµ„æºçš„æ¶ˆè€—ã€‚é˜²æ­¢åœ¨æ··éƒ¨æ¨¡å¼ä¸‹å› ä¸º kube-apiserver æ¶ˆè€—å¤§é‡å†…å­˜èµ„æºçš„å‰æä¸‹å½±å“åˆ° etcd çš„æ­£å¸¸å·¥ä½œ</p></li><li><p>etcd é›†ç¾¤ç‹¬ç«‹äº control-plane å…¶ä»–çš„ç»„ä»¶éƒ¨ç½²</p></li></ul> 
 <h3>ä¿®å¤ kube-apiserver Goroutine æ³„æ¼çš„ PR</h3> 
 <ul><li><p>https://github.com/kubernetes/kubernetes/pull/105606</p></li></ul> 
 <p>åŸæ–‡é“¾æ¥ï¼š<strong>https://github.com/k8s-club/k8s-club/blob/main/articles/%E6%8A%93%E8%99%AB%E6%97%A5%E8%AE%B0%20-%20kube-apiserver.md</strong></p> 
 <p><img src="https://images2.imgbox.com/2e/1f/6wJiPDxA_o.gif" alt="0d1f4ceb1e8a627236fbebc8a8e3ce34.gif"><br></p> 
 <p><img title="" src="https://images2.imgbox.com/75/48/7un9QZCE_o.png" alt="2936bfed1ed0cf84c40262b61aecc970.png"></p> 
 <p><strong>ä½ å¯èƒ½è¿˜å–œæ¬¢</strong></p> 
 <p>ç‚¹å‡»ä¸‹æ–¹å›¾ç‰‡å³å¯é˜…è¯»<br><br></p> 
 <p><a href="" rel="nofollow"><img src="https://images2.imgbox.com/a5/42/tOF3w5dR_o.png" alt="2a9916cd1bbdfcfd8449db3955db2ddc.png"></a></p> 
 éªšæ“ä½œï¼ŒK8s é›†ç¾¤å¤–çš„ Endpoint ä¹Ÿèƒ½åŠ¨æ€å˜åŒ– 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/57/be/wUv1UOwj_o.gif" alt="3e264e0decc85f014ea187d9249ba1e2.gif"></p> 
 <p style="text-align:center;"><strong>äº‘åŸç”Ÿæ˜¯ä¸€ç§ä¿¡ä»°Â ğŸ¤˜</strong></p> 
 <p style="text-align:center;"><strong>å…³æ³¨å…¬ä¼—å·</strong></p> 
 <p style="text-align:center;"><strong>åå°å›å¤â—‰k8sâ—‰è·å–å²ä¸Šæœ€æ–¹ä¾¿å¿«æ·çš„ Kubernetes é«˜å¯ç”¨éƒ¨ç½²å·¥å…·ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤ï¼Œè¿ ssh éƒ½ä¸éœ€è¦ï¼</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/47/5a/MgztM316_o.gif" alt="0c46e20c0091065cb6ace2573cee84fa.gif"></p> 
 <p style="text-align:left;"><img src="https://images2.imgbox.com/11/36/xAhVqImW_o.gif" alt="bbdd80bca908cb690b175768037dd106.gif"></p> 
 <p>ç‚¹å‡»Â "é˜…è¯»åŸæ–‡"Â è·å–<strong>æ›´å¥½çš„é˜…è¯»ä½“éªŒï¼</strong></p> 
 <p style="text-align:right;"><strong>å‘ç°æœ‹å‹åœˆå˜â€œå®‰é™â€äº†å—ï¼Ÿ</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/62/72/njC7WZYj_o.gif" alt="6b8b8a46c5afec9cb592777c6e2d272b.gif"></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7d8ad8bb93b3f80e31733bb9f297cb80/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">åä¸ºäº‘Centos7æ­å»ºhadoopé›†ç¾¤ä¸‰ï¼šjdkï¼Œhadoopå®‰è£…</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f55fc1b51d56702e785ad369028d3b26/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">æœåŠ¡å™¨å®‰è£… Ubuntu ç³»ç»Ÿå®Œæˆé‡å¯åèŠ±å±ã€ç´«å±è§£å†³åŠæ³•</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹çˆ±å¥½è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>