<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>sqoop使用手册 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="sqoop使用手册" />
<meta property="og:description" content="Sqoop使用手册 转载请注明出处：http://www.cnblogs.com/xiaodf/
1 Sqoop概述2 版本说明3 驱动安装 3.1 MySQL 4 基本用法 4.1 导入 4.1.1 保护密码4.1.2 使用其他文件格式4.1.3 压缩导入的数据4.1.4 提高传输速度4.1.5 自定义类型映射4.1.6 并行控制4.1.7 对NULL值进行编码4.1.8 导入所有表 4.2 增量导入 4.2.1 只导入细腻数据4.2.2 增量导入可变数据4.2.3 保存last-value4.2.4 在metastore中保存密码4.2.5 客户端之间共享metastore 4.3 导出 4.3.1 hive导出数据到mysql4.3.2 批量插入4.3.3 导出所有数据或不导出任何数据4.3.4 更新已有数据4.3.5 更新或插入数据4.3.6 只导出某些列4.3.7 编码NULL值 5 附：import和export参数详解 5.1 import和export工具通用选项5.2 数据导入工具import参数详解5.3 数据导出工具export参数详解5.4 Sqoop Job参数详解 1 Sqoop概述 Sqoop是一个旨在Hadoop和关系数据库或主机之间传输数据的工具。你可以使用Sqoop从关系型数据库管理系统（RDBMS），如MySQL、Oracle或大型机到Hadoop分布式文件系统（HDFS）导入数据，在Hadoop中的MapReduce转换数据，然后将数据导出到一个RDBMS 。Sqoop使用MapReduce导入和导出数据，它提供了并行操作，以及容错。
2 版本说明 本文档适用于Sqoop1。
软件 版本 Sqoop 1.4.5-cdh5.3.0 Mysql JDBC驱动 5.1.32 ORACLE JDBC驱动 和oracle版本保持一致 3 驱动安装 3.1 MySQL 将驱动对应的jar包放置到 /usr/share/java/下。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/92ea51d11432e03f010ce3dd1525ca30/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-03-16T11:13:11+08:00" />
<meta property="article:modified_time" content="2017-03-16T11:13:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">sqoop使用手册</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin-top:10px; font-size:1.1em; color:rgb(51,51,51); font-family:Verdana,Arial,sans-serif,'Lucida Grande'; background-color:rgb(214,211,214)"> <a target="_blank" id="cb_post_title_url" href="http://www.cnblogs.com/xiaodf/p/6030102.html" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">Sqoop使用手册</a></h3> 
<div class="postText" style="font-size:13.3333px; padding-left:5px; line-height:1.5; color:rgb(51,51,51); font-family:Verdana,Arial,sans-serif,'Lucida Grande'; background-color:rgb(214,211,214)"> 
 <div id="cnblogs_post_body" class="cnblogs-markdown" style="margin-bottom:20px; word-break:break-word; line-height:1.8!important"> 
  <p style="margin:10px auto"><em>转载请注明出处</em>：<a target="_blank" href="http://www.cnblogs.com/xiaodf/" rel="nofollow noopener noreferrer" class="uri" style="color:rgb(0,102,255); text-decoration:none">http://www.cnblogs.com/xiaodf/</a></p> 
  <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#1" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">1 Sqoop概述</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#2" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">2 版本说明</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#3" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">3 驱动安装</a> 
    <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#31" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">3.1 MySQL</a></li></ul> </li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#4" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4 基本用法</a> 
    <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#41" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1 导入</a> 
      <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#411" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.1 保护密码</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#412" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.2 使用其他文件格式</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#413" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.3 压缩导入的数据</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#414" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.4 提高传输速度</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#415" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.5 自定义类型映射</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#416" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.6 并行控制</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#417" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.7 对NULL值进行编码</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#418" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.1.8 导入所有表</a></li></ul> </li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#42" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.2 增量导入</a> 
      <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#421" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.2.1 只导入细腻数据</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#422" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.2.2 增量导入可变数据</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#423" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.2.3 保存last-value</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#424" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.2.4 在metastore中保存密码</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#425" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.2.5 客户端之间共享metastore</a></li></ul> </li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#43" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3 导出</a> 
      <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#431" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.1 hive导出数据到mysql</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#432" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.2 批量插入</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#433" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.3 导出所有数据或不导出任何数据</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#434" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.4 更新已有数据</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#435" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.5 更新或插入数据</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#436" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.6 只导出某些列</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#437" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">4.3.7 编码NULL值</a></li></ul> </li></ul> </li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#5" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">5 附：import和export参数详解</a> 
    <ul style="margin-left:30px; padding-left:0px"><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#51" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">5.1 import和export工具通用选项</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#52" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">5.2 数据导入工具import参数详解</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#53" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">5.3 数据导出工具export参数详解</a></li><li style="font-size:10pt; list-style-type:disc"><a target="_blank" href="http://www.cnblogs.com/xiaodf/p/6030102.html#54" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">5.4 Sqoop Job参数详解</a></li></ul> </li></ul> 
  <p style="margin:10px auto"><span id="1"></span></p> 
  <h2 id="sqoop概述" style="color:rgb(0,0,0); padding:0px; height:auto; margin:0px; font-family:'Courier New',Verdana,monospace; font-size:28px; line-height:1.5"> 1 Sqoop概述</h2> 
  <p style="margin:10px auto">Sqoop是一个旨在Hadoop和关系数据库或主机之间传输数据的工具。你可以使用Sqoop从关系型数据库管理系统（RDBMS），如MySQL、Oracle或大型机到Hadoop分布式文件系统（HDFS）导入数据，在Hadoop中的MapReduce转换数据，然后将数据导出到一个RDBMS 。Sqoop使用MapReduce导入和导出数据，它提供了并行操作，以及容错。</p> 
  <p style="margin:10px auto"><span id="2"></span></p> 
  <h2 id="版本说明" style="color:rgb(0,0,0); padding:0px; height:auto; margin:0px; font-family:'Courier New',Verdana,monospace; font-size:28px; line-height:1.5"> 2 版本说明</h2> 
  <p style="margin:10px auto">本文档适用于Sqoop1。</p> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">软件</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 版本</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> Sqoop</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 1.4.5-cdh5.3.0</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> Mysql JDBC驱动</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 5.1.32</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> ORACLE JDBC驱动</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 和oracle版本保持一致</td></tr></tbody></table> 
  <p style="margin:10px auto"><span id="3"></span></p> 
  <h2 id="驱动安装" style="color:rgb(0,0,0); padding:0px; height:auto; margin:0px; font-family:'Courier New',Verdana,monospace; font-size:28px; line-height:1.5"> 3 驱动安装</h2> 
  <p style="margin:10px auto"><span id="31"></span></p> 
  <h3 id="mysql" style="margin:10px 0px; font-size:21px; line-height:1.5">3.1 MySQL</h3> 
  <p style="margin:10px auto">将驱动对应的jar包放置到 /usr/share/java/下。</p> 
  <p style="margin:10px auto">如：/usr/share/java/mysql-connector-java-5.1.32-bin.jar<br> <span id="4"></span></p> 
  <h2 id="基本用法" style="color:rgb(0,0,0); padding:0px; height:auto; margin:0px; font-family:'Courier New',Verdana,monospace; font-size:28px; line-height:1.5"> 4 基本用法</h2> 
  <p style="margin:10px auto"><span id="41"></span></p> 
  <h3 id="导入" style="margin:10px 0px; font-size:21px; line-height:1.5">4.1 导入</h3> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span> \
<span class="hljs-comment" style="color:green">--connect  JDBC_URL      \</span>
<span class="hljs-comment" style="color:green">--username USERNAME      \</span>
<span class="hljs-comment" style="color:green">--password PASSWORD   \</span>
<span class="hljs-comment" style="color:green">--table TABLE        \</span>
<span class="hljs-comment" style="color:green">--hive-import        \</span>
<span class="hljs-comment" style="color:green">--split-by SPLIT_BY_COL \</span>
<span class="hljs-comment" style="color:green">--num-mappers N        \</span>
<span class="hljs-comment" style="color:green">--hive-database HIVE_DB_NAME    \ </span>
<span class="hljs-comment" style="color:green">--hive-table HIVE_TABLE_NAME    \ </span>
(<span class="hljs-comment" style="color:green">--hive-partition-key partition_name    \</span>
<span class="hljs-comment" style="color:green">--hive-partition-value partititon_value    \</span>
附：如果是分区表则需指出分区名称和分区值)
<span class="hljs-comment" style="color:green">--columns col1，clo2,col3…     \</span>
<span class="hljs-comment" style="color:green">--warehouse-dir /user/hive/warehouse/       \</span>
<span class="hljs-comment" style="color:green">--fields-terminated-by ‘|’     \</span>
<span class="hljs-comment" style="color:green">--direct                       \</span>
<span class="hljs-comment" style="color:green">--compress</span></code></pre> 
  <p style="margin:10px auto"><strong>参数说明</strong></p> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">参数</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --connect</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 连接RDBMS的jdbc连接字符串。<br> 示例：--connect jdbc:mysql:// MYSQL_SERVER: PORT / DBNAME<br> 其中：mysql默认端口号为3306；<br> 示例：--connect jdbc:oracle:thin:<a target="_blank" href="mailto:USERNAME/PASSWORD@ORACLE_SERVER" rel="nofollow noopener noreferrer" style="color:rgb(0,102,255); text-decoration:none">USERNAME/PASSWORD@ORACLE_SERVER</a>:PORT: SID<br> 其中：Oracle默认端口号为1521；<br> thin：是驱动方式，“瘦”的意思，直接使用原生的Oracle JDBC驱动；<br> SID：是一个数据库的唯一标识符，是建立一个数据库时系统自动赋予的一个初始ID。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --username</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 连接RDBMS所使用的用户名。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --password</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 连接RDBMS所使用的密码。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --table</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 将要导入到hive的表。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --split-by</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 分割导入任务所使用的字段。需要明确指定，推荐使用主键。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-import</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 插入数据到hive当中，使用hive默认的分隔符。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -m, --num-mappers&lt; n&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用n个map任务并行导入数据。是指生成的map任务的总数量，<br> 不是同时处于RUNNING状态的数量。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-database</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> hive当中的数据库。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -- hive-table</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> hive当中的表名</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-partition-key</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> hive分区的列名 。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-partition-value</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> hive分区的值。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --columns &lt; col,col,col…&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 从表中导出指定的一组列的数据，用逗号分隔，<br> oracle中列名需要大写。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --warehouse-dir</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> （必选）可以指定为-warehouse-dir/user/hive/warehouse/<br> 即导入数据的存放路径，如果该路径不存在，会首先创建。<br> 在该路径下会生成和TABLE（--table）同名的文件夹，该文件夹下存放数据文件。<br> 如果路径存在，需要保证该文件夹下不存在与TABLE(--table)同名文件。<br> 如果不手动指定，默认是启动sqoop任务的用户的home目录。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --direct</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用快速模式导入</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --compress</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 启用压缩，生成的文件为经过压缩的文件。<br> 默认使用GZIP算法。<br> 通过--compression-codec设置压缩算法。<br> 通常当空间不够时可以使用压缩，不过需要注意，如果压缩率过大可能导致CPU占用过高。<br> 如果可以，推荐使用snappy。<br> 另外，如果配置了mapreduce的“map输出压缩”，<br> 那么即使不适用—compress开关，<br> 导入的数据文件也会使用对应的codec进行压缩。</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --compression-codec</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用Hadoop Codec。（默认gzip）前提是设置了—cpmpress。</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 其他</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 可使用 sqoop import 命令查看帮助。</td></tr></tbody></table> 
  <p style="margin:10px auto">附：对于--warehouse-dir需要指定为/user/hive/warehouse/但在该路径下不能存在与TABLE(--table)同名的文件，否则导入失败。当导入成功时，会在该路径下生成数据文件part-m-XXXXX并且生成与TABLE(--table)同名文件，存放导入成功的标志文件_SUCCESS。</p> 
  <p style="margin:10px auto"><span id="411"></span></p> 
  <h4 id="保护密码" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.1 保护密码</h4> 
  <p style="margin:10px auto">在sqoop命令中显式指定密码会是很不安全的操作，使用操作系统的列出正在执行的命令的方式可以很容易的获取到密码。有两种方式可以解决这个问题。<br> 方式一：使用-P（大写）参数，在执行命令时再输入密码。<br> 方式二：使用--password-file参数，即将密码存放在参数指定的文件中。<br> <span id="412"></span></p> 
  <h4 id="使用其他文件格式" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.2 使用其他文件格式</h4> 
  <p style="margin:10px auto">Sqoop支持3中不同的文件格式，其中一种是文本格式，两外两种是二进制格式。二进制格式分别是Avro和SequenceFile。使用--as-avrodatafile或--as-sequencefile以指定具体使用哪种二进制格式。<br> <span id="413"></span></p> 
  <h4 id="压缩导入的数据" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.3 压缩导入的数据</h4> 
  <p style="margin:10px auto">使用—compress或-z参数以压缩导入之后的数据。默认的压缩算法为GZip，所有文件的后缀名均为.gz。可以使用—compress-codec来指定其他的codec。如</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs css" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-selector-tag" style="color:rgb(0,0,255)">--compression-codec</span> <span class="hljs-selector-tag" style="color:rgb(0,0,255)">org</span><span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.hadoop</span><span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.compress</span><span class="hljs-selector-class">.BZip2Codec</span></code></pre> 
  <p style="margin:10px auto">使用压缩需要将mapreduce中对应的设置项开启，如mapreduce.output.<br> compress。<br> <span id="414"></span></p> 
  <h4 id="提高传输速度" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.4 提高传输速度</h4> 
  <p style="margin:10px auto">不同于JDBC接口，direct模式下使用数据库提供的本地工具进行数据传输。在MySQL中使用mysqldump和mysqlimport。对于PostgreSQL，sqoop会使用pg_dump工具来导入数据。使用本地工具会极大提高性能，因为他们针对数据传输做了优化，以降低数据库服务器的负担。当然也有很多限制，比如并不是所有的数据库都提供本地工具。目前sqoop的direct模式只支持MySQL和PostgreSQL。<br> <span id="415"></span></p> 
  <h4 id="自定义类型映射" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.5 自定义类型映射</h4> 
  <p style="margin:10px auto">使用—amp-column-java参数来将列列映射到java类以覆盖sqoop提供的默认的映射关系。<br> 如要将c1、c2、c3分别映射为Float、String、String，对应的设置如下所示。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs javascript" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">sqoop <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span> --map-column-java c1=Float,c2=<span class="hljs-built_in" style="color:rgb(0,0,255)">String</span>,c3=<span class="hljs-built_in" style="color:rgb(0,0,255)">String</span> ...</code></pre> 
  <p style="margin:10px auto"><span id="416"></span></p> 
  <h4 id="并行控制" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.6 并行控制</h4> 
  <p style="margin:10px auto">Sqoop默认使用4个并发的map任务来项hadoop传输数据。当数据量比较大时可以考虑增加并发执行的map任务的数量以提高传输速度。使用参数—num-mappers来控制map任务的数量。<br> <span id="417"></span></p> 
  <h4 id="对null值进行编码" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.7 对NULL值进行编码</h4> 
  <p style="margin:10px auto">Sqoop使用“null”字符串来代替数据库中的NULL值。对于文本类型的列，使用—null-string来设置替代NULL值得字符串，对于其他类型的列，则使用—null-non-string来设置。</p> 
  <p style="margin:10px auto">如果想使用\N来编码NULL值，则对应sqoop命令中的值为\N， \在JAVA中是转义字符。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs cs" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">--<span class="hljs-keyword" style="color:rgb(0,0,255)">null</span>-<span class="hljs-keyword" style="color:rgb(0,0,255)">string</span> <span class="hljs-string" style="color:rgb(163,21,21)">'\\N'</span> \
--<span class="hljs-keyword" style="color:rgb(0,0,255)">null</span>-non-<span class="hljs-keyword" style="color:rgb(0,0,255)">string</span> <span class="hljs-string" style="color:rgb(163,21,21)">'\\N'</span></code></pre> 
  <p style="margin:10px auto"><span id="418"></span></p> 
  <h4 id="导入所有表" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.1.8 导入所有表</h4> 
  <p style="margin:10px auto">使用如下命令导入所有表。sqoop会一次导入每张表，以避免对数据库服务器造成额外的负担。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span>-all-tables \

   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>

   <span class="hljs-comment" style="color:green">--username sqoop \</span>

   <span class="hljs-comment" style="color:green">--password sqoop</span></code></pre> 
  <p style="margin:10px auto"><span id="42"></span></p> 
  <h3 id="增量导入" style="margin:10px 0px; font-size:21px; line-height:1.5">4.2 增量导入</h3> 
  <p style="margin:10px auto">增量导入是每次只导入新增加的或者需要更新的数据。增量导入会大大降低数据库服务器的负担。<br> <span id="421"></span></p> 
  <h4 id="只导入细腻数据" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.2.1 只导入细腻数据</h4> 
  <p style="margin:10px auto">假设我们有INTEGER类型的主键，并且只追加新列，并且需要定期将表的状态同步到Hadoop中。我们需要使用增量导入的功能。典型代码如下所示。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span> \

   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>

   <span class="hljs-comment" style="color:green">--username sqoop \</span>

   <span class="hljs-comment" style="color:green">--password sqoop \</span>

   <span class="hljs-comment" style="color:green">--table visits \</span>

   <span class="hljs-comment" style="color:green">--incremental append \</span>

   <span class="hljs-comment" style="color:green">--check-column id \</span>

   <span class="hljs-comment" style="color:green">--last-value 1</span></code></pre> 
  <p style="margin:10px auto">--incremental参数表示使用增量导入，参数值为使用的增量导入的类型。，由于我们只添加而不修改列的值，所以使用append。增量导入中还需要额外的两个参数：--check-column指定一个列，用于检查新增加的数据，--last-value包含上次成功导入到Hadoop的值。<br> <span id="422"></span></p> 
  <h4 id="增量导入可变数据" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.2.2 增量导入可变数据</h4> 
  <p style="margin:10px auto">使用lastmodified模式而不是append模式来导入变化的数据。例如使用如下命令导入所last_update_date列大于“2013-05-22 01:01:01”的行。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span> \

   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>

   <span class="hljs-comment" style="color:green">--username sqoop \</span>

   <span class="hljs-comment" style="color:green">--password sqoop \</span>

   <span class="hljs-comment" style="color:green">--table visits \</span>

   <span class="hljs-comment" style="color:green">--incremental lastmodified \</span>

   <span class="hljs-comment" style="color:green">--check-column last_update_date \</span>

   <span class="hljs-comment" style="color:green">--last-value "2013-05-22 01:01:01"</span></code></pre> 
  <p style="margin:10px auto">增量导入模式lastmodified需要一个日期（可选的类型有date、time、datetime和timestamp）列来保存列被修改的时间。</p> 
  <p style="margin:10px auto">注：--last-value的值在增量导入时是包含在需要导入的范围之内的。<br> Sqoop不会检查数据是否重复，即不会按照MySQL中那样更新数据。<br> <span id="423"></span></p> 
  <h4 id="保存last-value" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.2.3 保存last-value</h4> 
  <p style="margin:10px auto">Sqoop导入任务完成后会给出新的last-value，我们可以保存当前下来，以便下次使用。<br> Sqoop的metastore会保存任务的信息，所以我们创建对应的任务即可。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> job \
   <span class="hljs-comment" style="color:green">--create visits \</span>
   <span class="hljs-comment" style="color:green">-- \</span>
   <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span> \
   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>
   <span class="hljs-comment" style="color:green">--username sqoop \</span>
   <span class="hljs-comment" style="color:green">--password sqoop \</span>
   <span class="hljs-comment" style="color:green">--table visits \</span>
   <span class="hljs-comment" style="color:green">--incremental append \</span>
   <span class="hljs-comment" style="color:green">--check-column id \</span>
   <span class="hljs-comment" style="color:green">--last-value 0</span></code></pre> 
  <p style="margin:10px auto">执行任务</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs python" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">sqoop job --<span class="hljs-keyword" style="color:rgb(0,0,255)">exec</span> visits</code></pre> 
  <p style="margin:10px auto">删除任务</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs cpp" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">sqoop job --<span class="hljs-keyword" style="color:rgb(0,0,255)">delete</span> visits</code></pre> 
  <p style="margin:10px auto">查看任务信息，信息中会包含last-value的当前值。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs lua" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">sqoop job <span class="hljs-comment" style="color:green">--show visits</span></code></pre> 
  <p style="margin:10px auto"><span id="424"></span></p> 
  <h4 id="在metastore中保存密码" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.2.4 在metastore中保存密码</h4> 
  <p style="margin:10px auto">很不幸，每次使用sqoop job执行任务都需要手动输入密码。<br> 解决方式有两种：<br> 第一种方式，使用password-file（“导入”一章中有介绍）；<br> 第二种方式，在sqoop-site.xml中添加如下属性即可（添加后第一次仍然需要输入密码 ）。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs django" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="xml"><span class="hljs-tag" style="color:rgb(0,0,255)">&lt;<span class="hljs-name">property</span>&gt;</span>
   <span class="hljs-tag" style="color:rgb(0,0,255)">&lt;<span class="hljs-name">name</span>&gt;</span>sqoop.metastore.client.record.password<span class="hljs-tag" style="color:rgb(0,0,255)">&lt;/<span class="hljs-name">name</span>&gt;</span>
   <span class="hljs-tag" style="color:rgb(0,0,255)">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag" style="color:rgb(0,0,255)">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag" style="color:rgb(0,0,255)">&lt;/<span class="hljs-name">property</span>&gt;</span></span></code></pre> 
  <p style="margin:10px auto"><span id="425"></span></p> 
  <h4 id="客户端之间共享metastore" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.2.5 客户端之间共享metastore</h4> 
  <p style="margin:10px auto">启动metastore服务</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs nginx" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-attribute" style="color:rgb(163,21,21)">sqoop</span> metastore</code></pre> 
  <p style="margin:10px auto">客户端连接到metastore服务</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> job
   <span class="hljs-comment" style="color:green">--create visits \</span>
   <span class="hljs-comment" style="color:green">--meta-connect \              </span>
      jdbc:hsqldb:hsql://metastore.example.com:<span class="hljs-number">16000</span>/sqoop \
   <span class="hljs-comment" style="color:green">-- \</span>
   <span class="hljs-keyword" style="color:rgb(0,0,255)">import</span> \
   <span class="hljs-comment" style="color:green">--table visits</span>
      ...</code></pre> 
  <p style="margin:10px auto">显示任务</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs groovy" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">sqoop  job --list --meta-connect <span class="hljs-string" style="color:rgb(163,21,21)">jdbc:</span><span class="hljs-string" style="color:rgb(163,21,21)">hsqldb:</span><span class="hljs-string" style="color:rgb(163,21,21)">hsql:</span><span class="hljs-comment" style="color:green">//metastore.example.com:16000/sqoop</span></code></pre> 
  <p style="margin:10px auto"><span id="43"></span></p> 
  <h3 id="导出" style="margin:10px 0px; font-size:21px; line-height:1.5">4.3 导出</h3> 
  <p style="margin:10px auto"><span id="431"></span></p> 
  <h4 id="hive导出数据到mysql" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.1 hive导出数据到mysql</h4> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span>
<span class="hljs-comment" style="color:green">--connect jdbc:mysql://MYSQL_SERVER:PORT/DBNAME    \</span>
<span class="hljs-comment" style="color:green">--username USERNAME   \</span>
<span class="hljs-comment" style="color:green">--table TABLE         \</span>
<span class="hljs-comment" style="color:green">--export-dir /user/hive/warehouse/HIVE_TABLE_NAME/       \</span>
<span class="hljs-comment" style="color:green">--num-mappers N           \</span>
<span class="hljs-comment" style="color:green">--fields-terminated-by ','         </span></code></pre> 
  <p style="margin:10px auto">附：对于hive中有null时，导入到MySQL中依然是NULL。<br> <span id="432"></span></p> 
  <h4 id="批量插入" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.2 批量插入</h4> 
  <p style="margin:10px auto">sqoop使用独立的insert语句来添加每一行记录，使用如下的方式可以每次插入多条记录。即批量插入，每次插入10条。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span> \
   -<span class="hljs-type" style="color:rgb(163,21,21)">Dsqoop</span>.<span class="hljs-keyword" style="color:rgb(0,0,255)">export</span>.records.per.statement=<span class="hljs-number">10</span> \
   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>
   <span class="hljs-comment" style="color:green">--username sqoop \</span>
   <span class="hljs-comment" style="color:green">--password sqoop \</span>
   <span class="hljs-comment" style="color:green">--table cities \</span>
   <span class="hljs-comment" style="color:green">--export-dir cities \</span>
   <span class="hljs-comment" style="color:green">--batch</span></code></pre> 
  <p style="margin:10px auto"><span id="433"></span></p> 
  <h4 id="导出所有数据或不导出任何数据" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.3 导出所有数据或不导出任何数据</h4> 
  <p style="margin:10px auto">我们需要确保或者所有数据均导出成功，或者不导出任何数据。为此我们使用临时表，即先将数据导出到临时表（staging-table）中，然后再转移到目标表中。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span> \
   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>
   <span class="hljs-comment" style="color:green">--username sqoop \</span>
   <span class="hljs-comment" style="color:green">--password sqoop \</span>
   <span class="hljs-comment" style="color:green">--table cities \</span>
   <span class="hljs-comment" style="color:green">--staging-table staging_cities</span></code></pre> 
  <p style="margin:10px auto"><span id="434"></span></p> 
  <h4 id="更新已有数据" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.4 更新已有数据</h4> 
  <p style="margin:10px auto">使用—update-key参数指定一列，该列可以识别出被修改的行，通常是表中的主键。例如下面的示例中使用列id来更新cities表。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span> \
   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>
   <span class="hljs-comment" style="color:green">--username sqoop \</span>
   <span class="hljs-comment" style="color:green">--password sqoop \</span>
   <span class="hljs-comment" style="color:green">--table cities \</span>
   <span class="hljs-comment" style="color:green">--update-key id</span></code></pre> 
  <p style="margin:10px auto">可以指定多个列，列之间用逗号隔开。<br> 注意，该操作只会更新已有的数据，不会插入新的数据，<br> <span id="435"></span></p> 
  <h4 id="更新或插入数据" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.5 更新或插入数据</h4> 
  <p style="margin:10px auto">使用如下的参数可以同时插入新数据或更新已有数据。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span> \
   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>
   <span class="hljs-comment" style="color:green">--username sqoop \</span>
   <span class="hljs-comment" style="color:green">--password sqoop \</span>
   <span class="hljs-comment" style="color:green">--table cities \</span>
   <span class="hljs-comment" style="color:green">--update-key id \</span>
   <span class="hljs-comment" style="color:green">--update-mode allowinsert</span></code></pre> 
  <p style="margin:10px auto"><span id="436"></span></p> 
  <h4 id="只导出某些列" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.6 只导出某些列</h4> 
  <p style="margin:10px auto">Sqoop默认hdfs中的数据和数据库中有相同数量的列并且顺序相同，使用—columns参数可以指定需要导出到数据库中的列或者指定导出列之间的顺序。如只导出coutry和city列，就可以使用如下示例。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs haskell" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)"><span class="hljs-title" style="color:rgb(163,21,21)">sqoop</span> <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span> \
   <span class="hljs-comment" style="color:green">--connect jdbc:mysql://mysql.example.com/sqoop \</span>
   <span class="hljs-comment" style="color:green">--username sqoop \</span>
   <span class="hljs-comment" style="color:green">--password sqoop \</span>
   <span class="hljs-comment" style="color:green">--table cities \</span>
   <span class="hljs-comment" style="color:green">--columns country,city</span></code></pre> 
  <p style="margin:10px auto"><span id="437"></span></p> 
  <h4 id="编码null值" style="font-size:16px; border-bottom-width:0px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); color:rgb(0,0,0); line-height:1.5; margin:10px 0px; background-color:transparent"> 4.3.7 编码NULL值</h4> 
  <p style="margin:10px auto">你可以使用—input-null-string和—input-null-no-string参数来覆盖NULL值的替换字符串，例如使用‘\N’替换NULL值。</p> 
  <pre class="shell" style="margin-top:10px; margin-bottom:10px; white-space:pre-wrap; word-wrap:break-word"><code class="hljs typescript" style="font-family:'Courier New',sans-serif!important; font-size:12px!important; line-height:1.5!important; margin:auto; vertical-align:middle; display:block; border:1px solid rgb(204,204,204)!important; padding:5px!important; height:auto; overflow-x:auto; color:rgb(0,0,0); background:rgb(255,255,255)">sqoop <span class="hljs-keyword" style="color:rgb(0,0,255)">export</span> \
   --connect jdbc:mysql:<span class="hljs-comment" style="color:green">//mysql.example.com/sqoop \</span>
   --username sqoop \
   --password sqoop \
   --table cities \
   --input-<span class="hljs-literal" style="color:rgb(163,21,21)">null</span>-<span class="hljs-built_in" style="color:rgb(0,0,255)">string</span> <span class="hljs-string" style="color:rgb(163,21,21)">'\\N'</span> \
   --input-<span class="hljs-literal" style="color:rgb(163,21,21)">null</span>-non-<span class="hljs-built_in" style="color:rgb(0,0,255)">string</span> <span class="hljs-string" style="color:rgb(163,21,21)">'\\N'</span></code></pre> 
  <p style="margin:10px auto"><span id="5"></span></p> 
  <h2 id="附import和export参数详解" style="color:rgb(0,0,0); padding:0px; height:auto; margin:0px; font-family:'Courier New',Verdana,monospace; font-size:28px; line-height:1.5"> 5 附：import和export参数详解</h2> 
  <p style="margin:10px auto"><span id="51"></span></p> 
  <h3 id="import和export工具通用选项" style="margin:10px 0px; font-size:21px; line-height:1.5"> 5.1 import和export工具通用选项</h3> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">选项</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --connect &lt; jdbc-uri &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定JDBC连接字符串</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --connection-manager &lt; class-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定要使用的连接管理器类</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --driver &lt; class-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定要使用的JDBC驱动类</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hadoop-mapred-home &lt; dir &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定$HADOOP_MAPRED_HOME路径</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --help</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 打印用法帮助信息</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --password-file</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 设置用于存放认证的密码信息文件的路径</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -P</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 从控制台读取输入的密码</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --password &lt; password &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 设置认证密码</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --username &lt; username &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 设置认证用户名</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --verbose</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 打印详细的运行信息</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --connection-param-file &lt; filename &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 可选，指定存储数据库连接参数的属性文件</td></tr></tbody></table> 
  <p style="margin:10px auto"><span id="52"></span></p> 
  <h3 id="数据导入工具import参数详解" style="margin:10px 0px; font-size:21px; line-height:1.5"> 5.2 数据导入工具import参数详解</h3> 
  <p style="margin:10px auto">import工具，是将HDFS平台外部的结构化存储系统中的数据导入到Hadoop平台，便于后续分析。我们先看一下import工具的基本选项及其含义，如下表所示：</p> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">选项</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --append</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 将数据追加到HDFS上一个已存在的数据集上</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --as-avrodatafile</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 将数据导入到Avro数据文件</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --as-sequencefile</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 将数据导入到SequenceFile</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --as-textfile</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 将数据导入到普通文本文件（默认）</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --boundary-query &lt; statement &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 边界查询，用于创建分片（InputSplit）</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --columns &lt; col,col,col…&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 从表中导出指定的一组列的数据</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --delete-target-dir</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 如果指定目录存在，则先删除掉</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --direct</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用直接导入模式（优化导入速度）</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --direct-split-size &lt; n &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 分割输入stream的字节大小（在直接导入模式下）</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --fetch-size &lt; n &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 从数据库中批量读取记录数</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --inline-lob-limit &lt; n &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 设置内联的LOB对象的大小</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -m,--num-mappers &lt; n &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用n个map任务并行导入数据</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -e,--query &lt; statement &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导入的查询语句</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --split-by &lt; column-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定按照哪个列去分割数据</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --table &lt; table-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导入的源表表名</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --target-dir &lt; dir &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导入HDFS的目标路径</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --warehouse-dir &lt; dir &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> HDFS存放表的根路径</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --where &lt; where clause&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定导出时所使用的查询条件</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -z,--compress</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 启用压缩</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --compression-codec &lt; c &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定Hadoop的codec方式（默认gzip）</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --null-string &lt; null-string &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 如果指定列为字符串类型，使用指定字符串替换值为null的该类列的值</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --null-non-string &lt; null-string &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 如果指定列为非字符串类型，使用指定字符串替换值为null的该类列的值</td></tr></tbody></table> 
  <p style="margin:10px auto"><strong>hive参数</strong></p> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">选项</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-home &lt; dir &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> Override $HIVE_HOME</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-import</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 插入数据到hive当中，使用hive的默认分隔符</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-overwrite</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 覆盖hive表中的数据</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --create-hive-table</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 建表，如果表已经存在，该操作会报错</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-table &lt; table-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 设置到hive当中的表名</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-drop-import-delims</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导入到hive时删除 \n, \r, and \01</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-delims-replacement</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导入到hive时用自定义的字符替换掉\n, \r, and \01</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-partition-key</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> hive分区的key</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hive-partition-value &lt; v &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> hive分区的值</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --map-column-hive &lt; map &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 类型匹配，sql类型对应到hive类型</td></tr></tbody></table> 
  <p style="margin:10px auto"><strong>HBase参数</strong></p> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">选项</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --column-family &lt; family &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 把内容导入到hbase当中，默认是用主键作为split列</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hbase-create-table</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 创建Hbase表</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hbase-row-key &lt; col &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定字段作为row key ，如果输入表包含复合主键，用逗号分隔</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --hbase-table &lt; table-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定hbase表</td></tr></tbody></table> 
  <p style="margin:10px auto"><span id="53"></span></p> 
  <h3 id="数据导出工具export参数详解" style="margin:10px 0px; font-size:21px; line-height:1.5"> 5.3 数据导出工具export参数详解</h3> 
  <p style="margin:10px auto">export工具，是将HDFS平台的数据，导出到外部的结构化存储系统中，可能会为一些应用系统提供数据支持。我们看一下export工具的基本选项及其含义，如下表所示：</p> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">选项</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --validate &lt; class-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 启用数据副本验证功能，仅支持单表拷贝，可以指定验证使用的实现类</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --validation-threshold &lt; class-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定验证门限所使用的类表</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --direct</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用直接导出模式（优化速度）</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --export-dir &lt; dir &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导出过程中HDFS源路径</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> -m,--num-mappers &lt; n &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用n个map任务并行导出</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --table &lt; table-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导出的目的表名称</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --call &lt; stored-proc-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 导出数据调用的指定存储过程名</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --update-key col-name &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 更新参考的列名称，多个列名使用逗号分隔</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --update-mode &lt; mode &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 指定更新策略，包括：updateonly（默认）、allowinsert</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --input-null-string &lt; null-string &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用指定字符串，替换字符串类型值为null的列</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --input-null-non-string &lt; null-string &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用指定字符串，替换非字符串类型值为null的列</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --staging-table &lt; staging-table-name&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 在数据导出到数据库之前，数据临时存放的表名称</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --clear-staging-table</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 清除工作区中临时存放的数据</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --batch</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 使用批量模式导出</td></tr></tbody></table> 
  <p style="margin:10px auto"><span id="54"></span></p> 
  <h3 id="sqoop-job参数详解" style="margin:10px 0px; font-size:21px; line-height:1.5">5.4 Sqoop Job参数详解</h3> 
  <table style="border:1px solid silver; border-collapse:collapse; word-break:break-word"><thead><tr class="header"><th style="border:1px solid silver; border-collapse:collapse; padding:3px">选项</th><th align="left" style="border:1px solid silver; border-collapse:collapse; padding:3px"> 说明</th></tr></thead><tbody><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --create &lt; job-id &gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 定义sqoop job</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --delete &lt; job-id&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 删除sqoop job</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --exec &lt; job-id&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 执行sqoop job</td></tr><tr class="even"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --show &lt; job-id&gt;</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 查看sqoop job状态</td></tr><tr class="odd"><td style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> --list</td><td align="left" style="font-size:10pt; border:1px solid silver; border-collapse:collapse; padding:3px"> 查看所有sqoop job<br> </td></tr></tbody></table> 
 </div> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/870391ba8f80389e56fb5432d93a3fb9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu使用阿里云源，解决下载速度慢问题。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0c15d083209411ffdcc6bfa9c60f7b83/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">sigmoid和softmax函数的C&#43;&#43;实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>