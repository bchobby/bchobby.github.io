<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Kubernetes 使用configmap挂载卷给Pod内的nginx容器，并且实现nginx的代理服务 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Kubernetes 使用configmap挂载卷给Pod内的nginx容器，并且实现nginx的代理服务" />
<meta property="og:description" content="目录
实验：使用configmap挂载卷给Pod内的nginx容器
1、创建nginx.conf配置文件（必须由nginx镜像里的nginx.conf修改而来，防止出现配置不相似的情况出现，导致访问不了nginx网页）
2、通过nginx.conf文件创建configmap容器（注意nginx.conf文件必须在该目录下）
3、查看创建的configmap和它的详细资料
4、根据configmap创建nginx-deployment.yaml文件
5、运行nginx-deployment.yaml，创建Pod
6、创建Service发布nginx容器服务，创建nginx-service.yaml文件
7、运行nginx-service.yaml，创建Pod
8、验证访问
实验：使用Configmap将nginx容器变为代理服务器，使集群内访问集群外边的资源通过nginx tcp代理。
1、使用nginx-config.yaml文件创建Configmap
2、搭建nginx容器，调用Configmap更新nginx的配置文件（添加入网口的标签）：
3、运行 nginx-deployment2.yaml，搭建Pod
4、运行 nginx-service2.yaml，搭建Service服务
5、运行nginx-service2.yaml 和 nginx-service3.yaml， 搭建Service服务
6、验证访问：
实验：使用configmap挂载卷给Pod内的nginx容器 1、创建nginx.conf配置文件（必须由nginx镜像里的nginx.conf修改而来，防止出现配置不相似的情况出现，导致访问不了nginx网页） (base) root@sd-cluster-04:/etc/nginx# cat nginx.conf # claylpf test user nginx; worker_processes auto; error_log /var/log/nginx/error.log notice; pid /var/run/nginx.pid; events { worker_connections 1024; } http { include /etc/nginx/mime.types; default_type application/octet-stream; log_format main &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39; &#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39; &#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;; access_log /var/log/nginx/access.log main; sendfile on; #tcp_nopush on; keepalive_timeout 65; #gzip on; include /etc/nginx/conf." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/97c7cbea765aa00d25244d597c226294/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-15T15:20:39+08:00" />
<meta property="article:modified_time" content="2023-09-15T15:20:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Kubernetes 使用configmap挂载卷给Pod内的nginx容器，并且实现nginx的代理服务</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8configmap%E6%8C%82%E8%BD%BD%E5%8D%B7%E7%BB%99Pod%E5%86%85%E7%9A%84nginx%E5%AE%B9%E5%99%A8-toc" style="margin-left:0px;"><a href="#%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8configmap%E6%8C%82%E8%BD%BD%E5%8D%B7%E7%BB%99Pod%E5%86%85%E7%9A%84nginx%E5%AE%B9%E5%99%A8" rel="nofollow">实验：使用configmap挂载卷给Pod内的nginx容器</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BAnginx.conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E5%BF%85%E9%A1%BB%E7%94%B1nginx%E9%95%9C%E5%83%8F%E9%87%8C%E7%9A%84nginx.conf%E4%BF%AE%E6%94%B9%E8%80%8C%E6%9D%A5%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%87%BA%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%8D%E7%9B%B8%E4%BC%BC%E7%9A%84%E6%83%85%E5%86%B5%E5%87%BA%E7%8E%B0%EF%BC%8C%E5%AF%BC%E8%87%B4%E8%AE%BF%E9%97%AE%E4%B8%8D%E4%BA%86nginx%E7%BD%91%E9%A1%B5%EF%BC%89-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BAnginx.conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E5%BF%85%E9%A1%BB%E7%94%B1nginx%E9%95%9C%E5%83%8F%E9%87%8C%E7%9A%84nginx.conf%E4%BF%AE%E6%94%B9%E8%80%8C%E6%9D%A5%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%87%BA%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%8D%E7%9B%B8%E4%BC%BC%E7%9A%84%E6%83%85%E5%86%B5%E5%87%BA%E7%8E%B0%EF%BC%8C%E5%AF%BC%E8%87%B4%E8%AE%BF%E9%97%AE%E4%B8%8D%E4%BA%86nginx%E7%BD%91%E9%A1%B5%EF%BC%89" rel="nofollow">1、创建nginx.conf配置文件（必须由nginx镜像里的nginx.conf修改而来，防止出现配置不相似的情况出现，导致访问不了nginx网页）</a></p> 
<p id="2%E3%80%81%E9%80%9A%E8%BF%87nginx.conf%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BAconfigmap%E5%AE%B9%E5%99%A8%EF%BC%88%E6%B3%A8%E6%84%8Fnginx.conf%E6%96%87%E4%BB%B6%E5%BF%85%E9%A1%BB%E5%9C%A8%E8%AF%A5%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%89-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E9%80%9A%E8%BF%87nginx.conf%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BAconfigmap%E5%AE%B9%E5%99%A8%EF%BC%88%E6%B3%A8%E6%84%8Fnginx.conf%E6%96%87%E4%BB%B6%E5%BF%85%E9%A1%BB%E5%9C%A8%E8%AF%A5%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%89" rel="nofollow">2、通过nginx.conf文件创建configmap容器（注意nginx.conf文件必须在该目录下）</a></p> 
<p id="3%E3%80%81%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E7%9A%84configmap%E5%92%8C%E5%AE%83%E7%9A%84%E8%AF%A6%E7%BB%86%E8%B5%84%E6%96%99-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E7%9A%84configmap%E5%92%8C%E5%AE%83%E7%9A%84%E8%AF%A6%E7%BB%86%E8%B5%84%E6%96%99" rel="nofollow">3、查看创建的configmap和它的详细资料</a></p> 
<p id="4%E3%80%81%E6%A0%B9%E6%8D%AEconfigmap%E5%88%9B%E5%BB%BAnginx-deployment.yaml%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E6%A0%B9%E6%8D%AEconfigmap%E5%88%9B%E5%BB%BAnginx-deployment.yaml%E6%96%87%E4%BB%B6" rel="nofollow">4、根据configmap创建nginx-deployment.yaml文件</a></p> 
<p id="5%E3%80%81%E8%BF%90%E8%A1%8Cnginx-deployment.yaml%EF%BC%8C%E5%88%9B%E5%BB%BAPod-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E8%BF%90%E8%A1%8Cnginx-deployment.yaml%EF%BC%8C%E5%88%9B%E5%BB%BAPod" rel="nofollow">5、运行nginx-deployment.yaml，创建Pod</a></p> 
<p id="6%E3%80%81%E5%88%9B%E5%BB%BAService%E5%8F%91%E5%B8%83nginx%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%88%9B%E5%BB%BAnginx-service.yaml%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E5%88%9B%E5%BB%BAService%E5%8F%91%E5%B8%83nginx%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%88%9B%E5%BB%BAnginx-service.yaml%E6%96%87%E4%BB%B6" rel="nofollow">6、创建Service发布nginx容器服务，创建nginx-service.yaml文件</a></p> 
<p id="7%E3%80%81%E8%BF%90%E8%A1%8Cnginx-service.yaml%EF%BC%8C%E5%88%9B%E5%BB%BAPod-toc" style="margin-left:40px;"><a href="#7%E3%80%81%E8%BF%90%E8%A1%8Cnginx-service.yaml%EF%BC%8C%E5%88%9B%E5%BB%BAPod" rel="nofollow">7、运行nginx-service.yaml，创建Pod</a></p> 
<p id="8%E3%80%81%E9%AA%8C%E8%AF%81%E8%AE%BF%E9%97%AE-toc" style="margin-left:40px;"><a href="#8%E3%80%81%E9%AA%8C%E8%AF%81%E8%AE%BF%E9%97%AE" rel="nofollow">8、验证访问</a></p> 
<p id="%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8Configmap%E5%B0%86nginx%E5%AE%B9%E5%99%A8%E5%8F%98%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BD%BF%E9%9B%86%E7%BE%A4%E5%86%85%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E5%A4%96%E8%BE%B9%E7%9A%84%E8%B5%84%E6%BA%90%E9%80%9A%E8%BF%87nginx%20tcp%E4%BB%A3%E7%90%86%E3%80%82-toc" style="margin-left:0px;"><a href="#%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8Configmap%E5%B0%86nginx%E5%AE%B9%E5%99%A8%E5%8F%98%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BD%BF%E9%9B%86%E7%BE%A4%E5%86%85%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E5%A4%96%E8%BE%B9%E7%9A%84%E8%B5%84%E6%BA%90%E9%80%9A%E8%BF%87nginx%20tcp%E4%BB%A3%E7%90%86%E3%80%82" rel="nofollow">实验：使用Configmap将nginx容器变为代理服务器，使集群内访问集群外边的资源通过nginx tcp代理。</a></p> 
<p id="1%E3%80%81%E4%BD%BF%E7%94%A8nginx-config.yaml%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BAConfigmap-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E4%BD%BF%E7%94%A8nginx-config.yaml%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BAConfigmap" rel="nofollow">1、使用nginx-config.yaml文件创建Configmap</a></p> 
<p id="2%E3%80%81%E6%90%AD%E5%BB%BAnginx%E5%AE%B9%E5%99%A8%EF%BC%8C%E8%B0%83%E7%94%A8Configmap%E6%9B%B4%E6%96%B0nginx%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E6%B7%BB%E5%8A%A0%E5%85%A5%E7%BD%91%E5%8F%A3%E7%9A%84%E6%A0%87%E7%AD%BE%EF%BC%89%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E6%90%AD%E5%BB%BAnginx%E5%AE%B9%E5%99%A8%EF%BC%8C%E8%B0%83%E7%94%A8Configmap%E6%9B%B4%E6%96%B0nginx%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E6%B7%BB%E5%8A%A0%E5%85%A5%E7%BD%91%E5%8F%A3%E7%9A%84%E6%A0%87%E7%AD%BE%EF%BC%89%EF%BC%9A" rel="nofollow">2、搭建nginx容器，调用Configmap更新nginx的配置文件（添加入网口的标签）：</a></p> 
<p id="3%E3%80%81%E8%BF%90%E8%A1%8C%20nginx-deployment2.yaml%EF%BC%8C%E6%90%AD%E5%BB%BAPod-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E8%BF%90%E8%A1%8C%20nginx-deployment2.yaml%EF%BC%8C%E6%90%AD%E5%BB%BAPod" rel="nofollow">3、运行 nginx-deployment2.yaml，搭建Pod</a></p> 
<p id="4%E3%80%81%E8%BF%90%E8%A1%8C%20nginx-service2.yaml%EF%BC%8C%E6%90%AD%E5%BB%BAService%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E8%BF%90%E8%A1%8C%20nginx-service2.yaml%EF%BC%8C%E6%90%AD%E5%BB%BAService%E6%9C%8D%E5%8A%A1" rel="nofollow">4、运行 nginx-service2.yaml，搭建Service服务</a></p> 
<p id="5%E3%80%81%E8%BF%90%E8%A1%8Cnginx-service2.yaml%20%E5%92%8C%C2%A0nginx-service3.yaml%EF%BC%8C%20%E6%90%AD%E5%BB%BAService%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E8%BF%90%E8%A1%8Cnginx-service2.yaml%20%E5%92%8C%C2%A0nginx-service3.yaml%EF%BC%8C%20%E6%90%AD%E5%BB%BAService%E6%9C%8D%E5%8A%A1" rel="nofollow">5、运行nginx-service2.yaml 和 nginx-service3.yaml， 搭建Service服务</a></p> 
<p id="6%E3%80%81%E9%AA%8C%E8%AF%81%E8%AE%BF%E9%97%AE%EF%BC%9A-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E9%AA%8C%E8%AF%81%E8%AE%BF%E9%97%AE%EF%BC%9A" rel="nofollow">6、验证访问：</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8configmap%E6%8C%82%E8%BD%BD%E5%8D%B7%E7%BB%99Pod%E5%86%85%E7%9A%84nginx%E5%AE%B9%E5%99%A8">实验：使用configmap挂载卷给Pod内的nginx容器</h2> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BAnginx.conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E5%BF%85%E9%A1%BB%E7%94%B1nginx%E9%95%9C%E5%83%8F%E9%87%8C%E7%9A%84nginx.conf%E4%BF%AE%E6%94%B9%E8%80%8C%E6%9D%A5%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%87%BA%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%8D%E7%9B%B8%E4%BC%BC%E7%9A%84%E6%83%85%E5%86%B5%E5%87%BA%E7%8E%B0%EF%BC%8C%E5%AF%BC%E8%87%B4%E8%AE%BF%E9%97%AE%E4%B8%8D%E4%BA%86nginx%E7%BD%91%E9%A1%B5%EF%BC%89">1、创建nginx.conf配置文件（必须由nginx镜像里的nginx.conf修改而来，防止出现配置不相似的情况出现，导致访问不了nginx网页）</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# cat nginx.conf 
# claylpf test

user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log notice;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}


http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    include /etc/nginx/conf.d/*.conf;
}
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<h3 id="2%E3%80%81%E9%80%9A%E8%BF%87nginx.conf%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BAconfigmap%E5%AE%B9%E5%99%A8%EF%BC%88%E6%B3%A8%E6%84%8Fnginx.conf%E6%96%87%E4%BB%B6%E5%BF%85%E9%A1%BB%E5%9C%A8%E8%AF%A5%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%89">2、通过nginx.conf文件创建configmap容器（注意nginx.conf文件必须在该目录下）</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# kubectl create configmap nginx-config --from-file=nginx.conf -n testns
</code></pre> 
<h3 id="3%E3%80%81%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E7%9A%84configmap%E5%92%8C%E5%AE%83%E7%9A%84%E8%AF%A6%E7%BB%86%E8%B5%84%E6%96%99">3、查看创建的configmap和它的详细资料</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# kubectl get configmap nginx-config -n testns #查看是否成功运行
NAME           DATA   AGE
nginx-config   1      77s


(base) root@sd-cluster-04:/etc/nginx# kubectl describe configmap/nginx-config -n testns  # 查看详细信息
Name:         nginx-config
Namespace:    testns
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;

Data
====
nginx.conf:
----
# claylpf test

user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log notice;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}


http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    include /etc/nginx/conf.d/*.conf;
}

Events:  &lt;none&gt;
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<h3 id="4%E3%80%81%E6%A0%B9%E6%8D%AEconfigmap%E5%88%9B%E5%BB%BAnginx-deployment.yaml%E6%96%87%E4%BB%B6">4、根据configmap创建nginx-deployment.yaml文件</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# cat nginx-deployment.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  namespace: testns
spec:
  replicas: 1
  selector:
    matchLabels:
      app: clay-nginx
  template:
    metadata:
      labels:
        app: clay-nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.24
        ports:
        - containerPort: 80
        volumeMounts:
        - name: nginx-config-volume
          mountPath: /etc/nginx/nginx.conf
          subPath: nginx.conf
      volumes:
        - name: nginx-config-volume
          configMap:
            name: nginx-config
            items:
            - key: nginx.conf
              path: nginx.conf     
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<p>代码解释：</p> 
<pre><code>这是一个 Kubernetes Deployment 的 YAML 文件，用于定义一个部署配置。以下是逐行解释该文件的内容：

1. `apiVersion: apps/v1`: 这一行指定了 Kubernetes API 的版本，以及使用的资源类型是 Deployment。

2. `kind: Deployment`: 指定了资源的种类，这是一个部署 (Deployment)。

3. `metadata:`: 定义资源的元数据，包括名称和命名空间。

   - `name: nginx-deployment`: 部署的名称是 "nginx-deployment"。
   - `namespace: testns`: 部署所属的命名空间是 "testns"。

6. `spec:`: 定义了部署的规格，包括副本数、选择器以及 Pod 模板。

   - `replicas: 1`: 指定了要运行的副本数量，这里是 1 个。
   
   - `selector:`: 选择器用于确定要管理的 Pod 集合。

     - `matchLabels:`: 指定了需要匹配的标签。

       - `app: clay-nginx`: 匹配标签中含有 "app: clay-nginx" 的 Pod。

   - `template:`: 定义了要创建的 Pod 模板。

     - `metadata:`: 定义 Pod 模板的元数据，包括标签。

       - `labels:`: 指定了 Pod 的标签，这里是 "app: clay-nginx"。

     - `spec:`: 定义了 Pod 的规格。

       - `containers:`: 定义了容器列表。

         - `name: nginx`: 定义容器的名称为 "nginx"。
         - `image: nginx:1.24`: 指定容器使用的镜像，这里使用的是 Nginx 版本 1.24。
         - `ports:`: 定义容器的端口配置。

           - `containerPort: 80`: 容器监听的端口是 80。

         - `volumeMounts:`: 定义了卷挂载配置，将卷挂载到容器内。

           - `name: nginx-config-volume`: 指定挂载卷的名称，这个名称将与下面定义的卷匹配。
           - `mountPath: /etc/nginx/nginx.conf`: 指定挂载的路径在容器内的位置。
           - `subPath: nginx.conf`: 指定在卷中的子路径。

       - `volumes:`: 定义了卷的配置。

         - `name: nginx-config-volume`: 定义了一个名为 "nginx-config-volume" 的卷。
         - `configMap:`: 指定卷的类型为 ConfigMap。

           - `name: nginx-config`: 指定 ConfigMap 的名称，这个名称将与集群中的 ConfigMap 匹配。
           - `items:`: 指定要从 ConfigMap 中提取的键值对。

             - `key: nginx.conf`: 指定键的名称。
             - `path: nginx.conf`: 指定将键的值映射到容器内的路径。

这个配置文件描述了一个部署，它将创建一个 Pod，其中运行一个名为 "nginx" 的容器，该容器使用 Nginx 1.24 镜像，并将一个名为 "nginx-config-volume" 的 ConfigMap 挂载到容器内的 `/etc/nginx/nginx.conf` 路径上。这样，Nginx 容器将使用 ConfigMap 中的配置文件来配置其行为。</code></pre> 
<h3 id="5%E3%80%81%E8%BF%90%E8%A1%8Cnginx-deployment.yaml%EF%BC%8C%E5%88%9B%E5%BB%BAPod">5、运行nginx-deployment.yaml，创建Pod</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# kubectl apply -f nginx-deployment.yaml 

(base) root@sd-cluster-04:/etc/nginx# kubectl get pods -o wide -n testns
NAME                                READY   STATUS        RESTARTS   AGE    IP             NODE            NOMINATED NODE   READINESS GATES
es-cluster-0                        0/1     Terminating   0          62d    10.244.5.163   sd-cluster-02   &lt;none&gt;           &lt;none&gt;
mysql-deployment-66c4d975f5-zm4sz   1/1     Running       0          5d1h   10.244.0.212   sd-cluster-04   &lt;none&gt;           &lt;none&gt;
nginx-deployment-67fb5f6db7-9ltlb   1/1     Running       0          21m    10.244.1.254   sd-cluster-05   &lt;none&gt;           &lt;none&gt;
redis-deployment-f7d7dd455-xk7h8    1/1     Running       0          5d     10.244.0.215   sd-cluster-04   &lt;none&gt;           &lt;none&gt;
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<h3 id="6%E3%80%81%E5%88%9B%E5%BB%BAService%E5%8F%91%E5%B8%83nginx%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%88%9B%E5%BB%BAnginx-service.yaml%E6%96%87%E4%BB%B6">6、创建Service发布nginx容器服务，创建nginx-service.yaml文件</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# cat nginx-service.yaml 
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
  namespace: testns
  labels:
    app: clay-nginx
spec:
  type: NodePort
  selector:
    app: clay-nginx  
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
      nodePort: 31273
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<p>逐行解释：</p> 
<pre><code>这是一个 Kubernetes Service 的 YAML 文件，用于创建一个服务资源。以下是逐行解释该文件的内容：

1. `apiVersion: v1`: 这一行指定了 Kubernetes API 的版本，以及使用的资源类型是 Service。

2. `kind: Service`: 指定了资源的种类，这是一个服务 (Service)。

3. `metadata:`: 定义了服务的元数据，包括名称、命名空间和标签。

   - `name: nginx-service`: 服务的名称是 "nginx-service"。
   - `namespace: testns`: 服务所属的命名空间是 "testns"。

   - `labels:`: 为服务添加标签。

     - `app: clay-nginx`: 将标签 "app: clay-nginx" 添加到服务上。

6. `spec:`: 定义了服务的规格，包括服务类型、选择器和端口配置。

   - `type: NodePort`: 指定了服务的类型为 NodePort，这意味着服务将暴露到每个节点的指定端口上。

   - `selector:`: 选择器用于确定哪些 Pod 属于这个服务。

     - `app: clay-nginx`: 匹配标签中含有 "app: clay-nginx" 的 Pod。

   - `ports:`: 定义了服务监听的端口配置。

     - `protocol: TCP`: 指定了端口的传输协议是 TCP。

     - `port: 80`: 服务监听的端口号是 80。

     - `targetPort: 80`: 服务将流量转发到后端 Pod 的端口号是 80。

     - `nodePort: 31273`: 如果服务类型是 NodePort，这个配置项指定了节点上用于访问服务的端口号。在这个例子中，服务将在节点上的端口 31273 上监听，从而可以通过节点的 IP 地址和该端口访问该服务。

这个配置文件描述了一个服务，它会将流量从节点的端口 31273 转发到匹配标签 "app: clay-nginx" 的后端 Pod 上的端口 80。这种服务类型通常用于在外部网络上访问 Kubernetes 集群中的服务。</code></pre> 
<h3 id="7%E3%80%81%E8%BF%90%E8%A1%8Cnginx-service.yaml%EF%BC%8C%E5%88%9B%E5%BB%BAPod">7、运行nginx-service.yaml，创建Pod</h3> 
<pre><code>(base) root@sd-cluster-04:/etc/nginx# kubectl apply -f nginx-service.yaml 

(base) root@sd-cluster-04:/etc/nginx# kubectl get service -o wide -n testns
NAME            TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE   SELECTOR
mysql-service   NodePort   10.96.132.123   &lt;none&gt;        3306:30859/TCP   5d    app=mysql
nginx-service   NodePort   10.96.87.157    &lt;none&gt;        80:31273/TCP     65m   app=clay-nginx
redis-service   NodePort   10.96.10.164    &lt;none&gt;        6379:30026/TCP   5d    app=redis
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<h3 id="8%E3%80%81%E9%AA%8C%E8%AF%81%E8%AE%BF%E9%97%AE">8、验证访问</h3> 
<p>首先访问容器内的配置文件是否发生更改：</p> 
<p><img alt="" height="763" src="https://images2.imgbox.com/33/34/FLXFz8jO_o.jpg" width="1169"></p> 
<p>再次访问浏览器，产科nginx的Web服务是否发布 </p> 
<p><img alt="" height="434" src="https://images2.imgbox.com/f6/11/MvYjlEnl_o.png" width="1200"></p> 
<h2 id="%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8Configmap%E5%B0%86nginx%E5%AE%B9%E5%99%A8%E5%8F%98%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BD%BF%E9%9B%86%E7%BE%A4%E5%86%85%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E5%A4%96%E8%BE%B9%E7%9A%84%E8%B5%84%E6%BA%90%E9%80%9A%E8%BF%87nginx%20tcp%E4%BB%A3%E7%90%86%E3%80%82" style="background-color:transparent;">实验：使用Configmap将nginx容器变为代理服务器，使集群内访问集群外边的资源通过nginx tcp代理。</h2> 
<h3 id="1%E3%80%81%E4%BD%BF%E7%94%A8nginx-config.yaml%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BAConfigmap">1、使用nginx-config.yaml文件创建Configmap</h3> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# cat nginx-config.yaml 
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
  namespace: testns
data:
  nginx.conf: | 
    user  nginx;
    worker_processes  auto;

    events {
        worker_connections  1024;
    }

    stream {
        upstream hive {
            server 192.168.1.209:3306;    
        }
   
    server {
        listen 8888;
        proxy_pass hive;
        }
    }
 
    http {
        include       /etc/nginx/mime.types;
        default_type  application/octet-stream;

        log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                          '$status $body_bytes_sent "$http_referer" '
                          '"$http_user_agent" "$http_x_forwarded_for"';

        access_log  /var/log/nginx/access.log  main;

        sendfile        on;
        #tcp_nopush     on;

        keepalive_timeout  65;

        #gzip  on;

        include /etc/nginx/conf.d/*.conf;
    }
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<p> 代码解释：（使用了nginx的代理功能）</p> 
<pre><code class="hljs">这是一个名为 `nginx-config` 的 Kubernetes ConfigMap 配置，用于存储 Nginx 的配置文件内容。让我逐行解释这个配置文件的各个部分：

1. `user nginx;`: 设置 Nginx 进程运行的用户为 `nginx`。

2. `worker_processes auto;`: 设置 Nginx 使用的工作进程数量自动适应可用的 CPU 内核数。

3. `events { ... }`: 在这个块中，定义了 Nginx 事件模块的配置。通常用于配置 Nginx 如何处理客户端连接和网络事件。

   - `worker_connections 1024;`: 设置每个工作进程可以同时处理的最大连接数为 1024。

4. `stream { ... }`: 这是一个 Nginx 流块，通常用于配置 TCP/UDP 代理或负载均衡。在这里，定义了一个名为 `hive` 的上游服务器，它将流量代理到 `192.168.1.209` 的 `3306` 端口。这似乎是将流量代理到 MySQL 服务器。

   - `server { ... }`: 定义了一个监听在 `8888` 端口的流服务器块，该服务器将传入的流量代理到名为 `hive` 的上游服务器。

5. `http { ... }`: 这是一个 Nginx HTTP 块，用于配置 HTTP 服务器。

   - `include /etc/nginx/mime.types;`: 引用了 MIME 类型文件，用于指定文件扩展名与 MIME 类型之间的映射关系。

   - `default_type application/octet-stream;`: 设置默认的 MIME 类型为 `application/octet-stream`，如果无法确定具体的文件类型时将使用该类型。

   - `log_format main '...';`: 定义了日志格式，该格式用于记录访问日志信息。

   - `access_log /var/log/nginx/access.log main;`: 配置了访问日志文件的位置和使用的日志格式。

   - `sendfile on;`: 启用文件传输，加快文件传输速度。

   - `keepalive_timeout 65;`: 设置客户端保持连接的超时时间。

   - `include /etc/nginx/conf.d/*.conf;`: 包含了 `/etc/nginx/conf.d/` 目录下的其他配置文件。

总之，这个配置文件定义了一个 Nginx 服务器，该服务器通过 `8888` 端口接受流量，并将流量代理到名为 `hive` 的上游服务器，而该上游服务器似乎是一个 MySQL 服务器。此外，该配置文件还包括了一些 HTTP 服务器的配置，例如访问日志、MIME 类型映射等。这个配置文件的具体功能可能需要根据实际需求来确定。</code></pre> 
<p>创建Configmap：</p> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# kubectl apply -f nginx-config.yaml 
configmap/nginx-config created
</code></pre> 
<h3 id="2%E3%80%81%E6%90%AD%E5%BB%BAnginx%E5%AE%B9%E5%99%A8%EF%BC%8C%E8%B0%83%E7%94%A8Configmap%E6%9B%B4%E6%96%B0nginx%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E6%B7%BB%E5%8A%A0%E5%85%A5%E7%BD%91%E5%8F%A3%E7%9A%84%E6%A0%87%E7%AD%BE%EF%BC%89%EF%BC%9A">2、搭建nginx容器，调用Configmap更新nginx的配置文件（添加入网口的标签）：</h3> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# cat nginx-deployment2.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  namespace: testns
  labels:
    zone: fjy
    nodetype: inward
spec:
  replicas: 1
  selector:
    matchLabels:
      app: clay-nginx
      zone: fjy
      nodetype: inward
  template:
    metadata:
      labels:
        app: clay-nginx
        zone: fjy
        nodetype: inward
    spec:
      containers:
      - name: nginx
        image: nginx:1.24
        ports:
        - containerPort: 80
        volumeMounts:
        - name: nginx-config-volume
          mountPath: /etc/nginx/nginx.conf
          subPath: nginx.conf
      volumes:
        - name: nginx-config-volume
          configMap:
            name: nginx-config
            items:
            - key: nginx.conf
              path: nginx.conf     
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<h3 id="3%E3%80%81%E8%BF%90%E8%A1%8C%20nginx-deployment2.yaml%EF%BC%8C%E6%90%AD%E5%BB%BAPod">3、运行 nginx-deployment2.yaml，搭建Pod</h3> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# kubectl apply -f nginx-deployment2.yaml 
deployment.apps/nginx-deployment created
</code></pre> 
<p><strong>查看Pod：</strong></p> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# kubectl get pods -o wide -n testns
NAME                                READY   STATUS        RESTARTS   AGE     IP             NODE            NOMINATED NODE   READINESS GATES
es-cluster-0                        0/1     Terminating   0          64d     10.244.5.163   sd-cluster-02   &lt;none&gt;           &lt;none&gt;
mysql-deployment-66c4d975f5-zm4sz   1/1     Running       0          6d22h   10.244.0.212   sd-cluster-04   &lt;none&gt;           &lt;none&gt;
nginx-deployment-859449b97-bp4fz    1/1     Running       0          6m33s   10.244.0.82    sd-cluster-04   &lt;none&gt;           &lt;none&gt;
redis-deployment-f7d7dd455-xk7h8    1/1     Running       0          6d22h   10.244.0.215   sd-cluster-04   &lt;none&gt;           &lt;none&gt;
</code></pre> 
<p><strong>查看标签： </strong></p> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# kubectl get pods -n testns --show-labels
NAME                                READY   STATUS        RESTARTS   AGE     LABELS
es-cluster-0                        0/1     Terminating   0          64d     app=es-cluster,chart=elasticsearch,controller-revision-hash=es-cluster-7c77895f7f,heritage=Helm,release=es-cluster,statefulset.kubernetes.io/pod-name=es-cluster-0
mysql-deployment-66c4d975f5-zm4sz   1/1     Running       0          6d22h   app=mysql,pod-template-hash=66c4d975f5
nginx-deployment-859449b97-xd7x8    1/1     Running       0          19s     app=clay-nginx,nodetype=inward,pod-template-hash=859449b97,zone=fjy
redis-deployment-f7d7dd455-xk7h8    1/1     Running       0          6d21h   app=redis,pod-template-hash=f7d7dd455
</code></pre> 
<h3 id="4%E3%80%81%E8%BF%90%E8%A1%8C%20nginx-service2.yaml%EF%BC%8C%E6%90%AD%E5%BB%BAService%E6%9C%8D%E5%8A%A1">4、运行 nginx-service2.yaml，搭建Service服务</h3> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# cat nginx-service2.yaml   # service2用于发布8888端口
apiVersion: v1
kind: Service
metadata:
  name: nginx-service-2
  namespace: testns
  labels:
    app: clay-nginx
    zone: fjy
    nodetype: inward
spec:
  type: NodePort
  selector:
    app: clay-nginx  
  ports:
    - protocol: TCP
      port: 8888
      targetPort: 8888
      nodePort: 31275
(base) root@sd-cluster-04:/etc/nginx# cat nginx-service3.yaml   # service3用于发布80端口
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
  namespace: testns
  labels:
    app: clay-nginx
    zone: fjy
    nodetype: inward
spec:
  type: NodePort
  selector:
    app: clay-nginx  
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
      nodePort: 31273
(base) root@sd-cluster-04:/etc/nginx# 
</code></pre> 
<h3 id="5%E3%80%81%E8%BF%90%E8%A1%8Cnginx-service2.yaml%20%E5%92%8C%C2%A0nginx-service3.yaml%EF%BC%8C%20%E6%90%AD%E5%BB%BAService%E6%9C%8D%E5%8A%A1">5、运行nginx-service2.yaml 和 nginx-service3.yaml， 搭建Service服务</h3> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# kubectl apply -f nginx-service2.yaml 
service/nginx-service-2 created
(base) root@sd-cluster-04:/etc/nginx# kubectl apply -f nginx-service3.yaml 
service/nginx-service-3 created
</code></pre> 
<p><strong>查看Service：</strong></p> 
<pre><code class="hljs">(base) root@sd-cluster-04:/etc/nginx# kubectl get service -o wide -n testns
NAME              TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE     SELECTOR
mysql-service     NodePort   10.96.132.123   &lt;none&gt;        3306:30859/TCP   6d21h   app=mysql
nginx-service     NodePort   10.96.44.105    &lt;none&gt;        80:31273/TCP     28m     app=clay-nginx
nginx-service-2   NodePort   10.96.77.236    &lt;none&gt;        8888:31275/TCP   28m     app=clay-nginx
redis-service     NodePort   10.96.10.164    &lt;none&gt;        6379:30026/TCP   6d21h   app=redis
</code></pre> 
<h3 id="6%E3%80%81%E9%AA%8C%E8%AF%81%E8%AE%BF%E9%97%AE%EF%BC%9A">6、验证访问：</h3> 
<p><strong>访问nginx的代理服务：</strong></p> 
<p><img alt="" height="315" src="https://images2.imgbox.com/63/14/SUkr3eQc_o.jpg" width="1200"></p> 
<p><strong>访问mysql的代理服务：</strong></p> 
<p>修改的部分：</p> 
<p><img alt="" height="203" src="https://images2.imgbox.com/1d/a7/uvdVOXFn_o.jpg" width="298"></p> 
<p><img alt="" height="350" src="https://images2.imgbox.com/02/21/hVMZit6I_o.jpg" width="434"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac05984a7626522985a3e894d5992ac8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring JPA</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b0a4bacd08af0e20739d30c81d923a5c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">学习到的一种解决github网站打不开的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>