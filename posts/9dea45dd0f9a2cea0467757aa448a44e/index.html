<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络安全之防火墙 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络安全之防火墙" />
<meta property="og:description" content="目录
网络安全之防火墙
路由交换终归结底是联通新设备
防御对象：
定义：
防火墙的区域划分：
包过滤防火墙 --- 访问控制列表技术 --- 三层技术
代理防火墙 --- 中间人技术 --- 应用层
状态防火墙 --- 会话追踪技术 --- 三层、四层
UTM --- 深度包检查技术 --- 应用层
下一代防火墙
防火墙的区域
防火墙的安全区域
安全区域的优先级的作用
防火墙策略配置
定义与原理
防火墙策略配置
安全策略工作流程
查询和创建会话
ASPF技术
server-map表
STUN类型协议与server-map表
端口识别
NAT ALG
NAT域间双向转换
NAT域内双向转换
双出口NAT
防火墙的接口模式
路由模式
交换模式
接口对模式
旁路模式
防火墙的高可靠技术
VRRP
VGMP
VGMP的基本原理
VGMP状态机
VGMP状态切换
HPR协议
HPR的产生
HRP数据备份范围
在防火墙双机热备组网中必须首先解决的问题
双机热备组网的建立和运行需要解决以下5个关键问题
网络安全之防火墙 路由交换终归结底是联通新设备 网络在远古时期没有防火墙大家都是联通的，any to any
防御对象： 授权用戶非授权用戶 定义： 防火墙是一种隔离（非授权用户在区域间）并过滤（对保护网络有害流量或数据包）的设备" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/9dea45dd0f9a2cea0467757aa448a44e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-30T18:46:13+08:00" />
<meta property="article:modified_time" content="2023-03-30T18:46:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络安全之防火墙</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%B9%8B%E9%98%B2%E7%81%AB%E5%A2%99-toc" style="margin-left:0px;"><a href="#%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%B9%8B%E9%98%B2%E7%81%AB%E5%A2%99" rel="nofollow">网络安全之防火墙</a></p> 
<p id="%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E7%BB%88%E5%BD%92%E7%BB%93%E5%BA%95%E6%98%AF%E8%81%94%E9%80%9A%E6%96%B0%E8%AE%BE%E5%A4%87-toc" style="margin-left:40px;"><a href="#%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E7%BB%88%E5%BD%92%E7%BB%93%E5%BA%95%E6%98%AF%E8%81%94%E9%80%9A%E6%96%B0%E8%AE%BE%E5%A4%87" rel="nofollow">路由交换终归结底是联通新设备</a></p> 
<p id="%E9%98%B2%E5%BE%A1%E5%AF%B9%E8%B1%A1%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%E9%98%B2%E5%BE%A1%E5%AF%B9%E8%B1%A1%EF%BC%9A" rel="nofollow">防御对象：</a></p> 
<p id="%E5%AE%9A%E4%B9%89%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E5%AE%9A%E4%B9%89%EF%BC%9A" rel="nofollow">定义：</a></p> 
<p id="%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8C%BA%E5%9F%9F%E5%88%92%E5%88%86%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8C%BA%E5%9F%9F%E5%88%92%E5%88%86%EF%BC%9A" rel="nofollow"> 防火墙的区域划分：</a></p> 
<p id="%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%E6%8A%80%E6%9C%AF%20---%C2%A0%E4%B8%89%E5%B1%82%E6%8A%80%E6%9C%AF-toc" style="margin-left:80px;"><a href="#%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%E6%8A%80%E6%9C%AF%20---%C2%A0%E4%B8%89%E5%B1%82%E6%8A%80%E6%9C%AF" rel="nofollow">包过滤防火墙 --- 访问控制列表技术 --- 三层技术</a></p> 
<p id="%E4%BB%A3%E7%90%86%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%8A%80%E6%9C%AF%20---%C2%A0%E5%BA%94%E7%94%A8%E5%B1%82-toc" style="margin-left:80px;"><a href="#%E4%BB%A3%E7%90%86%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%8A%80%E6%9C%AF%20---%C2%A0%E5%BA%94%E7%94%A8%E5%B1%82" rel="nofollow">代理防火墙 --- 中间人技术 --- 应用层</a></p> 
<p id="%E7%8A%B6%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E4%BC%9A%E8%AF%9D%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF%20---%C2%A0%E4%B8%89%E5%B1%82%E3%80%81%E5%9B%9B%E5%B1%82-toc" style="margin-left:80px;"><a href="#%E7%8A%B6%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E4%BC%9A%E8%AF%9D%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF%20---%C2%A0%E4%B8%89%E5%B1%82%E3%80%81%E5%9B%9B%E5%B1%82" rel="nofollow">状态防火墙 --- 会话追踪技术 --- 三层、四层</a></p> 
<p id="UTM%20---%C2%A0%E6%B7%B1%E5%BA%A6%E5%8C%85%E6%A3%80%E6%9F%A5%E6%8A%80%E6%9C%AF%20---%C2%A0%E5%BA%94%E7%94%A8%E5%B1%82-toc" style="margin-left:80px;"><a href="#UTM%20---%C2%A0%E6%B7%B1%E5%BA%A6%E5%8C%85%E6%A3%80%E6%9F%A5%E6%8A%80%E6%9C%AF%20---%C2%A0%E5%BA%94%E7%94%A8%E5%B1%82" rel="nofollow">UTM --- 深度包检查技术 --- 应用层</a></p> 
<p id="%C2%A0%E4%B8%8B%E4%B8%80%E4%BB%A3%E9%98%B2%E7%81%AB%E5%A2%99-toc" style="margin-left:80px;"><a href="#%C2%A0%E4%B8%8B%E4%B8%80%E4%BB%A3%E9%98%B2%E7%81%AB%E5%A2%99" rel="nofollow"> 下一代防火墙</a></p> 
<p id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8C%BA%E5%9F%9F-toc" style="margin-left:40px;"><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8C%BA%E5%9F%9F" rel="nofollow">防火墙的区域</a></p> 
<p id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F-toc" style="margin-left:80px;"><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F" rel="nofollow">防火墙的安全区域</a></p> 
<p id="%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E7%9A%84%E4%BD%9C%E7%94%A8-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E7%9A%84%E4%BD%9C%E7%94%A8" rel="nofollow">安全区域的优先级的作用</a></p> 
<p id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE" rel="nofollow">防火墙策略配置</a></p> 
<p id="%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%8E%9F%E7%90%86" rel="nofollow">定义与原理</a></p> 
<p id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE" rel="nofollow">防火墙策略配置</a></p> 
<p id="%C2%A0%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B" rel="nofollow"> 安全策略工作流程</a></p> 
<p id="%C2%A0%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%9B%E5%BB%BA%E4%BC%9A%E8%AF%9D-toc" style="margin-left:80px;"><a href="#%C2%A0%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%9B%E5%BB%BA%E4%BC%9A%E8%AF%9D" rel="nofollow"> 查询和创建会话</a></p> 
<p id="ASPF%E6%8A%80%E6%9C%AF-toc" style="margin-left:40px;"><a href="#ASPF%E6%8A%80%E6%9C%AF" rel="nofollow">ASPF技术</a></p> 
<p id="%C2%A0server-map%E8%A1%A8-toc" style="margin-left:80px;"><a href="#%C2%A0server-map%E8%A1%A8" rel="nofollow"> server-map表</a></p> 
<p id="STUN%E7%B1%BB%E5%9E%8B%E5%8D%8F%E8%AE%AE%E4%B8%8Eserver-map%E8%A1%A8-toc" style="margin-left:80px;"><a href="#STUN%E7%B1%BB%E5%9E%8B%E5%8D%8F%E8%AE%AE%E4%B8%8Eserver-map%E8%A1%A8" rel="nofollow">STUN类型协议与server-map表</a></p> 
<p id="%E7%AB%AF%E5%8F%A3%E8%AF%86%E5%88%AB-toc" style="margin-left:80px;"><a href="#%E7%AB%AF%E5%8F%A3%E8%AF%86%E5%88%AB" rel="nofollow">端口识别</a></p> 
<p id="NAT%C2%A0ALG-toc" style="margin-left:80px;"><a href="#NAT%C2%A0ALG" rel="nofollow">NAT ALG</a></p> 
<p id="NAT%E5%9F%9F%E9%97%B4%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2-toc" style="margin-left:80px;"><a href="#NAT%E5%9F%9F%E9%97%B4%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2" rel="nofollow">NAT域间双向转换</a></p> 
<p id="%C2%A0NAT%E5%9F%9F%E5%86%85%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2-toc" style="margin-left:80px;"><a href="#%C2%A0NAT%E5%9F%9F%E5%86%85%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2" rel="nofollow"> NAT域内双向转换</a></p> 
<p id="%C2%A0%E5%8F%8C%E5%87%BA%E5%8F%A3NAT-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%8F%8C%E5%87%BA%E5%8F%A3NAT" rel="nofollow"> 双出口NAT</a></p> 
<p id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%A8%A1%E5%BC%8F" rel="nofollow">防火墙的接口模式</a></p> 
<p id="%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F" rel="nofollow">路由模式</a></p> 
<p id="%E4%BA%A4%E6%8D%A2%E6%A8%A1%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%E4%BA%A4%E6%8D%A2%E6%A8%A1%E5%BC%8F" rel="nofollow">交换模式</a></p> 
<p id="%E6%8E%A5%E5%8F%A3%E5%AF%B9%E6%A8%A1%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%E6%8E%A5%E5%8F%A3%E5%AF%B9%E6%A8%A1%E5%BC%8F" rel="nofollow">接口对模式</a></p> 
<p id="%C2%A0%E6%97%81%E8%B7%AF%E6%A8%A1%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%C2%A0%E6%97%81%E8%B7%AF%E6%A8%A1%E5%BC%8F" rel="nofollow"> 旁路模式</a></p> 
<p id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%8A%80%E6%9C%AF-toc" style="margin-left:40px;"><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%8A%80%E6%9C%AF" rel="nofollow">防火墙的高可靠技术</a></p> 
<p id="%C2%A0VRRP-toc" style="margin-left:80px;"><a href="#%C2%A0VRRP" rel="nofollow"> VRRP</a></p> 
<p id="VGMP-toc" style="margin-left:40px;"><a href="#VGMP" rel="nofollow">        </a><a href="#VGMP" rel="nofollow"> VGMP</a></p> 
<p id="VGMP%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#VGMP%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86" rel="nofollow">        </a><a href="#VGMP%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86" rel="nofollow">VGMP的基本原理</a></p> 
<p id="VGMP%E7%8A%B6%E6%80%81%E6%9C%BA-toc" style="margin-left:80px;"><a href="#VGMP%E7%8A%B6%E6%80%81%E6%9C%BA" rel="nofollow">        </a><a href="#VGMP%E7%8A%B6%E6%80%81%E6%9C%BA" rel="nofollow">VGMP状态机</a></p> 
<p id="VGMP%E7%8A%B6%E6%80%81%E5%88%87%E6%8D%A2-toc" style="margin-left:80px;"><a href="#VGMP%E7%8A%B6%E6%80%81%E5%88%87%E6%8D%A2" rel="nofollow">        </a><a href="#VGMP%E7%8A%B6%E6%80%81%E5%88%87%E6%8D%A2" rel="nofollow">VGMP状态切换</a></p> 
<p id="HPR%E5%8D%8F%E8%AE%AE-toc" style="margin-left:40px;"><a href="#HPR%E5%8D%8F%E8%AE%AE" rel="nofollow"> </a><a href="#HPR%E5%8D%8F%E8%AE%AE" rel="nofollow">        </a><a href="#HPR%E5%8D%8F%E8%AE%AE" rel="nofollow">HPR协议</a></p> 
<p id="HPR%E7%9A%84%E4%BA%A7%E7%94%9F-toc" style="margin-left:80px;"><a href="#HPR%E7%9A%84%E4%BA%A7%E7%94%9F" rel="nofollow">        </a><a href="#HPR%E7%9A%84%E4%BA%A7%E7%94%9F" rel="nofollow">HPR的产生</a></p> 
<p id="HRP%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E8%8C%83%E5%9B%B4-toc" style="margin-left:80px;"><a href="#HRP%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E8%8C%83%E5%9B%B4" rel="nofollow">        </a><a href="#HRP%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E8%8C%83%E5%9B%B4" rel="nofollow">HRP数据备份范围</a></p> 
<p id="%E5%9C%A8%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E7%BB%84%E7%BD%91%E4%B8%AD%E5%BF%85%E9%A1%BB%E9%A6%96%E5%85%88%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98-toc" style="margin-left:40px;"><a href="#%E5%9C%A8%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E7%BB%84%E7%BD%91%E4%B8%AD%E5%BF%85%E9%A1%BB%E9%A6%96%E5%85%88%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98" rel="nofollow">在防火墙双机热备组网中必须首先解决的问题</a></p> 
<p id="%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E7%BB%84%E7%BD%91%E7%9A%84%E5%BB%BA%E7%AB%8B%E5%92%8C%E8%BF%90%E8%A1%8C%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E4%BB%A5%E4%B8%8B5%E4%B8%AA%E5%85%B3%E9%94%AE%E9%97%AE%E9%A2%98-toc" style="margin-left:80px;"><a href="#%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E7%BB%84%E7%BD%91%E7%9A%84%E5%BB%BA%E7%AB%8B%E5%92%8C%E8%BF%90%E8%A1%8C%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E4%BB%A5%E4%B8%8B5%E4%B8%AA%E5%85%B3%E9%94%AE%E9%97%AE%E9%A2%98" rel="nofollow">双机热备组网的建立和运行需要解决以下5个关键问题</a></p> 
<p id="HPR%E5%8D%8F%E8%AE%AE-toc" style="margin-left:40px;"></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%B9%8B%E9%98%B2%E7%81%AB%E5%A2%99">网络安全之防火墙</h2> 
<h3 id="%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E7%BB%88%E5%BD%92%E7%BB%93%E5%BA%95%E6%98%AF%E8%81%94%E9%80%9A%E6%96%B0%E8%AE%BE%E5%A4%87">路由交换终归结底是联通新设备</h3> 
<p>        网络在远古时期没有防火墙大家都是联通的，any to any</p> 
<h3 id="%E9%98%B2%E5%BE%A1%E5%AF%B9%E8%B1%A1%EF%BC%9A">防御对象：</h3> 
<ul><li>授权用戶</li><li>非授权用戶</li></ul> 
<h4 id="%E5%AE%9A%E4%B9%89%EF%BC%9A">定义：</h4> 
<p>        防火墙是一种隔离（非授权用户在区域间）并过滤（对保护网络有害流量或数据包）的设备</p> 
<p><img alt="" height="214" src="https://images2.imgbox.com/3d/a0/qHCgPQuv_o.png" width="672"></p> 
<h3 id="%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8C%BA%E5%9F%9F%E5%88%92%E5%88%86%EF%BC%9A"> 防火墙的区域划分：</h3> 
<p>                <strong><span style="color:#fe2c24;">根据安全等级来划分</span></strong></p> 
<h4 id="%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%E6%8A%80%E6%9C%AF%20---%C2%A0%E4%B8%89%E5%B1%82%E6%8A%80%E6%9C%AF">包过滤防火墙 --- <span style="color:#ff9900;">访问控制列表技术</span> --- <span style="color:#fe2c24;">三层技术</span></h4> 
<p><span style="color:#fe2c24;">        </span><strong><span style="color:#0d0016;">工作过程：</span></strong><span style="color:#0d0016;">包过滤防火墙可以理解为就是ACL访问控制列表技术；他主要就是在检测的时候根据五元组【IP地址、源端口、目的IP地址、目的端口和传输层协议】来进行的。这样的话他的防御的网洞太大，导致不管多大的都能进来，但是要是只限制他只能访问http80端口的话，内网在访问外网其他协议的时候，出去就不能回来了，这样的话也不行。</span></p> 
<p><span style="color:#4da8ee;">       </span><span style="color:#0d0016;"><strong> 特点：</strong>简单、速度快</span></p> 
<p><span style="color:#0d0016;">                   检查的颗粒度粗</span></p> 
<blockquote> 
 <p><strong>颗粒度：</strong></p> 
 <p>        颗粒度<span style="color:#fe2c24;">越细</span>，表示细节越<span style="color:#fe2c24;">详尽</span>，越有助于了解事情的全貌<br>         颗粒度<span style="color:#fe2c24;">越粗</span>，表示细节越<span style="color:#fe2c24;">少</span>，更多的是抽象概括。</p> 
</blockquote> 
<h4 id="%E4%BB%A3%E7%90%86%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%8A%80%E6%9C%AF%20---%C2%A0%E5%BA%94%E7%94%A8%E5%B1%82">代理防火墙 --- <span style="color:#ff9900;">中间人技术</span> ---<span style="color:#fe2c24;"> 应用层</span></h4> 
<p><span style="color:#fe2c24;">        </span><span style="color:#0d0016;">降低包过滤颗粒度的一种做法，区域之间通信使用</span><span style="color:#fe2c24;">固定设备</span></p> 
<p><span style="color:#fe2c24;">        </span><strong><span style="color:#0d0016;">工作过程：</span></strong><span style="color:#0d0016;">也就说说如果内网想要访问外网的一个东西的时候，他不是直接发送到外网的目标地址，而是出现了一个服务器，你访问出去之后，会先将你的消息发送到这个服务器上，然后在由服务器发给你要访问的最终地址。<br>                           如果开启代理的话，他所访问的就不是源目标地址，而是换了一个路径到达了代理服务器上，由这个服务器发送到源目标地址，而上面的过程就需要使用到socket来进行；而不同的访问的应用不同，所要使用的代理技术也不同，并且应用之间是不能通用的</span></p> 
<p><strong><span style="color:#0d0016;">        特点：</span></strong><span style="color:#0d0016;">代理技术智能正对特定的应用来实现，应用之间通行使用固定设备</span></p> 
<p><span style="color:#0d0016;">                   技术复杂，速度慢</span></p> 
<p><span style="color:#0d0016;">                   能防御应用层威胁，内容威胁</span></p> 
<h4 id="%E7%8A%B6%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%20---%C2%A0%E4%BC%9A%E8%AF%9D%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF%20---%C2%A0%E4%B8%89%E5%B1%82%E3%80%81%E5%9B%9B%E5%B1%82"><span style="color:#0d0016;">状态防火墙 --- </span><span style="color:#ff9900;">会话追踪技术</span><span style="color:#0d0016;"> --- </span><span style="color:#fe2c24;">三层、四层</span></h4> 
<p><span style="color:#0d0016;">        在包过滤（ACL表）的基础上增加一个会话表，数据包需要查看会话表来实现匹配。会话表可以用</span><span style="color:#fe2c24;">hash</span><span style="color:#0d0016;">来处理形成定长值，使用</span><span style="color:#fe2c24;">CAM芯片</span><span style="color:#0d0016;">处理，达到交换机的处理速度。</span></p> 
<p><span style="color:#fe2c24;">        </span><strong><span style="color:#0d0016;">工作过程：</span></strong><span style="color:#0d0016;">数据包首先会到达状态检查某块，通过对数据包的分析，提取数据包报文头文件信息，检查数据包是否符合在状态表中某个已经建立的有效的会话连接记录，如果符合记录，则会根据报文头信息更新的状态表进行放行<br>                           若与状态表中无匹配表项，则检测他与规则表是否匹配，不匹配的话就直接丢掉<br>                           如果匹配进一步判断是否允许建立新连接，这时候根据ip协议承载的上层不同协议类型建立新表项，最终报文加载状态信息进行处理。</span></p> 
<p><span style="color:#0d0016;"> <strong>       特点：</strong>首包机制</span></p> 
<p><span style="color:#0d0016;">                   细颗粒度</span></p> 
<p><span style="color:#0d0016;">                   速度快</span></p> 
<p><img alt="" height="403" src="https://images2.imgbox.com/a6/a1/I1NXJGj9_o.png" width="668"></p> 
<blockquote> 
 <p><strong><span style="color:#0d0016;">hash：</span></strong></p> 
 <p><strong><span style="color:#0d0016;">     </span></strong><span style="color:#0d0016;"> </span><span style="color:#fe2c24;">  散列算法（Hash Algorithm）</span><span style="color:#0d0016;">，又称哈希算法，杂凑算法，是一种从任意文件中创造小的数字「指纹」的方法。与指纹一样，散列算法就是一种以较短的信息来</span><span style="color:#fe2c24;">保证文件唯一性</span><span style="color:#0d0016;">的标志，这种标志与文件的每一个字节都相关，而且难以找到逆向规律。因此，当</span><span style="color:#fe2c24;">原有文件发生改变</span><span style="color:#0d0016;">时，其</span><span style="color:#fe2c24;">标志值也会发生改变</span><span style="color:#0d0016;">，从而告诉文件使用者当前的文件已经不是你所需求的文件。</span></p> 
 <p><span style="color:#0d0016;">        </span>Hash 算法能将将<span style="color:#fe2c24;">任意长度的二进制</span>明文<span style="color:#fe2c24;">映射</span>为<span style="color:#fe2c24;">较短的二进制串</span>的算法，并且不同的明文很难映射为相同的 Hash 值。</p> 
 <p></p> 
 <p><strong>CAM：</strong></p> 
 <p><strong>        </strong>内容可寻址存储器CAM（Coment-Addressable Memo-ry）以<span style="color:#fe2c24;">内容进行寻址的存储器</span>，是一种特殊的存储阵列RAM。它的主要工作机制就是将一个<span style="color:#fe2c24;">输入数据项与存储在CAM中的所有数据项自动同时进行比较</span>，判别该输入数据项与CAM中存储的数据项<span style="color:#fe2c24;">是否相匹配</span>，并输出该数据项<span style="color:#fe2c24;">对应的匹配信息</span>。</p> 
</blockquote> 
<h4 id="UTM%20---%C2%A0%E6%B7%B1%E5%BA%A6%E5%8C%85%E6%A3%80%E6%9F%A5%E6%8A%80%E6%9C%AF%20---%C2%A0%E5%BA%94%E7%94%A8%E5%B1%82">UTM --- <span style="color:#ff9900;">深度包检查技术</span> --- <span style="color:#fe2c24;">应用层</span></h4> 
<p>    <strong>    原理：</strong>将应用网关和IPS等设备在状态防火墙的基础上进行<span style="color:#fe2c24;">整合</span>和<span style="color:#fe2c24;">统一</span></p> 
<p> <strong>       特点：</strong>把原来分散的设备进行统一管理，有利于<span style="color:#fe2c24;">节约资金</span>和<span style="color:#fe2c24;">学习成本</span></p> 
<p>                   统一有利于各设备之间协作</p> 
<p>                   设备负荷较大并且检查也是逐个功能模块来进行的，貌合神离，速度慢</p> 
<p><img alt="" height="207" src="https://images2.imgbox.com/76/a6/LVvD2sfe_o.png" width="608"></p> 
<h4 id="%C2%A0%E4%B8%8B%E4%B8%80%E4%BB%A3%E9%98%B2%E7%81%AB%E5%A2%99"><span style="color:#ff9900;"> 下一代防火墙</span></h4> 
<p><span style="color:#ff9900;">        </span>2008年Palo Alto Networks 公司发布了下一代防火墙（Next-Generation Firewall），解决了多个功能 同时运行时性能下降的问题。同时，下一代防火墙还可以<span style="color:#fe2c24;">基于用户</span>、<span style="color:#fe2c24;">应用</span>和<span style="color:#fe2c24;">内容</span>来进行管控。2009年 Gartner（一家IT咨询公司） 对下一代防火墙进行了定义，明确下一代防火墙应具备的功能特性。</p> 
<p>         Gartner把NGFW看做不同信任级别的网络之间的一个线速（wire-speed）实时防护设备，能够<span style="color:#fe2c24;">对流量 执行深度检测，并阻断攻击</span>。</p> 
<p><strong>NGFW必须具备以下<span style="color:#fe2c24;">能力</span>：</strong></p> 
<p><strong>1. 传统防火墙的功能</strong></p> 
<p>        NGFW是新环境下传统防火墙的替代产品，必须前向<span style="color:#fe2c24;">兼容传统防火墙</span>的基本功能，包括包过滤、协议状 态检测、NAT、VPN等。</p> 
<p><strong>2. IPS 与防火墙的深度集成</strong></p> 
<p>        NGFW要支持<span style="color:#fe2c24;">IPS功能</span>，且实现与防火墙功能的深度融合，实现1+1&gt;2的效果。Gartner特别强调IPS与防 火墙的“集成”而不仅仅是“联动”。例如：防火墙应根据IPS检测到的恶意流量自动更新下发安全策略，而不需要管理员的介入。换言之，集成IPS的防火墙将更加智能。Gartner发现，NGFW产品和独立IPS产品 的市场正在融合，尤其是在企业边界的部署场景下，NGFW正在吸收独立IPS产品的市场。</p> 
<p><strong>3. 应用感知与全栈可视化 </strong></p> 
<p>        具备<span style="color:#fe2c24;">应用感知能力</span>，并能够基于应用实施精细化的安全管控策略和层次化的带宽管理手段，是NGFW引 进的最重要的能力。传统的状态检测防火墙工作在二到四层，<span style="color:#fe2c24;">不会对报文的载荷进行检查</span>。NGFW能对 七层检测，可以清楚地呈现网络中的具体业务，并实行管控。</p> 
<p><strong>4. 利用防火墙以外的信息，增强管控能力</strong></p> 
<p>        防火墙能够利用其他IT系统提供的用户信息、位置信息、漏洞和网络资源信息等，帮助<span style="color:#fe2c24;">改进</span>和<span style="color:#fe2c24;">优化安全</span>策略。例如，通过集成用户认证系统，实现基于用户的安全策略，以应对移动办公场景下，IP地址变化 带来的管控难题。</p> 
<p><img alt="" height="591" src="https://images2.imgbox.com/b6/ba/eDgbFyZo_o.png" width="688"></p> 
<h3 id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8C%BA%E5%9F%9F">防火墙的区域</h3> 
<h4 id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F">防火墙的安全区域</h4> 
<p><strong>安全区域（Zone）</strong>是一个或多个接口的<span style="color:#fe2c24;">集合</span>，是防火墙区别于路由器的主要特征。<br> 防火墙默认情况下为我们提供了三个安全区域，分别是<span style="color:#fe2c24;"> 受信区域Trust</span><span style="color:#0d0016;">、</span><span style="color:#fe2c24;">非军事化区域DMZ</span><span style="color:#0d0016;">和</span><span style="color:#fe2c24;"> 非受信区域Untrust。</span></p> 
<p><img alt="" height="303" src="https://images2.imgbox.com/ea/7f/BUkFM0FM_o.png" width="579"><br><strong>安全区域A</strong> ---<strong> Trust区域</strong> --- 该区域内网络的受信任程度<span style="color:#fe2c24;">高</span>，通常用来定义<span style="color:#fe2c24;">内部用户</span>所在的网络。<br><strong>安全区域B</strong> ---<strong> </strong><strong>DMZ区域 </strong>--- 该区域内网络的受信任程度<span style="color:#fe2c24;">中等</span>，通常用来定义<span style="color:#fe2c24;">内部服务器</span>所在的网络。<br><strong>安全区域C</strong> ---<strong> </strong><strong>Untrust区域</strong> --- 该区域代表的是<span style="color:#fe2c24;">不受信任</span>的网络，通常用来定义Internet等<span style="color:#fe2c24;">不安全</span>的网络</p> 
<h4 id="%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E7%9A%84%E4%BD%9C%E7%94%A8">安全区域的优先级的作用</h4> 
<p>        每个安全区域都有自己的优先级，用1-100的数字表示，数字<span style="color:#fe2c24;">越大</span>，则代表该区域内的网络<span style="color:#fe2c24;">越可信</span>。报文在两个安全区域之间流动时，我们规定：报文从<span style="color:#fe2c24;">低级别</span>的安全区域向<span style="color:#fe2c24;">高级别</span>的安全区域流动时为入方向（Inbound），报文从由<span style="color:#fe2c24;">高级别</span>的安全区域向<span style="color:#fe2c24;">低级别</span>的安全区域流动时为<span style="color:#fe2c24;">出方向（Outbound）</span>。报文在两个方向上流动时，将会触发不同的安全检查。</p> 
<p><img alt="" height="643" src="https://images2.imgbox.com/25/c5/5islxjjT_o.png" width="806"></p> 
<blockquote> 
 <p><strong>注意：   </strong>     </p> 
 <p>        在<span style="color:#fe2c24;">同一个</span>安全区内的主机可以ping通，<span style="color:#fe2c24;">不会触发</span>安全检查。报文在<span style="color:#fe2c24;">不同</span><span style="color:#0d0016;">的安全区域</span>之间流动时，才会触发安全检查。若想要不同安全区域连通，需要配置<span style="color:#fe2c24;">安全策略</span>，先配置允许trust区域流量去往untrust，再配置untrust区域流量去往trust的安全策略</p> 
</blockquote> 
<p><strong>进入防火墙图形界面</strong></p> 
<p><img alt="" height="955" src="https://images2.imgbox.com/40/dc/KuhELDlQ_o.png" width="1200"></p> 
<p><strong> 点击网络</strong></p> 
<p><img alt="" height="975" src="https://images2.imgbox.com/d2/a9/9Lv8itS8_o.png" width="1200"></p> 
<p><strong> 进入网络配置界面，选择安全区域</strong></p> 
<p><img alt="" height="917" src="https://images2.imgbox.com/40/e0/a0F5KP3t_o.png" width="1200"></p> 
<p><strong> 新建安全区域，点击确定</strong></p> 
<p><img alt="" height="756" src="https://images2.imgbox.com/f3/6c/w11FjPd1_o.png" width="1200"></p> 
<p> <strong>点击接口，1/0/6口变为安全区域口</strong></p> 
<p><img alt="" height="835" src="https://images2.imgbox.com/23/c3/K123rN2R_o.png" width="1200"></p> 
<h3 id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE">防火墙策略配置</h3> 
<h4 id="%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%8E%9F%E7%90%86">定义与原理</h4> 
<p>        防火墙的基本作用是保护特定网络<span style="color:#fe2c24;">免受“不信任”的网络的攻击</span>，但是同时还必须允许两个网络之间可以 进行<span style="color:#fe2c24;">合法</span>的通信。</p> 
<p>        安全策略是控制设备对流量转发以及对流量进行内容安全一体化检测的策略，作用就是对通过防火墙的 数据流进行检验，<span style="color:#fe2c24;">符合安全策略</span>的合法数据流才能通过防火墙。</p> 
<h4>防火墙策略配置</h4> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6b/68/73kHMNXu_o.png"></p> 
<h4 id="%C2%A0%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"> 安全策略工作流程</h4> 
<p><img alt="" height="434" src="https://images2.imgbox.com/83/3f/bCvFihkL_o.png" width="672"></p> 
<h4 id="%C2%A0%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%9B%E5%BB%BA%E4%BC%9A%E8%AF%9D"> 查询和创建会话</h4> 
<p><img alt="" height="483" src="https://images2.imgbox.com/35/0c/VwYohg1s_o.png" width="675"></p> 
<h3 id="ASPF%E6%8A%80%E6%9C%AF">ASPF技术</h3> 
<p><img alt="" height="394" src="https://images2.imgbox.com/b6/60/EDkv5RzK_o.png" width="736"></p> 
<h4 id="%C2%A0server-map%E8%A1%A8"> server-map表</h4> 
<p>        多余多通道协议比如FTP、VOIP等协议，通道是随机协商出的，防火墙<span style="color:#fe2c24;">不能设置策略</span>也<span style="color:#fe2c24;">无法形成会话表</span>。</p> 
<p>        解决办法 --- 使用ASPF技术，查看<span style="color:#fe2c24;">协商端口号</span>并<span style="color:#fe2c24;">动态建立server-map表</span>放过协商通道的数据</p> 
<p>        ASPF(Application Specific Packet Filter，针对<span style="color:#fe2c24;">应用层的包过滤</span>)也叫基于状态的报文过滤，ASPF功能可以自动检测某些报文的应用层信息并根据应用层信息放开相应的访问规则，开启ASPF功能后，FW通过检测协商报文的应用层携带的<span style="color:#fe2c24;">地址</span>和<span style="color:#fe2c24;">端口信息</span>，自动生成相应的Server-map表，用于放行后<span style="color:#ff9900;">需建立数据通道的报文</span>，相当于自动创建了一条精细的“安全策略”。</p> 
<p><img alt="" height="365" src="https://images2.imgbox.com/90/a1/c6wMhPQP_o.png" width="1106"></p> 
<h4 id="STUN%E7%B1%BB%E5%9E%8B%E5%8D%8F%E8%AE%AE%E4%B8%8Eserver-map%E8%A1%A8">STUN类型协议与server-map表</h4> 
<p>        转发 QQ/MSN等<span style="color:#fe2c24;">STUN</span>（Simple Traversal of UDP over NATs，NAT的<span style="color:#fe2c24;">UDP简单穿越</span>）类型会生成的<span style="color:#fe2c24;">三元组</span>Server-map表项</p> 
<p><img alt="" height="295" src="https://images2.imgbox.com/7c/73/DsG3iTHm_o.png" width="779"></p> 
<p>         要实现QQ2在外网主动向QQ1内网的语音或者视频连接，也需要防火墙对该应用采用<span style="color:#fe2c24;">ASPF的方式</span>处理来监听协商端口</p> 
<p>        MSN等用户连接服务器时，设备会记录下用户的IP地址和端口信息，并动态生成<span style="color:#fe2c24;">STUN类型的Server-map</span>。这个Server-map表中不仅包含三元组信息，即通信一方的<span style="color:#fe2c24;">IP地址</span>，<span style="color:#fe2c24;">端口号</span>和<span style="color:#fe2c24;">协议号</span>。这样其他用户可以直接通过该IP和端口与该用户进行通信。只要有关的<span style="color:#fe2c24;">流量存在</span>，STUN动态的Server-map就<span style="color:#fe2c24;">将一直存在</span>。在所有相关<span style="color:#fe2c24;">流量结束</span>后，Server-map表开始<span style="color:#fe2c24;">老化</span></p> 
<h4 id="%E7%AB%AF%E5%8F%A3%E8%AF%86%E5%88%AB">端口识别</h4> 
<p>        端口识别是把<span style="color:#4da8ee;">非标准</span>协议端口映<span style="color:#fe2c24;">射成</span><span style="color:#4da8ee;">可识别</span>的应用协议端口</p> 
<p><img alt="" height="155" src="https://images2.imgbox.com/b7/d9/L4kYWeHJ_o.png" width="747"></p> 
<p>         1. 配置基本ACL</p> 
<pre><code class="language-vbnet">[NGFW]acl 2000
[NGFW-acl-basic-2000]rule permit source 20.0.0.1 0</code></pre> 
<p>        2.配置端口识别（或端口映射）</p> 
<pre><code class="language-vbnet">NGFW]port-mapping FTP port 31 acl 2000</code></pre> 
<h4 id="NAT%C2%A0ALG">NAT ALG</h4> 
<p>        在路由器上nat针对多通道协议也会像防火墙那样抓取控制<span style="color:#fe2c24;">进程中协商传输进程网络参数</span>的报文，进而生成传输进程返回的<span style="color:#fe2c24;">nat映射</span></p> 
<p><span style="color:#0d0016;"><strong>困境</strong></span></p> 
<p><span style="color:#0d0016;"><strong>        </strong>某些协议会在应用层携带</span><span style="color:#fe2c24;">通信IP</span><span style="color:#0d0016;">，这个IP用于</span><span style="color:#fe2c24;">下一阶段通信</span><span style="color:#0d0016;">。但是nat的地址转换并不是转应用层IP而是</span><span style="color:#fe2c24;">转三层IP</span><span style="color:#0d0016;">，这就导致某些协议的通信阶段在nat场景下失败</span></p> 
<p><img alt="" height="249" src="https://images2.imgbox.com/cb/87/e7MMnK6f_o.png" width="695"></p> 
<p><img alt="" height="208" src="https://images2.imgbox.com/53/a4/GJth1fSZ_o.png" width="691"></p> 
<p><strong>ALG</strong></p> 
<p><strong>        </strong>Application Level Gateway <span style="color:#fe2c24;">应用网关</span>，用来处理上述应用层数据在<span style="color:#fe2c24;">NAT场景转换问题</span>。这也导致交换机<span style="color:#fe2c24;">一般没有nat</span>的主要原因</p> 
<p><strong>防火墙nat类型的server-map</strong></p> 
<pre><code class="language-vbnet">&lt;USG6000V1&gt;dis firewall server-map
2023-03-18 08:07:54.050
Current Total Server-map : 1
Type: Nat Server, ANY -&gt; 100.1.1.111:80[10.1.2.2:80], Zone: untrust , protoc
ol:tcp
Vpn: public -&gt; public</code></pre> 
<h4 id="NAT%E5%9F%9F%E9%97%B4%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2">NAT域间双向转换</h4> 
<p>        一般解决<span style="color:#fe2c24;">内网服务器</span>没有<span style="color:#fe2c24;">外网路由</span>的问题</p> 
<p><img alt="" height="643" src="https://images2.imgbox.com/85/2c/QNXNU7NC_o.png" width="1128"></p> 
<blockquote> 
 <p> <strong>注意：</strong></p> 
 <p>        NAT策略 --- 把握住<span style="color:#fe2c24;">转换前</span>数据包源目的地址是什么以及<span style="color:#fe2c24;">转换后</span>源目的地址是什么</p> 
</blockquote> 
<p><img alt="" height="619" src="https://images2.imgbox.com/aa/00/x2JKIOW0_o.png" width="739"></p> 
<p><img alt="" height="446" src="https://images2.imgbox.com/a0/90/3Fo5uHeI_o.png" width="735"></p> 
<p> <img alt="" height="295" src="https://images2.imgbox.com/69/18/5KzJcwYR_o.png" width="545"></p> 
<blockquote> 
 <p><strong> 安全策略</strong></p> 
 <p><strong>        </strong>把握住在<span style="color:#fe2c24;">没有做NAT</span>时数据应该<span style="color:#fe2c24;">放行的参数</span>，就是<span style="color:#fe2c24;">做完NAT后应该放行的参数</span></p> 
</blockquote> 
<h4 id="%C2%A0NAT%E5%9F%9F%E5%86%85%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2"> NAT域内双向转换</h4> 
<p>        党内网PC以公网形式访问内网服务器时，需要用到。</p> 
<p><img alt="" height="287" src="https://images2.imgbox.com/15/f3/qdTc6T3v_o.png" width="692"> </p> 
<p><img alt="" height="620" src="https://images2.imgbox.com/a1/70/N7vk7ZZ3_o.png" width="731"></p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/5c/bc/PjrretMv_o.png" width="753"></p> 
<p> <img alt="" height="300" src="https://images2.imgbox.com/8c/e9/l3Ecer3b_o.png" width="545"></p> 
<h4 id="%C2%A0%E5%8F%8C%E5%87%BA%E5%8F%A3NAT"> 双出口NAT</h4> 
<p>        双出口出现<span style="color:#fe2c24;">NAT转换错乱</span></p> 
<p><img alt="" height="215" src="https://images2.imgbox.com/74/28/Ha9DCIxe_o.png" width="427"> </p> 
<blockquote> 
 <p><strong>解决方案：</strong></p> 
 <p><strong>        </strong>启动防火墙多出口选项，<span style="color:#fe2c24;">网关</span>、<span style="color:#fe2c24;">缺省</span>、<span style="color:#fe2c24;">源进源出路由控制</span>三种<span style="color:#fe2c24;">必须启用</span>。不管多出口是在<span style="color:#fe2c24;">一个安全区域</span>还是<span style="color:#fe2c24;">多个安全区域</span>都是如此做法。</p> 
 <p><strong>原理：</strong></p> 
 <p>        通过上述手段把路由与NAT转换<span style="color:#fe2c24;">通过下一跳</span>做关联</p> 
</blockquote> 
<p><img alt="" height="561" src="https://images2.imgbox.com/e8/7e/9V72ICZO_o.png" width="947"></p> 
<h3 id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%A8%A1%E5%BC%8F">防火墙的接口模式</h3> 
<h4 id="%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F">路由模式</h4> 
<p>        防火墙的接口<span style="color:#fe2c24;">三层路由接口</span>的形式参与组网</p> 
<h4 id="%E4%BA%A4%E6%8D%A2%E6%A8%A1%E5%BC%8F">交换模式</h4> 
<p>        防火墙的接口<span style="color:#fe2c24;">二层交换机</span>的形式参与组网</p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/cd/96/FpgVJJW0_o.png" width="751"></p> 
<h4 id="%E6%8E%A5%E5%8F%A3%E5%AF%B9%E6%A8%A1%E5%BC%8F">接口对模式</h4> 
<p>        接口对模式是一种特殊的二层模式，改模式的接口是<span style="color:#fe2c24;">成对出现</span>，这一对接口之间转发数据<span style="color:#fe2c24;">不经过</span>二层的MAC寻址，也就类似网线的形式转发，速度快。</p> 
<p><strong>1.设置接口为接口对形式</strong></p> 
<p><img alt="" height="200" src="https://images2.imgbox.com/79/b3/Cz87uqte_o.png" width="743"></p> 
<p><strong>2.把两个接口都设置为接口对模式</strong></p> 
<p><img alt="" height="38" src="https://images2.imgbox.com/ae/60/tTb2Euyw_o.png" width="746"></p> 
<p><strong>3.在借口对中把两个接口加入到接口对</strong></p> 
<p><img alt="" height="102" src="https://images2.imgbox.com/f0/76/cys8WP5f_o.png" width="741"></p> 
<h4 id="%C2%A0%E6%97%81%E8%B7%AF%E6%A8%A1%E5%BC%8F"> 旁路模式</h4> 
<p>        旁路模式的接口也是二层的交换机接口，改接口一般用于<span style="color:#fe2c24;">接收镜像流量</span>，向主机一样旁观在设备上。通过旁观设备的<span style="color:#fe2c24;">端口镜像技术</span>收集流量给旁路接口，这个场景防火墙可以做ISP、审计、流量分析等任务，功能是最少的。</p> 
<h3 id="%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%8A%80%E6%9C%AF">防火墙的高可靠技术</h3> 
<p><img alt="" height="391" src="https://images2.imgbox.com/5d/83/usFdzH54_o.png" width="655"></p> 
<h4 id="%C2%A0VRRP"> VRRP</h4> 
<p>        负责的<span style="color:#fe2c24;">单个接口</span>的故障检测和流量引导。每个VRRP备份组拥有一个<span style="color:#fe2c24;">虚拟的IP地址</span>，作为网络的网关地址；在VRRP主备倒换时通过发送免费的ARP来刷新对接设备的MAC地址转发表来<span style="color:#fe2c24;">引导流量</span>。 </p> 
<h3 id="VGMP"> VGMP</h3> 
<p>        将系统中所有的VRRP备份组集中管理，控制状态<span style="color:#fe2c24;">统一切换</span>，保证出现故障时上下行流量能同步切换到备用防火墙。 </p> 
<h4 id="VGMP%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86">VGMP的基本原理</h4> 
<p style="margin-left:.0001pt;text-align:justify;">      （1）由于VRRP封装的VGMP报文是<span style="color:#fe2c24;">组播</span>报文，不能跨越三层传输设备，因此在双击设备组网时，要求两台设备的<span style="color:#fe2c24;">心跳线</span>要么是<span style="color:#fe2c24;">直连</span>的，要么是通过<span style="color:#fe2c24;">二层交换机</span>进行<span style="color:#fe2c24;">互联</span>，不能通过三层设备互联。当防火墙<span style="color:#fe2c24;">上下行设备</span>是<span style="color:#fe2c24;">路由器</span>时，要求两台防火墙必须有<span style="color:#fe2c24;">直连的接口</span>作<span style="color:#fe2c24;">备份通道</span>。为此，USG6000V开发了另一种VGMP的报文封装格式。</p> 
<p style="margin-left:.0001pt;text-align:justify;">       （2）UDP封装：此时VGMP的报文是<span style="color:#fe2c24;">单播</span>报文。在原有的IP报头上增加了<span style="color:#fe2c24;">UDP头</span>和V<span style="color:#fe2c24;">GMP扩展头</span>，VGMP内部报文的格式没有变化。</p> 
<h4 id="VGMP%E7%8A%B6%E6%80%81%E6%9C%BA" style="margin-left:.0001pt;text-align:justify;">VGMP状态机</h4> 
<p>       <span style="color:#fe2c24;"> VGMP管理组的主备状态</span>决定了双机热备组网中的<span style="color:#fe2c24;">防火墙设备的主备状态</span>，因此VGMP管理组的状态也可看做是防火墙设备的状态。</p> 
<p style="margin-left:.0001pt;text-align:justify;">        （1）<strong>主备模式</strong>：active -- initialize -- standby</p> 
<p style="margin-left:.0001pt;text-align:justify;">        （2）<strong>负载模式</strong>：active -- initialize -- standby -- load balance</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="226" src="https://images2.imgbox.com/96/90/lpqchzkR_o.png" width="323"></p> 
<h4 id="VGMP%E7%8A%B6%E6%80%81%E5%88%87%E6%8D%A2">VGMP状态切换</h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>VGMP状态切换三大原则</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">        （1）每个接口down时，VGMP管理组优先级<span style="color:#fe2c24;">降低2</span>，计算公式为：<span style="color:#ffd900;"><strong>VGMP管理组优先级 = VGMP管理组初始优先级 - N*2</strong></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">        （2）每台设备的VGMP管理组<span style="color:#fe2c24;">初始状态</span>由<span style="color:#fe2c24;">用户指定</span>（Active或Standby），Active优先级为<span style="color:#fe2c24;">65001</span>，Standby的优先级为<span style="color:#fe2c24;">65000</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">        （3）VGMP管理组的状态决定了该设备的主备状态，也决定了VGMP管理组成员（VRRP备份或接口）的状态。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>防火墙借助VRRP实现高可靠性 </strong>---<strong> </strong>HRP不是通用协议，是<span style="color:#fe2c24;">华为系统级的协议</span>，<span style="color:#fe2c24;">每个厂商</span>的防火墙采用的<span style="color:#fe2c24;">协议不同</span>。</p> 
<h3 id="HPR%E5%8D%8F%E8%AE%AE"> HPR协议</h3> 
<p>        负责双机之间的数据同步<span style="color:#fe2c24;">（华为专用）</span></p> 
<h4 id="HPR%E7%9A%84%E4%BA%A7%E7%94%9F"><span style="color:#0d0016;">HPR的产生</span></h4> 
<p><span style="color:#0d0016;">        状态检测防火墙对于每一个会话连接都有一个会话表项与之对应，主设备处理业务过程中创建了很多动态会话表项；而备用设备</span><span style="color:#fe2c24;">没有流量经过</span><span style="color:#0d0016;">，因此</span><span style="color:#fe2c24;">没有创建会话表</span><span style="color:#0d0016;">。如果设备配置</span><span style="color:#fe2c24;">切换</span><span style="color:#0d0016;">为</span><span style="color:#fe2c24;">主用设备前</span><span style="color:#0d0016;">，会话列表没有备份到备用设备，则会导致先前经过主用设备的业务流量因为</span><span style="color:#fe2c24;">无法匹配</span><span style="color:#0d0016;">会话表而</span><span style="color:#fe2c24;">中断</span><span style="color:#0d0016;">。为了实现主用备用</span><span style="color:#fe2c24;">平滑切换</span><span style="color:#0d0016;">，必须在主用和备用设备之间</span><span style="color:#fe2c24;">备份</span><span style="color:#0d0016;">关键配置命令和会话表状态信息，谓词防火墙引入了HRP（Huawei Redundancy Protocol）协议，实现防火墙双击之间动态状态数据和关键配置命令的</span><span style="color:#fe2c24;">实时配置</span><span style="color:#0d0016;">。</span></p> 
<p><span style="color:#0d0016;">        在双机热备组网中，指定</span><span style="color:#fe2c24;">心跳线</span><span style="color:#0d0016;">作为专门的备份通道，用于</span><span style="color:#fe2c24;">备份</span><span style="color:#0d0016;">配置命令和状态信息。</span></p> 
<p><img alt="" height="249" src="https://images2.imgbox.com/29/90/hAQTkD4r_o.png" width="560"></p> 
<h4 id="HRP%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E8%8C%83%E5%9B%B4">HRP数据备份范围</h4> 
<p>        通过HRP备份的数据包括主用设备的<span style="color:#fe2c24;">关键命令</span>和<span style="color:#fe2c24;">状态信息</span></p> 
<p>        <strong>能够备份配置命令：</strong>只能在<span style="color:#fe2c24;">主用设备</span>上配置，<span style="color:#fe2c24;">备用设备</span>不能配置</p> 
<p><img alt="" height="182" src="https://images2.imgbox.com/57/bc/w2UuzGGw_o.png" width="676"></p> 
<p>        <strong>不能备份的配置命令：</strong>主用设备和备用设备<span style="color:#fe2c24;">都可以</span>配置 </p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/19/85/sYv5NY4H_o.png" width="689"></p> 
<p> </p> 
<h3 id="%E5%9C%A8%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E7%BB%84%E7%BD%91%E4%B8%AD%E5%BF%85%E9%A1%BB%E9%A6%96%E5%85%88%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98">在防火墙双机热备组网中必须首先解决的问题</h3> 
<p>        1. 防火墙<span style="color:#fe2c24;">必须能够检测</span>到连路或设备故</p> 
<p>        2. 防火墙检测到<span style="color:#fe2c24;">故障后</span>能够<span style="color:#fe2c24;">实现流量平滑切换</span></p> 
<p><img alt="" height="254" src="https://images2.imgbox.com/1e/1e/lwD6o0iH_o.png" width="643"> </p> 
<p style="margin-left:.0001pt;text-align:justify;">        （1）当防火墙上下行业务的端口上都配置了VRRP备份组时，这两个VRRP备份组是<span style="color:#fe2c24;">独立运行</span>的，可能出席县上下行两个VRRP备份组<span style="color:#fe2c24;">状态不一致</span>的情况。</p> 
<p style="margin-left:.0001pt;text-align:justify;">        （2）例如：主用网关防火墙内网侧接口<span style="color:#fe2c24;">故障</span>，VRRP<span style="color:#fe2c24;">倒换</span>到备用网关防火墙，因此出去的流量从<span style="color:#fe2c24;">备用网关的防火墙</span>上转发。但是对于外网侧的VRRP，主用网关防火墙上的VRRP依然是主，因此<span style="color:#fe2c24;">回程流量</span>仍然会送到<span style="color:#fe2c24;">主用网关的防火墙</span>上，但业务流量<span style="color:#fe2c24;">无法送回内网</span>，导致业务中断。</p> 
<p><img alt="" height="256" src="https://images2.imgbox.com/87/76/W068kqlb_o.png" width="693"></p> 
<h4 id="%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E7%BB%84%E7%BD%91%E7%9A%84%E5%BB%BA%E7%AB%8B%E5%92%8C%E8%BF%90%E8%A1%8C%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E4%BB%A5%E4%B8%8B5%E4%B8%AA%E5%85%B3%E9%94%AE%E9%97%AE%E9%A2%98" style="margin-left:.0001pt;text-align:justify;">双机热备组网的建立和运行需要解决以下5个关键问题</h4> 
<p style="margin-left:.0001pt;text-align:justify;">        1、如何设定设备的主备状态？</p> 
<p style="margin-left:.0001pt;text-align:justify;">        2、如何监控并发现接口或设备故障？</p> 
<p style="margin-left:.0001pt;text-align:justify;">        3、发现故障后，如何保证设备的主备状态切换？</p> 
<p style="margin-left:.0001pt;text-align:justify;">        4、正常情况和故障后，如何引导流量？</p> 
<p style="margin-left:.0001pt;text-align:justify;">        5、如何进行信息同步，保证主备切换后的业务不中断？</p> 
<h3></h3>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/452eb602603f910d13d0617d43046ae8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">anaconda安装后无法使用numpy</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f3637aa5e9d4f9f0d010d0ea91704436/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">第一周作业：简单实现页面的跳转---点击按钮实现跳转</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>