<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库安装部署 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库安装部署" />
<meta property="og:description" content="数据库软件安装 安装包解压 Windows环境：Windows环境中，如果安装包不是.exe的格式，而是压缩包，需要先对压缩包进行解压，右键解压缩即可。
Linux环境：iso后缀的文件，需要对文件进行挂载，命令如下：
mount -o loop /opt/dmsetup/dm8_20220305_x86_kylin10_64_ent_8.1.2.114.iso /opt/dmsetup/
Windows环境安装 运行安装程序 解压后，双击“setup.exe”安装程序后可根据系统配置选择相应语言与时区，点击“确定”按钮继续安装。
欢迎页面 点击“下一步”，开始安装
许可证协议 在安装和使用之前，该安装程序需要用户阅读许可协议条款，用户如接受该协议，则选中“接受”，并点击“下一步”继续安装；用户若选中“不接受”，将无法进行安装。
验证Key文件 点击“浏览”按钮，选取Key文件，安装程序将自动验证Key文件信息。如果是合法的Key文件且在有效期内，用户可以点击“下一步”继续安装。
选择安装组件 数据库软件安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，用户可根据实际情况灵活地选择。
一般情况下给客户安装需要去掉服务器和数据库服务
选择安装目录 根据前期规划，指定安装路径。安装路径里的目录名由英文字母、数字和下划线等组成，不建议使用包含空格和中文字符的路径等。
安装前小结 显示即将进行的安装的有关信息，例如产品名称、版本信息、安装类型、安装目录、可用空间、可用内存等信息，用户检查无误后点击“安装”按钮进行软件的安装
完成安装 点击“完成”，完成数据库安装。
Linux环境安装-命令行 先切换到dmdba用户
执行安装命令 在终端进入到安装程序所在文件夹，执行以下命令行安装：
[dmdba@~]# /opt/dmsetup/DMInstall.bin -i 选择安装语言 根据系统配置选择相应语言，输入选项，回车进行下一步。如下所示： 请选择安装语言(C/c:中文 E/e:英文) [C/c]：C 解压安装程序.......... 欢迎使用达梦数据库安装程序 验证key文件 可以选择是否输入Key文件路径。不输入则进入下一步安装，输入Key文件路径，安装程序将显示Key文件的详细信息，如果是合法的Key文件且在有效期内，可以继续安装。如下所示：
是否输入Key文件路径? (Y/y:是 N/n:否) [Y/y]：Y 请输入Key文件的路径地址 [dm.key]：/opt/dmsetup/dm.key 有效日期: 2020-12-25 服务器颁布类型: 企业版 发布类型: 试用版 用户名称: 武汉达梦公司疫情期间临时授权 授权用户数: 无限制 并发连接数: 无限制 输入时区 可以选择的时区信息。如下所示：
是否设置时区? (Y/y:是 N/n:否) [Y/y]:Y 设置时区: [ 1]: GTM-12=日界线西 [ 2]: GTM-11=萨摩亚群岛 [ 3]: GTM-10=夏威夷 [ 4]: GTM-09=阿拉斯加 [ 5]: GTM-08=太平洋时间（美国和加拿大） [ 6]: GTM-07=亚利桑那 [ 7]: GTM-06=中部时间（美国和加拿大） [ 8]: GTM-05=东部部时间（美国和加拿大） [ 9]: GTM-04=大西洋时间（美国和加拿大） [10]: GTM-03=巴西利亚 [11]: GTM-02=中大西洋 [12]: GTM-01=亚速尔群岛 [13]: GTM=格林威治标准时间 [14]: GTM&#43;01=萨拉热窝 [15]: GTM&#43;02=开罗 [16]: GTM&#43;03=莫斯科 [17]: GTM&#43;04=阿布扎比 [18]: GTM&#43;05=伊斯兰堡 [19]: GTM&#43;06=达卡 [20]: GTM&#43;07=曼谷，河内 [21]: GTM&#43;08=中国标准时间 [22]: GTM&#43;09=汉城 [23]: GTM&#43;10=关岛 [24]: GTM&#43;11=所罗门群岛 [25]: GTM&#43;12=斐济 [26]: GTM&#43;13=努库阿勒法 [27]: GTM&#43;14=基里巴斯 请选择设置时区 [21]:21 选择安装类型 数据库软件安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，用户可根据实际情况灵活地选择。生产环境可以根据实际需求选择，一般情况下选择&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/b44ff6d9baa96044e675813c5220f143/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-29T15:17:46+08:00" />
<meta property="article:modified_time" content="2022-09-29T15:17:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库安装部署</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>数据库软件安装</h2> 
<h3><a id="_1"></a>安装包解压</h3> 
<p>Windows环境：Windows环境中，如果安装包不是.exe的格式，而是压缩包，需要先对压缩包进行解压，右键解压缩即可。<br> Linux环境：iso后缀的文件，需要对文件进行挂载，命令如下：<br> mount -o loop /opt/dmsetup/dm8_20220305_x86_kylin10_64_ent_8.1.2.114.iso /opt/dmsetup/<br> <img src="https://images2.imgbox.com/0b/1f/eCSYHPNn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Windows_6"></a>Windows环境安装</h3> 
<ol><li>运行安装程序</li></ol> 
<p>解压后，双击“setup.exe”安装程序后可根据系统配置选择相应语言与时区，点击“确定”按钮继续安装。<br> <img src="https://images2.imgbox.com/74/c3/pHMl5PJz_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>欢迎页面</li></ol> 
<p>点击“下一步”，开始安装<br> <img src="https://images2.imgbox.com/20/bf/orOVLb51_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>许可证协议</li></ol> 
<p>在安装和使用之前，该安装程序需要用户阅读许可协议条款，用户如接受该协议，则选中“接受”，并点击“下一步”继续安装；用户若选中“不接受”，将无法进行安装。<br> <img src="https://images2.imgbox.com/52/a2/DE2Kp8Jr_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>验证Key文件</li></ol> 
<p>点击“浏览”按钮，选取Key文件，安装程序将自动验证Key文件信息。如果是合法的Key文件且在有效期内，用户可以点击“下一步”继续安装。<br> <img src="https://images2.imgbox.com/85/de/szFeEovs_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li>选择安装组件</li></ol> 
<p>数据库软件安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，用户可根据实际情况灵活地选择。<br> <img src="https://images2.imgbox.com/c9/16/eNgg6Ilb_o.png" alt="在这里插入图片描述"></p> 
<p>一般情况下给客户安装需要去掉服务器和数据库服务</p> 
<ol start="6"><li>选择安装目录</li></ol> 
<p>根据前期规划，指定安装路径。安装路径里的目录名由英文字母、数字和下划线等组成，不建议使用包含空格和中文字符的路径等。<br> <img src="https://images2.imgbox.com/5c/6c/qw2PJYWV_o.png" alt="在这里插入图片描述"></p> 
<ol start="7"><li>安装前小结</li></ol> 
<p>显示即将进行的安装的有关信息，例如产品名称、版本信息、安装类型、安装目录、可用空间、可用内存等信息，用户检查无误后点击“安装”按钮进行软件的安装<br> <img src="https://images2.imgbox.com/80/e8/z05P9nWb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5a/54/pkgU9oKj_o.png" alt="在这里插入图片描述"></p> 
<ol start="8"><li>完成安装</li></ol> 
<p>点击“完成”，完成数据库安装。<br> <img src="https://images2.imgbox.com/23/58/dFfysHVZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Linux_51"></a>Linux环境安装-命令行</h3> 
<p>先切换到dmdba用户</p> 
<ol><li>执行安装命令</li></ol> 
<p>在终端进入到安装程序所在文件夹，执行以下命令行安装：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@~<span class="token punctuation">]</span><span class="token comment"># /opt/dmsetup/DMInstall.bin -i</span>
</code></pre> 
<ol start="2"><li>选择安装语言</li></ol> 
<pre><code class="prism language-bash">根据系统配置选择相应语言，输入选项，回车进行下一步。如下所示：
请选择安装语言<span class="token punctuation">(</span>C/c:中文 E/e:英文<span class="token punctuation">)</span> <span class="token punctuation">[</span>C/c<span class="token punctuation">]</span>：C
解压安装程序<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
欢迎使用达梦数据库安装程序
</code></pre> 
<ol start="3"><li>验证key文件</li></ol> 
<p>可以选择是否输入Key文件路径。不输入则进入下一步安装，输入Key文件路径，安装程序将显示Key文件的详细信息，如果是合法的Key文件且在有效期内，可以继续安装。如下所示：</p> 
<pre><code class="prism language-bash">是否输入Key文件路径? <span class="token punctuation">(</span>Y/y:是 N/n:否<span class="token punctuation">)</span> <span class="token punctuation">[</span>Y/y<span class="token punctuation">]</span>：Y
请输入Key文件的路径地址 <span class="token punctuation">[</span>dm.key<span class="token punctuation">]</span>：/opt/dmsetup/dm.key
有效日期: <span class="token number">2020</span>-12-25
服务器颁布类型: 企业版
发布类型: 试用版
用户名称: 武汉达梦公司疫情期间临时授权
授权用户数: 无限制
并发连接数: 无限制
</code></pre> 
<ol start="4"><li>输入时区</li></ol> 
<p>可以选择的时区信息。如下所示：</p> 
<pre><code class="prism language-bash">是否设置时区? <span class="token punctuation">(</span>Y/y:是 N/n:否<span class="token punctuation">)</span> <span class="token punctuation">[</span>Y/y<span class="token punctuation">]</span>:Y
设置时区:
<span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span>: GTM-12<span class="token operator">=</span>日界线西
<span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span>: GTM-11<span class="token operator">=</span>萨摩亚群岛
<span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span>: GTM-10<span class="token operator">=</span>夏威夷
<span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span>: GTM-09<span class="token operator">=</span>阿拉斯加
<span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span>: GTM-08<span class="token operator">=</span>太平洋时间（美国和加拿大）
<span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span>: GTM-07<span class="token operator">=</span>亚利桑那
<span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span>: GTM-06<span class="token operator">=</span>中部时间（美国和加拿大）
<span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span>: GTM-05<span class="token operator">=</span>东部部时间（美国和加拿大）
<span class="token punctuation">[</span> <span class="token number">9</span><span class="token punctuation">]</span>: GTM-04<span class="token operator">=</span>大西洋时间（美国和加拿大）
<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>: GTM-03<span class="token operator">=</span>巴西利亚
<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span>: GTM-02<span class="token operator">=</span>中大西洋
<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span>: GTM-01<span class="token operator">=</span>亚速尔群岛
<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span>: <span class="token assign-left variable">GTM</span><span class="token operator">=</span>格林威治标准时间
<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span>: GTM+01<span class="token operator">=</span>萨拉热窝
<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span>: GTM+02<span class="token operator">=</span>开罗
<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>: GTM+03<span class="token operator">=</span>莫斯科
<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span>: GTM+04<span class="token operator">=</span>阿布扎比
<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span>: GTM+05<span class="token operator">=</span>伊斯兰堡
<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span>: GTM+06<span class="token operator">=</span>达卡
<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span>: GTM+07<span class="token operator">=</span>曼谷，河内
<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span>: GTM+08<span class="token operator">=</span>中国标准时间
<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span>: GTM+09<span class="token operator">=</span>汉城
<span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">]</span>: GTM+10<span class="token operator">=</span>关岛
<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span>: GTM+11<span class="token operator">=</span>所罗门群岛
<span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span>: GTM+12<span class="token operator">=</span>斐济
<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span>: GTM+13<span class="token operator">=</span>努库阿勒法
<span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span>: GTM+14<span class="token operator">=</span>基里巴斯
请选择设置时区 <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span>:21
</code></pre> 
<ol start="5"><li>选择安装类型</li></ol> 
<p>数据库软件安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，用户可根据实际情况灵活地选择。生产环境可以根据实际需求选择，一般情况下选择"典型安装"即可。</p> 
<pre><code class="prism language-bash">安装类型:
<span class="token number">1</span> 典型安装
<span class="token number">2</span> 服务器
<span class="token number">3</span> 客户端
<span class="token number">4</span> 自定义
请选择安装类型的数字序号 <span class="token punctuation">[</span><span class="token number">1</span> 典型安装<span class="token punctuation">]</span>:1
所需空间: 1802M
</code></pre> 
<ol start="6"><li>选择安装路径</li></ol> 
<p>输入数据库软件的安装路径，不输入则使用默认路径，默认值为$HOME/dmdbms<br> (如果安装用户为root，则默认安装目录为/opt/dmdbms，但不建议使用root系统用户来安装)。</p> 
<pre><code class="prism language-bash">请选择安装目录 <span class="token punctuation">[</span>/home/dmdba/dmdbms<span class="token punctuation">]</span>:/opt/dmdbms
可用空间: 32G
是否确认安装路径<span class="token punctuation">(</span>/opt/dmdbms<span class="token punctuation">)</span>? <span class="token punctuation">(</span>Y/y:是 N/n:否<span class="token punctuation">)</span>  <span class="token punctuation">[</span>Y/y<span class="token punctuation">]</span>:Y
</code></pre> 
<ol start="7"><li>安装小结</li></ol> 
<p>安装程序将打印用户之前输入的部分安装信息。如下所示：</p> 
<pre><code class="prism language-bash">安装前小结
安装位置: /opt/dmdbms
所需空间: 1802M
可用空间: 32G
版本信息: 
有效日期: 
安装类型: 典型安装
是否确认安装? <span class="token punctuation">(</span>Y/y:是 N/n:否<span class="token punctuation">)</span>:Y
</code></pre> 
<p>由于我没有添加KEY文件，所以没有版本信息和有效日期</p> 
<ol start="8"><li>安装</li></ol> 
<pre><code class="prism language-bash">是否确认安装? <span class="token punctuation">(</span>Y/y:是 N/n:否<span class="token punctuation">)</span>:Y
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:03 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装达梦数据库<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:04 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装 基础 模块<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:20 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装 服务器 模块<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:21 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装 客户端 模块<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:35 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装 驱动 模块<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:41 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装 手册 模块<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:42 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装 服务 模块<span class="token punctuation">..</span>.
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:43 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 移动日志文件。
<span class="token number">2022</span>-07-11 <span class="token number">15</span>:41:43 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 安装达梦数据库完成。

请以root系统用户执行命令:
/opt/dmdbms/script/root/root_installer.sh

安装结束
</code></pre> 
<ol start="9"><li>注册数据库服务</li></ol> 
<p>当安装进度完成时将会弹出对话框，提示使用root系统用户执行相关命令。用户可根据对话框的说明完成相关操作，之后可关闭此对话框，点击“完成”按钮结束安装。如下所示：</p> 
<pre><code class="prism language-bash">root用户执行
/opt/dmdbms/script/root/root_installer.sh
</code></pre> 
<p><img src="https://images2.imgbox.com/16/08/II6AvhzR_o.png" alt="在这里插入图片描述"></p> 
<ul><li>注意：</li></ul> 
<p>严禁使用root用户安装数据库及数据库相关操作。必须使用dmdba用户执行安装以及数据库相关操作。<br> 我在运行上述命令后碰到了DmAPService服务启动失败的情况，碰到如下报错<br> /lib64/libc.so.6: version `GLIBC_2.28’ not found (required by /opt/dmdbms/bin/libdmos.so)<br> <img src="https://images2.imgbox.com/37/ca/7IMrF1pZ_o.png" alt="在这里插入图片描述"><br> 看提示应该是需要添加GLIBC的2.28版本，操作手册另见文章：<br> https://blog.csdn.net/NinjaKilling/article/details/125910216<br> 按照手册操作后，启动DmAPService.service即可</p> 
<pre><code class="prism language-bash">systemctl start DmAPService.service
</code></pre> 
<h2><a id="_218"></a>初始化实例</h2> 
<h3><a id="Windows_219"></a>Windows环境初始化</h3> 
<p><img src="https://images2.imgbox.com/73/e4/WMcmbUiO_o.png" alt="在这里插入图片描述"></p> 
<ol><li>选择操作方式</li></ol> 
<p>在创建数据库实例、删除数据库实例、注册数据库服务和删除数据库服务四种操作方式中，选择创建数据库实例选项，点击“开始”进入下一步。<br> 初始参数：<br> 页大小（PAGE_SIZE）：32<br> 日志大小（LOG_SIZE）：2048<br> 大小写（CASE_SENSITIVE）[Y:敏感 / N:不敏感]：敏感,字符集（CHARSET）[0:GB18030 / 1:UTF-8]：GB18030<br> <img src="https://images2.imgbox.com/3b/e4/Ex60tEJr_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>创建数据库模板</li></ol> 
<p>系统提供三套数据库模板供用户选择：一般用途、联机分析处理和联机事务处理，用户可根据自身的用途选择相应的模板。通常选择“一般用途”<br> <img src="https://images2.imgbox.com/d7/f8/zO78FIqK_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>选择数据库目录</li></ol> 
<p>根据前期规划，通过浏览或是输入的方式选择数据库所在目录。<br> <img src="https://images2.imgbox.com/8f/dc/GAJIaHaE_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>输入数据库标识</li></ol> 
<p>可输入数据库名称、实例名、端口号等参数。<br> <img src="https://images2.imgbox.com/7e/18/6HyXndcg_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li>数据库文件所在位置</li></ol> 
<p>通过选择或输入确定数据库控制、数据库日志等文件的所在位置，并可通过右侧功能按钮，对文件进行添加或删除。<br> <img src="https://images2.imgbox.com/5f/20/NMmNZ2bF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ef/ba/oOCGv5Fe_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/82/c6/RQI43GYB_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6d/34/7QuwYdQa_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li>数据库初始化参数</li></ol> 
<p>可输入数据库相关参数，如簇大小、页大小、日志文件大小、选择字符集、是否大小写敏感等。<br> <img src="https://images2.imgbox.com/9f/9a/2RcQB4F9_o.png" alt="在这里插入图片描述"><br> 点击完成</p> 
<ol start="7"><li>创建数据库摘要</li></ol> 
<p>在安装数据库之前，将显示数据库配置工具设置的相关参数。<br> <img src="https://images2.imgbox.com/cf/77/gB2sm0Eq_o.png" alt="在这里插入图片描述"></p> 
<ol start="8"><li>安装初始化数据库</li></ol> 
<p><img src="https://images2.imgbox.com/ce/8f/a2HSL4Mm_o.png" alt="在这里插入图片描述"></p> 
<ol start="9"><li>安装结束</li></ol> 
<p>安装结束时，点击完成即可。<br> <img src="https://images2.imgbox.com/e9/5c/guEkvL1s_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Linux_274"></a>Linux环境初始化-命令行</h3> 
<ol><li>初始化参数</li></ol> 
<p>页大小（PAGE_SIZE）：32<br> 日志大小（LOG_SIZE）：2048<br> 大小写（CASE_SENSITIVE）[Y:敏感 / N:不敏感]：敏感<br> 字符集（CHARSET）[0:GB18030 / 1:UTF-8]：GB18030</p> 
<ol start="2"><li>初始化过程</li></ol> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@~<span class="token punctuation">]</span><span class="token comment"># /opt/dmdbms/bin/dminit PATH=/opt/dmdbms/data PAGE_SIZE=32 LOG_SIZE=2048 CHARSET=0 CASE_SENSITIVE=Y</span>
initdb V8
db version: 0x7000c
<span class="token function">file</span> dm.key not found, use default license<span class="token operator">!</span>
License will expire on <span class="token number">2023</span>-03-04
Normal of FAST
Normal of DEFAULT
Normal of RECYCLE
Normal of KEEP
Normal of ROLL

 log <span class="token function">file</span> path: /opt/dmdbms/data/DAMENG/DAMENG01.log


 log <span class="token function">file</span> path: /opt/dmdbms/data/DAMENG/DAMENG02.log

<span class="token function">write</span> to <span class="token function">dir</span> <span class="token punctuation">[</span>/opt/dmdbms/data/DAMENG<span class="token punctuation">]</span>.
create dm database success. <span class="token number">2022</span>-07-11 <span class="token number">16</span>:16:34
</code></pre> 
<ol start="3"><li>创建实例服务</li></ol> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@~<span class="token punctuation">]</span><span class="token comment"># su - root</span>
密码：<span class="token operator">&lt;</span>输入密码<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@~<span class="token punctuation">]</span><span class="token comment"># /opt/dmdbms/script/root/dm_service_installer.sh -t dmserver -dm_ini /opt/dmdbms/data/DAMENG/dm.ini -p DMSERVER</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ca/9d/MTgDAazl_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>启动实例服务</li></ol> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@centos-dm ~<span class="token punctuation">]</span>$ /opt/dmdbms/bin/DmServiceDMSERVER start
Starting DmServiceDMSERVER:                                <span class="token punctuation">[</span> OK <span class="token punctuation">]</span>
</code></pre> 
<h2><a id="_322"></a>实例参数介绍</h2> 
<p>异构数据库建议参数<br> <img src="https://images2.imgbox.com/69/6f/wZpnz1o9_o.png" alt="在这里插入图片描述"></p> 
<p>常用实例参数介绍<br> <img src="https://images2.imgbox.com/59/f3/y9mijEFu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="CHARSETUNICODE_FLAG_328"></a>CHARSET/UNICODE_FLAG</h3> 
<p>GB18030编码向下兼容GBK和GB2312，兼容的含义是不仅字符兼容，而且相同字符的编码也相同。<br> UTF-8是用以解决国际上字符的一种多字节编码，它对英文使用8位（即一个字节），中文使用24为（三个字节）来编码。<br> GB18030数字字母占1个字节，普通汉字占2个字节，部分繁体及少数民族文字占4字节，Unicode在达梦中采用UTF-8编码格式，欧洲的字母字符占1到2个字节，亚洲的大部分字符占3个字节，附加字符为4个字节。如果只存储中文和字母数字，一般来说GB18030更节省空间一些。</p> 
<h3><a id="PAGE_SIZE_332"></a>PAGE_SIZE</h3> 
<p>关于页大小 PAGE_SIZE。Oracle 也叫块大小（block），在DM数据库中，页大小可以为8KB、16KB或者32KB，一旦创建好了数据库，在该库的整个生命周期内，页大小都不能够改变。如果系统中存在或者以后可能存在含有较长的字符串类型的表，建议该参数设置为16或者32。页大小设置越大，最后数据文件的物理大小就会越大，系统运行时，每次从磁盘调入内存的数据单位也就越大。除了每个字段的最大长度限制外，每条记录总长度不能大于页面大小的一半。<br> <img src="https://images2.imgbox.com/fd/3e/s0a5Iv4N_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="LOGE_SIZE_336"></a>LOGE_SIZE</h3> 
<p>重做日志文件大小。取值：64~2048之间的整数，单位M。默认值为256。可选参数。<br> 每个数据库实例至少有两个重做日志文件，循环使用，LOG_SIZE设置每个重做日志<br> 文件的大小。设置的过小会导致redo进行频繁的切换，导致数据库某些大更新操作<br> 无法正常checkpoint。</p> 
<h3><a id="LENGTH_IN_CHAR_341"></a>LENGTH_IN_CHAR</h3> 
<p>1或Y：是，所有VARCHAR类型对象的长度以字符为单位。0或N：否，所有VARCHAR类型对象的长度以字节为单位<br> UNICODE_FLAG=1、LENGTH_IN_CHAR=0<br> <img src="https://images2.imgbox.com/71/11/2g1Q7cxR_o.png" alt="在这里插入图片描述"><br> 一个汉字占用三个字节，一个英文占用一个字节。</p> 
<h4><a id="UNICODE_FLAG1LENGTH_IN_CHAR1_346"></a>UNICODE_FLAG=1、LENGTH_IN_CHAR=1</h4> 
<p><img src="https://images2.imgbox.com/a2/df/aMZHgmb5_o.png" alt="在这里插入图片描述"><br> 一个汉字占三个字节，一个英文字母占一个字节，一个字符四个字节（即一个varchar单位占四个字节），可以存四个英文字母。</p> 
<h4><a id="UNICODE_FLAG0LENGTH_IN_CHAR1_349"></a>UNICODE_FLAG=0、LENGTH_IN_CHAR=1</h4> 
<p><img src="https://images2.imgbox.com/3d/28/YOaJSW6k_o.png" alt="在这里插入图片描述"></p> 
<p>一个汉字占两个字节一个字符，一个英文字母占一个字节，一个字符可以存一个汉字或者两个英文字母。</p> 
<h4><a id="UNICODE_FLAG0LENGTH_IN_CHAR0_353"></a>UNICODE_FLAG=0、LENGTH_IN_CHAR=0</h4> 
<p><img src="https://images2.imgbox.com/11/9d/KGOZ3ahu_o.png" alt="在这里插入图片描述"><br> 一个汉字占两个字节，一个英文字符占一个字节。</p> 
<h2><a id="_356"></a>单机安装部署</h2> 
<h3><a id="_357"></a>数据库参数优化调整</h3> 
<p>根据数据库服务器cpu核数和物理内存大小调整脚本中v_mem_mb（数据库服务器物理内存大小）与v_cpus（数据库服务器cpu核数）值<br> <img src="https://images2.imgbox.com/dd/a8/OiYxA3qV_o.png" alt="在这里插入图片描述"><br> 注:为便于演示，以数据库服务器cpu总核数为16，物理总内存大小为32G为例</p> 
<h3><a id="disql_361"></a>数据库参数优化执行-disql</h3> 
<p>将修改后的优化脚本使用disql或管理工具执行<br> 使用disql执行优化脚本的操作如下</p> 
<ol><li>在数据库服务器dmdba用户home目录下新建文件AutoParaAdj.sql</li></ol> 
<p>$ vi /home/dmdba/AutoParaAdj.sql<br> #拷贝修改后的优化脚本，并保存</p> 
<ol start="2"><li>使用disql工具以SYSDBA用户进行登录</li></ol> 
<p>$ ./disql SYSDBA/SYSDBA@IP:端口</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@centos-dm bin<span class="token punctuation">]</span>$ ./disql SYSDBA/SYSDBA@127.0.0.1:5236

服务器<span class="token punctuation">[</span><span class="token number">127.0</span>.0.1:5236<span class="token punctuation">]</span>:处于普通打开状态
登录使用时间 <span class="token builtin class-name">:</span> <span class="token number">1.111</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
disql V8
SQL<span class="token operator">&gt;</span> 

SQL<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> serveroutput on
SQL<span class="token operator">&gt;</span> start /home/dmdba/AutoParaAdj.sql
</code></pre> 
<p><img src="https://images2.imgbox.com/a7/38/8W7AL86S_o.png" alt="在这里插入图片描述"><br> 3. 拷贝优化脚本的输出结果</p> 
<p><img src="https://images2.imgbox.com/53/8a/sddboaD0_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>执行拷贝的输出结果</li></ol> 
<p><img src="https://images2.imgbox.com/c3/5b/1oCN0Ud8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_394"></a>数据库参数优化执行-管理工具</h3> 
<p>在Windows桌面新建文件AutoParaAdj.sql，拷贝修改后的脚本到AutoParaAdj.sql并进行保存<br> 使用管理工具以SYSDBA用户进行登录<br> <img src="https://images2.imgbox.com/2a/b1/6airzuMP_o.png" alt="在这里插入图片描述"></p> 
<p>点击执行脚本，在弹出的打开窗口中选中保存的AutoParaAdj.sql文件并打开<br> <img src="https://images2.imgbox.com/6c/e6/1xdffhZm_o.png" alt="在这里插入图片描述"></p> 
<p>复制脚本输入的内容<br> <img src="https://images2.imgbox.com/7e/61/0eUV2Fko_o.png" alt="在这里插入图片描述"></p> 
<p>拷贝输出结果在新的窗口中进行执行<br> <img src="https://images2.imgbox.com/1a/57/jUn3PINN_o.png" alt="在这里插入图片描述"></p> 
<p>重启数据库，进入数据库bin目录，以数据库服务名为DmServiceDAMENG为例<br> $ ./DmServiceDAMENG restart</p> 
<h3><a id="_410"></a>数据库内存参数说明</h3> 
<p>以下参数全部存在[dm.ini]中<br> <img src="https://images2.imgbox.com/2c/4d/Sx6MORfq_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/79/83/SBuRvKE8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4b/48/ma4Il5Qp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/68/be/GY8q06zj_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_417"></a>三大片内存</h4> 
<p>Buffer是固定配置的，一般不会出问题，主要是考虑他的大小和磁盘IO性能是有直接关系的。<br> mem_pool，是不固定的、是限制不住的；可以通过“高水位”来控制，Select * from v$dm_Ini where para_name like ‘%TARGET’可以查看相关值。<br> 私有会话池：<br> 单独直接申请的，原则上认为它是自己管理和释放的。<br> mem_pool申请的：如 sess_pool_size 内存区，就是走mem_pool申请的，它的释放与否与sess_pool_target的配置有关，释放掉是否还给操作系统则和sess_pool_target、mem_pool_target有关。</p> 
<h4><a id="MAX_SESSION_423"></a>MAX_SESSION和内存使用上限的关系</h4> 
<p>第一部分逻辑：<br> 如果走mem_pool申请的内存，会有一定的管理机制，通过两层target进行管理和释放。<br> 如果是session自己独立申请和管理的内存，其释放机制不清，但连接关闭的时候，是释放了的。<br> 第二部分逻辑：<br> 使用连接池，作用是尽可能保持连接，即来即用，连接使用请求时候，不需要和数据库新建；用完之后，也不和数据库之间断开。通过连接池保持这个连接。<br> 如果连接池配置过大，会有这样一个过程：<br> 应用启动，连接池初始化了1000个连接，系统运行过程中，最大并发数仅为5（即最大只有5个会话在运行；同时，系统99%的语句，在运行时需要的内存为10MB，但是1%的语句，在运行时内存需要使用的内存可能为1G），在这个应用系统运行一段时间之后，这1%的语句，可能会出现把1000个连接都遍历的一次；如果内存参数或者处理不好，需要的内存会是1000*1G ，1TB的服务器内存，才够应用使用。不然，可能 dmserver 就OOM了。<br> 1）如果这1%的连接，每次使用完，都断开连接，不会有问题。<br> 2）如果，因为连接上持续有事务从来不提交，但是连接池连接一直被应用反复申请和使用，也会有内存使用的隐患。</p> 
<h3><a id="_433"></a>数据库个别参数调整</h3> 
<p>以下参数除MAX_SESSION外都在[dm.ini]中<br> <img src="https://images2.imgbox.com/d5/c2/CuiufFaV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a6/f4/b9UdNwTS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/89/73/5zHYvxOI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d5/b5/oqmijrce_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9c/15/4WEi4DHH_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f1/66/XyggJqgO_o.png" alt="在这里插入图片描述"></p> 
<p>OLAP_FLAG默认2<br> SORT_FLAG默认0<br> VIEW_PULLUP_FLAG由0改为1<br> ADAPTIVE_NPLN_FLAG由3改为0<br> ENABLE_INJECT_HINT由0改为1<br> ADAPTIVE_NPLN_FLAG默认0<br> TEMP_SIZE默认10改为1024<br> TEMP_SPACE_LIMIT默认0改为1024<br> REDOS_MAX_DELAY由1800改为180<br> REDOS_BUF_NUM开发建议开最大值9999原为4096</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@<span class="token punctuation">]</span>$ /opt/dmdbms/bin/DmServiceDMSERVER restart
Stopping DmServiceDMSERVER:                                <span class="token punctuation">[</span> OK <span class="token punctuation">]</span>
Starting DmServiceDMSERVER:                                <span class="token punctuation">[</span> OK <span class="token punctuation">]</span>
</code></pre> 
<p>再次检查上述参数[修改已生效]<br> <img src="https://images2.imgbox.com/c4/db/cOoQWkDf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_463"></a>数据库空间规划和安全管理</h3> 
<h4><a id="_464"></a>空间规划</h4> 
<p>每个非数据库系统默认用户均有数据自己的独立表空间，每个表空间由多个数据文件组成，建议每个表空间文件大小为500-800G，不设置自动扩展。表空间使用率过高，则通过添加数据文件方式进行解决。同时数据和索引分两个不同的表空间进行存储数据。</p> 
<h4><a id="_466"></a>安全管理</h4> 
<p>SYSDBA为超级管理员账号，建议修改密码后并记录好之后，封存备用。同时创建系统管理员，同时创建数据库管理员，系统管理员，系统用户。数据库管理员，提供运维管理人员使用。系统管理员，提供给临时运维、系统管理等人员使用，建议每次临时提供使用后，修改密码进行权限回收。系统用户，根据每个应用系统自身需求创建，并只授予resource和public角色权限以及其他所需视图权限。<br> 如创建dmmonitor用户，用来进行运维管理：<br> create user “DMMONITOR” identified by “Dameng@123” limit failed_login_attemps 3,<br> password_lock_time 1, password_grace_time 10;<br> grant “PUBLIC”,“RESOURCE”,“SOI”,“VTI” to “DMMONITOR”;<br> 用户的密码也需要符合密码强度，最好包含大小写字符，特殊字符和数字。</p> 
<h4><a id="_473"></a>开启归档</h4> 
<p><img src="https://images2.imgbox.com/4a/8f/swWjpfdf_o.png" alt="在这里插入图片描述"></p> 
<p>1）方法一：使用sql 的方式开启<br> ALTER DATABASE MOUNT;<br> ALTER DATABASE ARCHIVELOG;<br> ALTER DATABASE ADD ARCHIVELOG ‘DEST=/dmarch, TYPE=LOCAL, FILE_SIZE=1024, SPACE_LIMIT=51200’;<br> ALTER DATABASE OPEN;<br> 2）方法二：通过修改数据库配置文件开启<br> #以数据库实例路径为/opt/dmdbms/data/DAMENG为例<br> #修改/opt/dmdbms/data/DAMENG/dm.ini文件中ARCH_INI参数值为1<br> vi /opt/dmdbms/data/DAMENG/dm.ini<br> #将MAL_INI值改为1<br> MAL_INI = 1 #打开 MAL 系统<br> <img src="https://images2.imgbox.com/31/25/58QmGiwp_o.png" alt="在这里插入图片描述"><br> #新增文件dmarch.ini</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /opt/dmdbms/data/DAMENG/dmarch.ini
<span class="token comment">#新增如下内容</span>
<span class="token punctuation">[</span>ARCHIVE_LOCAL1<span class="token punctuation">]</span>
ARCH_TYPE <span class="token operator">=</span> LOCAL 
ARCH_DEST <span class="token operator">=</span> /dmarch 
ARCH_FILE_SIZE <span class="token operator">=</span> <span class="token number">2048</span>
ARCH_SPACE_LIMIT <span class="token operator">=</span> <span class="token number">102400</span>
</code></pre> 
<ul><li>注意：</li></ul> 
<p>相关路径及归档大小上限参数按照实际要求配置，建议按照生产环境每日增量数据的1-2倍设置归档上限；<br> 不论使用以上哪种方法，均需要对数据库进行mount或重启操作。</p> 
<h3><a id="SQLLOG_504"></a>配置数据库SQLLOG日志</h3> 
<p><img src="https://images2.imgbox.com/37/ed/vJa9Yqlb_o.png" alt="在这里插入图片描述"><br> 创建SQL日志存放目录<br> cd /opt/dmdbms/log<br> mkdir logcommit<br> 检查SVR_LOG参数<br> SELECT * FROM V$PARAMETER WHERE NAME LIKE ‘SVR_LOG%’;<br> <img src="https://images2.imgbox.com/5f/2c/mXDaxNlV_o.png" alt="在这里插入图片描述"></p> 
<p>修改实例路径下/opt/dmdbms/data/DAMENG/sqllog.ini文件<br> 说明：设置sql日志为异步，按照文件大小进行切换，每个1024M，20个文件循环写，具体大小设置要根据现场实际情况<br> cd /opt/dmdbms/data/DAMENG/<br> nano sqllog.ini<br> <img src="https://images2.imgbox.com/79/dc/BpwKhIFR_o.png" alt="在这里插入图片描述"></p> 
<p>主库执行调用存储过程生效配置文件<br> 开启日志<br> 执行SQL</p> 
<pre><code class="prism language-sql">SP_REFRESH_SVR_LOG_CONFIG<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SP_SET_PARA_VALUE<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'SVR_LOG'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>检查SVR_LOG参数和日志生成情况</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> V$PARAMETER <span class="token keyword">WHERE</span> NAME <span class="token operator">LIKE</span> <span class="token string">'SVR_LOG%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b4/b4/2dVN3ca7_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>dmdba@centos-dm ~<span class="token punctuation">]</span>$ <span class="token function">ls</span> /opt/dmdbms/log/logcommit/
dmsql_DMSERVER_20220707_171420.log
</code></pre> 
<h2><a id="_540"></a>数据备份和监控</h2> 
<h3><a id="_541"></a>数据库定时备份-图形化</h3> 
<p>1）创建备份任务，定义作业名<br> 在左侧导航栏中，找到代理选项，右键新建代理任务，新建成功后，点击代理的下拉菜单，找到作业选项，右键新建作业，配置好作业名和作业描述。<br> bakall_delall<br> 每天23:00全量备份、删除30天前的全量备份<br> <img src="https://images2.imgbox.com/0b/5f/Qq5wjG6B_o.png" alt="在这里插入图片描述"></p> 
<p>2）添加作业步骤<br> 在常规选择项设置好后，不用点击确定按钮，直接点击作业步骤选择项，点击添加按钮，进行组作业步骤的添加操作<br> <img src="https://images2.imgbox.com/d1/22/t0IsNOU6_o.png" alt="在这里插入图片描述"></p> 
<p>全量备份：<br> 3）添加备份规则<br> 在作业步骤点击添加后，在步骤类型中，选择备份数据库，备份方式选择完全备份和压缩选项，添加好备份路径。<br> <img src="https://images2.imgbox.com/ae/c2/xcHqJnOr_o.png" alt="在这里插入图片描述"></p> 
<p>点击确定，再添加增量备份<br> 增量备份：<br> 3）添加备份规则<br> 在作业步骤点击添加后，在步骤类型中，选择备份数据库，备份方式选择完全备份和压缩选项，添加好备份路径。<br> <img src="https://images2.imgbox.com/49/bb/ALhI0pnE_o.png" alt="在这里插入图片描述"></p> 
<p>增量备份需要选择基备份目录<br> 另外在主备集群中需要另外配置，执行失败并执行下一步，添加一个全量备份的作业<br> <img src="https://images2.imgbox.com/e6/90/mgJkgtB3_o.png" alt="在这里插入图片描述"></p> 
<p>4）添加备份保留规则<br> 备份规则配置好后，在添加一个SQL脚本，将备份保留策略添加进去，可选择保留30天，具体保留时间可以和用户商议后进行修改。</p> 
<pre><code class="prism language-sql">SF_BAKSET_BACKUP_DIR_ADD<span class="token punctuation">(</span><span class="token string">''</span><span class="token keyword">DISK</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token string">''</span>C:\dmdbms\<span class="token keyword">data</span>\DAMENG\bak\<span class="token keyword">all</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CALL</span> SP_DB_BAKSET_REMOVE_BATCH<span class="token punctuation">(</span><span class="token string">''</span><span class="token keyword">DISK</span><span class="token string">''</span><span class="token punctuation">,</span>SYSDATE<span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b3/c2/K1gLrMUM_o.png" alt="在这里插入图片描述"></p> 
<p>5）添加作业调度<br> 在作业步骤选择项配置完成后，选择作业调度选择项，在右侧导航栏中，选择新建按钮<br> <img src="https://images2.imgbox.com/a7/ff/5db5epxk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_581"></a>同命令行一样的配置-图形化</h3> 
<h4><a id="DM_582"></a>通过DM管理工具创建代理</h4> 
<p>代理-右键-创建代理环境</p> 
<h4><a id="_584"></a>备份规则：</h4> 
<p>每月第一个周六23:00全量备份。每天(除周六)23:00增量备份、删除30天前的增量备份、删除40天前的全量备份<br> 注意：开归档、在bak目录下手动创建all、add文件夹<br> 全量备份路径：C:\dmdbms\data\DAMENG\bak\all<br> 增量备份路径：C:\dmdbms\data\DAMENG\bak\add</p> 
<h4><a id="_589"></a>全量备份</h4> 
<p>新建作业<br> 作业名：bakall<br> 作业描述：每月第一个周六23:00全量备份<br> <img src="https://images2.imgbox.com/b1/1a/uzz3B3Hb_o.png" alt="在这里插入图片描述"></p> 
<p>添加作业步骤<br> 步骤名称：bakall<br> 步骤类型：备份数据库<br> 备份路径：C:\dmdbms\data\DAMENG\bak\all<br> <img src="https://images2.imgbox.com/1c/d7/b0MrePVj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/57/qdGit1Em_o.png" alt="在这里插入图片描述"></p> 
<p>新建作业调度<br> 名称：bakall_time01<br> 调度类型：反复执行<br> 发生频率：每月第一个星期六的23:00<br> <img src="https://images2.imgbox.com/f1/22/rBqAYlXO_o.png" alt="在这里插入图片描述"></p> 
<p>增量备份+删除备份<br> 新建作业<br> 作业名称：bakadd_delbak<br> 新建步骤<br> 步骤名称：bakadd<br> 步骤类型：备份数据库<br> 备份路径：C:\dmdbms\data\DAMENG\bak\add<br> 基备份目录：C:\dmdbms\data\DAMENG\bak\all<br> <img src="https://images2.imgbox.com/11/00/ajdkmFNI_o.png" alt="在这里插入图片描述"></p> 
<p>添加步骤<br> 步骤名称：delbak<br> 步骤类型：SQL脚本</p> 
<pre><code class="prism language-sql">SF_BAKSET_BACKUP_DIR_ADD<span class="token punctuation">(</span><span class="token string">'DISK'</span><span class="token punctuation">,</span><span class="token string">'C:\dmdbms\data\DAMENG\bak\add'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CALL</span> SP_DB_BAKSET_REMOVE_BATCH<span class="token punctuation">(</span><span class="token string">'DISK'</span><span class="token punctuation">,</span>SYSDATE<span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SF_BAKSET_BACKUP_DIR_ADD<span class="token punctuation">(</span><span class="token string">'DISK'</span><span class="token punctuation">,</span><span class="token string">'C:\dmdbms\data\DAMENG\bak\all'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CALL</span> SP_DB_BAKSET_REMOVE_BATCH<span class="token punctuation">(</span><span class="token string">'DISK'</span><span class="token punctuation">,</span>SYSDATE<span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/82/fc/HPQ0JuSC_o.png" alt="在这里插入图片描述"></p> 
<p>新建作业调度<br> 名称：bakadd_delbak_time01<br> 调度类型：反复执行<br> 发生频率：每天（除周六）23:00执行<br> <img src="https://images2.imgbox.com/4b/13/UqtjWd2X_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_637"></a>数据库定时备份-命令行</h3> 
<h4><a id="DM_638"></a>通过DM管理工具创建代理</h4> 
<p>代理-右键-创建代理环境</p> 
<h4><a id="_640"></a>备份规则：</h4> 
<p>每月第一个周六23:00全量备份。每天(除周六)23:00增量备份、删除30天前的增量备份、删除40天前的全量备份<br> 注意：开归档、在bak目录下手动创建all、add文件夹<br> 全量备份路径：/opt/dmdbms/data/DAMENG/bak/all<br> 增量备份路径：/opt/dmdbms/data/DAMENG/bak/add<br> 全量备份</p> 
<pre><code class="prism language-sql"><span class="token keyword">call</span> SP_CREATE_JOB<span class="token punctuation">(</span><span class="token string">'bakall'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'每月第一个周六23:00全量备份'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_JOB_CONFIG_START<span class="token punctuation">(</span><span class="token string">'bakall'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_ADD_JOB_STEP<span class="token punctuation">(</span><span class="token string">'bakall'</span><span class="token punctuation">,</span> <span class="token string">'bakall'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'01020000/opt/dmdbms/data/DAMENG/bak/all'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_ADD_JOB_SCHEDULE<span class="token punctuation">(</span><span class="token string">'bakall'</span><span class="token punctuation">,</span> <span class="token string">'bakall_time01'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'23:00:00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'2019-01-01 01:01:01'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_JOB_CONFIG_COMMIT<span class="token punctuation">(</span><span class="token string">'bakall'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>增量备份+删除备份</p> 
<pre><code class="prism language-sql"><span class="token keyword">call</span> SP_CREATE_JOB<span class="token punctuation">(</span><span class="token string">'bakadd_delbak'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'每天(除周六)23:00增量备份、删除30天前的增量备份、删除40天前的全量备份'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_JOB_CONFIG_START<span class="token punctuation">(</span><span class="token string">'bakadd_delbak'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_ADD_JOB_STEP<span class="token punctuation">(</span><span class="token string">'bakadd_delbak'</span><span class="token punctuation">,</span> <span class="token string">'bakadd'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'11020000/opt/dmdbms/data/DAMENG/bak/all|/opt/dmdbms/data/DAMENG/bak/add'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_ADD_JOB_STEP<span class="token punctuation">(</span><span class="token string">'bakadd_delbak'</span><span class="token punctuation">,</span> <span class="token string">'delbak'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'SF_BAKSET_BACKUP_DIR_ADD(''DISK'',''/opt/dmdbms/data/DAMENG/bak/add'');
CALL SP_DB_BAKSET_REMOVE_BATCH(''DISK'',SYSDATE-30);
SF_BAKSET_BACKUP_DIR_ADD(''DISK'',''/opt/dmdbms/data/DAMENG/bak/all'');
CALL SP_DB_BAKSET_REMOVE_BATCH(''DISK'',SYSDATE-40);'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_ADD_JOB_SCHEDULE<span class="token punctuation">(</span><span class="token string">'bakadd_delbak'</span><span class="token punctuation">,</span> <span class="token string">'bakadd_delbak_time01'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'23:00:00'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'2019-01-01 01:01:01'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> SP_JOB_CONFIG_COMMIT<span class="token punctuation">(</span><span class="token string">'bakadd_delbak'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_669"></a>数据库定时备份-参数</h3> 
<h4><a id="_670"></a>压缩</h4> 
<p>DM 支持对备份数据进行压缩，在执行备份时，可以指定不同的压缩级别，以获得不同的数据压缩比。默认情况下，备份是不进行压缩的。DM 共支持 9 个级别（1~9 级）的压缩处理，级别越高压缩比越高，但相应的压缩速度越慢、CPU 开销越大。因为考虑到备份效率及备份文件大小，这里建议压缩级别为1。</p> 
<h4><a id="_672"></a>并行</h4> 
<p>数据库可以进行并行备份，用户可以在备份步骤中指定并行数，考虑到备份过程中对于数据库的压力以及有可能和业务同时进行，DM 共支持 10 个级别（0~9 级），建议选择2，尽可能在不影响业务的情况下，尽快完成数据备份。<br> <img src="https://images2.imgbox.com/f0/a7/ZPiqghD6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="DEM_676"></a>数据库监控-DEM</h3> 
<h4><a id="DEM_677"></a>搭建DEM</h4> 
<h5><a id="_678"></a>环境准备</h5> 
<p>DEM WAR 包<br> Tomcat<br> JAVA 1.8<br> 达梦数据库<br> 其中 DEM WAR 包在达梦安装目录下/web/dem.war。<br> Tomcat 需要自己准备，与要部署的机器版本匹配即可。<br> 需要配置 JAVA 环境，JAVA 版本必须为 JAVA 1.8。<br> 达梦数据库为 DEM 的后台库，故需保证 DEM 所在机器能访问达梦数据库。达梦数据库<br> 安装及实例创建详见《DM8 安装手册》。</p> 
<h5><a id="_688"></a>部署步骤</h5> 
<ol><li>修改 DEM 后台数据库 dm.ini 参数配置，推荐配置：</li></ol> 
<pre><code class="prism language-bash">MEMORY_POOL <span class="token operator">=</span> <span class="token number">200</span>
BUFFER <span class="token operator">=</span> <span class="token number">1000</span>
KEEP <span class="token operator">=</span> <span class="token number">64</span>
SORT_BUF_SIZE <span class="token operator">=</span> <span class="token number">50</span>
</code></pre> 
<ol start="2"><li>在 DEM 后台库中执行 SQL 脚本 dem_init.sql。</li></ol> 
<p>dem_init.sql 路径为达梦数据库安装目录下的/web/dem_init.sql，此 SQL 脚本<br> 编码为 UTF-8。<br> 如果使用 disql 执行 SQL 脚本，请设置 set CHAR_CODE UTF8。<br> start C:/dmdbms/web/dem_init.sql</p> 
<ol start="3"><li>配置 Tomcat</li></ol> 
<p>在 conf/server.xml 中&lt;Connector port=“8080”<br> protocol=“HTTP/1.1”… 追加属性字段 maxPostSize=“-1”<br> <br> 修改 jvm 启动参数<br> Windows：<br> bin/catalina.bat-&gt; set java_opts= -server -Xms40m -Xmx1024m<br> -Djava.library.path=c:\dmdbms\bin<br> Linux：</p> 
<pre><code class="prism language-bash">bin/catalina.sh -<span class="token operator">&gt;</span> <span class="token assign-left variable">JAVA_OPTS</span><span class="token operator">=</span><span class="token string">"-server -Xms256m -Xmx1024m
-Djava.library.path=/opt/dmdbms/bin"</span>
</code></pre> 
<p>将 dem.war 放到 tomcat 的 webapps 目录下<br> 启动 tomcat （必须先启动 tomcat，才会解压缩 war 包，当然也可以直接在<br> dem.war 中配置，该方式则无需启动 tomcat）。</p> 
<ol start="4"><li>修改 DEM 连接后台数据库配置文件 db.xml</li></ol> 
<p>配置 DEM 后台数据库的连接信息：ip、port、用户名、密码、连接池大小以及 SSL<br> 登录信息等，在文件 WEB-INF/db.xml（在 dem.war 中，解压后在 tomcat 的路径<br> webapps/dem/war/WEB-INI/db.xml 下）中配置。<br> 若要以 SSL 安全方式连接后台数据库，则需配置 SSLDir 和 SSLPassword：<br> 默认在 WEB-INF/sslDir 目录中存有密钥对，WEB-INF/db.xml 配置客户端连接使<br> 用的密钥文件路径（SSLDir）为 WEB-INF/sslDir/client_ssl/SYSDBA，密码<br> （SSLPassword）为空，对应 WEB-INF/db.xml 中配置的登录用户 SYSDBA。此时，只需拷贝 WEB-INF/sslDir/server_ssl 至后台数据库执行码目录（/bin/server_ssl）。</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ConnectPool</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Server</span><span class="token punctuation">&gt;</span></span>127.0.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Server</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Port</span><span class="token punctuation">&gt;</span></span>5236<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Port</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>User</span><span class="token punctuation">&gt;</span></span>SYSDBA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>User</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Password</span><span class="token punctuation">&gt;</span></span>SYSDBA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Password</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InitPoolSize</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>InitPoolSize</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CorePoolSize</span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CorePoolSize</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MaxPoolSize</span><span class="token punctuation">&gt;</span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MaxPoolSize</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>KeepAliveTime</span><span class="token punctuation">&gt;</span></span>60<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>KeepAliveTime</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DbDriver</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DbDriver</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DbTestStatement</span><span class="token punctuation">&gt;</span></span>select 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DbTestStatement</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SSLDir</span><span class="token punctuation">&gt;</span></span>../sslDir/client_ssl/SYSDBA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SSLDir</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SSLPassword</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SSLPassword</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ConnectPool</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ol start="5"><li>启动/重启 Tomcat</li></ol> 
<p>如果步骤 3 中启动了 tomcat，则需重启 tomcat，否则启动 tomcat。<br> 假设部署 DEM 的机器 IP 为 106.12.147.181<br> 则 DEM 访问地址：http://106.12.147.181:8080/dem<br> 默认用户名和密码：admin/888888。<br> <img src="https://images2.imgbox.com/7e/e7/0tZKFROW_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li>配置 启动dmagent</li></ol> 
<p>配置agent.ini：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">center_url</span><span class="token operator">=</span>http://106.12.147.181:8080/dem  <span class="token comment">#DEM访问地址</span>
</code></pre> 
<p>用管理员登陆系统后，可以在"系统管理"-&gt;"系统配置"页面中对系统的其他属性进行配置，包括dmagent的监控频率、前端刷新频率、邮件手机通知告警等<br> <img src="https://images2.imgbox.com/90/ef/ZIDr5q40_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cb/0d/HCCC01uK_o.png" alt="在这里插入图片描述"></p> 
<p>若要启用邮件通知，需用管理员用户登录系统， 在系统配置中完成系统邮箱的相关配置；<br> 若需要启用短信通知，用户需要借助我们提供的WEB-INF/lib/demsdk.jar，实现 com.dameng.dem.server.util.IPhoneNotify接口，将依赖包及实现类打包放入到WEB-INF/lib下，重启web容器，然后在系统配置中完成短信通知的相关配置即可。<br> 如果部署集群并需要创建系统服务，在Linux(Unix)下应以root用户运行dmagent，在Windows下应以administrator用户运行dmagent。<br> 搭建完成DEM后，针对数据库和数据库所在服务器进行告警配置，根据上述步骤<br> 进行数据库和主机的监控项目选择。选择完成后，根据现场实际情况和参数推荐<br> 进行配置，完成整体的告警配置。<br> <img src="https://images2.imgbox.com/78/70/hHIXeCvf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/20/ee/YA9quQ3X_o.png" alt="在这里插入图片描述"></p> 
<p>推荐监控规则<br> <img src="https://images2.imgbox.com/c0/76/gUbvGZuv_o.png" alt="在这里插入图片描述"><br> 技术博客社区地址<br> https://eco.dameng.com</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b074340aad850889a5544d5925253c72/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">验证UDP端口是否开放</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2f8e476c9dff7ff2846c43396246286d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自动驾驶路径规划——基于MATLAB的栅格地图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>