<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mapshaper系列之四 - 编辑命令 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mapshaper系列之四 - 编辑命令" />
<meta property="og:description" content="前面介绍了mapshaper的输入/输出命令，本节介绍mapshaper的核心内容：编辑命令。编辑命令有很多，下面一一介绍。
1. -clip&lt;裁剪&gt;
移除裁剪范围外的要素或部分要素。有如下参数：
source：数据源，通过裁剪多边形的文件名或图层id指定裁剪的多边形要素数据集；
bbox=&lt;xmin,ymin,xmax,ymax&gt;：通过bbox指定裁剪的范围，删除bbox范围外的要素或部分要素；
remove-slivers：移除由裁剪产生的极小长条形多边形；
其他可选项：name和target。
#示例: 使用land-area.shp裁剪usa_counties.shp mapshaper usa_counties.shp -clip land-area.shp -o 2. -dissolve&lt;合并&gt;
以指定的属性合并一组要素，若没有指定属性字段，则合并所有要素。对于多边形图层，-dissolve 在合并相邻多边形时会删除公共边界；对于点图层，-dissolve 合并后得到一组点的质心；-dissolve 不支持线图层。
&lt;field&gt; ：合并依赖的属性名称；
weight= ：（针对点图层）指定属性名称或JS表达代表各点在生成质心中的权重。例如，如下命令估算美国人口分布的质心：
mapshaper census_tracts.shp -points -dissolve weight=POPULATION planar：（针对点图层）在计算合并后的质心时，将十进制的度坐标当作平面直角坐标看待。默认情况下，mapshaper在3D空间中计算经纬度点的质心）； calc=：在合并后的图层中使用构建的JS函数来创建属性，详情参见下面的示例，也可参考 -calc支持的一系列函数；
sum-fields=：合并时求和的字段名称，多个用逗号分隔；
copy-fields=：合并时复制（保留）的字段，多个用逗号分开；字段值来源于待合并的一组要素中第一个要素的值；
其他可选项：name= 和 target=
# 示例:以属性STATE合并要素 mapshaper counties.shp -dissolve STATE -o states.shp # 示例: 以属性STATE合并要素，同时计数要素个数、总人口、最大人口和最小人口 mapshaper counties.shp -dissolve STATE calc=&#39;n = count(), total_pop = sum(POP), max_pop = max(POP), min_pop = min(POP)&#39; 3. -dissolve2&lt;合并&gt; 与dissolve类似，但可以用来合并相邻或重叠的多边形（考虑拓扑关系），若多边形不相交且数据量很大，使用dissolve。
4. -each" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/ca37d9456b58b4ee1b0e0eb7d2411700/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-02-28T22:32:36+08:00" />
<meta property="article:modified_time" content="2017-02-28T22:32:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mapshaper系列之四 - 编辑命令</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="white-space:pre"></span>    <span style="font-size:14px">前面介绍了mapshaper的输入/输出命令，本节介绍mapshaper的核心内容：编辑命令。编辑命令有很多，下面一一介绍。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>1. <strong>-clip&lt;裁剪&gt;</strong></span></p> 
<p><span style="font-size:12px">移除裁剪范围外的要素或部分要素<span style="color:rgb(51,51,51)"><span style="line-height:30px; white-space:pre-wrap; background-color:rgb(247,247,247)">。有如下参数：</span></span></span></p> 
<p><span style="white-space:pre"><span style="color:#333333"><span style="line-height:30px; white-space:pre-wrap"><span style="font-size:12px"><span style="white-space:pre"></span><span style="white-space:pre"></span>source：数据源，通过裁剪多边形的文件名或图层id指定裁剪的多边形要素数据集；</span></span></span></span></p> 
<p><span style="white-space:pre"><span style="color:#333333"><span style="line-height:30px; white-space:pre-wrap"><span style="font-size:12px"><span style="white-space:pre"></span><span style="white-space:pre"></span>bbox=&lt;xmin,ymin,xmax,ymax&gt;：通过bbox指定裁剪的范围，删除bbox范围外的要素或部分要素；</span></span></span></span></p> 
<p><span style="white-space:pre"><span style="color:#333333"><span style="line-height:30px; white-space:pre-wrap"><span style="font-size:12px"><span style="white-space:pre"></span><span style="white-space:pre"></span>remove-slivers：移除由裁剪产生的极小长条形多边形；</span></span></span></span></p> 
<p><span style="font-size:12px; line-height:30px; white-space:pre-wrap; color:rgb(51,51,51)">其他可选项：name和target。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"><span style="color:#333333"><span style="line-height:30px; white-space:pre-wrap"><span style="white-space:pre"></span></span></span></span></span></p> 
<pre><code class="language-plain">#示例: 使用land-area.shp裁剪usa_counties.shp
mapshaper usa_counties.shp -clip land-area.shp -o</code></pre> 
<p><span style="font-size:14px"><strong><br> </strong></span></p> 
<p><strong><span style="font-size:14px">2. -dissolve&lt;合并&gt;</span></strong></p> 
<p><span style="font-size:14px">以指定的属性合并一组要素，若没有指定属性字段，则合并所有要素。对于多边形图层，-dissolve 在合并相邻多边形时会删除公共边界；对于点图层，-dissolve 合并后得到一组点的质心；-dissolve 不支持线图层。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;field&gt; ：合并依赖的属性名称；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>weight= ：（针对点图层）指定属性名称或JS表达代表各点在生成质心中的权重。例如，如下命令估算美国人口分布的质心：</span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-plain">mapshaper census_tracts.shp -points -dissolve weight=POPULATION</code></pre> 
<span style="white-space:pre"></span>planar：（针对点图层）在计算合并后的质心时，将十进制的度坐标当作平面直角坐标看待。默认情况下，mapshaper在3D空间中计算经纬度点的质心）； 
<p></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>calc=：在合并后的图层中使用构建的JS函数来创建属性，详情参见下面的示例，也可参考 -calc支持的一系列函数；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>sum-fields=：合并时求和的字段名称，多个用逗号分隔；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>copy-fields=：合并时复制（保留）的字段，多个用逗号分开；字段值来源于待合并的一组要素中第一个要素的值；</span></p> 
<p><span style="font-size:14px">其他可选项：name= 和 target=</span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-plain"># 示例:以属性STATE合并要素
mapshaper counties.shp -dissolve STATE -o states.shp

# 示例: 以属性STATE合并要素，同时计数要素个数、总人口、最大人口和最小人口
mapshaper counties.shp -dissolve STATE calc='n = count(), total_pop = sum(POP), max_pop = max(POP), min_pop = min(POP)'</code></pre> 
<strong></strong> 
<p></p> 
<p><span style="font-size:14px"><strong><br> </strong></span></p> 
<strong><span style="font-size:14px">3. -dissolve2&lt;合并&gt;</span></strong> 
<br> 
<p><span style="font-size:14px">与dissolve类似，但可以用来合并相邻或重叠的多边形（考虑拓扑关系），若多边形不相交且数据量很大，使用dissolve。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<span style="white-space:pre"></span> 
<p><strong><span style="font-size:14px">4. -each</span></strong></p> 
<p><span style="font-size:14px">将JS表达式应用于图层中的每个要素，用来创建、更新和删除数据项。数据属性向本地属性一样使用，其他要素级的属性作为只读属性通过this获取。</span></p> 
<p><span style="font-size:14px">建议：当使用bash shell（Mac和Linux</span><span style="font-size:14px">）时，用单引号(' ')将JS表达式括起来以免shell表达式中的"!”和其他特殊字符。在WIndows中使用命令语句时，用双引号(" ")将JS表达式括起来。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;expression&gt;：应用于每个要素的JS表达式；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>where=：用于筛选要素子集的二级JS表达式；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>target=：目标图层；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this属性：除非特殊说明，否则this属性只能读取；</span></p> 
<p><span style="font-size:14px">以下适用于所有图层类型：</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.id：要素的id（数组型，从0开始）；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.properties：要素属性（可以像本地变量一样读写）；</span></p> 
<p><span style="font-size:14px">以下只适用于点要素图层：</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.coordinates：一个或多个由[x,y]构成的数组；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.x： 点的X坐标，若几何对象为空则为null，若为多个点的要素，则返回第一个点的X坐标；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.y： 点的Y坐标或null；</span></p> 
<p><span style="font-size:14px">以下只适用于多边形要素图层：</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.area：多边形要素进行任何简化后的面积；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.originalArea：多边形要素没有进行简化前的面积；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.centroidX ：质心的X坐标；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.centroidY： 质心的Y坐标；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.innerX：内心的X坐标；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.innerY： 内心的Y坐标；</span></p> 
<p><span style="font-size:14px">以下适用于多边形和线要素图层：</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.partCount：要素由几部分构成，单部件要素为1，多部件要素 &gt;1，没有要素(null)为0；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.isNull：如果要素没有几何要素返回true；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.bounds：要素的外接多边形坐标数组，[xmin, ymin, xmax, ymax]的形式；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.width：bbox的宽度；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>this.height：bbox的高度；</span></p> 
<p><span style="font-size:14px">说明：1）对于多部件的多边形，计算的质心是最大环的质心，且不考虑环中的空洞；2）除未投影多边形的面积利用球面几何以平方米为单位计算外，其他多边形的几何属性均以平面几何为基础进行计算。</span></p> 
<p><span style="font-size:14px">示例：<br> </span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-plain"># 创建STATE_FIPS和AREA两个字段
mapshaper counties.shp -each 'STATE_FIPS=COUNTY_FIPS.substr(0, 2), AREA=this.area'

# 删除STATE_NAME和GEOID两个字段
mapshaper states.shp -each 'delete STATE_NAME, delete GEOID'

# 字段重命名
mapshaper states.shp -each 'STATE_NAME=NAME, delete NAME'

# 打印NAME属性
mapshaper states.shp -each 'console.log(NAME)'

# 为每个要素指定一个新的数据项
mapshaper states.shp -each 'this.properties = {FID: this.id}'</code></pre> 
<br> 
<p><strong><span style="font-size:14px">5. -erase&lt;擦除&gt;</span></strong></p> 
<p><span style="font-size:14px">移除落在多边形范围内的要素或部分要素。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;source&gt;：包含移除多边形的文件或图层，以文件名或图层id代表移除多边形；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="color:rgb(51,51,51); font-size:14px; line-height:30px; white-space:pre-wrap">bbox=&lt;xmin,ymin,xmax,ymax&gt;：通过bbox指定擦除的范围，删除bbox范围内的要素或部分要素；与 -clip bbox= 类似；</span></span><span style="color:rgb(51,51,51); font-size:14px; line-height:30px; white-space:pre"></span></p> 
<p><span style="font-size:14px"><span style="color:rgb(51,51,51); font-size:14px; line-height:30px; white-space:pre-wrap"><span style="white-space:pre"></span></span></span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"><span style="color:rgb(51,51,51)"><span style="line-height:30px; white-space:pre-wrap"><span style="white-space:pre"></span>remove-slivers：移除由擦除产生的极小长条形多边形；</span></span></span></span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"><span style="color:rgb(51,51,51)"><span style="line-height:30px; white-space:pre-wrap"><span style="white-space:pre"></span><span style="white-space:pre"></span>其他可选项：name和target。</span></span></span></span></p> 
<p></p> 
<pre><code class="language-plain">#示例: 删除usa_counties.shp中在lakes.shp范围内的要素
mapshaper usa_counties.shp -erase lakes.shp -o</code></pre> 
<br> 
<p></p> 
<p><strong><span style="font-size:14px">6. -explode&lt;打散&gt;</span></strong></p> 
<p><span style="font-size:14px">将多部件要素拆分成几个独立的要素。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><strong><span style="font-size:14px">7. -filter&lt;过滤要素&gt;</span></strong></p> 
<p><span style="font-size:14px">使用boolean类型的JS表达式移除不满足条件的要素。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;expression&gt;：结果为true或false的JS表达式，与 -each的使用场景一致；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>remove-empty：删除几何要素为空的要素，可以单独使用或与expression组合使用；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>其他可选项：name 和 target。</span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-plain">#示例: 从usa_counties.shp中选择 STATE字段中包含 ME、VT、NH、MA、CT、RT的要素，并输出为ne_counties.shp
mapshaper usa_counties.shp -filter '"ME,VT,NH,MA,CT,RI".indexOf(STATE) &gt; -1' -o ne_counties.shp</code></pre> 
<br> 
<strong><span style="font-size:14px">8. -filter-fields&lt;过滤属性&gt;</span></strong> 
<p></p> 
<p><span style="font-size:14px">删除属性表中的属性，保留列出的属性，多个属性之间用逗号分隔。</span></p> 
<p><span style="font-size:14px">其他可选项：&lt;fields&gt; target=</span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-plain"># 示例: 删除states.shp中的属性，只保留FID和NAME
mapshaper states.shp -filter-fields FID,NAME</code></pre> 
<br> 
<strong><span style="font-size:14px">9. -filter-islands&lt;过滤孤岛/环&gt;</span></strong> 
<p></p> 
<p><span style="font-size:14px">移除小的独立的环状多边形或孤岛。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;min-area&gt;=：移除小面积的孤岛设置的阈值；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;min-vertices&gt;：移除节点数量少的孤岛设置的阈值；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>&lt;remove-empty&gt;：删除几何对象为空的要素。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><strong><span style="font-size:14px">10. -filter-silvers&lt;过滤面积&gt;</span></strong></p> 
<p><span style="font-size:14px">通过面积过滤多边形小碎片。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>min-area=：移除的面积阈值；</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>remove-empty：删除几何对象为空的要素。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><strong><span style="font-size:14px">11. -graticule&lt;格网&gt;</span></strong></p> 
<p><span style="font-size:14px">创建以经度0度为中心、覆盖全球的格网图层。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><strong><span style="font-size:14px">12. -innerlines&lt;共享边界&gt;</span></strong></p> 
<p><span style="font-size:14px">创建由共享边界构成的线装图层，没有属性数据。</span></p> 
<p><span style="font-size:14px">其他可选项： name= 和 target=</span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-plain"># 示例: 提取两个州共享的边界
mapshaper states.shp -filter 'STATE=="OR" || STATE=="WA"' -innerlines -o</code></pre> 
<br> 
<p><strong><span style="font-size:14px">13.  -join&lt;连接&gt;</span></strong></p> 
<p><span style="font-size:12px">将源图层或文件的属性数据连接到目标图层，如果 为连接字段关键字(keys=)指定有值，mapshaper通过匹配关键字的值进行记录连接，如果没有指定值，mapshaper执行点到多边形或多边形到点的空间连接。</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>&lt;file|layer&gt;： 包含属性数据记录的文件或图层；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>keys：目标图层和源数据连接的关键字，用逗号分隔，目标图层的关键字在前，数据源的关键字在后；如果没有指定连接关键字，则执行空间连接；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>calc=：使用JS表达式和内置函数对源数据表中的值进行计算后填入目标数据表格中；支持的计算函数详见命令 -calc，这对处理多对一的连接非常有用；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>where=：使用返回值为boolean的JS表达式过来源数据表中的记录，与 命令-filter中的表达式有相同的语法；函数 isMax(&lt;field&gt;)、isMIn(&lt;field&gt;)和isMode(&lt;field&gt;)可在多对一的连接中对源数据记录进行筛选；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>fields=：从外部数据表中复制到目标图层中的字段集合，多个用逗号分隔；如果fields= 选项缺失，除连接字段外的所有属性均复制到目标图层中；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>sum-fields：若源数据表中的多个记录对应相同的目标记录，需要求和的字段，多个用逗号分隔；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>field-types：当连接的数据源是csv或其他限定的文本数据文件时，字段数据类型提示信息，以逗号分隔，可参考前文 -i中的 field-types=；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>force：若目标数据表与源数据表有同名的属性，允许使用源数据表中的值覆盖目标数据表中同字段的属性值；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>unjoined：将源数据表中未连接的记录复制到命名为 unjoined 的图层中；</span></p> 
<p><span style="font-size:12px"><span style="white-space:pre"></span>unmatched：将目标数据表中未匹配上的记录复制到命名为 unmatched 的图层中；</span></p> 
<p><span style="font-size:12px">其他可选项： encoding= 和 target=。</span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px"></span></span></span></p> 
<pre><code class="language-plain">#示例：将点图层与多边形图层进行空间连接，使用 calc= 对多对一的情况进行处理
mapshaper states.shp -join points.shp calc='median_score = median(score), mean_score = average(score), join_count = count()'</code></pre> 
<pre><code class="language-plain">#示例：将txt文本中的数据连接到states.shp的属性表中，连接字段为STATES_FIPS和文本中的FIPS（字符串）
mapshaper states.shp -join demographics.txt keys=STATE_FIPS,FIPS:str</code></pre> 
<strong><span style="font-size:14px">14. -lines&lt;边界&gt;</span></strong> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px">提取多边形的边界（包含拓扑关系）。如果没指定参数，外部边界（不共享部分）在属性表中的TYPE属性中标记为0，内部边界（共性部分）标记为1。...</span></span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px"><span style="white-space:pre"></span>&lt;fields&gt;：（可选属性）逗号分隔的属性集；</span></span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px">其他可选项：name= 和 target=。</span></span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px"></span></span></span></p> 
<pre><code class="language-plain"># 示例：提取并区分国界、州界和县界
mapshaper counties.shp -lines STATE_FIPS -o boundaries.shp</code></pre> 
<br> 
<strong><span style="font-size:14px">15. -merge-layers&lt;融合&gt;</span></strong> 
<p></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px">将几个图层的多个要素融合到一个图层中，仅适用于具有相同几何类型和属性表的图层。</span></span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px">其他可选项：name= 和 target=。</span></span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:14px"></span></span></span></p> 
<pre><code class="language-plain">#示例：将分离的多个州图层文件融合到太平洋州图层中， -i combine-files用来说明图层文件在默认情况下是单独处理的
mapshaper -i OR.shp WA.shp CA.shp AK.shp combine-files \
    -merge-layers \
    -o pacific_states.shp</code></pre> 
<p><span style="font-size:14px"><strong>16. <span style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap; background-color:rgb(247,247,247)">-point-grid&lt;格网点&gt;</span></strong></span></p> 
<div style="white-space:pre-wrap; line-height:1.875"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">创建一个矩形格网点图层。</span></span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.875"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">&lt;cols, rows&gt;：设置网格行列数，如-points-grid 100，100；</span></span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.875"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">interval=：相邻点间的距离，单位与数据源单位保持一致（是设置行列数的备选方案）；</span></span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.875"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">bbox=：设置格网点的范围（xmin,ymin,xmax,ymax）。默认为其他数据图层的范围，若没有数据层则为全球范围；</span></span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.875"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">name=：设置各网点图层名称。</span></span> 
</div> 
<p><span style="font-size:14px; color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap; background-color:rgb(247,247,247)"><strong>17.</strong></span><span style="font-size:14px; line-height:1.875; white-space:pre-wrap; background-color:rgb(247,247,247)"><strong>-points&lt;点图层&gt;</strong></span></p> 
<div style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap"> 
 <span style="font-size:12px">从几何多边形或属性表的值中创建点图层。</span> 
</div> 
<div style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">x=：包含x坐标值的列名称；</span></span> 
</div> 
<div style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">y=：包含y坐标值的列名称；</span></span> 
</div> 
<div style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">centroid：以每个多边形要素最大环的质心创建点，点的位置一般不受洞的影响；</span></span> 
</div> 
<div style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">inner：以每个多边形要素最大环的内心创建点，内心点远离多边形边界；</span></span> 
</div> 
<div style="color:rgb(51,51,51); line-height:1.875; white-space:pre-wrap"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">其他可选项：name= + target=</span></span> 
</div> 
<div style="line-height:1.875; white-space:pre-wrap"> 
 <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"></span> 
 <pre><code class="language-plain"><span style="font-size:12px;">#示例
#以每个多边形的内心创建点图层 
mapshaper counties.shp -points inner -o points.shp
# 以每个多边形的内心创建点图层 (-each方法可选)
mapshaper counties.shp -each 'cx=this.innerX, cy=this.innerY' -points x=cx y=cy -o points.shp</span></code></pre> 
</div> 
<div style="line-height:1.875; white-space:pre-wrap"> 
 <span style="font-weight:bold; color:rgb(36,41,46); font-size:14px; line-height:26.25px; background-color:rgb(246,248,250)">18. -proj&lt;投影&gt;</span> 
</div> 
<div style="white-space:pre-wrap"> 
 <span style="color:rgb(36,41,46)"><span style="line-height:24.375px"></span></span> 
 <div style="font-weight:bold; white-space:pre-wrap; line-height:1.875"> 
  <span style="color:rgb(36,41,46); background-color:rgb(246,248,250); font-weight:normal"><span style="font-size:12px">使用proj4字符串或别名投影数据集（可以利用-projections命令列出所有可用的投影方式），这个命令对数据集中的所有图层均有影响。</span></span> 
 </div> 
 <div style="font-weight:bold; white-space:pre-wrap; line-height:1.875"> 
  <span style="color:rgb(36,41,46); background-color:rgb(246,248,250); font-weight:normal"><span style="font-size:12px">densify：沿直线段插值节点以拟合近似曲线；</span></span> 
 </div> 
 <div style="white-space:pre-wrap; line-height:1.875"> 
  <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">from=：如果源数据的坐标系未知，可预定义其坐标系统，如果源数据的坐标系统已通过一个 .proj文件定义，或是WGS84坐标，则该选项不需要。</span></span> 
 </div> 
 <div style="white-space:pre-wrap"> 
  <span style="color:#24292e"><span style="line-height:24.375px"></span></span> 
  <pre><code class="language-plain"><span style="font-size:12px;">#示例
# 利用proj4字符串，将geojson文件转换为New York Long Island飞机坐标
mapshaper nyc.json -proj +proj=lcc +lat_1=41.03333333333333 +lat_2=40.66666666666666 \
+lat_0=40.16666666666666 +lon_0=-74 +x_0=300000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m \
-o
# 将投影的shapefile文件转换为WGS84
mapshaper area.shp -proj wgs84 -o</span></code></pre> 
 </div> 
 <div style="white-space:pre-wrap"> 
  <strong><span style="line-height:1.875; font-size:14px; background-color:rgb(246,248,250)"><span style="white-space:pre-wrap"><strong>19.</strong></span><span style="white-space:pre-wrap; line-height:1.875; font-size:14px; background-color:rgb(246,248,250)"><strong>-rename-fields&lt;重命名字段名&gt;</strong></span><br> </span></strong> 
 </div> 
</div> 
<p><span style="font-size:13px; line-height:1.875; white-space:pre-wrap; color:rgb(36,41,46); background-color:rgb(246,248,250)">重命名数据属性名称，需要重新命名的多个属性之间用逗号分隔，将属性A重命名为B，使用等号表达式：B=A。</span></p> 
<div style="white-space:pre-wrap"> 
 <span style="color:#24292e"><span style="line-height:24.375px"></span></span> 
 <div style="white-space:pre-wrap"> 
  <span style="color:#24292e"><span style="line-height:24.375px"></span></span> 
  <div style="font-size:14px; white-space:pre-wrap; line-height:1.875"> 
   <span style="font-size:13px; background-color:rgb(246,248,250)">其他可选项：&lt;field&gt; target=</span> 
  </div> 
  <div style="white-space:pre-wrap; line-height:1.875"> 
   <span style="background-color:rgb(246,248,250)"></span> 
   <pre><code class="language-plain"><span style="font-size:12px;">#示例：
#: 将STATE_FIPS重命名为 FIPS ，STATE_NAME重命名为NAME
mapshaper states.shp -rename-fields FIPS=STATE_FIPS,NAME=STATE_NAME</span></code></pre> 
  </div> 
  <div style="white-space:pre-wrap"> 
   <span style="color:#333333"><span style="font-size:14px; line-height:26.25px"><strong><span style="white-space:pre-wrap; font-size:14px"><strong>20.</strong></span><span style="line-height:1.875; white-space:pre-wrap; color:rgb(51,51,51); background-color:rgb(247,247,247)"><strong><span style="font-size:14px">-rename-layers&lt;重命名图层名&gt;</span></strong></span><br> </strong></span></span> 
   <span style="background-color:rgb(246,248,250); line-height:1.875"></span> 
   <div style="line-height:1.875; white-space:pre-wrap"> 
    <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">为图层指定新的名称，如果给定的名字少于图层数，列出的最后一个名字以数字结尾的方式重复。</span></span> 
   </div> 
   <div style="line-height:1.875; white-space:pre-wrap"> 
    <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">&lt;names&gt;：一个或多个图层名称，多个名称之间以逗号分隔；</span></span> 
   </div> 
   <div style="line-height:1.875; white-space:pre-wrap"> 
    <span style="color:rgb(51,51,51); background-color:rgb(247,247,247)"><span style="font-size:12px">target=：重命名数据集的所有图层。</span></span> 
   </div> 
   <div style="line-height:1.875; white-space:pre-wrap"> 
    <pre><code class="language-plain">#示例
# 重命名图层名称，并将两个图层合并后数据输出为topojson文件mapshaper ne_50m_rivers_lake_centerlines.shp ne_50m_land.shp combine-files \  -rename-layers water,land -o layers.topojson </code></pre> 
    <span style="font-size:14px"><span style="line-height:1.875"><strong>21. -simplify&lt;简化&gt;</strong></span></span> 
    <div style="white-space:pre-wrap; line-height:1.875"> 
     <span style="font-size:12px">Mapshaper支持Douglas Peucker简化和两种折线简化。</span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.875"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">Douglas-Peucker通过保留距离原始线一定距离的线的方式产生简化线，它对于缩减高密度节点非常有效，但在高度简化中可能形成尖角。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.875"> 
     <span style="font-size:12px"><span style="color:rgb(36,41,46); background-color:rgb(246,248,250)">折线简化以迭代的方式从线上移除最不重要的点。点的重要性通过非端点与两条相邻边形成的几何三角形来度量。折线简化选项使用有效面积度量——形成更小面积三角形的点首先被移除</span><span style="font-family:Arial; color:rgb(36,41,46)">。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.875"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">Mapshaper的默认使用Visvalingam简化，但度量每个点的有效面积使小角度的顶点首先被移除，达到平滑的效果。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.875"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">当作用于多个多边形和线图层时，simplify命令作用于所有图层。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">可选项：</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">&lt;percentage&gt;：移除点的比例，有效值在0%-100%或0-1范围内；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">dp：使用Douglas Peucker简化；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">visvalingam：使用visvalingam简化，利用有效面积度量；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">weighted：使用权重visvalingam简化（这是默认选项），为了达到平滑的效果，更多锐角位置的点首先被移除；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">weighting=：visvalingam简化的加权系数（默认值0.7），值越大平滑效果越好，weighting=0等价于没有加权的visvalingam简化；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">resolution=：控制简化数量的输出分辨率，如1000*800；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">interval=：以距离为单位指定简化数量，在3D空间中简化未投影的数据集时以米为单位，否则单位与源数据一致；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">planar：默认情况下，在3D空间中（使用地理x，y，x坐标），mapshaper使用十进制度进行简化，在笛卡尔平面坐标中，将lng、lat坐标当成x，y坐标来处理。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">keep-shapes：在高度简化中，防止多边形失去原有形状，在多部件要素中，mapshaper通过最大原始范围保留各个部分；</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">no-repair：默认的，mapshaper简化的回滚是沿着相交的一对直线段进行，通过重新引入移除的点直到相交点消失或没有更多点添加，这个选项禁止交叉修复。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">stats：显示简化路径几何的摘要统计。</span></span> 
    </div> 
    <div style="white-space:pre-wrap; line-height:1.5"> 
     <pre><code class="language-plain">#示例
# 使用默认的简化方法，保留10%的可移除点mapshaper counties.shp -simplify 10% -o# 使用Douglas-Peucker简化，阈值设置为100.mapshaper states.shp -simplify dp interval=100 -o simplified/</code></pre> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="font-family:Arial; color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:14px"><strong>22.-sort&lt;排序&gt;</strong></span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="font-family:Arial; color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">使用JavaScript表达式对数据图层中的要素进行排序。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="font-family:Arial; color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">&lt;expression&gt; 将JavaScript表达式应用于每个要素，利用结果对要素排序。与命令-each有相同的执行环境。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">ascending：升序排列（默认）；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">descending：降序排列。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">target</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:14px"><strong>23.-split&lt;分类输出&gt;</strong></span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">依据属性表中的值对目标图层中的要素进行分类并输出到不同的图层中，如果没有指定属性字段，每个要素都被拆分到独立的图层中。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">&lt;field&gt;：属性字段名称；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">其他选项：+ target=</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <pre><code class="language-plain"><span style="font-size:12px;">#示例
# 依据字段STATE对要素进行分类并分别输出成geojson文件，输出图层的名称为：源数据层名称-属性值
#如states-AK.json, states-AL.json等mapshaper states.shp -split STATE -o format=geojson# 依据字段STATE对要素进行分类并分别输出成geojson文件，输出图层的名称为为：属性值.# 如 AK.json, AL.json等mapshaper states.shp name='' -split STATE -o format=geojson# 将所有要素拆分成独立的要素并输出层geojson文件 (没有指定属性名称)，输出图层的名称为为：图层名称-升序数字,#如states-1.json, states-2.json等.mapshaper states.shp -split -o format=geojson</span></code></pre> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><strong><span style="font-size:14px">24. -split-on-grid&lt;格网分开输出&gt;</span></strong></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">利用指定行列数的格网单元将要素分成不同的图层，在大数据量的数据集划分成较小的数据文件时非常实用，这样可以动态地图交互部分的数据。使用 -o bbox-index从shape中导出一个包含名称和范围文件。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">&lt;cols, rows&gt;：格网的大小，如 -split-on-grid 12,10</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">其他可选项：target=</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><strong><span style="font-size:14px">25.-subdivide&lt;分类要素&gt;</span></strong></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">使用结果为boolean型的JavaScript表达式递归地分离图层。JS表达式首先对图层中的所有要素进行评估，如果返回true，依据集聚范围(bbox)是相对的高度或宽度，对要素在水平或垂直方向想进行空间分段。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">表达式可以调用几个函数作用于一组要素，sum()函数将要素级表达式作为参数，并在将表达式应用于每个要素后返回合计的结果。相似函数包括min()、max()、average()和median()。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">其他可选项：&lt;expression&gt; target=</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <pre><code class="language-plain"><span style="font-size:12px;">#示例
#将人口普查数据集聚成人口数量大于1000000，面积大于00 sq km  -subdivide "sum('POPULATION') &gt;= 1000000 &amp;&amp; sum('this.area') &gt; 1e8" \  -dissolve sum-fields=POPULATION  -o merge-layers tract_groups.shp -i census_tracts.shp</span></code></pre> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><strong><span style="font-size:14px">26.-svg-style</span></strong></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">为SVG输出和Web UI中的展示增加普通的样式属性，样式选项采用原意的值或JS表达式，JS表达式的帮助参见-each命令。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">class=：一或多个css类，用空格分开，如 class="light semi-transparent"；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">fill=：填充颜色，如 #eee pink rgba(0, 0, 0, 0.2)；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">stroke=： 边框颜色；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">stroke-width=：边框宽度；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">opacity=：符号透明度，如 opacity=0.5；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">r=：圆半径（点要素作为圆导出）；</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">其他可选项： target=</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><strong><span style="font-size:14px">27.-target</span></strong></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">设置默认的目标图层。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">&lt;target&gt;：名称或图层id，第一个图层id为1.</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><strong><span style="font-size:14px">28.-uniq&lt;删除重复&gt;</span></strong></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">删除与前面要素具有相同id的要素。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">&lt;expression&gt;：获取要素id的JS表达式，与-each具有相同的语法。</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <span style="color:rgb(36,41,46); background-color:rgb(246,248,250)"><span style="font-size:12px">target=</span></span> 
     </div> 
     <div style="white-space:pre-wrap; line-height:1.45"> 
      <pre><code class="language-plain"><span style="font-size:12px;">#示例
#保留多部件中面积最大的部分mapshaper polygons.shp \    -each 'fid = this.id' \    -explode \    -sort 'this.area' descending \    -uniq 'fid' \    -o</span></code></pre> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2a491a9b89c5a6bcf6485378293e6daa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">浅尝树莓派3之串口配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c89dbe1e009e4ab8cc696bf77995c57b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MFC函数GetModuleFileName()：获得应用程序目录绝对路径</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>