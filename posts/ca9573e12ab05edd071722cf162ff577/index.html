<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>（二）一文带你了解KITTI数据集 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="（二）一文带你了解KITTI数据集" />
<meta property="og:description" content="（二）一文带你了解KITTI数据集 KITTI官网网址：https://www.cvlibs.net/datasets/kitti/index.php
KITTI数据集论文：Are we ready for Autonomous Driving? The KITTI Vision Benchmark Suite
KITTI3D AP Metric：Disentangling Monocular 3D Object Detection
第一章：KITTI数据集介绍 1.1 KITTI数据集简介 KITTI数据集是由德国卡尔斯鲁厄理工学院 Karlsruhe Institute of Technology (KIT) 和美国芝加哥丰田技术研究院 Toyota Technological Institute at Chicago (TTI-C) 于2012年联合创办，是目前国际上最为常用的自动驾驶场景下的计算机视觉算法评测数据集之一。该数据集用于评测立体图像(stereo)，光流(optical flow)，视觉测距(visual odometry)，3D物体检测(object detection)和3D跟踪(tracking)等计算机视觉技术在车载环境下的性能。KITTI数据集包含市区、乡村和高速公路等场景采集的真实图像数据，每张图像中最多达15辆车和30个行人，还有各种程度的遮挡与截断。 KITTI数据集针对3D目标检测任务提供了14999张图像以及对应的点云，其中7481组用于训练，7518组用于测试，针对场景中的汽车、行人、自行车三类物体进行标注，共计80256个标记对象。
1.2 KITTI数据集采集车 KITTI数据集采集车的传感器布置平面如上图所示，车辆装配有2个灰度摄像机，2个彩色摄像机，一个Velodyne 64线3D激光雷达，4个光学镜头，以及1个GPS导航系统，在上图中使用了红色标记。
2个一百四十万像素的PointGray Flea2灰度相机2个一百四十万像素的PointGray Flea2彩色相机1个64线的Velodyne激光雷达，10Hz，角分辨率为0.09度，每秒约一百三十万个点，水平视场360°，垂直视场26.8°，至多120米的距离范围4个Edmund的光学镜片，水平视角约为90°，垂直视角约为35°1个OXTS RT 3003的惯性导航系统（GPS/IMU），6轴，100Hz，分别率为0.02米，0.1° 注意：双目相机之间的距离为0.54米，点云到相机之间的距离为0.27米，在上图中使用了蓝色标记。
1.3 KITTI数据集坐标系表示 图中蓝色的坐标系表示激光点云的坐标系，红色的坐标系表示相机的坐标系。
第二章：准备KITTI数据集 2.1 官网下载KITTI数据集 在KITTI 3D object detection dataset下载KITTI数据集安装包。
当然，如果在官网下载麻烦的话，我已经下载好了，使用百度网盘可以直接进行下载。
百度网盘链接：https://pan.baidu.com/s/1K-UaIFUt_bibjC6ZtLUKYA
提取码：7jq1
道路平面信息是由 AVOD 生成的，其在训练过程中作为一个可选项，用来提高模型的性能，点击下载道路平面信息。
2.2 官网下载KITTI数据集后的组织结构 在官网下载KITTI数据集后，并在mmdetection3d文件夹下组织成以下所示的结构。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/ca9573e12ab05edd071722cf162ff577/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-15T17:01:46+08:00" />
<meta property="article:modified_time" content="2023-06-15T17:01:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">（二）一文带你了解KITTI数据集</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="KITTI_0"></a>（二）一文带你了解KITTI数据集</h2> 
<p>KITTI官网网址：<a href="https://www.cvlibs.net/datasets/kitti/index.php" rel="nofollow">https://www.cvlibs.net/datasets/kitti/index.php</a><br> KITTI数据集论文：<a href="https://www.cs.toronto.edu/~urtasun/publications/geiger_et_al_cvpr12.pdf" rel="nofollow">Are we ready for Autonomous Driving? The KITTI Vision Benchmark Suite</a><br> KITTI3D AP Metric：<a href="https://openaccess.thecvf.com/content_ICCV_2019/papers/Simonelli_Disentangling_Monocular_3D_Object_Detection_ICCV_2019_paper.pdf" rel="nofollow">Disentangling Monocular 3D Object Detection</a></p> 
<h3><a id="KITTI_4"></a>第一章：KITTI数据集介绍</h3> 
<h4><a id="11_KITTI_5"></a>1.1 KITTI数据集简介</h4> 
<p>KITTI数据集是由德国卡尔斯鲁厄理工学院 Karlsruhe Institute of Technology (KIT) 和美国芝加哥丰田技术研究院 Toyota Technological Institute at Chicago (TTI-C) 于2012年联合创办，是目前国际上最为常用的自动驾驶场景下的计算机视觉算法评测数据集之一。该数据集用于评测立体图像(stereo)，光流(optical flow)，视觉测距(visual odometry)，3D物体检测(object detection)和3D跟踪(tracking)等计算机视觉技术在车载环境下的性能。KITTI数据集包含市区、乡村和高速公路等场景采集的真实图像数据，每张图像中最多达15辆车和30个行人，还有各种程度的遮挡与截断。 KITTI数据集针对3D目标检测任务提供了14999张图像以及对应的点云，其中7481组用于训练，7518组用于测试，针对场景中的<strong>汽车、行人、自行车</strong>三类物体进行标注，共计80256个标记对象。</p> 
<h4><a id="12_KITTI_7"></a>1.2 KITTI数据集采集车</h4> 
<p><img src="https://images2.imgbox.com/30/94/Ov9inEe5_o.png" alt="KITTI数据集采集车"><br> KITTI数据集采集车的传感器布置平面如上图所示，车辆装配有2个灰度摄像机，2个彩色摄像机，一个Velodyne 64线3D激光雷达，4个光学镜头，以及1个GPS导航系统，在上图中使用了<code>红色</code>标记。</p> 
<ul><li>2个一百四十万像素的PointGray Flea2灰度相机</li><li>2个一百四十万像素的PointGray Flea2彩色相机</li><li>1个64线的Velodyne激光雷达，10Hz，角分辨率为0.09度，每秒约一百三十万个点，水平视场360°，垂直视场26.8°，至多120米的距离范围</li><li>4个Edmund的光学镜片，水平视角约为90°，垂直视角约为35°</li><li>1个OXTS RT 3003的惯性导航系统（GPS/IMU），6轴，100Hz，分别率为0.02米，0.1°</li></ul> 
<p>注意：双目相机之间的距离为0.54米，点云到相机之间的距离为0.27米，在上图中使用了<code>蓝色</code>标记。</p> 
<h4><a id="13_KITTI_18"></a>1.3 KITTI数据集坐标系表示</h4> 
<p><img src="https://images2.imgbox.com/de/15/321jGVkw_o.png" alt="KITTI数据集坐标系表示"><br> 图中<code>蓝色的坐标系</code>表示激光点云的坐标系，<code>红色的坐标系</code>表示相机的坐标系。</p> 
<h3><a id="KITTI_21"></a>第二章：准备KITTI数据集</h3> 
<h4><a id="21_KITTI_22"></a>2.1 官网下载KITTI数据集</h4> 
<p>在<a href="https://www.cvlibs.net/datasets/kitti/eval_object.php?obj_benchmark=3d" rel="nofollow">KITTI 3D object detection dataset</a>下载KITTI数据集安装包。<br> 当然，如果在官网下载麻烦的话，我已经下载好了，使用百度网盘可以直接进行下载。<br> 百度网盘链接：<a href="https://pan.baidu.com/s/1K-UaIFUt_bibjC6ZtLUKYA" rel="nofollow">https://pan.baidu.com/s/1K-UaIFUt_bibjC6ZtLUKYA</a><br> 提取码：7jq1<br> 道路平面信息是由 AVOD 生成的，其在训练过程中作为一个可选项，用来提高模型的性能，点击下载<a href="https://download.openmmlab.com/mmdetection3d/data/train_planes.zip" rel="nofollow">道路平面信息</a>。<br> <img src="https://images2.imgbox.com/4d/fe/Zx1TYLlc_o.png" alt="KITTI datasets"></p> 
<h4><a id="22_KITTI_30"></a>2.2 官网下载KITTI数据集后的组织结构</h4> 
<p>在官网下载KITTI数据集后，并在mmdetection3d文件夹下组织成以下所示的结构。</p> 
<pre><code class="prism language-bash">mmdetection3d
├── configs
├── mmdet3d
├── tools
├── data
│   ├── kitti
│   │   ├── ImageSets
│   │   ├── testing
│   │   │   ├── calib
│   │   │   ├── image_2
│   │   │   ├── velodyne
│   │   ├── training
│   │   │   ├── calib
│   │   │   ├── image_2
│   │   │   ├── label_2
│   │   │   ├── velodyne
│   │   │   ├── planes
</code></pre> 
<h4><a id="23__51"></a>2.3 数据预处理</h4> 
<p>项目的数据预处理需要使用<strong>tools/create_data.py</strong>重新处理一次。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> mmdetection3d
<span class="token function">mkdir</span> ./data/kitti/ <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> ./data/kitti/ImageSets

<span class="token comment"># Download data split</span>
<span class="token function">wget</span> -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/test.txt --no-check-certificate --content-disposition -O ./data/kitti/ImageSets/test.txt
<span class="token function">wget</span> -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/train.txt --no-check-certificate --content-disposition -O ./data/kitti/ImageSets/train.txt
<span class="token function">wget</span> -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/val.txt --no-check-certificate --content-disposition -O ./data/kitti/ImageSets/val.txt
<span class="token function">wget</span> -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/trainval.txt --no-check-certificate --content-disposition -O ./data/kitti/ImageSets/trainval.txt

<span class="token comment"># Data preprocessing</span>
python tools/create_data.py kitti --root-path ./data/kitti --out-dir ./data/kitti --extra-tag kitti --with-plane
</code></pre> 
<h4><a id="24__66"></a>2.4 数据预处理后的组织结构</h4> 
<p>项目的数据预处理后，在mmdetection3d文件夹下将会组织成以下所示的结构。</p> 
<pre><code class="prism language-bash">mmdetection3d
├── configs
├── mmdet3d
├── tools
├── data
│   ├── kitti
│   │   ├── ImageSets
│   │   │   ├── test.txt
│   │   │   ├── train.txt
│   │   │   ├── trainval.txt
│   │   │   ├── val.txt
│   │   ├── testing
│   │   │   ├── calib
│   │   │   ├── image_2
│   │   │   ├── velodyne
│   │   │   ├── velodyne_reduced
│   │   ├── training
│   │   │   ├── calib
│   │   │   ├── image_2
│   │   │   ├── label_2
│   │   │   ├── velodyne
│   │   │   ├── velodyne_reduced
│   │   │   ├── planes
│   │   ├── kitti_gt_database
│   │   │   ├── xxxxx.bin
│   │   ├── kitti_infos_test.pkl
│   │   ├── kitti_infos_train.pkl
│   │   ├── kitti_infos_trainval.pkl
│   │   ├── kitti_infos_val.pkl
│   │   ├── kitti_dbinfos_train.pkl
│   │   ├── kitti_infos_test_mono3d.coco.json
│   │   ├── kitti_infos_train_mono3d.coco.json
│   │   ├── kitti_infos_trainval_mono3d.coco.json
│   │   ├── kitti_infos_val_mono3d.coco.json
</code></pre> 
<h3><a id="KITTI_105"></a>第三章：KITTI数据集文件解析</h3> 
<h4><a id="31_image__106"></a>3.1 image 文件</h4> 
<p>image文件是以8位PNG格式存储，以<code>kitti/training/image_2/000000.png</code>为例，如下图所示。<br> <img src="https://images2.imgbox.com/0a/03/MsNcNtqn_o.png" alt="000000.png"></p> 
<h4><a id="32_velodyne__110"></a>3.2 velodyne 文件</h4> 
<p>velodyne文件是激光雷达的测量数据，以<code>kitti/training/velodyne/000000.bin</code>文件为例，内容如下：</p> 
<pre><code class="prism language-css">8D97 9241 39B4 483D | 5839 543F 0000 0000 
83C0 9241 8716 D93D | 5839 543F 0000 0000
2D32 4D42 AE47 013F | FED4 F83F 0000 0000
3789 9241 D34D 623E | 5839 543F 0000 0000
E5D0 9241 1283 803E | E17A 543F EC51 B83D
...
</code></pre> 
<p>激光点云数据是以浮点二进制文件格式存储，每行包含8个浮点数数据，其中每个浮点数数据由四位十六进制数表示且通过空格隔开。一个点云数据由4个浮点数数据构成，分别表示点云的x、y、z、r（其中xyz表示点云的坐标，r表示强度或反射值），点云的存储方式如下表所示：<br> <img src="https://images2.imgbox.com/ee/5b/mvlQWsZW_o.png" alt="pointcloud"></p> 
<h4><a id="33_calib__124"></a>3.3 calib 文件</h4> 
<p>calib文件是相机、雷达、惯导等传感器的矫正数据，以<code>kitti/training/calib/000000.txt</code>文件为例，内容如下：</p> 
<pre><code class="prism language-css"><span class="token property">P0</span><span class="token punctuation">:</span> 7.070493000000e+02 0.000000000000e+00 6.040814000000e+02 0.000000000000e+00 0.000000000000e+00 7.070493000000e+02 1.805066000000e+02 0.000000000000e+00 0.000000000000e+00 0.000000000000e+00 1.000000000000e+00 0.000000000000e+00
<span class="token property">P1</span><span class="token punctuation">:</span> 7.070493000000e+02 0.000000000000e+00 6.040814000000e+02 -3.797842000000e+02 0.000000000000e+00 7.070493000000e+02 1.805066000000e+02 0.000000000000e+00 0.000000000000e+00 0.000000000000e+00 1.000000000000e+00 0.000000000000e+00
<span class="token property">P2</span><span class="token punctuation">:</span> 7.070493000000e+02 0.000000000000e+00 6.040814000000e+02 4.575831000000e+01 0.000000000000e+00 7.070493000000e+02 1.805066000000e+02 -3.454157000000e-01 0.000000000000e+00 0.000000000000e+00 1.000000000000e+00 4.981016000000e-03
<span class="token property">P3</span><span class="token punctuation">:</span> 7.070493000000e+02 0.000000000000e+00 6.040814000000e+02 -3.341081000000e+02 0.000000000000e+00 7.070493000000e+02 1.805066000000e+02 2.330660000000e+00 0.000000000000e+00 0.000000000000e+00 1.000000000000e+00 3.201153000000e-03
<span class="token property">R0_rect</span><span class="token punctuation">:</span> 9.999128000000e-01 1.009263000000e-02 -8.511932000000e-03 -1.012729000000e-02 9.999406000000e-01 -4.037671000000e-03 8.470675000000e-03 4.123522000000e-03 9.999556000000e-01
<span class="token property">Tr_velo_to_cam</span><span class="token punctuation">:</span> 6.927964000000e-03 -9.999722000000e-01 -2.757829000000e-03 -2.457729000000e-02 -1.162982000000e-03 2.749836000000e-03 -9.999955000000e-01 -6.127237000000e-02 9.999753000000e-01 6.931141000000e-03 -1.143899000000e-03 -3.321029000000e-01
<span class="token property">Tr_imu_to_velo</span><span class="token punctuation">:</span> 9.999976000000e-01 7.553071000000e-04 -2.035826000000e-03 -8.086759000000e-01 -7.854027000000e-04 9.998898000000e-01 -1.482298000000e-02 3.195559000000e-01 2.024406000000e-03 1.482454000000e-02 9.998881000000e-01 -7.997231000000e-01
</code></pre> 
<p>calib文件中每一行代表一个参数名，冒号后面是参数矩阵，具体如下：</p> 
<ul><li><strong>P0-P4：</strong> 矫正后的相机投影矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            3 
           
          
            × 
           
          
            4 
           
          
         
        
       
         R^{3\times 4} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mbin mtight">×</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></span>，其中0、1、2、3 代表相机的编号，0表示左边灰度相机，1右边灰度相机，2左边彩色相机，3右边彩色相机。</li><li><strong>R0_rect：</strong> 矫正后的相机旋转矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            3 
           
          
            × 
           
          
            3 
           
          
         
        
       
         R^{3\times 3} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mbin mtight">×</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></span>，在实际计算时，需要将该3x3的矩阵扩展为4x4的矩阵，方法为在第四行和第四列添加全为0的向量。</li><li><strong>Tr_velo_to_cam：</strong> 从雷达到相机的旋转平移矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            3 
           
          
            × 
           
          
            4 
           
          
         
        
       
         R^{3\times 4} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mbin mtight">×</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></span>，在实际计算时，需要将该3x4的矩阵扩展为4x4的矩阵，方法为增加第四行向量[0,0,0,1]。</li><li><strong>Tr_imu_to_velo：</strong> 从惯导或GPS装置到相机的旋转平移矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            3 
           
          
            × 
           
          
            4 
           
          
         
        
       
         R^{3\times 4} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mbin mtight">×</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></span>。</li></ul> 
<p>注意：将 Velodyne 坐标中的点 x 投影到左侧的彩色图像（P2）中 y，使用以下公式：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          y 
         
        
          = 
         
        
          P 
         
        
          2 
         
        
          ∗ 
         
        
          R 
         
        
          0 
         
        
          _ 
         
        
          r 
         
        
          e 
         
        
          c 
         
        
          t 
         
        
          ∗ 
         
        
          T 
         
        
          r 
         
        
          _ 
         
        
          v 
         
        
          e 
         
        
          l 
         
        
          o 
         
        
          _ 
         
        
          t 
         
        
          o 
         
        
          _ 
         
        
          c 
         
        
          a 
         
        
          m 
         
        
          ∗ 
         
        
          x 
         
        
       
         y = P2 * R0\_rect * Tr\_velo\_to\_cam * x 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.9933em; vertical-align: -0.31em;"></span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord" style="margin-right: 0.0278em;">0_</span><span class="mord mathnormal">rec</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.0044em; vertical-align: -0.31em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord" style="margin-right: 0.0278em;">_</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord" style="margin-right: 0.0278em;">_</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord" style="margin-right: 0.0278em;">_</span><span class="mord mathnormal">c</span><span class="mord mathnormal">am</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span></span></p> 
<p>若想将激光雷达坐标系中的点x投射到其他摄像头，只需替换P2矩阵即可（例如右边的彩色相机P3）。</p> 
<h4><a id="34_label__150"></a>3.4 label 文件</h4> 
<p>label文件是object的标签和评估数据，以<code>kitti/training/label_2/000000.txt</code>文件为例，内容如下：</p> 
<pre><code class="prism language-css">Pedestrian 0.00 0 -0.20 712.40 143.00 810.73 307.92 1.89 0.48 1.20 1.84 1.47 8.41 0.01
</code></pre> 
<p>label文件中的每一行代表一个object，每一行都有16列分别表示不同的含义，具体如下：<br> <img src="https://images2.imgbox.com/54/ee/hJgBnkhY_o.png" alt="label"></p> 
<ul><li> <p><strong>第1列（字符串）：</strong> 代表物体类别（type）<br> 总共有9类，分别是：Car、Van、Truck、Pedestrian、Person_sitting、Cyclist、Tram、Misc、DontCare。其中DontCare标签表示该区域没有被标注，比如由于目标物体距离激光雷达太远。为了防止在评估过程中（主要是计算precision），将本来是目标物体但是因为某些原因而没有标注的区域统计为假阳性(false positives)，评估脚本会自动忽略DontCare区域的预测结果。</p> </li><li> <p><strong>第2列（浮点数）：</strong> 代表物体是否被截断（truncated）<br> 数值在0（非截断）到1（截断）之间浮动，数字表示指离开图像边界对象的程度。</p> </li><li> <p><strong>第3列（整数）：</strong> 代表物体是否被遮挡（occluded）<br> 整数0、1、2、3分别表示被遮挡的程度。</p> </li><li> <p><strong>第4列（弧度数）：</strong> 物体的观察角度（alpha）<br> 取值范围为-<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
        
          \pi 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span> ~ <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
        
          \pi 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span>（单位：rad），它表示在相机坐标系下，以相机原点为中心，相机原点到物体中心的连线为半径，将物体绕相机y轴旋转至相机z轴，此时物体方向与相机x轴的夹角，如上图所示的夹角 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           α 
          
         
        
          \alpha 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0037em;">α</span></span></span></span></span> 便是观测角度。</p> </li><li> <p><strong>第5~8列（浮点数）：</strong> 物体的2D边界框大小（bbox）<br> 四个数分别是xmin、ymin、xmax、ymax（单位：pixel），表示2D边界框的左上角和右下角的坐标。</p> </li><li> <p><strong>第9~11列（浮点数）：</strong> 3D物体的尺寸（dimensions）<br> 三个数分别是高、宽、长（单位：米）</p> </li><li> <p><strong>第12-14列（浮点数）：</strong> 3D物体的位置（location）<br> 分别是x、y、z（单位：米），特别注意的是，这里的xyz是在相机坐标系下3D物体的中心点位置。</p> </li><li> <p><strong>第15列（弧度数）：</strong> 3D物体的方向角（rotation_y）<br> 取值范围为：-<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
        
          \pi 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span> ~ <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
        
          \pi 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span>（单位：rad），它表示在相机坐标系下，物体的全局方向角，也就是物体前进方向与相机坐标系x轴的夹角，如上图所示的夹角 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           θ 
          
         
        
          \theta 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">θ</span></span></span></span></span> 便是方位角。</p> </li><li> <p><strong>第16列（浮点数）：</strong> 检测的置信度（score），要特别注意的是，这个数据只在测试集的数据中有。</p> </li></ul> 
<h4><a id="35_planes__183"></a>3.5 planes 文件</h4> 
<p>planes文件是是由 AVOD 生成的道路平面信息，其在训练过程中作为一个可选项，用来提高模型的性能，以<code>kitti/training/planes/000000.txt</code>文件为例，内容如下：</p> 
<pre><code class="prism language-css"># Matrix
WIDTH 4
HEIGHT 1
-7.051729e-03 -9.997791e-01 -1.980151e-02 1.680367e+00 
</code></pre> 
<h4><a id="36_KITTIMMDetection3D_192"></a>3.6 KITTI数据集经过MMDetection3D数据预处理后的文件解析</h4> 
<p>KITTI数据集经过MMDetection3D数据预处理后在kitti文件夹下生成了下列文件：</p> 
<ul><li>velodyne_reduced/xxxxx.bin：文件内容是将原始 velodyne 文件中的点云进行了裁剪，只保留了相机前方90°的点云数据，而舍弃了其它未标注的点云数据，如下图所示，velodyne_reduced 文件内容是图中虚线内的点云数据。<br> <img src="https://images2.imgbox.com/ee/ec/W15ifS0k_o.png" alt="velodyne_reduced"></li><li>kitti_gt_database/xxxxx.bin：文件内容是将原始 velodyne 文件中每个场景下的汽车、行人和自行车的点云都单独裁剪出来，包含在 3D 标注框中的点云数据，用于训练时进行数据增强。</li><li>kitti_infos_train.pkl：训练数据集，该字典包含了两个键值：metainfo 和 data_list。metainfo 包含数据集的基本信息，例如 categories, dataset 和 info_version。data_list 是由字典组成的列表，每个字典（以下简称 info）包含了单个样本的所有详细信息。 
  <ul><li>info[‘sample_idx’]：该样本在整个数据集的索引。</li><li>info[‘images’]：多个相机捕获的图像信息。是一个字典，包含 5 个键值：CAM0, CAM1, CAM2, CAM3, R0_rect。 
    <ul><li>info[‘images’][‘R0_rect’]：校准旋转矩阵，是一个 4x4 数组。</li><li>info[‘images’][‘CAM2’]：包含 CAM2 相机传感器的信息。 
      <ul><li>info[‘images’][‘CAM2’][‘img_path’]：图像的文件名。</li><li>info[‘images’][‘CAM2’][‘height’]：图像的高。</li><li>info[‘images’][‘CAM2’][‘width’]：图像的宽。</li><li>info[‘images’][‘CAM2’][‘cam2img’]：相机到图像的变换矩阵，是一个 4x4 数组。</li><li>info[‘images’][‘CAM2’][‘lidar2cam’]：激光雷达到相机的变换矩阵，是一个 4x4 数组。</li><li>info[‘images’][‘CAM2’][‘lidar2img’]：激光雷达到图像的变换矩阵，是一个 4x4 数组。</li></ul> </li></ul> </li><li>info[‘lidar_points’]：是一个字典，包含了激光雷达点相关的信息。 
    <ul><li>info[‘lidar_points’][‘lidar_path’]：激光雷达点云数据的文件名。</li><li>info[‘lidar_points’][‘num_pts_feats’]：点的特征维度。</li><li>info[‘lidar_points’][‘Tr_velo_to_cam’]：Velodyne 坐标到相机坐标的变换矩阵，是一个 4x4 数组。</li><li>info[‘lidar_points’][‘Tr_imu_to_velo’]：IMU 坐标到 Velodyne 坐标的变换矩阵，是一个 4x4 数组。</li></ul> </li><li>info[‘instances’]：是一个字典组成的列表。每个字典包含单个实例的所有标注信息。对于其中的第 i 个实例，我们有： 
    <ul><li>info[‘instances’][i][‘bbox’]：长度为 4 的列表，以 (x1, y1, x2, y2) 的顺序表示实例的 2D 边界框。</li><li>info[‘instances’][i][‘bbox_3d’]：长度为 7 的列表，以 (x, y, z, l, h, w, yaw) 的顺序表示实例的 3D 边界框。</li><li>info[‘instances’][i][‘bbox_label’]：是一个整数，表示实例的 2D 标签，-1 代表忽略。</li><li>info[‘instances’][i][‘bbox_label_3d’]：是一个整数，表示实例的 3D 标签，-1 代表忽略。</li><li>info[‘instances’][i][‘depth’]：3D 边界框投影到相关图像平面的中心点的深度。</li><li>info[‘instances’][i][‘num_lidar_pts’]：3D 边界框内的激光雷达点数。</li><li>info[‘instances’][i][‘center_2d’]：3D 边界框投影的 2D 中心。</li><li>info[‘instances’][i][‘difficulty’]：KITTI 官方定义的困难度，包括简单、适中、困难。</li><li>info[‘instances’][i][‘truncated’]：从 0（非截断）到 1（截断）的浮点数，其中截断指的是离开检测图像边界的检测目标。</li><li>info[‘instances’][i][‘occluded’]：整数 (0,1,2,3) 表示目标的遮挡状态：0 = 完全可见，1 = 部分遮挡，2 = 大面积遮挡，3 = 未知。</li><li>info[‘instances’][i][‘group_ids’]：用于多部分的物体。</li></ul> </li><li>info[‘plane’]（可选）：地平面信息。</li></ul> </li></ul> 
<h3><a id="KITTI_227"></a>第四章：KITTI数据集的评价指标</h3> 
<p>KITTI数据集可以针对很多下游任务，本文只针对3D目标检测的评价数值进行详细解释，如下图所示。</p> 
<figure class="half"> 
 <img src="https://images2.imgbox.com/bd/64/LKkRDYiO_o.png"> 
 <img src="https://images2.imgbox.com/63/a4/pBc0X5HI_o.png"> 
</figure> 
<p>在论文 <a href="https://openaccess.thecvf.com/content_ICCV_2019/papers/Simonelli_Disentangling_Monocular_3D_Object_Detection_ICCV_2019_paper.pdf" rel="nofollow">Disentangling Monocular 3D Object Detection</a> 中对KITTI 3D的评价指标进行了回顾，以及提出了修改：由原来的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         P 
        
        
        
          ∣ 
         
         
         
           R 
          
         
           11 
          
         
        
       
      
        AP|_{R_{11}} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em;"><span class="" style="top: -2.357em; margin-left: -0.0077em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 修改为了 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         P 
        
        
        
          ∣ 
         
         
         
           R 
          
         
           40 
          
         
        
       
      
        AP|_{R_{40}} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em;"><span class="" style="top: -2.357em; margin-left: -0.0077em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">40</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span></span></span></span></span> ，而且KITTI官方也认可了该指标。下面先简单回顾 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         P 
        
        
        
          ∣ 
         
         
         
           R 
          
         
           11 
          
         
        
       
      
        AP|_{R_{11}} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em;"><span class="" style="top: -2.357em; margin-left: -0.0077em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，称为 <code>11-point Interpolated Average Precision</code>，表示11点插值平均精度，公式为：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          A 
         
        
          P 
         
         
         
           ∣ 
          
         
           R 
          
         
        
          = 
         
         
         
           1 
          
          
          
            ∣ 
           
          
            R 
           
          
            ∣ 
           
          
         
         
         
           ∑ 
          
          
          
            r 
           
          
            ∈ 
           
          
            R 
           
          
         
         
         
           ρ 
          
          
          
            i 
           
          
            n 
           
          
            t 
           
          
            e 
           
          
            r 
           
          
            p 
           
          
         
        
          ( 
         
        
          r 
         
        
          ) 
         
        
       
         AP|_{R} =\frac{1}{|R|} \sum_{r\in R}\rho_{interp}(r) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.6431em; vertical-align: -1.3217em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3214em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord">∣</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05em;"><span class="" style="top: -1.8557em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.3217em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">er</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span></span></span><br> 其中插值函数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          ρ 
         
         
         
           i 
          
         
           n 
          
         
           t 
          
         
           e 
          
         
           r 
          
         
           p 
          
         
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
         = 
        
        
         
         
           max 
          
         
           ⁡ 
          
         
         
          
          
            r 
           
           
            
           
             ′ 
            
           
          
         
           : 
          
          
          
            r 
           
           
            
           
             ′ 
            
           
          
         
           &gt; 
          
         
           r 
          
         
        
       
         ρ 
        
       
         ( 
        
        
        
          r 
         
         
          
         
           ′ 
          
         
        
       
         ) 
        
       
      
        \rho_{interp}(r)=\max_{r^{'}:r^{'}&gt; r} \rho(r^{'}) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">er</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.25em; vertical-align: -0.3075em;"></span><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.4198em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8928em;"><span class="" style="top: -2.8928em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8496em;"><span class="" style="top: -2.8496em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mrel mtight">:</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8928em;"><span class="" style="top: -2.8928em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8496em;"><span class="" style="top: -2.8496em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mrel mtight">&gt;</span><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3075em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">ρ</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9425em;"><span class="" style="top: -2.9425em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8278em;"><span class="" style="top: -2.931em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，在KITTI3D中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
        
          11 
         
        
       
         = 
        
        
        
          { 
         
        
          0 
         
        
          , 
         
         
         
           1 
          
         
           10 
          
         
        
          , 
         
         
         
           2 
          
         
           10 
          
         
        
          , 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          , 
         
        
          1 
         
        
          } 
         
        
       
      
        R_{11}=\left \{0,\frac{1}{10},\frac{2}{10},...,1 \right \} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.2em; vertical-align: -0.35em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">{<!-- --></span></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">}</span></span></span></span></span></span></span>，但是从插值函数的形式可以看出，它并不是取每个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
      
        r 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 实际观察值的平均值，而是取其中的最大值。<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
      
        r 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 从0开始取，则如果只有单个预测，而且是正确匹配的，则此时对应的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          ρ 
         
         
         
           i 
          
         
           n 
          
         
           t 
          
         
           e 
          
         
           r 
          
         
           p 
          
         
        
       
         ( 
        
       
         0 
        
       
         ) 
        
       
         = 
        
       
         1 
        
       
      
        \rho_{interp}(0)=1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">er</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>。如果每个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
      
        r 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 都能够提供单一的且正确匹配的预测，那么整个数据集的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         P 
        
        
        
          ∣ 
         
         
         
           R 
          
         
           11 
          
         
        
       
         = 
        
        
        
          1 
         
        
          11 
         
        
       
         = 
        
       
         0.909 
        
       
      
        AP|_{R_{11}}=\frac{1}{11}=0.909 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em;"><span class="" style="top: -2.357em; margin-left: -0.0077em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1901em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0.909</span></span></span></span></span>，这个精度已经超过了很多方法，显然这无法正确地评估算法的质量。因此，该论文中提出：不对41个点进行下采样，而是直接利用40个点进行AP的计算，即将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
        
          11 
         
        
       
         = 
        
        
        
          { 
         
        
          0 
         
        
          , 
         
         
         
           1 
          
         
           10 
          
         
        
          , 
         
         
         
           2 
          
         
           10 
          
         
        
          , 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          , 
         
        
          1 
         
        
          } 
         
        
       
      
        R_{11}=\left \{0,\frac{1}{10},\frac{2}{10},...,1 \right \} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.2em; vertical-align: -0.35em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">{<!-- --></span></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">}</span></span></span></span></span></span></span> 修改为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
        
          40 
         
        
       
         = 
        
        
        
          { 
         
         
         
           1 
          
         
           40 
          
         
        
          , 
         
         
         
           2 
          
         
           40 
          
         
        
          , 
         
         
         
           3 
          
         
           40 
          
         
        
          , 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          , 
         
        
          1 
         
        
          } 
         
        
       
      
        R_{40}=\left \{\frac{1}{40},\frac{2}{40},\frac{3}{40},...,1 \right \} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">40</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.2em; vertical-align: -0.35em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">{<!-- --></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">40</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">40</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">40</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">}</span></span></span></span></span></span></span>，后面基本上都是采用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         P 
        
        
        
          ∣ 
         
         
         
           R 
          
         
           40 
          
         
        
       
      
        AP|_{R_{40}} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0001em; vertical-align: -0.2501em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em;"><span class="" style="top: -2.357em; margin-left: -0.0077em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">40</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2501em;"><span class=""></span></span></span></span></span></span></span></span></span></span>进行<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         P 
        
       
      
        AP 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span></span></span></span></span>的计算了。</p> 
<p>我们回到前面图片的其它指标，上图是基于mmdetection3d的 <code>PointPillars</code> 模型跑出来的kitti验证结果，训练的是3个类别，分别是行人、骑行者和汽车，对于这三个类其实含义一样，以下就以Car的数值为例进行解释。<br> <img src="https://images2.imgbox.com/cd/4c/IkpotnQH_o.png" alt="car"><br> 我们可以看到，对于Car的评价结果分成两部分，分别是我们的红色框和蓝色框部分。首先解释第一个红色框内容：</p> 
<ul><li>第一行 Car AP40@0.70, 0.70, 0.70：<br> <code>Car</code>表示类别，<code>AP40</code>表示平均准确率（Average Precision），后面<code>三个0.70</code>都是指IOU threshold（目标检测中用于评价预测输出边界框与真实框的重叠情况而设置的阈值，从而判断预测结果是否为positive）。我们需要注意<code>第一个0.70</code>是bbox对应的IOU，表示的意思是在bbox下，只有当预测输出与真实框的IOU大于0.70，才认为该输出是正确的；<code>第二个0.70</code>是bev对应的IOU，表示的意思是在bev下，只有当预测输出与真实框的IOU大于0.70，才认为该输出是正确的；<code>第三个0.70</code>是3d对应的IOU，表示的意思是在3d下，只有当预测输出与真实框的IOU大于0.70，才认为该输出是正确的。</li><li>第二、三、四行的<code>bbox</code>、<code>bev</code>和<code>3d</code>是对应的三种评价情况。<br> <code>bbox</code>就是2d下的检测；<code>bev</code>（bird’s eye view），就是鸟瞰图下的检测；<code>3d</code>就是3d下的检测。对于二、三、四、五行，每一行都有三个数值，分别对应的是Easy、Moderate和Hard下的评估结果，表示难度越来越大，所以数值也越来越小。</li><li>第五行 <code>aos</code>是对应于物体的朝向预测指标。<br> <code>aos</code>表示平均朝向相似度（average orientation similarity），用于评价预测输出的朝向与真实框的朝向的相似程度，通俗来说就是朝向预测得是否准确，结果是越高越好。</li></ul> 
<p>第一个红色框内容讲完，接着到第二个蓝色框内容。我们可以发现这两个框的内容基本上是一模一样，唯一区别就是三个IOU改为了0.70,0.50,0.50。也就是说，对于<code>bbox</code>，它的IOU阈值没有改变，既然IOU阈值没有改变，那么结果当然是一模一样的，所以可以看到两个框的第二行的数值是完全一样的。而对于<code>bev</code>和<code>3d</code>，它们的IOU阈值降低了0.20（从0.70, 0.70降低到了0.50, 0.50），通俗地讲就是要求降低了，那么评估的AP结果自然就提高了，所以蓝色框中的第三和第四行的结果要比红色框中的要高。最后一行，对于<code>aos</code>指标，它的计算条件在这两个框里都是相同的，那么结果当然是一模一样的。</p> 
<h3><a id="KITTI_253"></a>第五章：KITTI数据集可视化</h3> 
<p>点云的可视化要比图像复杂，需要借助3D显示的工具和库，例如Mayavi、Open3D等。MMDetection 3D基于Open3D构建了若干可视化点云的工具，这里我们采用Open3D来进行点云可视化，使用命令<code>pip install open3d</code>安装Open3D库。</p> 
<pre><code class="prism language-bash"><span class="token comment"># 点云可视化</span>
python tools/misc/browse_dataset.py configs/_base_/datasets/kitti-3d-3class.py <span class="token punctuation">\</span>
	--task lidar_det <span class="token punctuation">\</span>
	--output-dir work_dirs/lidar
</code></pre> 
<p>运行上面的命令后将依次展现出KITTI数据集所有点云的可视化结果，如下图所示：<br> <img src="https://images2.imgbox.com/38/c5/70XCn8fU_o.png" alt="原图"><br> <img src="https://images2.imgbox.com/8c/66/I0zuZOQc_o.png" alt="点云可视化"><br> 至此，相信大家对于KITTI数据集会有一个更好的理解！感谢大家的观看！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40a92006a4cf2851d3d6e1de628ec37d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python语音识别whisper</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/46fbc9e48611142b139c8e769f3234d2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MMSegmentation系列之训练与推理自己的数据集（三）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>