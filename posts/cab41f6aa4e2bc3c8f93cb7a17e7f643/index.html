<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot 创建你自己的自动配置中文文档 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring Boot 创建你自己的自动配置中文文档" />
<meta property="og:description" content="本文为官方文档直译版本。原文链接
Spring Boot 创建你自己的自动配置中文文档 引言了解自动配置 Bean查找自动配置候选对象条件注释Class ConditionsBean ConditionsProperty ConditionsResource ConditionsWeb Application ConditionsSpEL Expression Conditions 测试你的自动配置模拟Web Context覆盖 Classpath 创建你自己的 Starter命名配置 keysautoconfigure 模块Starter 模块 引言 如果您在开发共享库的公司工作，或者如果您在开发开源或商业库，您可能想开发自己的自动配置。自动配置类可以捆绑在外部 jar 中，但仍会被 Spring Boot 接收。
自动配置可以与 “starter” 相关联，“starter” 提供自动配置代码以及与之配合使用的典型库。我们首先介绍构建自己的自动配置所需的知识，然后介绍创建自定义启动器所需的典型步骤。
了解自动配置 Bean 实现自动配置的类用 @AutoConfiguration 进行注解。该注解本身用 @Configuration 元注解，使自动配置成为标准的 @Configuration 类。附加的 @Conditional 注解用于限制何时应用自动配置。通常，自动配置类使用 @ConditionalOnClass 和 @ConditionalOnMissingBean 注解。这样可以确保自动配置仅在找到相关类且未声明自己的 @Configuration 时才会应用。
您可以浏览 spring-boot-autoconfigure 的源代码，查看 Spring 提供的 @AutoConfiguration 类（参见 META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports 文件）。
查找自动配置候选对象 Spring Boot 会检查发布的 jar 中是否存在 META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports 文件。该文件应列出配置类，每行一个类名，如下例所示：
com.mycorp.libx.autoconfigure.LibXAutoConfiguration com.mycorp.libx.autoconfigure.LibXWebAutoConfiguration 您可以使用 # 字符为导入文件添加注释。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/cab41f6aa4e2bc3c8f93cb7a17e7f643/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-17T09:45:50+08:00" />
<meta property="article:modified_time" content="2023-12-17T09:45:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot 创建你自己的自动配置中文文档</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>本文为官方文档直译版本。<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-auto-configuration" rel="nofollow">原文链接</a></p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>Spring Boot 创建你自己的自动配置中文文档</h4> 
 <ul><li><ul><li><a href="#_4" rel="nofollow">引言</a></li><li><a href="#_Bean_7" rel="nofollow">了解自动配置 Bean</a></li><li><a href="#_10" rel="nofollow">查找自动配置候选对象</a></li><li><a href="#_23" rel="nofollow">条件注释</a></li><li><ul><li><a href="#Class_Conditions_33" rel="nofollow">Class Conditions</a></li><li><a href="#Bean_Conditions_66" rel="nofollow">Bean Conditions</a></li><li><a href="#Property_Conditions_92" rel="nofollow">Property Conditions</a></li><li><a href="#Resource_Conditions_94" rel="nofollow">Resource Conditions</a></li><li><a href="#Web_Application_Conditions_96" rel="nofollow">Web Application Conditions</a></li><li><a href="#SpEL_Expression_Conditions_99" rel="nofollow">SpEL Expression Conditions</a></li></ul> 
   </li><li><a href="#_103" rel="nofollow">测试你的自动配置</a></li><li><ul><li><a href="#Web_Context_165" rel="nofollow">模拟Web Context</a></li><li><a href="#_Classpath_167" rel="nofollow">覆盖 Classpath</a></li></ul> 
   </li><li><a href="#_Starter_176" rel="nofollow">创建你自己的 Starter</a></li><li><ul><li><a href="#_185" rel="nofollow">命名</a></li><li><a href="#_keys_188" rel="nofollow">配置 keys</a></li><li><a href="#autoconfigure__220" rel="nofollow">autoconfigure 模块</a></li><li><a href="#Starter__260" rel="nofollow">Starter 模块</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_4"></a>引言</h3> 
<p>如果您在开发共享库的公司工作，或者如果您在开发开源或商业库，您可能想开发自己的自动配置。自动配置类可以捆绑在外部 jar 中，但仍会被 Spring Boot 接收。<br> 自动配置可以与 “starter” 相关联，“starter” 提供自动配置代码以及与之配合使用的典型库。我们首先介绍构建自己的自动配置所需的知识，然后介绍创建自定义启动器所需的典型步骤。</p> 
<h3><a id="_Bean_7"></a>了解自动配置 Bean</h3> 
<p>实现自动配置的类用 <code>@AutoConfiguration</code> 进行注解。该注解本身用 <code>@Configuration</code> 元注解，使自动配置成为标准的 <code>@Configuration</code> 类。附加的 <code>@Conditional</code> 注解用于限制何时应用自动配置。通常，自动配置类使用 <code>@ConditionalOnClass</code> 和 <code>@ConditionalOnMissingBean</code> 注解。这样可以确保自动配置仅在找到相关类且未声明自己的 <code>@Configuration</code> 时才会应用。<br> 您可以浏览 <a href="https://github.com/spring-projects/spring-boot/tree/v3.2.0/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure">spring-boot-autoconfigure</a> 的源代码，查看 Spring 提供的 <code>@AutoConfiguration</code> 类（参见 <a href="https://github.com/spring-projects/spring-boot/tree/v3.2.0/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports">META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</a> 文件）。</p> 
<h3><a id="_10"></a>查找自动配置候选对象</h3> 
<p>Spring Boot 会检查发布的 jar 中是否存在 <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> 文件。该文件应列出配置类，每行一个类名，如下例所示：</p> 
<pre><code>com.mycorp.libx.autoconfigure.LibXAutoConfiguration
com.mycorp.libx.autoconfigure.LibXWebAutoConfiguration
</code></pre> 
<blockquote> 
 <p>您可以使用 # 字符为导入文件添加注释。</p> 
</blockquote> 
<blockquote> 
 <p>自动配置必须通过在导入文件中命名的方式加载。确保它们被定义在特定的包空间中，并且永远不会成为组件扫描的目标。此外，自动配置类不应允许组件扫描查找其他组件。应使用特定的 <code>@Import</code> 注解来代替。</p> 
</blockquote> 
<p>如果需要按特定顺序应用配置，可以使用 <a href="https://github.com/spring-projects/spring-boot/tree/v3.2.0/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfiguration.java">@AutoConfiguration</a> 注解或专用的 <a href="https://github.com/spring-projects/spring-boot/tree/v3.2.0/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigureBefore.java">@AutoConfigureBefore</a><code>和</code><a href="https://github.com/spring-projects/spring-boot/tree/v3.2.0/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigureAfter.java">@AutoConfigureAfter</a> 注解中的 <code>before</code>、<code>beforeName</code>、<code>after</code> 和 <code>afterName</code> 属性。例如，如果您提供特定于 Web 的配置，您的类可能需要在 <code>WebMvcAutoConfiguration</code> 之后应用。<br> 如果您想对某些不应直接相互了解的自动配置进行排序，也可以使用 <code>@AutoConfigureOrder</code>。该注解与常规的 <code>@Order</code> 注解语义相同，但为自动配置类提供了专用的顺序。<br> 与标准的 <code>@Configuration</code> 类一样，应用自动配置类的顺序只影响定义其 Bean 的顺序。随后创建这些 Bean 的顺序不受影响，而是由每个 Bean 的依赖关系和任何 <code>@DependsOn</code> 关系决定。</p> 
<h3><a id="_23"></a>条件注释</h3> 
<p>您几乎总是希望在自动配置类中包含一个或多个 <code>@Conditional</code> 注解。<code>@ConditionalOnMissingBean</code> 注解就是一个常见的例子，它允许开发人员在对默认值不满意时覆盖自动配置。<br> Spring Boot 包含大量 <code>@Conditional</code> 注解，您可以通过注解 <code>@Configuration</code> 类或单个 <code>@Bean</code> 方法在自己的代码中重复使用这些注解。这些注解包括</p> 
<ul><li>Class Conditions</li><li>Bean Conditions</li><li>Property Conditions</li><li>Resource Conditions</li><li>Web Application Conditions</li><li>SpEL Expression Conditions</li></ul> 
<h4><a id="Class_Conditions_33"></a>Class Conditions</h4> 
<p><code>@ConditionalOnClass</code> 和 <code>@ConditionalOnMissingClass</code> 注解使 <code>@Configuration</code> 类可以根据特定类的存在或不存在而被包含。由于注解元数据是通过 ASM 解析的，因此您可以使用 <code>value</code> 属性来引用真正的类，即使该类实际上可能不会出现在运行应用程序的类路径中。如果希望使用字符串值指定类名，也可以使用 <code>name</code> 属性。<br> 在 <code>@Bean</code> 方法中，返回类型通常是条件的目标：在方法上的条件适用之前，JVM 将加载类并处理方法引用，如果类不存在，方法引用将失败。<br> 要处理这种情况，可以使用单独的 <code>@Configuration</code> 类来隔离条件，如下例所示：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">AutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@AutoConfiguration</span>
<span class="token comment">// Some conditions ...</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAutoConfiguration</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// Auto-configured beans ...</span>

    <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">SomeService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SomeServiceConfiguration</span> <span class="token punctuation">{<!-- --></span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
        <span class="token keyword">public</span> <span class="token class-name">SomeService</span> <span class="token function">someService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SomeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>如果使用 <code>@ConditionalOnClass</code> 或 <code>@ConditionalOnMissingClass</code> 作为元注解的一部分来编写自己的组合注解，则必须使用 <code>name</code>，因为在这种情况下引用类是不会被处理的。</p> 
</blockquote> 
<h4><a id="Bean_Conditions_66"></a>Bean Conditions</h4> 
<p><code>@ConditionalOnBean</code> 和 <code>@ConditionalOnMissingBean</code> 注解允许根据特定 Bean 的存在或不存在来包含 Bean。您可以使用 <code>value</code> 属性按类型指定 Bean，也可以使用 <code>name</code> 属性按名称指定 Bean。<code>search</code>属性可让您限制在搜索 Bean 时应考虑的 <code>ApplicationContext</code> 层次结构。<br> 在 <code>@Bean</code> 方法中使用时，目标类型默认为方法的返回类型，如下例所示：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">AutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@AutoConfiguration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAutoConfiguration</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">SomeService</span> <span class="token function">someService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SomeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>在前面的示例中，如果 <code>ApplicationContext</code> 中尚未包含 <code>SomeService</code> 类型的 Bean，则将创建 <code>someService</code> Bean。</p> 
<blockquote> 
 <p>您需要非常注意添加 Bean 定义的顺序，因为这些条件是根据目前已处理的内容进行评估的。因此，我们建议在自动配置类中只使用 <code>@ConditionalOnBean</code> 和 <code>@ConditionalOnMissingBean</code> 注解（因为这些注解保证在添加任何用户定义的 Bean 定义后加载）。</p> 
</blockquote> 
<blockquote> 
 <p><code>@ConditionalOnBean</code> 和 <code>@ConditionalOnMissingBean</code> 不会阻止 <code>@Configuration</code> 类的创建。在类级别使用这些条件与使用注解标记每个包含的 <code>@Bean</code> 方法之间的唯一区别是，如果条件不匹配，前者会阻止将 <code>@Configuration</code> 类注册为 Bean。</p> 
</blockquote> 
<blockquote> 
 <p>在声明 <code>@Bean</code> 方法时，请在方法的返回类型中提供尽可能多的类型信息。例如，如果 Bean 的具体类实现了一个接口，那么 Bean 方法的返回类型就应该是具体类而不是接口。在 <code>@Bean</code> 方法中提供尽可能多的类型信息在使用 Bean 条件时尤为重要，因为对这些条件的评估只能依赖于方法签名中可用的类型信息。</p> 
</blockquote> 
<h4><a id="Property_Conditions_92"></a>Property Conditions</h4> 
<p><code>@ConditionalOnProperty</code> 注解允许根据 Spring 环境属性进行配置。使用<code>prefix</code>和<code>name</code>属性指定应检查的属性。默认情况下，任何存在且不等于 false 的属性都会被匹配。您还可以使用 <code>havingValue</code> 和 <code>matchIfMissing</code> 属性创建更高级的检查。</p> 
<h4><a id="Resource_Conditions_94"></a>Resource Conditions</h4> 
<p><code>@ConditionalOnResource</code> 注解允许配置仅在特定资源存在时才被包含。资源可通过使用通常的 Spring 约定来指定，如下例所示：<code>file:/home/user/test.dat</code>。</p> 
<h4><a id="Web_Application_Conditions_96"></a>Web Application Conditions</h4> 
<p>通过 <code>@ConditionalOnWebApplication</code> 和 @<code>ConditionalOnNotWebApplication</code> 注解，可以根据应用程序是否是 Web 应用程序来进行配置。基于 servlet 的 Web 应用程序是指使用 Spring <code>WebApplicationContext</code>、定义<code>session</code>作用域或具有 <code>ConfigurableWebEnvironment</code> 的任何应用程序。反应式网络应用是指使用 <code>ReactiveWebApplicationContext</code> 或具有 <code>ConfigurableReactiveWebEnvironment</code> 的任何应用。<br> 通过 <code>@ConditionalOnWarDeployment</code> 和 <code>@ConditionalOnNotWarDeployment</code> 注解，可以根据应用程序是否是部署到 servlet 容器的传统 WAR 应用程序来进行配置。对于使用嵌入式 Web 服务器运行的应用程序，此条件将不匹配。</p> 
<h4><a id="SpEL_Expression_Conditions_99"></a>SpEL Expression Conditions</h4> 
<p><code>@ConditionalOnExpression</code> 注解允许根据 <a href="https://docs.spring.io/spring-framework/reference/core/expressions.html" rel="nofollow">SpEL 表达式</a>的结果加入配置。</p> 
<blockquote> 
 <p>在表达式中引用一个 Bean 会导致该 Bean 在上下文刷新处理的早期就被初始化。因此，Bean 无法进行后处理（如配置属性绑定），其状态也可能不完整。</p> 
</blockquote> 
<h3><a id="_103"></a>测试你的自动配置</h3> 
<p>自动配置会受到许多因素的影响：用户配置（<code>@Bean</code> 定义和<code>Environment</code>定制）、条件评估（特定库的存在）等。具体来说，每个测试都应创建一个定义明确的 <code>ApplicationContext</code>，它代表了这些自定义的组合。<code>ApplicationContextRunner</code> 提供了实现这一目标的绝佳方法。</p> 
<blockquote> 
 <p>在本地镜像中运行测试时，<code>ApplicationContextRunner</code> 无法工作。</p> 
</blockquote> 
<p><code>ApplicationContextRunner</code> 通常定义为测试类的一个字段，用于收集基本的通用配置。下面的示例确保始终调用 <code>MyServiceAutoConfiguration</code>：</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ApplicationContextRunner</span> contextRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationContextRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withConfiguration</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurations</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">MyServiceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>如果需要定义多个自动配置，则无需对其声明进行排序，因为它们的调用顺序与运行应用程序时完全相同。</p> 
</blockquote> 
<p>每个测试都可以使用运行程序来表示特定的用例。例如，下面的示例调用了用户配置（<code>UserConfiguration</code>），并检查自动配置是否正确关闭。调用<code>run</code>提供了一个回调上下文，可与 <code>AssertJ</code> 一起使用。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">defaultServiceBacksOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contextRunner<span class="token punctuation">.</span><span class="token function">withUserConfiguration</span><span class="token punctuation">(</span><span class="token class-name">UserConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasSingleBean</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"myCustomService"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isSameAs</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UserConfiguration</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">MyService</span> <span class="token function">myCustomService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyService</span><span class="token punctuation">(</span><span class="token string">"mine"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>还可以轻松自定义<code>Environment</code>，如下例所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">serviceNameCanBeConfigured</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contextRunner<span class="token punctuation">.</span><span class="token function">withPropertyValues</span><span class="token punctuation">(</span><span class="token string">"user.name=test123"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasSingleBean</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token string">"test123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行程序还可用于显示 <code>ConditionEvaluationReport</code>。报告可在 <code>INFO</code> 或 <code>DEBUG</code> 级别打印。下面的示例展示了如何使用 <code>ConditionEvaluationReportLoggingListener</code> 在自动配置测试中打印报告。</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span><span class="token class-name">ConditionEvaluationReportLoggingListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span><span class="token class-name">LogLevel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContextRunner</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyConditionEvaluationReportingTests</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">autoConfigTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">new</span> <span class="token class-name">ApplicationContextRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withInitializer</span><span class="token punctuation">(</span><span class="token class-name">ConditionEvaluationReportLoggingListener</span><span class="token punctuation">.</span><span class="token function">forLogLevel</span><span class="token punctuation">(</span><span class="token class-name">LogLevel</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// Test something...</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Web_Context_165"></a>模拟Web Context</h4> 
<p>如果需要测试仅在 servlet 或反应式网络应用上下文中运行的自动配置，请分别使用 <code>WebApplicationContextRunner</code> 或 <code>ReactiveWebApplicationContextRunner</code>。</p> 
<h4><a id="_Classpath_167"></a>覆盖 Classpath</h4> 
<p>还可以测试运行时不存在特定类 和/或 包时的情况。Spring Boot 随附的过滤类加载器（<code>FilteredClassLoader</code>）可方便运行程序使用。在下面的示例中，我们断言如果 <code>MyService</code> 不存在，自动配置将被正确禁用：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">serviceIsIgnoredIfLibraryIsNotPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contextRunner<span class="token punctuation">.</span><span class="token function">withClassLoader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FilteredClassLoader</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">assertThat</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doesNotHaveBean</span><span class="token punctuation">(</span><span class="token string">"myService"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_Starter_176"></a>创建你自己的 Starter</h3> 
<p>一个典型的 Spring Boot 启动程序包含自动配置和定制特定技术基础架构的代码，我们称之为 “acme”。为了使其易于扩展，可以向环境公开专用命名空间中的大量配置键。最后，我们还提供了一个单一的 “starter” 依赖项，以帮助用户轻松上手。<br> 具体来说，自定义Starter可以包含以下内容：</p> 
<ul><li>包含 "acme "自动配置代码的<code>autoconfigure</code>模块。</li><li><code>starter</code>模块，提供对<code>autoconfigure</code>模块、"acme "和任何通常有用的附加依赖关系的依赖。一言以蔽之，添加starter就能提供开始使用该库所需的一切。</li></ul> 
<p>这种将两个模块分开的做法完全没有必要。如果 "acme "有多种口味、选项或可选功能，那么最好将自动配置分开，因为这样可以清楚地表达某些功能是可选的。此外，您还可以制作一个starter，对这些可选的依赖性提出自己的看法。与此同时，其他人也可以只依赖自动配置模块，自己制作具有不同观点的启动器。<br> 如果自动配置比较简单，而且没有可选功能，那么合并starter中的两个模块无疑是一种选择。</p> 
<h4><a id="_185"></a>命名</h4> 
<p>您应确保为starter提供正确的命名空间。即使使用不同的 Maven <code>groupId</code>，也不要以 <code>spring-boot</code> 作为模块名的开头。我们可能会在未来为您的自动配置提供官方支持。<br> 根据经验，你应该用starter的名字来命名组合模块。例如，假设你正在为 "acme "创建一个starter，并将自动配置模块命名为 <code>acme-spring-boot</code>，将启动器命名为 <code>acme-spring-boot-starter</code>。如果只有一个模块将两者结合在一起，则将其命名为 <code>acme-spring-boot-starter</code>。</p> 
<h4><a id="_keys_188"></a>配置 keys</h4> 
<p>如果您的starter提供配置键，请为它们使用唯一的命名空间。特别是，不要在 Spring Boot 使用的命名空间（如 <code>server</code>、<code>management</code>、<code>spring</code> 等）中包含您的键。如果您使用相同的命名空间，我们将来可能会修改这些命名空间，从而破坏您的模块。根据经验，请在所有键的前缀加上您拥有的命名空间（例如 <code>acme</code>）。<br> 为每个属性添加 javadoc 字段，确保配置键都有文档记录，如下例所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">"acme"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AcmeProperties</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * Whether to check the location of acme resources.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> checkLocation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Timeout for establishing a connection to the acme server.
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Duration</span> loginTimeout <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// getters/setters ...</span>

<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>在 <code>@ConfigurationProperties</code> 字段 Javadoc 中只能使用纯文本，因为它们在添加到 JSON 之前不会被处理。</p> 
</blockquote> 
<p>以下是我们内部遵循的一些规则，以确保描述的一致性：</p> 
<ul><li>不要以 "The "或 "A "作为描述的开头。</li><li>对于<code>boolean</code>类型，以 “是否” 或 “启用” 开始描述。</li><li>对于基于集合的类型，以 "逗号分隔列表 "开始描述</li><li>使用 <code>java.time.Duration</code> 而不是 <code>long</code>，如果默认单位与毫秒不同，请对其进行说明，如 “如果未指定持续时间后缀，将使用秒”。</li><li>除非必须在运行时确定，否则不要在说明中提供默认值。</li></ul> 
<p>确保触发元数据生成，以便 IDE 也能为你的keys提供帮助。你可能需要查看生成的元数据（<code>META-INF/spring-configuration-metadata.json</code>），以确保你的keys得到了正确的记录。在兼容的集成开发环境中使用自己的starter也是验证元数据质量的一个好主意。</p> 
<h4><a id="autoconfigure__220"></a>autoconfigure 模块</h4> 
<p>自动配置模块包含了开始使用该库所需的一切内容。它还可能包含配置键定义（如 <code>@ConfigurationProperties</code>）和任何可用于进一步自定义组件初始化方式的回调接口。</p> 
<blockquote> 
 <p>您应该将对该库的依赖标记为可选，这样您就可以更轻松地在项目中包含自动配置模块。如果这样做，就不会提供该库，默认情况下，Spring Boot 会退出。</p> 
</blockquote> 
<p>Spring Boot 使用注解处理器在元数据文件（<code>META-INF/spring-autoconfigure-metadata.properties</code>）中收集自动配置的条件。如果存在该文件，它将用于急切地过滤不匹配的自动配置，从而缩短启动时间。<br> 使用 Maven 构建时，建议在包含自动配置的模块中添加以下依赖关系：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>如果您直接在应用程序中定义了自动配置，请确保配置了 <code>spring-boot-maven-plugin</code> 以防止<code>repackage</code>任务将依赖关系添加到 uber jar 中：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在 Gradle 中，应在 <code>annotationProcessor</code> 配置中声明依赖关系，如下例所示：</p> 
<pre><code class="prism language-groovy">dependencies <span class="token punctuation">{<!-- --></span>
    annotationProcessor <span class="token interpolation-string"><span class="token string">"org.springframework.boot:spring-boot-autoconfigure-processor"</span></span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Starter__260"></a>Starter 模块</h4> 
<p>starter实际上是一个空 jar。它的唯一目的是提供使用库所需的依赖项。你可以把它看作是对开始工作所需内容的一种观点。<br> 不要对添加starter的项目作出假设。如果您要自动配置的库通常需要其他starter，请一并提及。如果可选依赖项的数量较多，提供一组适当的默认依赖项可能会比较困难，因为您应避免包含对于库的典型用法而言不必要的依赖项。换句话说，不应包含可选依赖项。</p> 
<blockquote> 
 <p>无论采用哪种方式，您的starter都必须直接或间接引用 Spring Boot 核心启动器 (<code>spring-boot-starter</code>)（如果您的starter依赖于其他starter，则无需添加）。如果仅使用自定义启动器创建项目，Spring Boot 的核心功能将因核心启动器的存在而得到尊重。</p> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b2bdd091634fa7cfd2e05a5ff5585ab3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">v-bind in vue style</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/65e559bd222218e0f478396cea66b321/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux笔记--VSCode利用交换机跳转服务器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>