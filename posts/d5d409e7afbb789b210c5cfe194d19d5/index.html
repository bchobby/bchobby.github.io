<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CICD之 gitlab和gtilab runner - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CICD之 gitlab和gtilab runner" />
<meta property="og:description" content="gitlab官网地址
官网文档地址 https://docs.gitlab.com/runner/install/docker.html
一。gitlab 1。gitlab安装 方式一：rpm包安装（centos） 1,下载rpm包 清华源软件镜像站https://mirrors.tuna.tsinghua.edu.cn/ linux命令wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ee/yum/el7/gitlab-ee-12.9.0-ee.0.el7.x86_64.rpm --no-check-certificate 或者windows电脑访问软件直接下载rpm包然后上传linux 2.运行rmp包 rpm -ivh gitlab-ce-12.9.0-ce.0.e17.x86_64.rpm 3.修改项目仓库存储地址 vim /etc/gitlab/gitlab.rb，搜索git_data_dirs，修改项目存储路径 gitlab-ctl reconfigure，使生效 4。启动 gitlab-ctl start //启动 gitlab-ctl status //查看状态 gitlab-ctl stop //停止 方式二：docker安装 1.gitlab文件夹下创建三个文件夹作为映射文件夹(容器卷) :config logs data 2,拉取镜像:docker pull gitlab/gitlab-ce 3.运行镜像 docker run -d --hostname 192.168.61.146 //有hostname，不然后面创建项目的克隆地址是随机的 -p 443:443 -p 80:80 -p 222:22 --name gitlab-ce --restart always -v /home/piaoransheng/gitlab/config:/etc/gitlab -v /home/piaoransheng/gitlab/logs:/var/log/gitlab -v /home/piaoransheng/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce 4.修改项目仓库存储地址 vim /etc/gitlab/gitlab.rb，搜索git_data_dirs，修改项目存储路径 gitlab-ctl reconfigure，使生效 5.启动 docker start gitlab-ce //启动 docker stop gitlab-ce //停止下· docker rm gitlab-ce //删除 6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/d5d409e7afbb789b210c5cfe194d19d5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-19T14:54:02+08:00" />
<meta property="article:modified_time" content="2022-01-19T14:54:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CICD之 gitlab和gtilab runner</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://about.gitlab.com/" rel="nofollow">gitlab官网地址</a><br> <a href="https://docs.gitlab.com/runner/install/docker.html" rel="nofollow">官网文档地址 https://docs.gitlab.com/runner/install/docker.html</a></p> 
<h2><a id="gitlab_3"></a>一。gitlab</h2> 
<h4><a id="1gitlab_4"></a>1。gitlab安装</h4> 
<pre><code class="prism language-javascript">方式一：rpm包安装（centos）
   <span class="token number">1</span><span class="token punctuation">,</span>下载rpm包
	  清华源软件镜像站https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">mirrors.tuna.tsinghua.edu.cn</span><span class="token regex-delimiter">/</span></span>
	  linux命令wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>gitlab<span class="token operator">-</span>ee<span class="token operator">/</span>yum<span class="token operator">/</span>el7<span class="token operator">/</span>gitlab<span class="token operator">-</span>ee<span class="token operator">-</span><span class="token number">12.9</span><span class="token number">.0</span><span class="token operator">-</span>ee<span class="token punctuation">.</span><span class="token number">0.</span>el7<span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm <span class="token operator">--</span>no<span class="token operator">-</span>check<span class="token operator">-</span>certificate
	   或者windows电脑访问软件直接下载rpm包然后上传linux
	   
	<span class="token number">2.</span>运行rmp包
	    rpm <span class="token operator">-</span>ivh gitlab<span class="token operator">-</span>ce<span class="token operator">-</span><span class="token number">12.9</span><span class="token number">.0</span><span class="token operator">-</span>ce<span class="token punctuation">.</span><span class="token number">0.e17</span><span class="token punctuation">.</span>x86_64<span class="token punctuation">.</span>rpm
	
	<span class="token number">3.</span>修改项目仓库存储地址
		vim <span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">/</span>gitlab<span class="token punctuation">.</span>rb，搜索git_data_dirs，修改项目存储路径
		gitlab<span class="token operator">-</span>ctl reconfigure，使生效
	

	<span class="token number">4</span>。启动
		gitlab<span class="token operator">-</span>ctl start    <span class="token comment">//启动</span>
		gitlab<span class="token operator">-</span>ctl status   <span class="token comment">//查看状态</span>
		gitlab<span class="token operator">-</span>ctl stop    <span class="token comment">//停止</span>

方式二：docker安装
	<span class="token number">1.</span><span class="token function">gitlab文件夹下创建三个文件夹作为映射文件夹</span><span class="token punctuation">(</span>容器卷<span class="token punctuation">)</span> <span class="token operator">:</span>config   logs   data
	<span class="token number">2</span><span class="token punctuation">,</span>拉取镜像<span class="token operator">:</span>docker pull gitlab<span class="token operator">/</span>gitlab<span class="token operator">-</span>ce
	<span class="token number">3.</span>运行镜像
		docker run 
			<span class="token operator">-</span>d 
			<span class="token operator">--</span>hostname <span class="token number">192.168</span><span class="token number">.61</span><span class="token number">.146</span>     <span class="token comment">//有hostname，不然后面创建项目的克隆地址是随机的</span>
			<span class="token operator">-</span>p <span class="token number">443</span><span class="token operator">:</span><span class="token number">443</span> <span class="token operator">-</span>p <span class="token number">80</span><span class="token operator">:</span><span class="token number">80</span> <span class="token operator">-</span>p <span class="token number">222</span><span class="token operator">:</span><span class="token number">22</span> 
			<span class="token operator">--</span>name gitlab<span class="token operator">-</span>ce
			<span class="token operator">--</span>restart always 
			<span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>gitlab<span class="token operator">/</span>config<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>gitlab
			<span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>gitlab<span class="token operator">/</span>logs<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>gitlab
			<span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>gitlab<span class="token operator">/</span>data<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>opt<span class="token operator">/</span>gitlab
		gitlab<span class="token operator">/</span>gitlab<span class="token operator">-</span>ce
		
	<span class="token number">4.</span>修改项目仓库存储地址
		vim <span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">/</span>gitlab<span class="token punctuation">.</span>rb，搜索git_data_dirs，修改项目存储路径
		gitlab<span class="token operator">-</span>ctl reconfigure，使生效
	

	<span class="token number">5.</span>启动
		docker start gitlab<span class="token operator">-</span>ce    <span class="token comment">//启动</span>
		docker stop  gitlab<span class="token operator">-</span>ce    <span class="token comment">//停止下·</span>
		docker rm    gitlab<span class="token operator">-</span>ce     <span class="token comment">//删除</span>

	<span class="token number">6.</span>测试访问：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token number">.61</span><span class="token number">.146</span><span class="token operator">/</span>users<span class="token operator">/</span>sign_in


方式三：docker<span class="token operator">-</span>compose安装
version<span class="token operator">:</span> <span class="token string">'3'</span>
services<span class="token operator">:</span> 
  gitlab<span class="token operator">:</span>
    image<span class="token operator">:</span> <span class="token number">10.10</span><span class="token number">.4</span><span class="token number">.129</span><span class="token operator">:</span><span class="token number">5000</span><span class="token operator">/</span>gitlab<span class="token operator">/</span>gitlab<span class="token operator">-</span>ce<span class="token operator">:</span>latest
    container_name<span class="token operator">:</span> gitlab
    hostname<span class="token operator">:</span> <span class="token number">10.10</span><span class="token number">.4</span><span class="token number">.129</span>   <span class="token comment">//如果有修改more端口80为2880，这边要加上端口2880</span>
    restart<span class="token operator">:</span> always
    privileged<span class="token operator">:</span> <span class="token boolean">true</span>   #避免挂载目录提示没有权限
    volumes<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>volumes<span class="token operator">/</span>config<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>gitlab
      <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>volumes<span class="token operator">/</span>logs<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>gitlab
      <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>volumes<span class="token operator">/</span>data<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>opt<span class="token operator">/</span>gitlab
    ports<span class="token operator">:</span> 
      <span class="token operator">-</span> <span class="token number">80</span><span class="token operator">:</span><span class="token number">80</span>
      <span class="token operator">-</span> <span class="token number">443</span><span class="token operator">:</span><span class="token number">443</span>
      <span class="token operator">-</span> <span class="token number">222</span><span class="token operator">:</span><span class="token number">22</span>


测试：http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">10.10.4.129</span><span class="token regex-delimiter">/</span></span>
</code></pre> 
<h4><a id="2gitlab_74"></a>2。gitlab登录与创建项目</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>登录网址<span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">192.168.61.146</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
初始账号：root
密码在：config<span class="token operator">/</span>initial_root_password里

创建组<span class="token operator">/</span>项目<span class="token operator">/</span>用户 menu<span class="token operator">-</span>admin——
查看项目        menu——project<span class="token operator">-</span>your project

设置中文：右上下三角号——<span class="token operator">&gt;</span>preferences——<span class="token operator">&gt;</span>Localization——<span class="token operator">&gt;</span>Language

设置root账号的密码：菜单——管理员——用户——点击管理员账号——编辑——更改密码root123456

项目代码存储在每个runner的<span class="token operator">/</span>builds<span class="token operator">/</span>root<span class="token operator">/</span>mygitlab<span class="token operator">-</span>project<span class="token operator">-</span><span class="token number">1</span>文件夹里面，注意不是gitlab，也不是gitlab<span class="token operator">-</span>runner，而是gitlab<span class="token operator">-</span>runner里面的runner
所以在注册runner时可以做个映射，具体见下面runner 注册
   gitlab<span class="token operator">-</span>runner register 
    <span class="token operator">--</span>docker<span class="token operator">-</span>volumes <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>projects<span class="token operator">:</span><span class="token operator">/</span>builds<span class="token operator">/</span>root <span class="token comment">//把runner运行的路径映射到本地,/builds/root是通过</span>

</code></pre> 
<h3><a id="gitlab_runner_94"></a>二。gitlab runner</h3> 
<h4><a id="1gitlab_runner_95"></a>1.gitlab runner安装</h4> 
<pre><code class="prism language-javascript"><span class="token number">1</span><span class="token punctuation">,</span>简介： gitlab<span class="token operator">-</span><span class="token function">runner是用来运行流水线，流水线是由一个一个的job</span><span class="token punctuation">(</span>作业<span class="token punctuation">)</span>拼接而成（项目根目录下的<span class="token punctuation">.</span>gitlab<span class="token operator">-</span>ci<span class="token punctuation">.</span>yml）
	    gitlab runner是一个开源项目，用于运行作业并将结果发送回Gitlab
        gitlab runner类似于Jenkins的agent，执行<span class="token constant">CI</span>持续继承、构建的脚本任务
		

<span class="token number">2.</span>gitlab runner类型与状态
   类型：
		shared 共享类型，运行整个平台项目的作业
		group  项目组类型，运行特定group下项目的作业
		specific 项目类型，运行指定项目的作业
	
	状态：
		locked 锁定状态
		paused 暂停状态
  
<span class="token number">3.</span>gtilab <span class="token function">runner安装</span>	
    <span class="token punctuation">(</span>两个必备映射：本机docker、gitlab<span class="token operator">-</span>runner配置文件<span class="token punctuation">)</span>
	docker run 
		<span class="token operator">-</span>d 
		<span class="token operator">--</span>name gitlab<span class="token operator">-</span>runner 
		<span class="token operator">--</span>restart always    
		<span class="token operator">-</span>v <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock   <span class="token comment">//要有这个，不然执行器类型为docker的runner无法运行 报错误 后台是否启动Docker Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running</span>
		<span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner  <span class="token comment">//配置文件的映射，用来修改runner拉取镜像策略，不然每次都要拉取作业所需镜像，比如maven，浪费时间并且docker images也会有多个maven的镜像</span>
	gitlab<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">:</span>latest
	
	测试<span class="token operator">:</span>docker ps 看到gitlab<span class="token operator">-</span>runner服务已经启动
	
	或者docker<span class="token operator">-</span>compose方式安装
		version<span class="token operator">:</span> <span class="token string">'3'</span>
		services<span class="token operator">:</span> 
		  gitlab<span class="token operator">-</span>runner<span class="token operator">:</span>
		    image<span class="token operator">:</span> <span class="token number">10.10</span><span class="token number">.4</span><span class="token number">.129</span><span class="token operator">:</span><span class="token number">5000</span><span class="token operator">/</span>gitlab<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">:</span>latest
		    container_name<span class="token operator">:</span> gitlab<span class="token operator">-</span>runner
		    hostname<span class="token operator">:</span> <span class="token number">10.10</span><span class="token number">.4</span><span class="token number">.129</span>
		    restart<span class="token operator">:</span> always
		    privileged<span class="token operator">:</span> <span class="token boolean">true</span>   #避免挂载目录提示没有权限
		    volumes<span class="token operator">:</span>
		      <span class="token operator">-</span> <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock
		      <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>volumes<span class="token operator">/</span>config<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner
</code></pre> 
<h4><a id="2runner_137"></a>2.注册runner</h4> 
<pre><code class="prism language-javascript"><span class="token number">1.</span>runner注册
	<span class="token number">1.</span>获取注册token   	
		shared类型token：menu——admin——overview——runners
		group类型token： men——groups——your groups——点击gruop——setting——<span class="token constant">CI</span><span class="token operator">/</span><span class="token constant">CD</span>——runners
		project类型token： menu——Projects——your projects——点击项目——setting——<span class="token constant">CI</span><span class="token operator">/</span><span class="token constant">CD</span>——runners
	
	<span class="token number">2.</span>注册<span class="token punctuation">,</span> <span class="token punctuation">(</span>注册后就会在容器里<span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config或者本机映射<span class="token punctuation">)</span>的config<span class="token punctuation">.</span>toml出现记录
		 a<span class="token punctuation">.</span>交互方式注册执行器类型为shell的runner
			a<span class="token punctuation">.</span>敲命令<span class="token operator">:</span>gitlab<span class="token operator">-</span>runner register，回车
			b<span class="token punctuation">.</span><span class="token function">根据提示粘贴注册地址，回车</span> <span class="token punctuation">(</span>见上面获取注册token<span class="token punctuation">)</span>
			c<span class="token punctuation">.</span><span class="token function">根据提示输入注册token，回车</span><span class="token punctuation">(</span>见上面获取注册token<span class="token punctuation">)</span>
			d<span class="token punctuation">.</span>根据提示输入runner描述<span class="token operator">:</span>build，回车
			e<span class="token punctuation">.</span>根据提示输入runner包名<span class="token operator">:</span>build，回车
			f<span class="token punctuation">.</span>根据提示输入runner执行器<span class="token operator">:</span><span class="token function">shell</span><span class="token punctuation">(</span>shell<span class="token operator">/</span>docker<span class="token operator">/</span>kubernetes<span class="token punctuation">)</span>，回车
			g<span class="token punctuation">.</span>测试 在menu——admin——overview——runners页面最下面出现刚才注册的那一条runner
		
		b<span class="token punctuation">.</span>docker方式注册执行器类型为shell的runner
			<span class="token number">1.</span>进入gitlab<span class="token operator">-</span>runner容器里面<span class="token operator">:</span> docker exec <span class="token operator">-</span>it  c82ccb670c86 <span class="token operator">/</span>bin<span class="token operator">/</span>bash
			<span class="token number">2.</span>敲命令
					gitlab<span class="token operator">-</span>runner register 
						<span class="token operator">--</span>non<span class="token operator">-</span>interactive      <span class="token comment">//非交互模式</span>
						<span class="token operator">--</span>executor <span class="token string">"shell"</span>    <span class="token comment">//执行器类型，有shell docker k8s</span>
						<span class="token operator">--</span>url <span class="token string">"http://192.168.61.146"</span>  <span class="token comment">//从gitlab页面获取 见上面获取注册token</span>
						<span class="token operator">--</span>registration<span class="token operator">-</span>token <span class="token string">"UNywwHz-3eofcXjtyfvS"</span>  <span class="token comment">//见上面获取注册token</span>
						<span class="token operator">--</span>description <span class="token string">"deploy"</span>
						<span class="token operator">--</span>tag<span class="token operator">-</span>list <span class="token string">"build,deploy"</span>  <span class="token comment">//runner 包名，后面脚本文件的tags要和这边对应，才会使用到这个runner</span>
						<span class="token operator">--</span>run<span class="token operator">-</span>untagged<span class="token operator">=</span><span class="token string">"true"</span>      <span class="token comment">//是否运行没有指定runner的作业</span>
						<span class="token operator">--</span>locked<span class="token operator">=</span><span class="token string">"false"</span>           <span class="token comment">//是否所帝国</span>
						<span class="token operator">--</span>access<span class="token operator">-</span>level<span class="token operator">=</span><span class="token string">"not_protected"</span>'
					
			<span class="token number">3.</span>测试 
			       在menu——admin——overview——runners页面最下面出现刚才注册的那一条runner
			       或者<span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config config<span class="token punctuation">.</span>toml
					
		c<span class="token punctuation">.</span>docker方式注册执行器类型为docker的runner（四个必备映射<span class="token operator">:</span>本机docker、项目路径、maven配置文件、maven仓库）
		     
			  gitlab<span class="token operator">-</span>runner register 
					<span class="token operator">--</span>non<span class="token operator">-</span>interactive      <span class="token comment">//非交互模式</span>
					<span class="token operator">--</span>executor <span class="token string">"docker"</span>    <span class="token comment">//执行器类型，有shell docker k8s</span>
					<span class="token operator">--</span>docker<span class="token operator">-</span>image alpine<span class="token operator">:</span>latest <span class="token comment">//docker运行默认镜像，执行器类型为docker的才需要</span>
					<span class="token operator">--</span>url <span class="token string">"http://192.168.61.146"</span>  <span class="token comment">//从gitlab页面获取 见上面获取注册token</span>
					<span class="token operator">--</span>registration<span class="token operator">-</span>token <span class="token string">"UNywwHz-3eofcXjtyfvS"</span> <span class="token comment">//见上面获取注册token</span>
					<span class="token operator">--</span>description <span class="token string">"deploy"</span>
					<span class="token operator">--</span>tag<span class="token operator">-</span>list <span class="token string">"build,deploy"</span>  <span class="token comment">//runner 包名</span>
					<span class="token operator">--</span>run<span class="token operator">-</span>untagged<span class="token operator">=</span><span class="token string">"true"</span>      <span class="token comment">//是否运行没有指定runner的作业</span>
					<span class="token operator">--</span>locked<span class="token operator">=</span><span class="token string">"false"</span>           <span class="token comment">//是否锁定</span>
					<span class="token operator">--</span>access<span class="token operator">-</span>level<span class="token operator">=</span><span class="token string">"not_protected"</span>
					<span class="token operator">--</span>docker<span class="token operator">-</span>volumes <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock  <span class="token comment">//也和本地docker映射</span>
					<span class="token operator">--</span>docker<span class="token operator">-</span>volumes <span class="token operator">/</span>home<span class="token operator">/</span>project<span class="token operator">/</span>docker<span class="token operator">/</span>conventional<span class="token operator">-</span>station<span class="token operator">:</span><span class="token operator">/</span>builds<span class="token operator">/</span>yongfu<span class="token operator">/</span>conventional<span class="token operator">-</span>station<span class="token operator">:</span><span class="token constant">Z</span>  <span class="token comment">//项目路径 这个需要注册完然后跑一个作业 echo "当前目录：$(pwd)看项目具体在容器哪里，然后再进去gitlab-runner的config.toml文件进行修改</span>
					 <span class="token operator">--</span>docker<span class="token operator">-</span>volumes <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>maven<span class="token operator">/</span>apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.8</span><span class="token number">.1</span><span class="token operator">/</span>conf<span class="token operator">/</span>settings<span class="token punctuation">.</span>xml<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>maven<span class="token operator">/</span>config<span class="token operator">/</span>setting<span class="token punctuation">.</span>xml   <span class="token comment">//maven配置文件</span>
					 <span class="token operator">--</span>docker<span class="token operator">-</span>volumes <span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>maven<span class="token operator">/</span>apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.8</span><span class="token number">.1</span><span class="token operator">/</span>cangku<span class="token operator">:</span><span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>maven<span class="token operator">/</span>apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.8</span><span class="token number">.1</span><span class="token operator">/</span>cangku    <span class="token comment">//maven仓库</span>
					 			
			  注意：执行器为docker类型的runner注册完去gitlab<span class="token operator">-</span>runner容器<span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config<span class="token punctuation">.</span>toml
			  对应的映射是<span class="token operator">/</span>home<span class="token operator">/</span>piaoransheng<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config<span class="token operator">/</span>config<span class="token punctuation">.</span>toml
			  在<span class="token punctuation">[</span><span class="token punctuation">[</span>runners<span class="token punctuation">.</span>docker<span class="token punctuation">]</span> image下面加上pull_policy <span class="token operator">=</span> <span class="token string">"if-not-present"</span> <span class="token comment">//拉取策略,就不用每次执行都要拉取镜像，执行器类型为docker的才需要		</span>
	
	测试：在menu——admin——overview——runners页面最下面出现刚才注册的那一条runner
			       或者<span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config config<span class="token punctuation">.</span>toml


<span class="token number">2.</span>gitlab<span class="token operator">-</span>runner一些命令（需要进入gitlab<span class="token operator">-</span>runner容器里面才能运行）
  卸载                     gitlab<span class="token operator">-</span>runner uninstall
  启动                     gitlab<span class="token operator">-</span>runner start
  重启                     gitlab<span class="token operator">-</span>runner restart
  停止                     gitlab<span class="token operator">-</span>runner stop
  状态                     gitlab<span class="token operator">-</span>runner status
  注册执行器：                                      gitlab<span class="token operator">-</span>runner register 
  已注册的执行器列表                                 gitlab<span class="token operator">-</span>runner list
  检查执行器是否可以连接<span class="token punctuation">,</span>但不验证gitlab是否正在使用它     gitlab<span class="token operator">-</span>runner verify
  删除                                        gitlab<span class="token operator">-</span>runner <span class="token keyword">delete</span>
  注销                                        gitlab<span class="token operator">-</span>runner unregister	  
  使用令牌注销执行器          gitlab<span class="token operator">-</span>runner unregister <span class="token operator">--</span>url http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token number">.61</span><span class="token number">.146</span> <span class="token operator">--</span>token UNywwHz<span class="token operator">-</span><span class="token number">3</span>eofcXjtyfvS
  使用名称注销执行器          gitlab<span class="token operator">-</span>runner unregister <span class="token operator">--</span>name gitlab<span class="token operator">-</span>runner<span class="token operator">-</span>name
  注销所有执行器              gitlab<span class="token operator">-</span>runner unregister <span class="token operator">--</span>all<span class="token operator">-</span>runners
			
	
<span class="token number">3.</span>运行流水线任务（流水线任务定义在项目根目录下的<span class="token punctuation">.</span>gitlab<span class="token operator">-</span>ci<span class="token punctuation">.</span>yml）
	<span class="token number">1</span>，项目创建gitlab<span class="token operator">-</span>ci<span class="token punctuation">.</span>yml文件  在gitlab页面，menu——project——your project——点击项目——<span class="token keyword">set</span> up ci<span class="token operator">/</span>cd
	   项目跟目录就出现了文件<span class="token punctuation">.</span>gitlab<span class="token operator">-</span>ci<span class="token punctuation">.</span>yml
    <span class="token number">2.</span>编辑<span class="token punctuation">.</span>gitlab<span class="token operator">-</span>ci<span class="token punctuation">.</span>yml定义流水线任务
    <span class="token number">3</span>。提交代码，流水线任务就执行了
</code></pre> 
<h4><a id="3_223"></a>3.流水线任务脚本编写</h4> 
<h5><a id="a__224"></a>a 创建脚本文件</h5> 
<pre><code class="prism language-yaml">menu——project——your project——点击项目——点击set up for CI/CD——选择分支点击create new CI/CD pileline
</code></pre> 
<p><img src="https://images2.imgbox.com/38/02/TlKniFHr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fa/65/ivt6JuS3_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="b___gitlabciyml_233"></a>b 验证脚本 .gitlab-ci.yml</h5> 
<pre><code class="prism language-javascript">校验：menu——projects——your projects——点击项目——<span class="token constant">CICD</span>——有个<span class="token constant">CI</span> <span class="token constant">LINT</span><span class="token punctuation">(</span>在run pipeline的左边<span class="token punctuation">)</span>
   把文件内容复制进去，然后validata
</code></pre> 
<h5><a id="c__gitlabciyml_238"></a>c 脚本语法 .gitlab-ci.yml</h5> 
<p>1.简览</p> 
<pre><code class="prism language-javascript">stages             全部阶段
cache<span class="token operator">:</span>             缓存，有全局缓存和作业缓存
environment         
inherit
services           执行器类型为docker的runner用到
images             执行器类型为docker的runner用到，有全局镜像和作业镜像
						默认images： 注册runner时声明<span class="token operator">:</span>alpine<span class="token operator">:</span>latest 
						全局images <span class="token operator">:</span> 流水线yml文件声明
						每个作业作业images<span class="token punctuation">,</span> 流水线yml文件声明
						作业有用作业的image，作业没有用全局的image，全局没有用默认的image						
job                 
	 scripts               作业任务
	 before_script<span class="token operator">:</span>        作业有用作业的，作业没有用全局的，全局没有就不执行
	 after_script<span class="token operator">:</span>		   作业有用作业的，作业没有用全局的，全局没有就不执行
	 tags                  指定哪个执行器
	 allow_failure         <span class="token function">是否允许失败</span><span class="token punctuation">(</span>默认<span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>如果为<span class="token boolean">true</span>，前面的Job失败，不会影响流水线后面的job的继续运行
	 retry                 作业失败时重试，直到达到retry指定的次数
	 timeout               <span class="token function">超时</span><span class="token punctuation">(</span>作业的超时时间可以超过项目级别超时时间，但是不能超过runner特定的超时时间<span class="token punctuation">)</span>
	 parallel
	 only                  定义哪些分支被执行
	 except                定义哪些分支不会被执行    
	 rules
	 workflow
	 artifacts             生成制品
	 depency               获取制品	
	 when                  <span class="token function">控制作业运行</span><span class="token punctuation">(</span>on_success  on_failure  always  manual  delayed  never<span class="token punctuation">)</span>
	                         前面阶段作业  成功        失败        总是     收到    延迟     从不				
</code></pre> 
<p>2.语法具体示例</p> 
<pre><code class="prism language-javascript">only<span class="token operator">:</span>
	<span class="token operator">-</span><span class="token function">dev</span><span class="token punctuation">(</span>dev分支<span class="token punctuation">)</span>    <span class="token operator">-</span> branches（所有分支）
except<span class="token operator">:</span>
	<span class="token operator">-</span>dev


cache<span class="token operator">:</span>      缓存，有全局缓存和作业缓存
  paths<span class="token operator">:</span> 
	<span class="token operator">-</span> target<span class="token operator">/</span> <span class="token operator">*</span><span class="token punctuation">.</span>jar


artifacts<span class="token operator">:</span>  #生成制品
   name<span class="token operator">:</span> mygitlab<span class="token operator">-</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SHAPSHOT</span><span class="token punctuation">.</span>jar  #制品名称
   when<span class="token operator">:</span> on_success   #job运行成功时做制品库
   paths<span class="token operator">:</span>             #源文件路径
     <span class="token operator">-</span> target<span class="token operator">/</span>xx<span class="token punctuation">.</span>jar
 
 dependencies<span class="token operator">:</span>    #使用制品
    <span class="token operator">-</span> build #job名称
</code></pre> 
<ol start="3"><li>三阶段试验成功示例</li></ol> 
<pre><code class="prism language-powershell">variables:
  IMAGE_NAME: <span class="token string">"conventional-station"</span>
  IMAGE_TAG: <span class="token string">"v1.0.0-snapshot.1.0"</span>
  CONTAINER_NAME: <span class="token string">"conventional-station"</span>
  DOCKER_FILE_PATH: <span class="token string">"./Dockerfile"</span>

stages:          <span class="token comment">#定义这个流水线的所有阶段</span>
  <span class="token operator">-</span> Build
  <span class="token operator">-</span> Image
  <span class="token operator">-</span> Deploy

build:               <span class="token comment">#自定义的作业名称</span>
  stage: Build       <span class="token comment">#处于流水线哪个阶段</span>
  tags:              <span class="token comment">#用哪个注册过的runner，页面menu——admin——overview——runners 最下面显示所有runner</span>
    <span class="token operator">-</span> dev<span class="token operator">-</span>executor
  only:
    <span class="token operator">-</span> dev
  image: maven:3<span class="token operator">-</span>openjdk<span class="token operator">-</span>11       <span class="token comment">#在哪个镜像环境里面运行</span>
  script:
    <span class="token operator">-</span> <span class="token function">echo</span> <span class="token string">"当前目录：<span class="token function">$<span class="token punctuation">(</span><span class="token function">pwd</span><span class="token punctuation">)</span></span>"</span>   <span class="token comment"># builds/root/mygitlab-project-1(在这个maven容器，如果shell启动是在gitlab-runner容器)</span>
    <span class="token operator">-</span> <span class="token function">ls</span>
    <span class="token operator">-</span> <span class="token function">echo</span> <span class="token string">"编译打包"</span>
    <span class="token operator">-</span> mvn clean package <span class="token operator">-</span>Dmaven<span class="token punctuation">.</span>test<span class="token punctuation">.</span>skip=true <span class="token operator">-</span>s <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>maven<span class="token operator">/</span>config<span class="token operator">/</span>setting<span class="token punctuation">.</span>xml  <span class="token comment">#-s指定配置文件</span>
    <span class="token operator">-</span> <span class="token function">ls</span>
    <span class="token operator">-</span> <span class="token function">ls</span> target
  artifacts:
    name: <span class="token variable">$IMAGE_NAME</span><span class="token operator">-</span>1<span class="token punctuation">.</span>0<span class="token operator">-</span>SHAPSHOT<span class="token punctuation">.</span>jar  <span class="token comment">#制品名称</span>
    when: on_success   <span class="token comment">#job运行成功时做制品库</span>
    expire_in: 30 days <span class="token comment">#保留时间</span>
    paths:             <span class="token comment">#源文件路径</span>
      <span class="token operator">-</span> target/<span class="token operator">*</span><span class="token punctuation">.</span>jar


creatImage:
  stage: Image
  tags:
    <span class="token operator">-</span> dev<span class="token operator">-</span>executor
  image: bradj<span class="token operator">/</span>docker:latest
  dependencies:    <span class="token comment">#使用制品</span>
    <span class="token operator">-</span> build <span class="token comment">#job名称</span>
  script:
    <span class="token operator">-</span> <span class="token function">echo</span> <span class="token string">"当前目录：<span class="token function">$<span class="token punctuation">(</span><span class="token function">pwd</span><span class="token punctuation">)</span></span>"</span>   <span class="token comment"># docker镜像路径：builds/root/mygitlab-project-1</span>
    <span class="token operator">-</span> <span class="token function">ls</span>
    <span class="token operator">-</span> <span class="token function">echo</span> <span class="token string">"构建镜像"</span>

    <span class="token comment">#停止并关闭容器</span>
    <span class="token operator">-</span> &gt;
      <span class="token keyword">if</span> docker <span class="token function">ps</span> <span class="token punctuation">|</span> grep $<span class="token punctuation">{<!-- --></span>CONTAINER_NAME<span class="token punctuation">}</span> <span class="token punctuation">;</span>then
        <span class="token function">echo</span> <span class="token string">"进入停止容器"</span>
        docker stop `docker <span class="token function">ps</span> <span class="token operator">-</span>a <span class="token punctuation">|</span> grep $<span class="token punctuation">{<!-- --></span>CONTAINER_NAME<span class="token punctuation">}</span> <span class="token punctuation">|</span> awk <span class="token string">'{print $1}'</span> `
      fi
    <span class="token operator">-</span> &gt;
      <span class="token keyword">if</span> docker <span class="token function">ps</span> <span class="token operator">-</span>a <span class="token punctuation">|</span> grep $<span class="token punctuation">{<!-- --></span>CONTAINER_NAME<span class="token punctuation">}</span> <span class="token punctuation">;</span>then
        <span class="token function">echo</span> <span class="token string">"进入删除容器"</span>
        docker <span class="token function">rm</span>   `docker <span class="token function">ps</span> <span class="token operator">-</span>a <span class="token punctuation">|</span> grep $<span class="token punctuation">{<!-- --></span>CONTAINER_NAME<span class="token punctuation">}</span> <span class="token punctuation">|</span> awk <span class="token string">'{print $1}'</span> `
      fi

    <span class="token comment">#删除镜像</span>
    <span class="token operator">-</span> &gt;
      <span class="token keyword">if</span> docker images <span class="token punctuation">|</span> grep $<span class="token punctuation">{<!-- --></span>IMAGE_NAME<span class="token punctuation">}</span> <span class="token punctuation">|</span> awk <span class="token string">'{print $3}'</span> <span class="token punctuation">;</span>then
        <span class="token function">echo</span> <span class="token string">"进入删除镜像"</span>
        docker rmi $<span class="token punctuation">(</span>docker images <span class="token punctuation">|</span> grep $<span class="token punctuation">{<!-- --></span>IMAGE_NAME<span class="token punctuation">}</span> <span class="token punctuation">|</span> awk <span class="token string">'{print $3}'</span><span class="token punctuation">)</span>
      fi

    <span class="token comment">#构建镜像</span>
    <span class="token operator">-</span> docker build <span class="token operator">-</span>t $<span class="token punctuation">{<!-- --></span>IMAGE_NAME<span class="token punctuation">}</span>:$<span class="token punctuation">{<!-- --></span>IMAGE_TAG<span class="token punctuation">}</span> <span class="token punctuation">.</span>

deploy:
  stage: Deploy
  tags:
    <span class="token operator">-</span> dev<span class="token operator">-</span>executor
  image: bradj<span class="token operator">/</span>docker:latest
  script:
    <span class="token operator">-</span> <span class="token function">echo</span> <span class="token string">"容器名称：${CONTAINER_NAME}，  镜像：${IMAGE_NAME}:${IMAGE_TAG}"</span>
    <span class="token operator">-</span> docker run <span class="token operator">-</span>d  <span class="token operator">-</span>p 9091:9091 <span class="token operator">--</span>name $<span class="token punctuation">{<!-- --></span>CONTAINER_NAME<span class="token punctuation">}</span> $<span class="token punctuation">{<!-- --></span>IMAGE_NAME<span class="token punctuation">}</span>:$<span class="token punctuation">{<!-- --></span>IMAGE_TAG<span class="token punctuation">}</span>



踩坑记录：
 1<span class="token punctuation">.</span>提交代码部署报错提示环境内没有Dock：Docker Cannot connect to the Docker daemon at unix:<span class="token operator">/</span>/<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>docker<span class="token punctuation">.</span>sock<span class="token punctuation">.</span> Is the docker daemon running
     安装gitlab<span class="token operator">-</span>runner的时候映射本机docker，这样gitlab<span class="token operator">-</span>runner才能运行执行器类型为docker的runner

2<span class="token punctuation">.</span>runner每次执行脚本都重新再拉取所需镜像（gitlab<span class="token operator">-</span>runner要再拉取镜像，比如maven<span class="token punctuation">,</span>docker，配置gitlab<span class="token operator">-</span>runner）
      去runner容器里面的<span class="token operator">/</span>etc<span class="token operator">/</span>gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config config<span class="token punctuation">.</span>toml ，找到这个runner进行如下配置
       在<span class="token punctuation">[</span><span class="token namespace">[runners.docker]</span>下面加上pull_policy = <span class="token string">"if-not-present"</span> <span class="token operator">/</span><span class="token operator">/</span>拉取策略<span class="token punctuation">,</span>就不用每次都拉取镜像

3<span class="token punctuation">.</span>runner每次执行脚本都去下载依赖包导<span class="token punctuation">(</span>gitlab<span class="token operator">-</span>runner里面的容器要再下载依赖，配置gitlab<span class="token operator">-</span>runner里面的容器，比如maven<span class="token punctuation">)</span>
   a<span class="token punctuation">.</span>注册runner的时候映射maven配置文件、maven仓库（也可以注册完去gitlab<span class="token operator">-</span>runner<span class="token operator">/</span>config<span class="token operator">/</span>congit<span class="token punctuation">.</span>toml文件修改）
   b<span class="token punctuation">.</span>runner作业脚本指定maven配置文件 mvn clean package <span class="token operator">-</span>Dmaven<span class="token punctuation">.</span>test<span class="token punctuation">.</span>skip=true <span class="token operator">-</span>s <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>maven<span class="token operator">/</span>config<span class="token operator">/</span>setting<span class="token punctuation">.</span>xml

4<span class="token punctuation">.</span>运行jar包提示找不到主类
   pom加入插件
  &lt;build&gt;
	    &lt;plugins&gt;
	        &lt;plugin&gt;
	            &lt;groupId&gt;org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot&lt;<span class="token operator">/</span>groupId&gt;
	            &lt;artifactId&gt;spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin&lt;<span class="token operator">/</span>artifactId&gt;
	        &lt;<span class="token operator">/</span>plugin&gt;
	    &lt;<span class="token operator">/</span>plugins&gt;
	&lt;<span class="token operator">/</span>build&gt;



  	&lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot&lt;<span class="token operator">/</span>groupId&gt;
                &lt;artifactId&gt;spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin&lt;<span class="token operator">/</span>artifactId&gt;
                &lt;configuration&gt;
                    &lt;mainClass&gt;com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>MainApplication&lt;<span class="token operator">/</span>mainClass&gt;
                &lt;<span class="token operator">/</span>configuration&gt;
            &lt;<span class="token operator">/</span>plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins&lt;<span class="token operator">/</span>groupId&gt;
                &lt;artifactId&gt;maven<span class="token operator">-</span>compiler<span class="token operator">-</span>plugin&lt;<span class="token operator">/</span>artifactId&gt;
                &lt;configuration&gt;
                    &lt;source&gt;8&lt;<span class="token operator">/</span>source&gt;
                    &lt;target&gt;8&lt;<span class="token operator">/</span>target&gt;
                &lt;<span class="token operator">/</span>configuration&gt;
            &lt;<span class="token operator">/</span>plugin&gt;
        &lt;<span class="token operator">/</span>plugins&gt;
    &lt;<span class="token operator">/</span>build&gt;

5<span class="token punctuation">.</span>Depoy阶段运行成功，容器日志显示项目启动<span class="token punctuation">,</span>端口8081，但是无法访问
	运行镜像要做端口映射  docker run <span class="token operator">-</span>d  <span class="token operator">-</span>p 8081:8081 <span class="token operator">--</span>name <span class="token variable">$CONTAINER_NAME</span> <span class="token variable">$IMAGE_NAME</span>:<span class="token variable">$IMAGE_TAG</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/55d8a261ee4c827754469438446452a5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Docker -- redmine项目管理工具（Redmine 是一个开源的, 基于Web的项目管理和缺陷跟踪工具. 它用日历和甘特图辅助项目及进度可视化显示. 同时它又支持多项目管理）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7a17ec345c20bf5cb6800bd4c903c300/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hadoop高手之路--08--Sqoop数据迁移</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>