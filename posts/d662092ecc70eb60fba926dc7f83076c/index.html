<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>云计算复习提纲 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="云计算复习提纲" />
<meta property="og:description" content="第一章 大数据的概念：海量数据的规模巨大到无法通过目前主流的计算机系统在合理时间内获取、存储、管理、处理并提炼以帮助使用者决策
大数据的特点：①数据量大，存储的数据量巨大，PB级别是常态；②多样，数据的来源及格式多样，数据格式除了传统的结构化数据外，还包括半结构化和非结构化数据；③快速，数据的增长速度快，而且越新的数据价值要求对数据的处理也要快；④价值密度低，要求设计一种在成本可接受的条件下，快速采集，发现和分析，从大量多种类别的数据提取价值的体系架构；⑤复杂度，对数据分析处理的难度大
云计算的概念：云计算是一种商业计算模型，将计算任务分布在大量计算机构成的资源池上，使各种应用系统能够根据需要获取计算力，存储空间等服务
短定义：云计算是通过网络按需提供可动态伸缩的廉价计算服务
云计算的特点：①超大规模②虚拟化，支持用户在任意位置在各种终端获取服务，但实际上不需要了解应用运行的具体位置③高可靠性，采用数据多副本容错，节点同构可互换的措施来保障服务的高可靠性④通用性，云的特殊容错措施使得可以采用及其廉价的节点来构成云⑤高可伸缩，云的规模可以伸缩⑥按需服务⑥极其廉价，云的特殊容错措施可以使得用极其廉价的节点来构成云
云计算的分类：
按照服务类型分类：
①将基础设施作为服务IaaS，给用户提供对所有设施的利用服务，弹性云计算ECS、AWS
②将平台作为服务PaaS，将软件研发的平台作为一种服务，百度BAE，新浪SAE，阿里ACE，京东JAE
③将软件作为服务SaaS，协同OA，CRM，财务系统，企业智能系统和企业邮箱
按照部署模式分类：
①公有云，向公众开放，任何人都能够租赁
②私有云，只向一个企业或单位内的人员使用；分为本地私有云（部署在企业内部，适合运行关键和机密业务），托管私有云（托管在第三方机房）
③混合云，只供两个或以上的特定企业或者单位内的人员使用，其他人无权租赁和使用
④社区云，由两个或者以上不同类型的云组成，但用户使用感觉是一个云端资源
第二章 NAT虚拟机可以访问外网，外网不能访问虚拟机，网段不可以调整NAT Network虚拟机可以访问外网，外网不能访问虚拟机，网段可调整Bridged虚拟机可以访问外网，外网可以访问虚拟机，网段和主机相同Host-Only虚拟机不可以访问外网，外网不可以访问虚拟机，网段和主机相同 系统环境配置的步骤：①下载安装VirtualBox，下载系统镜像
②最小化安装CentOS，出现安装引导页面时点击Tab键，打开kernel启动选项，增加选项:net.ifnames=0 biosdevname=0，进入后网卡名会按照eth0，eth1的规则命名，同时进入安装页面之后选择最小化安装
③配置虚拟网络，①设置Nat Network网段（192.168.56.0/24）和 Host-only网段(10.0.0.0/24)，网卡一用于Nat网段，网卡二用于Host-only网段。②在/etc/sysconfig/network-script/中设置主机网络，自举协议为static，启动开机自启，设置IPADDR、NETMASK、GATEWAY、DNS1和DNS2；③/etc/hostname修改本主机名称；/etc/hosts修改其他主机名称解析，然后测试网络连接
④禁用防火墙和SELinux，关闭防火墙（临时关闭）systemctl stop firewalld ，防止自动启动systemctl disable firewalld ；关闭SELinux：修改配置文件/etc/sysconfig/selinux，设置SELINUX=disabled，检查关闭是否成功（systemctl status firewalld）
⑤配置EPEL，安装wget，然后使用淘宝等镜像源
⑥安装基础软件，安装工具软件包，服务器软件包，和开发工具（JAVA、node.js、gcc）
⑦创建快照并克隆虚拟机，克隆完成后需要进行网络连通性测试，随后对宿主机配置对所有虚拟机的免密登录
第三章 集群：一组相互独立的，通过高速网络互联的计算机，构成了一个组，并以单一系统的模式进行管理
集群的特性：一个用户与集群相互作用时，集群就像是一个独立的服务器
使用集群的目的：①提高性能；②降低成本；③提高可扩展性；④增强可靠性
集群的组织方式：①主从结构，将备份服务器连接到主服务器上，备份服务器一般不主动提供服务
②多级结构，多个服务器组成的集群服务器，对外都有一个统一的地址，每个集群服务器上都装有相同的应用程序
常用的命令：
取消开机启动systemctl disable nginx；
重启systemctl restart nginx ；
检查nginx进程ps aux | grep nginx；
检查端口netstat intp | grep 80或netstat intp | grep nginx
负载均衡的配置搭建 常见的负载均衡方案，分为硬件方案和软件方案；硬件方案采用F5等设备，但是比较贵。软件方案采用在四层使用LVS和在七层使用NginX实现负载均衡
Nginx仅仅是作为Nginx Proxy反向代理使用的，但我们称这个反向代理表现的效果是负载均衡的效果。所以可以称之为负载均衡；真正的负载均衡是转发用户请求的数据包，真正负载均衡是转发用户请求的数据包，而NginX反向代理是接收用户的请求然后重新发起请求去请求其后面的节点。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/d662092ecc70eb60fba926dc7f83076c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-30T21:38:53+08:00" />
<meta property="article:modified_time" content="2023-12-30T21:38:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">云计算复习提纲</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="text-align:center;">第一章</h3> 
<p><strong>大数据的概念</strong>：海量数据的规模巨大到无法通过目前<strong>主流的计算机系统</strong>在<strong>合理时间</strong>内获取、存储、管理、处理并提炼以帮助使用者决策</p> 
<p><strong>大数据的特点</strong>：①<strong>数据量大</strong>，存储的数据量巨大，PB级别是常态；②<strong>多样</strong>，数据的来源及格式多样，数据格式除了传统的<strong>结构化数据外</strong>，还包括<strong>半结构化</strong>和<strong>非结构化</strong>数据；③<strong>快速</strong>，数据的增长速度快，而且越新的数据价值要求对数据的处理也要快；④<strong>价值密度低</strong>，要求设计一种在成本可接受的条件下，快速采集，发现和分析，从大量多种类别的数据提取价值的体系架构；⑤<strong>复杂度</strong>，对数据分析处理的难度大</p> 
<p><strong>云计算的概念</strong>：云计算是一种<strong>商业计算模型</strong>，将计算任务分布在大量计算机构成的<strong>资源池</strong>上，使各种应用系统能够<strong>根据需要</strong>获取计算力，存储空间等服务</p> 
<p><strong>短定义</strong>：云计算是通过网络<strong>按需</strong>提供<strong>可动态伸缩</strong>的廉价计算服务</p> 
<p><strong>云计算的特点</strong>：①<strong>超大规模</strong>②<strong>虚拟化</strong>，支持用户在<strong>任意位置</strong>在各种终端获取服务，但实际上不需要了解应用运行的<strong>具体位置</strong>③<strong>高可靠性，</strong>采用数据多副本容错，节点<strong>同构可互换</strong>的措施来保障服务的高可靠性④<strong>通用性</strong>，云的特殊容错措施使得可以采用及其廉价的节点来构成云⑤<strong>高可伸缩</strong>，云的规模可以伸缩⑥<strong>按需服务</strong>⑥<strong>极其廉价，</strong>云的特殊容错措施可以使得用极其廉价的节点来构成云</p> 
<p><strong>云计算的分类</strong>：</p> 
<p>按照服务类型分类：</p> 
<p>①将基础设施作为服务IaaS，给用户提供对所有设施的利用服务，弹性云计算ECS、AWS</p> 
<p>②将平台作为服务PaaS，将软件研发的平台作为一种服务，百度BAE，新浪SAE，阿里ACE，京东JAE</p> 
<p>③将软件作为服务SaaS，协同OA，CRM，财务系统，企业智能系统和企业邮箱</p> 
<p>按照部署模式分类：</p> 
<p>①公有云，向公众开放，任何人都能够租赁</p> 
<p>②私有云，只向<strong>一个企业</strong>或单位内的人员使用；分为本地私有云（部署在企业内部，适合运行关键和机密业务），托管私有云（托管在第三方机房）</p> 
<p>③混合云，只供<strong>两个或以上的</strong>特定企业或者单位内的人员使用，其他人无权租赁和使用</p> 
<p>④社区云，由两个或者以上不同类型的云组成，但用户使用感觉是一个云端资源</p> 
<h3 style="text-align:center;">第二章</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>NAT</td><td>虚拟机可以访问外网，外网不能访问虚拟机，<strong>网段不可以调整</strong></td></tr><tr><td>NAT Network</td><td>虚拟机可以访问外网，外网不能访问虚拟机，<strong>网段可调整</strong></td></tr><tr><td>Bridged</td><td>虚拟机可以访问外网，外网可以访问虚拟机，网段和主机相同</td></tr><tr><td>Host-Only</td><td>虚拟机不可以访问外网，外网不可以访问虚拟机，网段和主机相同</td></tr></tbody></table> 
<p>系统环境配置的步骤：①下载安装VirtualBox，下载系统镜像</p> 
<p>②最小化安装CentOS，出现安装引导页面时点击Tab键，打开kernel启动选项，增加选项:<strong>net.ifnames=0 biosdevname=0</strong>，进入后网卡名会按照<strong>eth0，eth1的规则</strong>命名，同时进入安装页面之后选择最小化安装</p> 
<p>③配置虚拟网络，①设置Nat Network网段（192.168.56.0/24）和 Host-only网段(10.0.0.0/24)，网卡一用于Nat网段，网卡二用于Host-only网段。②在<strong>/etc/sysconfig/network-script/</strong>中设置主机网络，自举协议为static，启动开机自启，设置IPADDR、NETMASK、GATEWAY、DNS1和DNS2；③<strong>/etc/hostname</strong>修改本主机名称；<strong>/etc/hosts</strong>修改其他主机名称解析，然后测试网络连接</p> 
<p>④禁用防火墙和SELinux，关闭防火墙（临时关闭）<strong>systemctl stop firewalld </strong>，防止自动启动<strong>systemctl disable firewalld </strong>；关闭SELinux：修改配置文件<strong>/etc/sysconfig/selinux</strong>，设置SELINUX=disabled，检查关闭是否成功（<strong>systemctl status firewalld</strong>）</p> 
<p>⑤配置EPEL，安装wget，然后使用淘宝等镜像源</p> 
<p>⑥安装基础软件，安装工具软件包，服务器软件包，和开发工具（JAVA、node.js、gcc）</p> 
<p>⑦创建快照并克隆虚拟机，克隆完成后需要进行网络连通性测试，随后对宿主机配置对所有虚拟机的免密登录</p> 
<h3 style="text-align:center;">第三章</h3> 
<p>集群：一组<strong>相互独立</strong>的，通过<strong>高速网络互联</strong>的计算机，构成了一个组，并以<strong>单一系统的模式</strong>进行管理</p> 
<p>集群的特性：一个用户与集群相互作用时，集群就像是一个独立的服务器</p> 
<p>使用集群的目的：①提高性能；②降低成本；③提高可扩展性；④增强可靠性</p> 
<p>集群的组织方式：①主从结构，将备份服务器连接到主服务器上，备份服务器一般不主动提供服务</p> 
<p>②多级结构，多个服务器组成的集群服务器，对外都有一个统一的地址，每个集群服务器上都装有相同的应用程序</p> 
<p></p> 
<p>常用的命令：</p> 
<p><strong>取消开机启动systemctl disable nginx；</strong></p> 
<p><strong>重启systemctl restart nginx ；</strong></p> 
<p><strong>检查nginx进程ps aux | grep nginx；</strong></p> 
<p><strong>检查端口netstat intp | grep 80或netstat intp | grep nginx</strong></p> 
<h4 style="text-align:center;">负载均衡的配置搭建</h4> 
<p>        <img alt="" height="251" src="https://images2.imgbox.com/82/7b/1eYW5Akr_o.png" width="250"></p> 
<p> 常见的负载均衡方案，分为<strong>硬件方案</strong>和<strong>软件方案</strong>；硬件方案采用<strong>F5</strong>等设备，但是比较<strong>贵</strong>。软件方案采用在<strong>四层使用LVS</strong>和在<strong>七层使用NginX</strong>实现负载均衡</p> 
<p>Nginx仅仅是作为Nginx Proxy反向代理使用的，但我们称这个反向代理表现的效果是负载均衡的效果。所以可以称之为负载均衡；真正的负载均衡是转发用户请求的数据包，真正负载均衡是转发用户请求的数据包，而NginX反向代理是接收用户的请求然后重新发起请求去请求其后面的节点。</p> 
<p></p> 
<p>三个虚拟机都打开nginx服务，并检查nginx的状态</p> 
<p>在第三台虚拟机中（NginX服务器）中需要在<strong>/etc/nginx/nginx.conf</strong>文件中进行配置，在upstream模块中需要添加模块配置</p> 
<pre><code>upstream www_servers_pool{
    server 192.168.0.11;#可以设置weight=10或20来增加访问节点的权重
    server 192.168.0.12;
}</code></pre> 
<pre><code>在server段中配置
server{
    ...
    location / {
        proxy_pass http://www_servers_pool;
    }
}</code></pre> 
<p>重启第三台虚拟机的NginX服务，访问10.0.0.13测试，是否能够把流量分布到节点1和节点2中</p> 
<h4 style="text-align:center;">高可用技术</h4> 
<p>高可用方案：Keepalived，Heartbeat</p> 
<p>VRRP通过<strong>竞选机制</strong>来将路由的任务交给某台VRRP路由器，工作时主节点发包，备节点接包。当备节点接收不到主节点发送的数据包的时候，就启动接管程序接管主节点中的资源</p> 
<p>Keepalived高可用对之间通过<strong>VRRP</strong>进行通信，在Keepalived服务对之间，只有作为主服务器的一方会一直发送VRRP广播包。</p> 
<p><img alt="" height="185" src="https://images2.imgbox.com/3a/a2/sm5HNF6s_o.png" width="300"></p> 
<p>①打开每台虚拟机的NginX服务</p> 
<p>②开启第四台虚拟机的NginX服务，配置第四台虚拟主机的/etc/nginx/nginx.conf中的server字段和upstream字段，然后验证访问10.0.0.14是否能够将流量分配到节点1和节点2中</p> 
<p>③设置第三个虚拟机/etc/keepalived/keepalived.conf，添加邮箱，router_id，优先级，以及vrrp的虚拟IP地址</p> 
<pre><code>    notification_defs {
        rainsa@163.com
        ···

    }
    priority 101
    router_id lb01

    vrrp_instance VI_1 {
        virtual_ipaddress {
            10.0.0.200/8 dev eth1
        }
    }</code></pre> 
<p>systemctl start keepalived开启keepalived服务，验证访问10.0.0.200时能否将流量分配至节点1和节点2中</p> 
<p>④同理在第四个交换机中配置keepalived，只需要修改优先级为99，并且state为BACKUP即可</p> 
<p><strong>如何验证节点3和节点4之间keepalived是否配置成功</strong>：在虚拟机3中关闭keepalived服务，然后检查虚拟机的eth1中是否会出现10.0.0.200这个网段，且能负载分担；节点三关机后，访问10.0.0.200仍然能实现负载分担；节点三重新开机后又能成为主设备实现负载分担</p> 
<p><strong>NginX即使失效</strong>，Keepalived仍然有效，虚拟IP地址并不会自动迁移。只有当Keepalived服务关闭后迁移虚拟IP地址。</p> 
<pre><code>#!/bin/bash
if [ `netstat -lntp | grep nginx | wc -l` -lt 1 ];
then
    systemctl stop keepalived 
fi

#赋予权限chmod 777 check_status.sh
#./check_status.sh </code></pre> 
<p>但是存在一定的问题，<strong>当NginX恢复时，Keepalived并不会自动恢复</strong>。Keepalived可以根据返回的状态修改服务状态，例如降低实例的优先级</p> 
<pre><code class="language-bash">#check_nginx.sh

#!/bin/bash
if [ `netstat -lntp | grep nginx | wc -l` -lt 1 ];
then 
    exit 2#代表非正常退出
else 
    exit 0
fi</code></pre> 
<pre><code class="language-bash">	
vrrp_script check_nginx { 
	script "/root/bin/check_nginx.sh"
	interval 2 #执行时间间隔
  weight -50 #设置脚本的权重为-50
  fall 3 #连续执行失败的阈值次数为3，连续三次执行中，执行失败就返回失败
  rise 3 #连续三次执行中，执行成功就返回成功
  timeout 2 #超时内没有得到执行结果就返回执行失败
}
	
vrrp_instance VI_1 {
  ...
	track_script {
		check_nginx#跟踪脚本的执行状态
	}
}</code></pre> 
<h4 style="text-align:center;"> 网站动静分离</h4> 
<p>动静分离的拓扑：动态网站+静态网站+负载均衡器，采用NginX实现</p> 
<p><strong>动态网站</strong>：配置开发环境（Eclipse/IDEA，Gradle/Maven），建立springBoot项目，springBoot项目打包，jar包部署，为网站建立服务，开机自动启动</p> 
<p>注意：NginX默认的负载均衡机制无法支持动态网站，必须修改请求头的内容才能在动态网站之间进行负载均衡</p> 
<pre><code class="language-bash">server{
    ···
    location / {
        proxy_pass http://www.servers_pool;
        proxy_set_header Host $host;
        proxy_set_header X-Forward-For $remote_addr
    }

}</code></pre> 
<p><strong>静态网站</strong>：Html、css、js文件；静态网站与动态网站之间通过Ajax技术或WebSocket技术相互通信完成前后端对接</p> 
<p><strong>最后</strong>，在NginX处实现动态网站和静态网站的分离，主要依靠配置不同的路径对应的网址。<strong>首先为动态和静态部分配置不同的uptream</strong></p> 
<pre><code class="language-bash">upstream static_servers_pool {
    server 192.16.56.14;
}
upstream dynamic_servers_pool {
    server 192.168.56.11
    server 192.168.56.12
}</code></pre> 
<p>然后为不同的路径配置不同的upstream：</p> 
<pre><code class="language-bash">location /static/ {
    proxy_passs http://static_servers_pool;
}
location / {
    proxy_pass http://dynamic_servers_pool;
}</code></pre> 
<h4 style="text-align:center;">session保持</h4> 
<p>session问题的出现是由于负载均衡会将同一个用户的请求往不同的服务器转发，而服务器之间无法共享其他服务器的session数据</p> 
<p>主要的解决方案：①服务器之间共享session②使用session集群③使得同一个用户的请求永远转发到同一个服务器</p> 
<p>ip-hash的原理：根据用户请求包中的五元组来判断是不是同一个用户的请求</p> 
<h4 style="text-align:center;">文件上传</h4> 
<p>文件上传只能上传到单个服务器，不同的用户将负载均衡器分配到不同的服务器节点，则访问的文件可能完全不同</p> 
<p>解决的策略：设置一个（或多个）文件共享节点，然后用户的文件主要上传到这些共享文件节点，不同的用户都能从这个共享文件节点获取；常用的技术是NFS</p> 
<h4 style="text-align:center;">磁盘阵列</h4> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>RAID0</td><td>使用条带化，适用于不需要容错环境中的大型文件</td></tr><tr><td>RAID1</td><td>使用镜像，写入到一个硬盘的数据同时写入到另一个硬盘</td></tr><tr><td>RAID5</td><td>在所有硬盘上使用硬盘条带化和分布式奇偶校验</td></tr><tr><td>RAID6</td><td>分布式奇偶校验（每个带区有两个独立奇偶校验块）</td></tr></tbody></table> 
<p>条带：将数据分割成离散的数据块，并分布到硬盘阵列中的每个物理硬盘上</p> 
<p><img alt="" height="219" src="https://images2.imgbox.com/da/25/5dRzZWZ9_o.png" width="300"></p> 
<p>RAID0：提供高带宽，但是不提供任何的冗余，硬盘发生故障会导致整个阵列数据丢失</p> 
<p>RAID1：能提供双倍的<strong>读</strong>速度，一个硬件发生故障其它硬盘的内容也能运行系统，硬盘要求最少2块硬盘，且必须是偶数；有效容量小，存储空间利用率低</p> 
<p><img alt="" height="208" src="https://images2.imgbox.com/38/68/6Fk7JyaD_o.png" width="450"></p> 
<p>RAID5：适用于读取请求率高但是写入请求率低，需要数据冗余的情况。以最低的容量损失提供数据冗余，高性能读取；缺点是不适合大量的写入工作；最少需要三块硬盘，允许阵列中的1块硬盘发生故障</p> 
<p><img alt="" height="201" src="https://images2.imgbox.com/12/b5/sD5oi5oU_o.png" width="450"></p> 
<p>RAID6：适用于读取请求率高但写入率低，且需要较高的数据冗余的情况；较高的数据冗余和数据读取率；缺点是双奇偶校验会导致写入性能下降，需要损失两块硬盘的容量来存放奇偶校验块</p> 
<p><img alt="" height="199" src="https://images2.imgbox.com/a8/04/dMoS2WkE_o.png" width="450"></p> 
<p>RAID10：最多支持8个阵列跨接，有较高的读取性能和数据冗余。缺点是有效容量小，且存储空间利用率较低；每个RAID1阵列允许1块硬盘发生故障</p> 
<p><img alt="" height="128" src="https://images2.imgbox.com/56/00/jPOs21eb_o.png" width="300"></p> 
<p>RAID50：最多支持8个阵列跨接每个RAID5阵列允许1个硬盘发生故障，适用于高可靠性，高速率，高速读写的中大型容量环境；需要浪费部分存储空间做奇偶校验</p> 
<p><img alt="" height="212" src="https://images2.imgbox.com/f4/68/7WTkc0l9_o.png" width="400"></p> 
<p>RAID60:每个RAID阵列允许2个硬盘发生错误，最多支持8个硬盘阵列跨接；提供较高的读取性能和数据冗余；不适合大量的写入工作</p> 
<p><img alt="" height="238" src="https://images2.imgbox.com/20/c6/RsmK4dOk_o.png" width="428"></p> 
<h3 style="text-align:center;">第四章</h3> 
<p>分布式的概念：一组独立的计算机展现给用户的是一个系统来完成一个统一的工作，但是系统内可以动态地分配任务。分散的物理和逻辑资源通过计算机网络实现信息的交换</p> 
<p>分布式的特点：计算速度加快，对等性（没有主从之分）、并发性、缺乏全局时钟、故障总会发生</p> 
<p>分布式与集群的区别：①原理上，集群中每台服务器执行的任务都是一样的。本质上是将几台服务器集合到一起来实现同一业务。分布式是按照一定的算法将任务分配给多台服务器，提高的是执行任务的时间，业务被分配到不同的地方</p> 
<p>②容错能力上，集群服务器中如果有故障的服务器，可以自动隔离，问题解决后再自动恢复；而分布式服务器一旦出现问题，任务就无法正常执行</p> 
<h4 style="text-align:center;">Reidis的基本操作</h4> 
<p><strong>Redis不区分命令大小写，但是区分键名的大小写</strong></p> 
<p><strong>help @获取组中的所有命令</strong></p> 
<p><strong>help获取命令帮助</strong></p> 
<p><strong>quit退出</strong></p> 
<pre><code class="language-bash">获得符号规则的键名称
keys 表达式 (?,*,[],\?)

判断一个键是否存在
exists key

删除键
del key
del key1 key2

批量删除
redis-cli del `redis-cli keys "key*"`
redis-cli keys "key*": 这是在 redis-cli内部再次执行keys 命令，以匹配所有以 "key" 开头的键。keys` 命令用于获取匹配指定模式的所有键的列表。

获得键值的数据类型
type key
返回的值可能是string,hash,list,set,zset</code></pre> 
<p>使用config set 可以动态地设置参数信息，服务器重启后就失效了</p> 
<pre><code class="language-bash">config set appendonly yes
config set save "90 1 30 10 60 100"</code></pre> 
<p>使用config get可以查看所有<strong>可以使用config set</strong>命令设置的参数</p> 
<pre><code class="language-bash">config get *</code></pre> 
<p>使用config rewrite命令对<strong>启动Redis服务器时所指定的redis.conf文件</strong>进行改写。该指令对文件的重写是原子性的，并且是一致的。如果重写失败或出错那么这个文件就不会被修改</p> 
<p>IP Hash实现session保持的缺点解决办法：</p> 
<p>①持续化session到数据库</p> 
<p>②使用Redis共享session</p> 
<p>③使用memcache同步session</p> 
<p>④通过脚本或守护进程在多台服务器之间同步session</p> 
<p>⑤使用NFS共享session</p> 
<p>⑥使用cookie共享session</p> 
<h4 style="text-align:center;">HDFS</h4> 
<p>两类节点：①namnode，管理文件系统的命名空间，维护系统文件树及整棵树内所有的文件和目录关系</p> 
<p>②datanode，以数据块的形式存储具体的数据</p> 
<h4 style="text-align:center;">缓存与一致性哈希</h4> 
<p><strong>缓存</strong>是存储在计算机上的一个原始数据复制集，介于数据访问者与数据源之间的一种高速存储。当数据读取的时候，直接从高速存储中获取，如果可以获取到结果就无需访问数据库直接返回缓存的内容</p> 
<p>如果缓存未命中，就从数据库中获取，一方面可以提高数据的读取速度，另一方面还能降低数据库的性能消耗。没有缓存阻挡，大量的请求直接落到系统的底层，系统很难撑住高并发的冲击</p> 
<p><strong>缓存穿透</strong>：查询一个根本不存在的数据，大量的缓存穿透直接落到存储层，后端系统容易被压垮</p> 
<p><strong>缓存雪崩</strong>：缓存层由于某些原因不等你提供服务，导致所有的请求直接到达存储层</p> 
<p><strong>预防和解决缓存穿透与缓存雪崩的方案：</strong></p> 
<p>①取模法，对键值取节点数的余。存在一定问题：扩展能力差，容错能力不佳</p> 
<p>②一致性哈希，首先构建一个哈希环，然后计算缓存集群中服务器的IP或主机名来计算得到Hash值，计算得到的Hash值就是<strong>服务节点在环上的位置</strong></p> 
<p>然后对每个需要存储的数据key也同样计算一次哈希值，计算之后的哈希值也映射到环上，然后沿着环的顺时针方向寻找到第一个服务器节点，就是存储节点</p> 
<p>一致性哈希能把<strong>节点宕机造成的影响控制在顺时针相邻节点之间</strong>，避免对整个集群造成影响</p> 
<p>一致性哈希存在的问题：当服务器节点聚集在一起，容易造成数据倾斜问题，给单个节点造成很大的压力。解决办法是采用虚拟节点，将虚拟节点分散在哈希环的各个部分，打在虚拟节点上的数据实际也是映射到物理节点上</p> 
<p></p> 
<h4 style="text-align:center;">虚拟化</h4> 
<p>虚拟机迁移：将虚拟机<strong>实例</strong>从<strong>原宿主机</strong>迁移到<strong>目标宿主机</strong>中，并且在目标宿主机上能够将虚拟机运行状态恢复到其在迁移之前相同的状态，以便继续完成应用程序的任务</p> 
<p>虚拟机迁移的分类：①从源和目的角度分：物理机到虚拟机，虚拟机到物理机，虚拟机到虚拟机</p> 
<p>②按照迁移的状态：虚拟机停机迁移（冷迁移）、虚拟机在线迁移（热迁移、实时迁移）</p> 
<p>实时迁移的步骤：①预迁移；②预定资源；③预复制；④停机复制；⑤提交启动</p> 
<p>虚拟机和虚拟化容器的区别</p> 
<h4 style="text-align:center;">Docker</h4> 
<p>Docker是一个开源的应用容器引擎，基于<strong>GO</strong>语言并可以让开发者打包他们的应用及依赖包到一个轻量级，可移植的容器中，然后发行到任何流行的Linux机器上</p> 
<p>Docker包含三个基本概念：镜像（相当于一个root文件系统）、容器（镜像运行时的实体）、仓库（一个代码中心，可以用来保存镜像）</p> 
<p>Docker使用客户-服务器（C/S）的架构模式，使用远程API来管理和创建Docker容器</p> 
<p>常见命令：</p> 
<pre><code class="language-bash">在容器内运行应用程序
docker run ubuntu:15.10 /bin/echo "Hello world"

-t指定一个伪终端，-i允许对容器内的输入进行交互
docker run -i -t ubuntu:15.10 /bin/bash

以进程的方式运行容器
docker run -d ubuntu:15.10 /bin/sh -c "命令"

查看运行中的容器
docker ps

查看容器内的标准输出
docker logs [容器ID或容器名]

停止容器
docker stop [容器ID或容器名]

从远程仓库载入ubuntu镜像
docker pull ubuntu

进入交互模式
docker attach:退出会导致容器停止
docker exec：退出容器终端并不会导致容器停止

删除容器
docker rm -f [容器ID或容器名] 
docker rmi [ID或镜像名]

查看网络端口
docker ps
docker port [容器ID] 将内部的TCP端口映射到外部端口 5000 tcp -&gt; 0.0.0.0:5000

查看容器内部运行的进行
docker top

列出本地主机上的镜像
docker images

搜索镜像
docker search httpd

提交容器副本
docker commit -m="has update" -a="镜像作者" [容器ID] [创建的目标镜像名]

镜像标签
docker tag [镜像ID] [用户名字] [镜像源名称] [新的标签名]

端口映射，让外部也能访问这些应用
docker run -d -p 5000:5000 training/webapp python app.py //先是主机端口，再是容器端口
-p是容器内部端口绑定到指定的主机端口
-P是内部端口随机映射到主机的高端口



</code></pre> 
<h3 style="text-align:center;">OpenStack</h3> 
<p>OpenStack的核心服务（组件）：①计算服务Nova；②存储服务Swift；③镜像服务Glance；</p> 
<p>其余主要服务（组件）：④身份认证服务keystone；⑤网络管理服务Quantum；⑥存储管理服务Cinder；⑦仪表盘Horizon</p> 
<h4 style="text-align:center;">计算服务：Nova</h4> 
<p>是OpenStack云中的计算组织控制器，处理OpenStack云中实例生命周期内的所有活动，不具备虚拟化能力</p> 
<p>组件：API Server：向外提供与云基础设施交互的接口</p> 
<p>Message Queue：OpenStack节点之间通过消息队列完成通信</p> 
<p>computer worker：管理实例生命周期</p> 
<p>Network Controller：处理主机的网络配置</p> 
<p>Volume Workers：管理基于LVM的实例卷</p> 
<p>Scheduler：调度器作为一个守护进程运行，并通过恰当的调度算法从资源池获得计算服务</p> 
<p></p> 
<p>LibVirt的主要支持功能：</p> 
<p>①虚拟机管理</p> 
<p>②远程机器支持</p> 
<p>③存储管理</p> 
<p>④网络接口管理</p> 
<p>⑤虚拟NAT和基于路由的网络</p> 
<h4 style="text-align:center;">OpenStack的版本</h4> 
<p>采用顺序命名法，用完了再回来重新命名</p> 
<h3 style="text-align:center;">第五章</h3> 
<p>数据中心网络与传统Internet网络的区别：高设备利用率，采用虚拟化技术进行系统和数据中心整合，优化资源利用率，简化管理</p> 
<p>绿色节能，通过先进的供电和散热技术，降低数据中心的能耗</p> 
<p>高可用性，提供大量同质化设备和替代恢复机制，确保资源的可用性和数据的持久性</p> 
<p>自动化管理</p> 
<h4 style="text-align:center;">FatTree</h4> 
<p class="img-center"><img alt="" height="236" src="https://images2.imgbox.com/66/66/thCFN5Dq_o.png" width="500"></p> 
<p>相对于传统层次结构而言，FatTree的特点：①消除了树形结构上层链路对吞吐量的限制，所有交换机配置均相同；②为内部节点间通信提供多条并行链路；③横向扩展的尝试降低了构建数据中心网络的成本；④与现有数据中心网络使用的以太网结构和IP配置的服务器兼容</p> 
<p></p> 
<h4 style="text-align:center;">FatTree的计算</h4> 
<p>核心层交换机有k个出口，能够建立k个Pod吗，每个pod有k个交换机。接入层与汇聚层有一半的端口是完全关联的。</p> 
<p>汇聚层交换机数目=接入层交换机数 = （k/2）* k</p> 
<p>核心层交换机数目 = (k/2) * (k/2) 因为一个pod中一个汇聚层交换机向上有k/2个接口</p> 
<p>主机数 = (k/2) * (k/2) * k</p> 
<p>从终端到接入层的网络容量 = (k/2) * (k/2) * k</p> 
<p>接入层到汇聚层的网络流量 = (k/2) * k * (k/2)</p> 
<p>汇聚层到核心层的网络流量 = (k/2)*k*(k/2)</p> 
<p></p> 
<p>改进型树结构：采用VL2架构，将流量统一地分配到网络路径</p> 
<p>递归层次数据中心：构建高层次网络时，需要的低层网络的个数等于每个低层网络中的服务器个数加1</p> 
<p>光交换数据中心</p> 
<p>无线数据中心</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1b7a0368bd52b20118ff04b472c53802/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序开发系列-08自定义组件模版特性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6386c2ee95e43ef4cbc921769a3c11a5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Android12】Android Framework系列---tombstone墓碑生成机制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>