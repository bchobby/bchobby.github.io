<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32F072 CAN and USB - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32F072 CAN and USB" />
<meta property="og:description" content="1 通用描述
1.1 STM8
MOSTek 6502 -&gt; ST7 -&gt; STM8
STM8型号单片机分为STM8A、STM8L、STM8S三个系列。
STM8A：汽车级应用
STM8L：超低功耗MCU
STM8S：标准系列
1.2 STM32
- F1系列用的最多，最大工作频率72MHz
- STM32固件库（函数）使用手册
STM32F107：2010，DWC2 FS OTG
STM32MP157C-DK2：MPU
STM32U5：U means ULP
1.3 ST开发板种类
ST官方出的有NUCLEO板、Discovery板以及评估板，配置从低到高，价格也是从低到高。
NUCLEO：一般只将MCU引脚引出，还有一个串口（通过STLINK USB虚拟），价格也就几十到100RMB左右。
Discovery板：一般比NUCLEO板多USB（MCU带USB），音频解码，耳机插孔。价格也就100多点。
评估板：功能是最全的，一般外设都有引出，功能最全，价格最高，几百到1000&#43;RMB。
1.4 STM32 GPIO Alternate function mapping
GPIO复用功能要查找的是datasheet。TRM中是详细的寄存器描述，但不包括GPIO复用功能的描述。
2 开发环境搭建
2.1 STM32CubeMX_V4.27.0
www.st.com/stm32cubemx
STM32CubeMX可以生成Atollic公司的TrueSTUDIO项目文件。
2.2 IAR8.30.1
IAR embedded Workbench 8.30
https://m.baidu.com/ala/c/m.3322.cc/mip/40168.html
3 CAN
3.1 CAN分类
PT CAN：PowerTrain CAN，动力总成
CH CAN：Chassis CAN，底盘控制CAN总线
Body CAN：车身控制总线，BMW Body Domain Controller or Basis Central Platform" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/dd960b828fd1582457f85c23055ca3cf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-22T16:00:50+08:00" />
<meta property="article:modified_time" content="2023-12-22T16:00:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32F072 CAN and USB</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1 通用描述<br> 1.1 STM8<br> MOSTek 6502 -&gt; ST7 -&gt; STM8<br> STM8型号单片机分为STM8A、STM8L、STM8S三个系列。<br> STM8A：汽车级应用<br> STM8L：超低功耗MCU<br> STM8S：标准系列<br><br> 1.2 STM32<br> - F1系列用的最多，最大工作频率72MHz<br> - STM32固件库（函数）使用手册<br> STM32F107：2010，DWC2 FS OTG<br> STM32MP157C-DK2：MPU<br> STM32U5：U means ULP<br><br> 1.3 ST开发板种类<br> ST官方出的有NUCLEO板、Discovery板以及评估板，配置从低到高，价格也是从低到高。<br> NUCLEO：一般只将MCU引脚引出，还有一个串口（通过STLINK USB虚拟），价格也就几十到100RMB左右。<br> Discovery板：一般比NUCLEO板多USB（MCU带USB），音频解码，耳机插孔。价格也就100多点。<br> 评估板：功能是最全的，一般外设都有引出，功能最全，价格最高，几百到1000+RMB。<br><br> 1.4 STM32 GPIO Alternate function mapping<br> GPIO复用功能要查找的是datasheet。TRM中是详细的寄存器描述，但不包括GPIO复用功能的描述。<br><br> 2 开发环境搭建<br> 2.1 STM32CubeMX_V4.27.0<br> www.st.com/stm32cubemx<br><br> STM32CubeMX可以生成Atollic公司的TrueSTUDIO项目文件。<br><br> 2.2 IAR8.30.1<br> IAR embedded Workbench 8.30<br> https://m.baidu.com/ala/c/m.3322.cc/mip/40168.html<br><br> 3 CAN<br> 3.1 CAN分类<br> PT CAN：PowerTrain CAN，动力总成<br> CH CAN：Chassis CAN，底盘控制CAN总线<br> Body CAN：车身控制总线，BMW Body Domain Controller or Basis Central Platform<br> Info CAN：娱乐系统总线<br> Diag CAN：诊断控制总线<br><br> 3.2 CAN速率<br> 同时支持速率500 Kbps和2 Mbps；BMS充电器CAN默认通信传输速率为250 kbit/s。<br> CAN：payload的长度是固定的8个字节<br> CAN FD：payload的长度不是8个字节的都是FD；CAN FD包头和payload用不同的速度传输，速率切换从BRS位（bit rate switching）开始一直到CRC（包括CRC）结束<br><br> 3.3 STM32F072<br> 3.3.1 bxCAN pinout<br> PB8: CAN Rx<br> PB9: CAN Tx<br> STM32F072 Discovery board, without CAN Transceiver MCP2551.<br><br> 3.3.2 bxCAN Rx filter<br> bxCAN: Basic Extended CAN<br> 3个发送邮箱，每个发送邮箱包括4个寄存器：<br> CAN_TIxR[31:21]存放11bits ID<br> CAN_TDTxR[3:0]存放数据长度DLC<br> CAN_TDLxR和CAN_TDHxR存放8个字节的payload<br> 2个接收邮箱，每个接收邮箱包括4个寄存器：<br> CAN_RIxR[31:21]存放11bits ID<br> CAN_RDTxR[3:0]存放数据长度DLC<br> CAN_RDLxR和CAN_RDHxR存放8个字节的payload<br><br> ID寄存器32bit CAN_FxR1，Mask寄存器32bit CAN_FxR2。CAN接收过滤类似于Marvell 88Q5050交换机的ACL过滤机制，包含数据寄存器，和对应的mask寄存器。mask寄存器某位为1表示接收到的CAN ID对应的位必须与数据寄存器对应的位相同，mask寄存器某位为0表示不关心接收到的CAN ID对应的位，这种内存的类型称为TCAM。<br> Mask Data Meaning<br> 0        x        Don't care. The data bit can be a one or a zero.<br> 1        0        Hit on 0.<br> 1        1        Hit on 1.<br><br> 3.4 STM32F072 CANable<br> 3.4.1 PCAN USB<br> 深圳嘉立创打样<br> STM32F042/072, SRAM 1024 bytes, last 256 bytes are exclusively shared with CAN peripheral.<br> STM32F405/407 for PCAN USB Pro.<br><br> STM32F072<br> PA8: OTG_FS_SOF, Synopsys DWC OTG<br> PA11: USB FS DM<br> PA12: USB FS DP<br> PA13: SWDIO<br> PA14: SWCLK<br> PB8: CAN0_Rx<br> PB9: CAN0_Tx<br> PB14: USB HS DM. Waveshare USB3300 PHY Module from TB.<br> PB15: USB HS DP. Waveshare USB3300 PHY Module from TB.<br> BOOT0-PF11<br> 一旦开启了USB电源，即USB_CNTR.PDWN位清零，PA11和PA12将不再作为其它功能使用，仅供USB使用，自动作为DM和DP，不需要手工配置IO MUX。<br><br> 3.4.2 CANable<br> CANable is based on STM32Cube.<br> 下载ARM官方的arm-none-eabi-gcc编译器。<br> GNU Arm Embedded Toolchain<br> gcc-arm-none-eabi-10.3-2021.10-x86_64-linux.tar.bz2 <br><br> github上搜索CANable。<br> https://github.com/moonglow/pcan_cantact<br> make canable<br> find -name *.bin<br><br> 3.4.3 Standard PCAN<br> The STM32F072 has up to 16 mono-directional or 8 bidirectional endpoints.<br> USB SRAM（0x4000_6000）偏移地址0到ENDP0_RXADDR之间的buffer用来存储端点的参数，每个端点参数有4个寄存器，每个寄存器占用2个字节，分别表示双向EP的接收packet和发送packet的位置和大小。Refer to Src/usbd_conf.c USBD_LL_Init().<br> Both USB and bxCAN do not support DMA.<br> Linux: drivers/net/can/usb/peak_usb/pcan_usb.c<br> CANable: Src/pcan_usb.c<br> 4 endpoints: two for command IN/OUT, another two for message IN/OUT.<br> CMDOUT / MSGOUT: device_data_out()<br> CMDIN: pcan_usb_send_command_buffer()<br> MSGIN: pcan_flush_data()<br> CMDIN / CMDOUT: 1-byte func +<br>     1-byte number (GET or SET) +<br>     14-byte param<br> MSGOUT: 1-byte prefix +<br>     1-byte rec_count +<br>     1-byte status +<br>     4 or 2-byte ID +<br>     (DLC = status &amp; 0xf)-byte data + <br>     extra_byte (if SRR = 1)<br><br> 每一个Full-speed USB_EP_MSGIN MPS（Max Packet Size）可以包含多个PCAN消息（Aggregation mode），并且第一个PCAN消息的时间戳是2个字节，从第二个开始的PCAN消息时间戳都是1个字节。下一个Full-speed MPS报文重复该模式。<br> MSGIN: 1-byte prefix +<br>     1-byte rec_count +<br>     1-byte status +<br>     4 or 2-byte ID +<br>     2 or 1-byte timestamp +<br>     (DLC = status &amp; 0xf)-byte data +<br>     extra_byte (if SRR = 1)<br> status: bit7 = timestamp, bit6 = internal, bit5 = ext_ID, bit4 = RTR (Remote Transmission Request)<br> 29-bit ID = 4-byte ID &gt;&gt;= 3<br> 11-bit ID = 2-byte ID &gt;&gt;= 5<br> SRR = ID.bit0, Substitute Remote Request<br><br> 3.4.4 Debug<br> 1) Windows PCAN-View<br> When PCAN-View starts, it will send the below five commands.<br> 05: PCAN_USB_CMD_CFG<br> 01: PCAN_USB_CMD_BITRATE<br> 03: PCAN_USB_SET_SILENT_MODE<br> 0b: PCAN_USB_CMD_LED<br> 03: PCAN_USB_CMD_BUS<br><br> 2）status packet<br> 03 02 01, CAN bus active, then call pcan_timesync_event() sends the timestamp frame 02 02 42 04 01 b1 28 40 01 00 to PC periodically for about 1 second.<br> 2-byte header: 02 02<br> 1-byte status: 42<br> 1-byte function: 04, PCAN_USB_REC_TS<br> 1-byte number: 01<br> 2-byte timestamp: b1 28<br> 1-byte status: 40<br> 1-byte function: 01, PCAN_USB_REC_ERROR<br> 1-byte number: 00<br><br> 3) CANable patch<br> MSGIN: 14 x Max_Packet_Size = 14 x 64-byte, the first PCAN packet in each 64-byte has two bytes timestamp.<br> Add a variable msg_count to pcan_rx_can_frame(), append the 4-byte to status packet.<br> The first 5-byte of status packet: 02 02 42 04  01<br> The third 3-byte of PCAN packet: 02 01 08<br><br> Change CANable VID from 0x0483 (STMicroelectronics) to 0x0C72, otherwise Windows PCAN_USB.inf cannot recognize CANable because of driver signature issue.<br> Windows PCAN-View sends PCAN_USB_CMD_BITRATE to CANable twice, the second command will cause STM32F072 bxCAN does not work, after apply the below patch, the issue will be gone.<br> case PCAN_USB_CMD_BITRATE:<br>   if (pcan_device.bus_active)<br>     pcan_can_set_bus_active(0);<br>   pcan_device.can.btr0 = cmd-&gt;param[1];<br>   pcan_device.can.btr1 = cmd-&gt;param[0];<br>   pcan_set_bitrate( cmd-&gt;param );<br>   if (pcan_device.bus_active)<br>     pcan_can_set_bus_active(<br>       pcan_device.bus_active);<br><br> 4) Bit timing<br> STM32F072 CANbps = APB1_clock / BRP / (tseg1 + tseg2 + 1)<br> PCAN-View发送给CANable下位机的有关时序的4个参数中sjw、tseg1和tseg2是三个数组的索引，索引到三个值后分别减去1，再写入CAN_BTR寄存器，而brp的数值做特殊处理后，再减去1写入CAN_BTR寄存器。<br> 从函数SystemClock_Config中找出APB1 bxCAN的时钟信息，APB1的时钟是48 MHz。<br><br> 500 kBit/s<br> APB1: 48 MHz<br> tseg1 = c -&gt; CAN_BS1_13TQ -&gt; 13<br> tseg2 = 1 -&gt; CAN_BS2_2TQ -&gt; 2<br> brp = 0 -&gt; 1 x 6 -&gt; 6<br> sjw = 0 -&gt; CAN_SJW_1TQ -&gt; 1<br><br> 4 USB<br> 4.1 USB SRAM<br> USB SRAM base: 0x4000_6000<br> STM32F072/042是2014年发布的产品。STM32F072/042上对STM32F103的USBD做了改进，0x400空间里面塞下了1024B的SRAM，而且最后面的256B可以分给CAN专用，前面768B给USBD，完美解决了STM32F103的USBD和CAN不能同时使用的问题。除此之外，STM32F072/042还增加了LPM、DP上拉电阻；尤其是DP上拉电阻，节省一个电阻和一个IO，是非常好的改进。<br><br> 4.2 Flash and SRAM Base Address<br> STM32F042/072 bootROM supports USB DFU. The built-in USB IP is legacy, not DWC.<br> On-chip Flash base address: 0x0800_0000, 1 Kbyte page<br> On-chip RAM base address: 0x2000_0000, SRAM data bus is 36 bits because 4 bits are available for parity check (1 bit per byte) in order to increase memory robustness.<br><br> 4.3 DFU Tool<br> Refer to AN2606 to get what STM32 devices support DFU bootloader.<br> Use Zadig to replace DFU driver with WinUSB.<br> https://zadig.akeo.ie/<br> https://dfu-util.sourceforge.net/<br> dfu-util -d 0483:df11 -a 0 -s 0x08000000 -D xx.bin<br><br> There is a web to implement USB DFU based on the draft WebUSB specification (based on WinUSB, Javascript API, Chrome 61, in 2018).<br><br> 4.4 VCP<br> STM32F0x2xx USB FS device library: UM1717<br> 1）添加CDC ACM的3个端点时，顺序排在PCAN的4个端点之后，中间不能有端点不用，否则Windows 10 CDC ACM不工作。<br> 2）CAN_MSGIN和VCP_DATIN双方会互抢带宽，所以VCP发送到PC的日志要尽可能少。<br> 3）VCP的setup bRequest只要实现0x20（SET）和0x21（GET）。<br><br> typedef struct usb_interface_assoc_descriptor {<!-- --><br>   uint8_t bLength;<br>   uint8_t bDescriptorType;<br>   uint8_t bFirstInterface;<br>   uint8_t bInterfaceCount;<br>   uint8_t bFunctionClass;<br>   uint8_t bFunctionSubClass;<br>   uint8_t bFunctionProtocol;<br>   uint8_t iFunction;<br> } USB_INTERFACE_ASSOC_DESCRIPTOR;<br><br> typedef struct usb_cdc_header_desc {<!-- --><br>   uint8_t bLength;<br>   uint8_t bDescriptorType;<br>   uint8_t bDescriptorSubType;<br>   uint16_t bcdCDC;<br> } USB_CDC_HEADER_DESC;<br> typedef struct usb_cdc_call_mgmt_descriptor {<!-- --><br>   uint8_t bLength;<br>   uint8_t bDescriptorType;<br>   uint8_t bDescriptorSubType;<br>   uint8_t bmCapabilities;<br>   uint8_t bDataInterface;<br> } USB_CDC_CALL_MGMT_DESCRIPTOR;<br> typedef struct usb_cdc_acm_descriptor {<!-- --><br>   uint8_t bLength;<br>   uint8_t bDescriptorType;<br>   uint8_t bDescriptorSubType;<br>   uint8_t bmCapabilities;<br> } USB_CDC_ACM_DESCRIPTOR;<br> typedef struct usb_cdc_union_desc {<!-- --><br>   uint8_t bLength;<br>   uint8_t bDescriptorType;<br>   uint8_t bDescriptorSubType;<br>   uint8_t bMasterInterface0;<br>   uint8_t bSlaveInterface0;<br> } USB_CDC_UNION_DESC;<br><br> static struct usb_cdc_line_coding line_code = {<!-- --><br>   .dwDTERate = 9600,<br>   .bCharFormat = 0, /* stop bits-1 */<br>   .bParityType = 0, /* none */<br>   .bDataBits = 8, /* nb. of bits 8 */<br> };<br><br> include &lt;stdarg.h&gt;<br> void usb_printf(const char *fmt, ...)<br> {<!-- --><br>   USBD_HandleTypeDef *pdev = &amp;hUsbDeviceFS;<br>   va_list args;<br>   uint32_t len;<br>   char buf[APP_TX_DATA_SIZE];<br><br><strong>  if (pdev-&gt;dev_state !=<br>       USBD_STATE_CONFIGURED)<br>     return;</strong><br><br>   va_start(args, fmt);<br>   len = vsnprintf(buf,<br>         (APP_TX_DATA_SIZE - 1),<br>         fmt, args);<br>   va_end(args);<br>   buf[len] = '\0';<br><br>   if (pdev-&gt;ep_in[VCP_USB_EP_DATIN &amp; 0xFU].total_length)<br>     return;<br>   pdev-&gt;ep_in[VCP_USB_EP_DATIN &amp; 0xFU].total_length =<br>     (len + 1);<br>   USBD_LL_Transmit(pdev,<br>     VCP_USB_EP_DATIN,<br>     (uint8_t *)buf,<br>     (len + 1));<br> }<br> Download Davidozzoo / STM32-USB-VCP from github.<br><br> 4.5 socketCAN<br> sudo ip link set can0 type can bitrate 500000 restart-ms 100<br> sudo ip link set up can0<br> sudo apt install can-utils<br> candump can0<br> CAN identifier: 456h<br> CAN data: 00h FFh AAh 55h 01h 02h 03h 04h (8 bytes)<br> cansend can0 456#00FFAA5501020304<br><br> 5 STM32软件实施USB PD协议<br> USB PD通讯使用的是双相标记码（Bi-phase Mark Code，BMC，300KHz，bit rate 600kbps），此码是一种单线通信编码，数据1的传输需要有一次高/低电平之间的切换过程，数据0的传输则是固定的高电平或低电平。<br><br> TX：SPI1从模式MISO当作TX，SPI1 CLK通过配置TIM14产生，工作在600KHz（对应BMC 600kbps），ARR = 72Mhz / 600kbps，PSC = 0，72MHz频率输入，每计数12个（= 72MHz / 600kbps）触发产生一个SPI1从clk时钟。<br> SPI传输数据过程中总是先发送或接收高字节数据，每个时钟周期接收器或发送器左移一位数据。对于小于16位的数据，在发送前必须左对齐，如果接收的数据小于16位，则采用软件将无效的数据位屏蔽。<br><br> RX：TIM1 CH1输入捕获模式并用DMA接收数据。<br> 输入捕获模式下：当捕获单元捕获到外来有效信号边沿事件（通过TIM1 CH1 Capture Compare Enable Register = 0xB设置上升沿和下降沿捕获，STM32库使用宏TIM_ICPolarity_BothEdge = 0x000A配置双边沿触发捕获），将此刻计数器的值锁存到CCR（Capture Compare Register，16bit）影子寄存器并自动将CCR影子寄存器的值拷贝进CCR预装寄存器，以供用户读取。DMA传输方式就是将CCR预装寄存器中的计数值传输到内存中。CCR寄存器中的计数值与上一次的计数值相减 x 计数频率的倒数 = 高电平或者低电平信号宽度。<br> 输入捕获采样的频率就是定时器经过预分配器（PSC）之后的频率，譬如STM32F1 TIM1 CH1的计数器频率等于2.4MHz = 72MHz/(Prescaler + 1)，那么计数器计数每增加4个就表示BMC（bit rate 600kbps）的一个bit。解码时，如果连续2次计数间隔之差都小于6，那么这2次计数间隔对应的4b5b bit是1，如果1次计数间隔之差大于6，说明这次4b5b bit是0。<br><br> https://github.com/alterapraxisptyltd/chromium-ec/blob/master/chip/stm32<br><br> MISO (DAT0): mi s əu<br> MOSI (CMD): m əu si<br><br> 6 General Abbreviations<br> AIRC：Application Interrupt and Reset Register<br> ARR: Automatic Reload Register<br> BKP: BackUp<br> BSP：Board Support Package<br> CCER: Capture/Compare Enable Register，用来判断当前是下降沿捕获中断还是上升沿捕获中断，同时也能随时改变上升沿捕获还是下降沿捕获<br> CCR: Capture/Compare Register，表示当前中断发生时的CNT寄存器的值，也就是用来判断时间的；PWM输出时作为占空比寄存器，函数是TIM_SetCompare1(...)<br> CNT: Counter Register，用来计数的，每个定时器时钟周期自动+1，在需要的时间将其清零，便于计时<br> CmBacktrace：Cortex Microcontroller Backtrace，是一款针对ARM Cortex-M系列MCU的错误代码自动追踪、定位、错误原因自动分析的开源库<br> CubeMX：Microcontroller GUI<br> eCC-USB：eCos Centric USB<br> GHS：Green Hills Software，提供GHS hypervisor（类似于QNX hypervisor）、仪表专用RTOS、MCU开发IDE<br> IAR：后两个字母取之于创始人名字Anders Rundgren的首字母，瑞典语Ingenjörsfirman Anders Rundgren，意为Anders Rundgren工程公司<br> IAR icf：ILINK Configuration File<br> MDATA：More DATA，USB ep双缓冲（ep_kind配置使能）切换机制对应到DATA0和DATA1<br> MSP：MCU Specific Package<br> NVIC：Nested Vectors Interrupts Controller<br> NVIC IPR：Interrupt Priority Registers<br> OC：Output Compare（输出比较），用于输出PWM信号；寄存器CNT与CCR比较，大于输出1，小于输出0<br> PMA：Packet Buffer Memory Area<br> PSC：PreSCaler register，预分频寄存器<br> RCC：Reset and Clock Control<br> RCR：Repetition Counter Register，重复次数寄存器<br> SHPRx：System Handler Priority Registers<br> SR: Status Register，用来判断是不是输入捕获中断<br> ST AMG：Analog and MEMS Group，模拟和MEMS部门（现在改成了Analog, MEMS and Sensors Group）<br> STM32H7：High-perf Cortex-M7<br> STM32WB：WB表示集成了Wireless Bluetooth模块<br> STM32WL：WL表示集成了Wireless LoRa模块<br> PendSV：Pendable 服务是一个中断请求，如果没有其他中断需要响应时，系统将强制执行上下文切换<br> SVCall：SuperVisor Call由SVC指令触发，FreeRTOS用它来启动任务调度<br> USB BH reset：Bigger Hammer or Brad Hosler，表示warm reset；you may be confused why the USB 3.0 spec calls the same type of reset "warm reset" in some places and "BH reset" in other places. "BH" reset is supposed to stand for "Big Hammer" reset, but it also stands for "Brad Hosler". Brad died shortly after the USB 3.0 bus specification was started, and they decided to name the reset after him. The suggestion was made shortly before the spec was finalized, so the wording is a bit inconsistent.</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9225e229bcc0fa5d72ce2bb9d995adc7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【halcon算子】set_window_param</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/779a851ec173132b47c24b7cf66f1be6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">三极管集电结反偏为什么能导通</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>