<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>推荐 ： 利用深度学习和机器学习预测股票市场（附代码） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="推荐 ： 利用深度学习和机器学习预测股票市场（附代码）" />
<meta property="og:description" content="来源：AISHWARYA SINGH, 2018年10月25日；翻译：赵雪尧；校对：车前子
本文约8000字，建议阅读15&#43;分钟。
本文介绍了如何运用深度学习法预测股票市场。
简介 预测股市将如何变化历来是最困难的事情之一。这个预测行为中包含着如此之多的因素—包括物理或心理因素、理性或者不理性行为因素等等。所有这些因素结合在一起，使得股价波动剧烈，很难准确预测。
使用机器学习可能改变游戏规则吗？机器学习技术使用最新的组织公告、季度收益等作为特征，有潜力挖掘出我们以前没有见过的模式和见解，并可用于准确无误的预测。
在本文中，我们将研究上市公司股价的历史数据。我们将结合机器学习算法来预测这家公司的未来股价，从平均和线性回归这样的简单算法开始，然后转向像Auto ARIMA和LSTM这样的高级模型。
本文背后的核心思想是展示这些算法是如何实现的，因此我只会简单描述该技术并提供相关参考链接，以便在必要时对这些概念进行复习。如果您是时间序列领域的新手，我建议您先阅读以下文章:
创建时间序列预测的初学者综合指南
时间序列建模的完整教程
目录 1、 问题理解
2、 移动平均
3、 线性回归
4、 K-近邻
5、 自动ARIMA
6、 先知（Prophet）
7、 长短时记忆网络（LSTM）
1、问题理解 我们将很快深入本文的实现部分，但首先重要的是确定我们要解决的问题。一般来说，股票市场分析分为两个部分——基本面分析和技术分析。
基本面分析是根据公司目前的经营环境和财务状况，对公司未来的盈利能力进行分析。
技术分析包括阅读图表和使用统计数字来确定股票市场的趋势。
您可能已经猜到，我们的重点将放在技术分析部分。我们将使用来自Quandl的数据集(您可以在这里找到各种股票的历史数据)，这个项目中，我使用了“塔塔全球饮料”的数据。是时候开始了!
首先让我们加载数据集，定义问题的目标变量:
#import packages
import pandas as pd
import numpy as np
#to plot within notebook
import matplotlib.pyplot as plt
%matplotlib inline
#setting figure size
from matplotlib.pylab import rcParams
rcParams[&#39;figure.figsize&#39;] = 20,10
#for normalizing data
from sklearn.preprocessing import MinMaxScaler" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/e379514e8a337fb67531a45e07881eab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-07T10:09:27+08:00" />
<meta property="article:modified_time" content="2019-01-07T10:09:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">推荐 ： 利用深度学习和机器学习预测股票市场（附代码）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="rich_media_content" id="js_content"> 
 <p><span style="color:rgb(136,136,136);font-size:14px;">来源：AISHWARYA SINGH, 2018年10月25日；翻译：赵雪尧；校对：车前子</span><br></p> 
 <p style="min-height:1em;">本文约<strong><span style="color:rgb(166,91,203);">8000</span></strong><span style="color:rgb(166,91,203);"><strong>字，</strong></span>建议阅读<strong><span style="color:rgb(166,91,203);">15+</span></strong><strong><span style="color:rgb(166,91,203);">分钟。</span></strong><br></p> 
 <p style="min-height:1em;">本文介绍了如何运用深度学习法预测股票市场。</p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"></h3> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">简介</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">预测股市将如何变化历来是最困难的事情之一。这个预测行为中包含着如此之多的因素—包括物理或心理因素、理性或者不理性行为因素等等。所有这些因素结合在一起，使得股价波动剧烈，很难准确预测。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">使用机器学习可能改变游戏规则吗？机器学习技术使用最新的组织公告、季度收益等作为特征，有潜力挖掘出我们以前没有见过的模式和见解，并可用于准确无误的预测。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/4b/fd/CpgvtEwz_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">在本文中，我们将研究上市公司股价的历史数据。我们将结合机器学习算法来预测这家公司的未来股价，从平均和线性回归这样的简单算法开始，然后转向像Auto ARIMA和LSTM这样的高级模型。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">本文背后的核心思想是展示这些算法是如何实现的，因此我只会简单描述该技术并提供相关参考链接，以便在必要时对这些概念进行复习。如果您是时间序列领域的新手，我建议您先阅读以下文章:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="color:rgb(0,0,0);font-size:15px;">创建时间序列预测的初学者综合指南</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="color:rgb(0,0,0);font-size:15px;">时间序列建模的完整教程</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">目录</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">1、 问题理解</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">2、 移动平均</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">3、 线性回归</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">4、 K-近邻</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">5、 自动ARIMA</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">6、 先知（Prophet）</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">7、 长短时记忆网络（LSTM）</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">1、问题理解</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我们将很快深入本文的实现部分，但首先重要的是确定我们要解决的问题。一般来说，股票市场分析分为两个部分——基本面分析和技术分析。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">基本面分析是根据公司目前的经营环境和财务状况，对公司未来的盈利能力进行分析。</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">技术分析包括阅读图表和使用统计数字来确定股票市场的趋势。</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">您可能已经猜到，我们的重点将放在技术分析部分。我们将使用来自Quandl的数据集(您可以在这里找到各种股票的历史数据)，这个项目中，我使用了“塔塔全球饮料”的数据。是时候开始了!</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">首先让我们加载数据集，定义问题的目标变量:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#import packages</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">import pandas as pd</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">import numpy as np</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#to plot within notebook</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">import matplotlib.pyplot as plt</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">%matplotlib inline</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#setting figure size</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from matplotlib.pylab import rcParams</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rcParams['figure.figsize'] = 20,10</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">#for normalizing data</span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">from sklearn.preprocessing import MinMaxScaler</span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">scaler = MinMaxScaler(feature_range=(0, 1))</span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">#read the file</span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">df = pd.read_csv('NSE-TATAGLOBAL(1).csv')</span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">#print the head</span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">df.head()</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/30/8b/1MQdqrHT_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">数据集中有多个变量——日期（date）、开盘价(open)、最高价(high)、最低价(low)、最后交易价(last)、收盘价(close)、总交易额(total_trade_quantity)和营业额(turnover)。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;"><span style="font-size:15px;">开盘价和收盘价代表股票在某一天交易的起始价和最终价。</span></p></li><li><p style="min-height:1em;"><span style="font-size:15px;">最高价、最低价和最后交易价表示当天股票的最高价、最低价和最后交易价格。</span></p></li><li><p style="min-height:1em;"><span style="font-size:15px;">交易总量是指当天买卖的股票数量，而营业额(Lacs)是指某一特定公司在某一特定日期的营业额。</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">要注意的另一点是，市场在周末和公共假期休市。注意上表缺失了一些日期值——2/10/2018、6/10/2018、7/10/2018。其中2号是国庆节，6号和7号是周末。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">损益的计算通常由股票当日的收盘价决定，因此我们将收盘价作为目标变量。让我们画出目标变量来理解它在我们的数据集中的分布:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#setting index as date</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">df['Date'] = pd.to_datetime(df.Date,format='%Y-%m-%d')</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">df.index = df['Date']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#plot</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.figure(figsize=(16,8))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(df['Close'], label='Close Price history')</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/ee/38/NaNO9Wjc_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">在接下来的部分中，我们将探索这些变量，并使用不同的技术来预测股票的每日收盘价。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">2、移动平均</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">简介</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">“平均数”是我们日常生活中最常用的统计量之一。例如，计算平均分数来确定整体表现，或者根据过去几天的平均温度来了解今天的温度——这些都是我们经常做的日常工作。因此，使用这个方法开始用数据集进行预测是个不错的选择。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我们利用一组先前观测值的平均值作为每天的预期收盘价。我们将使用移动平均法，而不是使用简单的平均值，移动平均法使用最近的一组数据计算预测值。换句话说，对于后续的每个新的时间，在考虑预测值时，将从集合中删除最早的观测值，并加入上一个观测值。下面是一个简单的图，它将帮助您更清楚地理解这一点。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/49/6b/QJW5vJri_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我们将在数据集上使用这种技术。第一步是创建一个只包含日期和收盘价列的数据框，然后将其拆分为训练集和验证集来验证我们的预测。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">实现</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#creating dataframe with date and the target variable</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">data = df.sort_index(ascending=True, axis=0)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data = pd.DataFrame(index=range(0,len(df)),columns=['Date', 'Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(0,len(data)):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">     new_data['Date'][i] = data['Date'][i]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">     new_data['Close'][i] = data['Close'][i]</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">在将数据分割为训练和验证时，我们不能使用随机分割，因为这会破坏时间顺序。所以这里我将去年的数据作为验证集，将之前4年的数据作为训练集。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#splitting into train and validation</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train = new_data[:987]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid = new_data[987:]</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:normal;"><span style="font-size:14px;"> </span></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data.shape, train.shape, valid.shape</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">((1235, 2), (987, 2), (248, 2))</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-family:'等线';font-size:14px;"> </span></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train['Date'].min(), train['Date'].max(), valid['Date'].min(), valid['Date'].max()</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">(Timestamp('2013-10-08 00:00:00'),</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">Timestamp('2017-10-06 00:00:00'),</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">Timestamp('2017-10-09 00:00:00'),</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">Timestamp('2018-10-08 00:00:00'))</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">下一步是为验证集创建预测值，并使用真实值来检查RMSE误差。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#make predictions</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">preds = []</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(0,248):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    a = train['Close'][len(train)-248+i:].sum() + sum(preds)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    b = a/248</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    preds.append(b)</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">结果</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#calculate rmse</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms=np.sqrt(np.mean(np.power((np.array(valid['Close'])-preds),2)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">104.51415465984348</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">仅仅检查RMSE并不能帮助我们评估模型预测效果的。让我们通过做图得到更直观的理解。下面是预测值和实际值的曲线图。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#plot</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = 0</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = preds</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(train['Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(valid[['Close', 'Predictions']])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/35/09/a2HjkD4j_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">推论</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">RMSE值接近105，但是结果不是很理想(从图中可以看出)。预测值与训练集的观测值的范围相同(开始有上升趋势，然后缓慢下降)。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">在下一节中，我们将使用两种常用的机器学习技术——线性回归和kNN，看看它们在我们的股票市场数据上表现如何。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);"> </span></strong></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">3、线性回归</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">简介</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">在这些数据上可以实现的最基本的机器学习算法是线性回归。线性回归模型生成一个确定自变量和因变量之间关系的方程。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-family:'宋体';font-size:14px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-size:15px;">线性回归方程可以写成：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/7a/03/aTXyBbxl_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">在这里x1, x2, ....xn代表自变量,系数θ1,θ2,....θn代表权重。你可以参考下面的文章来更详细地学习线性回归:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">对于线性回归和Lasso回归的一个综合的初学者指南.</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我们的问题中，没有太多的自变量，只有日期。让我们使用时间（date）列提取特征，如- day, month, year, mon/fri等，然后拟合线性回归模型。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">实现</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我们将首先按升序对数据集进行排序，然后创建一个单独的数据集，这样创建的任何新特性都不会影响原始数据。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#setting index as date values</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">df['Date'] = pd.to_datetime(df.Date,format='%Y-%m-%d')</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">df.index = df['Date']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#sorting</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">data = df.sort_index(ascending=True, axis=0)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#creating a separate dataset</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data = pd.DataFrame(index=range(0,len(df)),columns=['Date', 'Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(0,len(data)):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    new_data['Date'][i] = data['Date'][i]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    new_data['Close'][i] = data['Close'][i]</span></p> 
  <p style="min-height:1em;"><br></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#create features</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from fastai.structured import  add_datepart</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">add_datepart(new_data, 'Date')</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data.drop('Elapsed', axis=1, inplace=True)  #elapsed will be the time stamp</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">这将创建以下特征：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">‘Year’, ‘Month’, ‘Week’, ‘Day’, ‘Dayofweek’, ‘Dayofyear’, ‘Is_month_end’, ‘Is_month_start’, ‘Is_quarter_end’, ‘Is_quarter_start’,  ‘Is_year_end’, and  ‘Is_year_start’.</span></p> 
  <p style="min-height:1em;"><br></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);">注意:我使用了来自fastai库的add_datepart。如果您没有安装它，您可以简单地使用命令pip install fastai。您也可以使用python中的简单for循环来创建这些特性。我在下面展示了一个例子。</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-family:'宋体';font-size:14px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">除此之外，我们还可以添加自己的一组特性，我们认为这些特性与预测相关。例如，我的假设是，本周的头几天和最后几天对股票收盘价的影响可能远远超过其他日子。因此，我创建了一个特性来识别给定的一天是星期一/星期五还是星期二/星期三/星期四。这可以用以下几行代码来完成:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data['mon_fri'] = 0</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(0,len(new_data)):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    if (new_data['Dayofweek'][i] == 0 or new_data['Dayofweek'][i] == 4):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">        new_data['mon_fri'][i] = 1</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    else:</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">        new_data['mon_fri'][i] = 0</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">如果是星期日或星期五，列值将为1，否则为0。类似地，您可以创建多个特性。如果你对有助于预测股价的特征有一些想法，请在留言里分享。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">现在我们将把数据分成训练集和验证集来检查模型的性能。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#split into train and validation</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train = new_data[:987]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid = new_data[987:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">x_train = train.drop('Close', axis=1)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">y_train = train['Close']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">x_valid = valid.drop('Close', axis=1)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">y_valid = valid['Close']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#implement linear regression</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from sklearn.linear_model import LinearRegression</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model = LinearRegression()</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.fit(x_train,y_train)</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><strong><span style="color:rgb(0,0,0);font-size:15px;">结果</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">#make predictions and find the rmse</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">preds = model.predict(x_valid)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">rms=np.sqrt(np.mean(np.power((np.array(y_valid)-np.array(preds)),2)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">rms</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">121.16291596523156</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-size:15px;">RMSE值高于之前的方法，这清楚地表明线性回归的表现很差。让我们看看这个图，并理解为什么线性回归预测效果不是很好:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#plot</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = 0</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = preds</span></p> 
  <p style="min-height:1em;"><br></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid.index = new_data[987:].index</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train.index = new_data[:987].index</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(train['Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(valid[['Close', 'Predictions']])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/39/cf/x6X9p6wv_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;text-align:left;line-height:1.5em;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">推论</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">线性回归是一种简单的技术，很容易解释，但也有一些明显的缺点。使用回归算法的一个问题是，模型过度拟合了日期和月份。模型将考虑一个月前相同日期或一年前相同日期/月的值，而不是从预测的角度考虑以前的值。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">从上图可以看出，2016年1月和2017年1月，股价出现下跌。该模型预测2018年1月也将如此。线性回归技术可以很好地解决像大卖场销售这样的问题，在这些问题中，独立的特征对于确定目标值是有用的。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">4、k-近邻</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">简介</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">另一个有趣的ML算法是kNN (k近邻)。基于自变量，kNN可以发现新数据点与旧数据点之间的相似性。让我用一个简单的例子来解释这个问题。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">考虑11个人的身高和年龄。根据给定的特征(“年龄”和“身高”)，下表可以用图形形式表示，如下图所示:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/fc/a9/lQqKZGVR_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">为了确定ID #11的权重，kNN考虑该ID的最近邻居的权重。ID #11的权重被预测为其邻居的平均值。如果我们现在考虑三个邻居(k=3)， ID#11的重量将是= (77+72+60)/3 = 69.66 kg。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/0d/03/3ZnNAEbd_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">对于kNN的详细了解，可以参考以下文章：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">k近邻介绍:简介</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">对k近邻回归算法的实际介绍</span></p><p style="min-height:1em;line-height:1.5em;"><br></p></li></ul> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">实现</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#importing libraries</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from sklearn import neighbors</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from sklearn.model_selection import GridSearchCV</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from sklearn.preprocessing import MinMaxScaler</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">scaler = MinMaxScaler(feature_range=(0, 1))</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">使用上一节中相同的训练和验证集:</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">#scaling data</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">x_train_scaled = scaler.fit_transform(x_train)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">x_train = pd.DataFrame(x_train_scaled)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">x_valid_scaled = scaler.fit_transform(x_valid)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">x_valid = pd.DataFrame(x_valid_scaled)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">#using gridsearch to find the best parameter</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">params = {'n_neighbors':[2,3,4,5,6,7,8,9]}</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">knn = neighbors.KNeighborsRegressor()</span></p> 
  <p style="min-height:1em;"><br></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model = GridSearchCV(knn, params, cv=5)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#fit the model and make predictions</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.fit(x_train,y_train)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">preds = model.predict(x_valid)</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:left;"><span style="color:rgb(0,0,0);"><strong><span style="font-size:15px;">结果</span></strong></span></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#rmse</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms=np.sqrt(np.mean(np.power((np.array(y_valid)-np.array(preds)),2)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">115.17086550026721</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">RMSE值并没有太大的差异，但是一个预测值和实际值的曲线图应该提供一个更清晰的理解。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-family:'宋体';font-size:14px;"> </span></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#plot</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = 0</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = preds</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(valid[['Close', 'Predictions']])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(train['Close'])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/b4/0a/G5ctI7Qb_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">推论</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">RMSE值与线性回归模型近似，图中呈现出相同的模式。与线性回归一样，kNN也发现了2018年1月的下降，因为这是过去几年的模式。我们可以有把握地说，回归算法在这个数据集上表现得并不好。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">让我们来看一些时间序列预测技术，看看它们在面对股价预测挑战时的表现。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">5、自动ARIMA</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">简介</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">ARIMA是一种非常流行的时间序列预测统计方法。ARIMA模型使用过去的值来预测未来的值。ARIMA中有三个重要参数：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">p(用来预测下一个值的过去值)</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">q(用来预测未来值的过去预测误差)</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">d(差分的顺序)</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">ARIMA的参数优化需要大量时间。因此我们将使用自动 ARIMA，自动选择误差最小的(p,q,d)最佳组合。要了解更多关于自动ARIMA的工作原理，请参阅本文：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">利用自动ARIMA建立高性能时间序列模型</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">实现</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from pyramid.arima import auto_arima</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">data = df.sort_index(ascending=True, axis=0)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train = data[:987]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid = data[987:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">training = train['Close']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">validation = valid['Close']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model = auto_arima(training, start_p=1, start_q=1,max_p=3, max_q=3, m=12,start_P=0, seasonal=True,d=1, D=1, trace=True,error_action='ignore',suppress_warnings=True)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.fit(training)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">forecast = model.predict(n_periods=248)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">forecast = pd.DataFrame(forecast,index = valid.index,columns=['Prediction'])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">结果</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms=np.sqrt(np.mean(np.power((np.array(valid['Close'])-np.array(forecast['Prediction'])),2)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">44.954584993246954</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#plot</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(train['Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(valid['Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(forecast['Prediction'])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/04/2f/me2eipBv_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">推论</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">正如我们前面看到的，自动ARIMA模型使用过去的数据来理解时间序列中的模式。利用这些值，该模型捕捉到该系列中的增长趋势。虽然使用这种技术的预测比以前实现的机器学习模型的预测要好得多，但是这些预测仍然与实际值相距甚远。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">从图中可以明显看出，该模型在序列中捕捉到了一种趋势，但忽略了季节的影响。在下一节中，我们将使用一个同时考虑了序列的趋势和季节性的时间序列模型。该模型。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">6、先知（Prophet）</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">简介</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">有许多时间序列技术可以用在股票预测数据集上，但是大多数技术在拟合模型之前需要大量的数据预处理。Prophet（先知）由Facebook设计和开发，是一个时间序列预测库，不需要数据预处理，并且非常容易实现。先知的输入是一个带有两列的数据框:日期和目标(ds和y)。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">先知试图在过去的数据中捕捉季节性，并且在数据集很大的时候依然表现良好。这里有一篇有趣的文章，用一个简单和直观的方式解释了先知算法：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">使用Facebook的Prophet生成快速准确的时间序列预测</span></p></li></ul> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"></h5> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">实现</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:normal;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#importing prophet</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from fbprophet import Prophet</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#creating dataframe</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data = pd.DataFrame(index=range(0,len(df)),columns=['Date', 'Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(0,len(data)):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    new_data['Date'][i] = data['Date'][i]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    new_data['Close'][i] = data['Close'][i]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data['Date'] = pd.to_datetime(new_data.Date,format='%Y-%m-%d')</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data.index = new_data['Date']</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#preparing data</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data.rename(columns={'Close': 'y', 'Date': 'ds'}, inplace=True)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#train and validation</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train = new_data[:987]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid = new_data[987:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#fit the model</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model = Prophet()</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.fit(train)</span></p> 
  <p style="min-height:1em;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#predictions</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">close_prices = model.make_future_dataframe(periods=len(valid))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">forecast = model.predict(close_prices)</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">结果</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#rmse</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">forecast_valid = forecast['yhat'][987:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms=np.sqrt(np.mean(np.power((np.array(valid['y'])-np.array(forecast_valid)),2)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">57.494461930575149</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#plot</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = 0</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = forecast_valid.values</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(train['y'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(valid[['y', 'Predictions']])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/0a/78/XC4OggZl_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">推论</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">先知(像大多数时间序列预测技术一样)试图从过去的数据中捕捉趋势和季节性。该模型通常在时间序列数据集上表现良好，但在本例中没有达到预期效果。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">事实证明，股票价格没有特定的趋势或季节性。价格的涨跌很大程度上取决于目前市场上的情况。因此，像ARIMA、SARIMA和Prophet这样的预测技术并不能很好地解决这个特殊的问题。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">让我们继续尝试另一种高级技术——长短时记忆网络(LSTM)。</span></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"></h3> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><strong><span style="font-size:15px;color:rgb(166,91,203);">7、长短期记忆网络(LSTM)</span></strong></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">简介</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">LSTM 算法广泛应用于序列预测问题中，并被证明是一种非常有效的方法。它们之所表现如此出色，是因为LSTM能够存储重要的既往信息，并忽略不重要的信息。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">LSTM有三个门：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">输入门：输入门将信息添加到细胞状态</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">遗忘门：它移除模型不再需要的信息</span></p></li><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">输出门：LSTM的输出门选择作为输出的信息</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">要更详细地了解LSTM及其体系结构，可以阅读下面的文章：</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <ul class="list-paddingleft-2"><li><p style="min-height:1em;line-height:1.5em;"><span style="font-size:15px;">长短期记忆网络简介</span></p></li></ul> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">现在，让我们将LSTM实现为一个黑盒，并检查它在特定数据上的性能。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">实现</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#importing required libraries</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from sklearn.preprocessing import MinMaxScaler</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from keras.models import Sequential</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">from keras.layers import Dense, Dropout, LSTM</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#creating dataframe</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">data = df.sort_index(ascending=True, axis=0)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data = pd.DataFrame(index=range(0,len(df)),columns=['Date', 'Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(0,len(data)):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    new_data['Date'][i] = data['Date'][i]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    new_data['Close'][i] = data['Close'][i]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#setting index</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data.index = new_data.Date</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">new_data.drop('Date', axis=1, inplace=True)</span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#creating train and test sets</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">dataset = new_data.values</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train = dataset[0:987,:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid = dataset[987:,:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#converting dataset into x_train and y_train</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">scaler = MinMaxScaler(feature_range=(0, 1))</span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">scaled_data = scaler.fit_transform(dataset)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">x_train, y_train = [], []</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(60,len(train)):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    x_train.append(scaled_data[i-60:i,0])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    y_train.append(scaled_data[i,0])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">x_train, y_train = np.array(x_train), np.array(y_train)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">x_train = np.reshape(x_train, (x_train.shape[0],x_train.shape[1],1))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"># create and fit the LSTM network</span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model = Sequential()</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.add(LSTM(units=50, return_sequences=True, input_shape=(x_train.shape[1],1)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.add(LSTM(units=50))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.add(Dense(1))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);font-size:14px;">model.compile(loss='mean_squared_error', optimizer='adam')</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">model.fit(x_train, y_train, epochs=1, batch_size=1, verbose=2)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
 </blockquote> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);"><span style="font-size:14px;">#predicting 246 values, using past 60 from the train </span><span style="font-family:Calibri;font-size:13px;">data</span></span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">inputs = new_data[len(new_data) - len(valid) - 60:].values</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">inputs = inputs.reshape(-1,1)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">inputs  = scaler.transform(inputs)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">X_test = []</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">for i in range(60,inputs.shape[0]):</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">    X_test.append(inputs[i-60:i,0])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">X_test = np.array(X_test)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">X_test = np.reshape(X_test, (X_test.shape[0],X_test.shape[1],1))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">closing_price = model.predict(X_test)</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="color:rgb(136,136,136);"><span style="font-size:14px;">closing_price = scaler.inverse_transform(closi</span><span style="font-family:Calibri;font-size:13px;">ng_price)</span></span></p> 
 </blockquote> 
 <h5 style="letter-spacing:.5440000295639038px;"></h5> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">结果</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms=np.sqrt(np.mean(np.power((valid-closing_price),2)))</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">rms</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);"> </span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">11.772259608962642</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:normal;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">#for plotting</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">train = new_data[:987]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid = new_data[987:]</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">valid['Predictions'] = closing_price</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(train['Close'])</span></p> 
  <p style="min-height:1em;line-height:normal;"><span style="font-size:14px;color:rgb(136,136,136);">plt.plot(valid[['Close','Predictions']])</span></p> 
 </blockquote> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;text-align:center;"><img src="https://images2.imgbox.com/bb/36/lyX3t1ff_o.png" alt="640?wx_fmt=png"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <h5 style="letter-spacing:.5440000295639038px;line-height:1.5em;"><strong><span style="font-size:15px;">推论</span></strong></h5> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">哇！LSTM轻松地超越了我们目前看到的任何算法。LSTM模型可以对各种参数进行调优，如改变LSTM层数、增加dropout值或增加训练迭代轮数（epoch）数。但LSTM的预测是否足以确定股票价格将上涨还是下跌?当然不行！</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><span style="font-family:'宋体';font-size:14px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">正如我在文章开头提到的，股价受到公司新闻和其他因素的影响，如公司的非货币化或合并/分拆。还有一些无形的因素往往是无法事先预测的。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"></p> 
 <h3 style="letter-spacing:.5440000295639038px;line-height:1.5em;text-align:center;"><span style="color:rgb(166,91,203);"><strong><span style="font-size:15px;">写在最后</span></strong></span></h3> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我在写这些文章时意识到时间序列预测是一个非常有趣的领域。在社区中有观点认为这是一个复杂的领域，虽然有一定道理，我还是想说一旦你掌握了基本的技巧，就不难理解它了。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;"> </span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.5em;"><span style="font-size:15px;">我对LSTM如何处理其他时间序列的问题很感兴趣，并鼓励您自己也尝试一下。如果你有任何问题，请在下面的留言部分与我联系。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;"><br></p> 
 <blockquote style="letter-spacing:.5440000295639038px;"> 
  <p style="min-height:1em;line-height:normal;text-align:left;"><span style="font-size:14px;color:rgb(136,136,136);">原文链接：https://www.analyticsvidhya.com/blog/2018/10/predicting-stock-price-machine-learningnd-deep-learning-techniques-python/</span></p> 
 </blockquote> 
 <p><br></p> 
 <p style="line-height:normal;"><strong><span style="font-size:14px;">译者简介：赵雪尧</span></strong><span style="font-size:14px;">，北邮研三在读，京东见习算法工程师，目前研究强化学习广告竞价模型。相信数据和算法将为企业发展赋能，希望跟志同道合的小伙伴一起追寻前沿消息，深入探索算法的极限。在玄学调参的道路上，一路狂奔。</span></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:1.75em;text-align:center;"><strong><span style="font-size:15px;">「完」</span></strong></p> 
 <hr style="letter-spacing:.5440000295639038px;"> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:normal;"><strong style="color:rgb(62,62,62);font-size:14px;">本次转自：THU数据派 微信公众号；</strong></p> 
 <p style="min-height:1em;letter-spacing:.5440000295639038px;line-height:normal;"><strong><strong style="font-size:16px;text-align:right;"><span style="font-size:12px;">版权声明：本号内容部分来自互联网，转载请注明原文链接和作者，如有侵权或出处有误请和我们联系。</span></strong></strong><br></p> 
 <h2 style="font-weight:bold;font-family:arial, sans-serif;line-height:normal;text-align:left;font-size:20px;border-left-width:6px;border-left-style:solid;border-left-color:rgb(0,153,127);letter-spacing:1px;word-spacing:1px;"><span style="font-size:16px;">关联阅读</span></h2> 
 <p style="min-height:1em;text-align:center;line-height:normal;"><strong><span style="color:rgb(122,68,66);">原创系列文章：</span></strong></p> 
 <p style="min-height:1em;"><strong><span style="font-size:14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886725&amp;idx=1&amp;sn=1c5b997d8a6d8be2dcc8f4627d5e21c0&amp;chksm=bd48ed668a3f6470c5648106c0802a3cc1cc7bddfa17a36ad591b7f4bab7986adb021f62a949&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">1：从0开始搭建自己的数据运营指标体系</a><strong style="font-size:16px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886776&amp;idx=1&amp;sn=c5cdd7f1a10fe84742b107cc324f26a7&amp;chksm=bd48ed5b8a3f644d98af6f8ebc564fd1894a5acb15999c26ca759043bafe783d7b4b8e197fb6&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">（概括篇）</a></strong></span></strong></p> 
 <p style="min-height:1em;"><strong><span style="font-size:14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886776&amp;idx=1&amp;sn=c5cdd7f1a10fe84742b107cc324f26a7&amp;chksm=bd48ed5b8a3f644d98af6f8ebc564fd1894a5acb15999c26ca759043bafe783d7b4b8e197fb6&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">2 ：从0开始搭建自己的数据运营指标体系（定位篇）</a><br></span></strong></p> 
 <p style="min-height:1em;"><strong><span style="font-size:14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886892&amp;idx=1&amp;sn=b9a7aee2dc0d479a36aa5d2fc0022bcb&amp;chksm=bd48eccf8a3f65d9402d4f24cb282cb7bec01b81d47552c6faa8ce2c129ce51facc9d6480824&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">3 ：从0开始搭建自己的数据运营体系（业务理解篇）</a></span></strong></p> 
 <p style="min-height:1em;"><span style="font-size:14px;"><strong><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886905&amp;idx=1&amp;sn=39975422fbfc1d40565517192ac6aacb&amp;chksm=bd48ecda8a3f65cc8436dceb38e327eff64e936e215ff6898ef9665d3093389884903e63d382&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">4 ：数据指标的构建流程与逻辑</a><br></strong></span></p> 
 <p style="min-height:1em;"><span style="font-size:14px;color:rgb(0,122,170);"><strong>5 ：</strong></span><span style="font-size:14px;"><strong><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886969&amp;idx=1&amp;sn=add9ad38051ef9c56afc5f88efe1de15&amp;chksm=bd48ec9a8a3f658c5be92f2295bf4519f5d7fa245625c0001edb34e5b21b1d16e3652d070a8f&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">系列 ：从数据指标到数据运营指标体系</a></strong></span></p> 
 <p style="min-height:1em;"><span style="font-size:14px;color:rgb(0,122,170);"><strong>6:  </strong></span><span style="font-size:14px;"><strong> </strong></span><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651887041&amp;idx=1&amp;sn=8907c59e5084d70d379ffad8f9b9c201&amp;chksm=bd48ec228a3f653402e04446058ba10e64e65853d7ac785e5bb8bc5eefad3bb48bc0a84b6b2d&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);"><span style="font-size:14px;"><strong>实战 ：为自己的公号搭建一个数据运营指标体系</strong></span></a></p> 
 <p style="min-height:1em;"><span style="font-size:14px;color:rgb(0,122,170);"><strong>7: </strong></span><span style="font-size:14px;"><strong> </strong><strong><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651887182&amp;idx=1&amp;sn=6396553705d5c562ee9eda3b4d000847&amp;chksm=bd48efad8a3f66bbc8a45320d6994501f6c7afaf3611f2ecceefb88132755971ed7a190b8b0e&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">从0开始搭建自己的数据运营指标体系（运营活动分析）</a></strong></span></p> 
 <p style="min-height:1em;text-align:center;"><strong><span style="color:rgb(61,170,214);">数据运营 <span style="font-size:14px;">关联文章阅读：</span></span><span style="color:rgb(0,128,255);">  </span></strong></p> 
 <p style="min-height:1em;"><span style="font-size:14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886766&amp;idx=1&amp;sn=0f33e02714891a2e25f48eb07bda11f3&amp;chksm=bd48ed4d8a3f645ba80343a6fdeca6814752b8bb2bb3529596b4b97108d4e454123d6078a827&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">运营入门，从0到1搭建数据分析知识体系</a>    </span></p> 
 <p style="min-height:1em;"><span style="font-size:14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886909&amp;idx=1&amp;sn=64448240f01c4dd721e1863b5663c9cd&amp;chksm=bd48ecde8a3f65c8ae09f7ead31e1790e0290a9711c106af9fbf1b96ff76f05670d929cf56c5&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);">推荐 ：数据分析师与运营协作的9个好习惯</a><br></span></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886640&amp;idx=2&amp;sn=a23546d95b1de60fcbf00d13c30c834b&amp;chksm=bd48edd38a3f64c54caf5b9519fdb1f2e5d6d0c4f6de4e93e71c86f1a71de17e2df92db536a8&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">干货 ：手把手教你搭建数据化用户运营体系</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886874&amp;idx=2&amp;sn=8a3f13f3a83c31f3bba86f46d5eff927&amp;chksm=bd48ecf98a3f65ef2936888a6439ececedce569cda6d7564ad7cd8da6d0e9c147c476c416b25&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">推荐 ：最用心的运营数据指标解读</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886565&amp;idx=2&amp;sn=3dd858d2caa5a1c8262ac4cabf86147f&amp;chksm=bd48ea068a3f63108e25b860a256ca664daebb8d8b5d32b7e28c8152a5d2ba328e9afeaee245&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">干货 : 如何构建数据运营指标体系</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886490&amp;idx=1&amp;sn=2349a491b9d4aa2efc04e9efb57a75d9&amp;chksm=bd48ea798a3f636fca8cfbb7a0102a643653f6e8184511c206104a7afd3cc60d12698ed12d4a&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">从零开始，构建数据化运营体系</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886666&amp;idx=1&amp;sn=630bf44be93f45a3e0bd0a09f6c4bae1&amp;chksm=bd48eda98a3f64bfd9288b3744d91415e341ac865777abf479940ccf5d5f0a3c8fd45d830992&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">干货 ：解读产品、运营和数据三个基友关系</a><br></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886685&amp;idx=2&amp;sn=781a6ecb92d3bef1584b8de29b8abc7c&amp;chksm=bd48edbe8a3f64a892fd95f0c0b053c8286a5c94619406d6740ff436a42188baa9b24d1cf573&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">干货 ：从0到1搭建数据运营体系</a></p> 
 <p style="min-height:1em;text-align:center;"><span style="color:rgb(122,79,214);"><strong>数据分析、数据产品 </strong><span style="font-size:14px;">关联文章阅读：</span></span></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886651&amp;idx=2&amp;sn=abcd581040364d5d9ec43d2f1770a5eb&amp;chksm=bd48edd88a3f64ceabdefe15f272ac2d82c65345874c45e03478d97160e69a2e94829e4a1aa3&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">干货 ：数据分析团队的搭建和思考</a><br></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651887084&amp;idx=1&amp;sn=f18ee07e75e9177afa082de73bce4001&amp;chksm=bd48ec0f8a3f65193d78cfada6ff38269b18e3511ae81801f289586518f2e2fb8c164ce8ad43&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">关于用户画像那些事，看这一文章就够了</a><br></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=204534483&amp;idx=1&amp;sn=e0a426c859fd5575a4a096b0e67c507d&amp;chksm=2f688b30181f0226e92c2cb6461dcfac7e7b29b03837dd0787315d514a55eb71c5db6caa3dbf&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">数据分析师必需具备的10种分析思维。</a><br></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886900&amp;idx=1&amp;sn=35c8f6d7d5b05f1f627db4e776abe416&amp;chksm=bd48ecd78a3f65c10cc78d9a12b457ae7d947a892162e1a758dfbcdc6a54d51826f18b0eeef8&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">如何构建大数据层级体系，看这一文章就够了</a><br></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886901&amp;idx=1&amp;sn=25e130337916f8bbd9e21f337201d50f&amp;chksm=bd48ecd68a3f65c0e6258a2fec3e1bb6d39a391ca711d4271b5bad494178258a7ff44dcfce33&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">干货 ： 聚焦于用户行为分析的数据产品</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886757&amp;idx=1&amp;sn=d26f24bc87591f2180c9e042371da247&amp;chksm=bd48ed468a3f645019a4b4f0daa65673be267bbff53066ec7d69b90b7dacd4cb1f324867f6da&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">80%的运营注定了打杂？因为你没有搭建出一套有效的用户运营体系</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886631&amp;idx=2&amp;sn=2dad02c5318b18d1ad2bd9d549bb7734&amp;chksm=bd48edc48a3f64d21cb24df5aa2f46ffd353b44deceb014c63abab23700594bfba59e957fa91&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">从底层到应用，那些数据人的必备技能</a><br></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886482&amp;idx=1&amp;sn=a6abfe9517429cb67c56c9cc20d111fa&amp;chksm=bd48ea718a3f6367326cb2a5020f11f5629aa8549d92ef79cc1078051d03dd89714dc4f64ae0&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">读懂用户运营体系：用户分层和分群</a></p> 
 <p style="min-height:1em;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAxMDM4MA==&amp;mid=2651886717&amp;idx=1&amp;sn=3cfbadfc8c9da49473e753f4a6476aec&amp;chksm=bd48ed9e8a3f64882c249fbcce32b52a1fb02f34f396e5b6a9d44de853ba7dfaa4b91a466228&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(87,107,149);font-size:14px;">做运营必须掌握的数据分析思维，你还敢说不会做数据分析</a></p> 
 <p style="min-height:1em;text-align:center;"><span style="font-size:14px;"><strong>合作请加qq：<span style="color:rgb(171,25,66);">365242293</span>  </strong></span></p> 
 <hr> 
 <p style="min-height:1em;"><span style="font-size:14px;color:rgb(155,187,89);">更多相关知识请回复：</span><span style="color:rgb(192,80,77);"><strong><span style="font-size:14px;">“ 月光宝盒 ”；</span></strong></span></p> 
 <p style="min-height:1em;"><strong><span style="font-size:14px;color:rgb(79,129,189);">数据分析</span></strong><span style="font-size:14px;">（ID : <span style="font-size:16px;color:rgb(79,129,189);">ecshujufenxi </span>）互联网科技与数据圈自己的微信，也是WeMedia自媒体联盟成员之一，WeMedia联盟覆盖5000万人群。</span></p> 
 <p style="min-height:1em;"><span style="font-size:14px;"><img src="https://images2.imgbox.com/d5/20/D3R86j93_o.png" alt="640?wx_fmt=png"></span></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4f83e455a927110a6200a427ad625a47/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Quartus (Quartus Prime 18.1)的安装及仿真步骤</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/afd132ec182a885db6246cba37677a0b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java.lang.IllegalArgumentException: ServletContext must not be null</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>