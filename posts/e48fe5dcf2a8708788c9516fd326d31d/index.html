<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SSH框架搭建小例 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SSH框架搭建小例" />
<meta property="og:description" content="SSH环境搭建
目录
一、概述 2
1.资源下载 2
2.开发环境安装 2
2.1 JDK的安装 3
2.2 Eclipse的安装 5
2.3 Tomcat的安装 5
2.4 将Tomcat导入到Eclipse中 7
2.4 将SVN导入到Eclipse中 12
二、 SSH框架实例 14
1.SSH基本原理 14
2.例程简介 15
3.创建工程搭建框架 17
3.1 新建一个工程 17
3.2 在Eclipse中配置数据源 18
3.3 SSH框架搭建 25
3.3.1 映射数据库 25
3.3.2 建立Dao接口和接口的应用文件 26
3.3.3 业务逻辑层配置 30
3.3.4 struts层配置 31
3.3.6 测试文件 37
3.3.7 登陆测试 38
一、概述 1.资源下载 所需安装文件下载列表
l jdk-7u5-windows-i586.exe
Oracle官方网站：http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html
l eclipse-jee-indigo-SR1-win32.zip
Eclipse官方网站：http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR1/eclipse-jee-indigo-SR1-win32.zip
l apache-tomcat-7." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/e48fe5dcf2a8708788c9516fd326d31d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-01-14T10:42:21+08:00" />
<meta property="article:modified_time" content="2013-01-14T10:42:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SSH框架搭建小例</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p style="text-align:center">SSH环境搭建</p> 
<p style="text-align:center"></p> 
<p><br> </p> 
<p style="text-align:center"><span style="white-space:pre"></span>目录</p> 
<p style="text-align:center"><a href="#_Toc13097" rel="nofollow">一、概述 2</a></p> 
<p style="text-align:center"><a href="#_Toc28465" rel="nofollow">1.资源下载 2</a></p> 
<p style="text-align:center"><a href="#_Toc6319" rel="nofollow">2.开发环境安装 2</a></p> 
<p style="text-align:center"><a href="#_Toc26783" rel="nofollow">2.1 JDK的安装 3</a></p> 
<p style="text-align:center"><a href="#_Toc9220" rel="nofollow">2.2 Eclipse的安装 5</a></p> 
<p style="text-align:center"><a href="#_Toc32488" rel="nofollow">2.3 Tomcat的安装 5</a></p> 
<p style="text-align:center"><a href="#_Toc23279" rel="nofollow">2.4 将Tomcat导入到Eclipse中 7</a></p> 
<p style="text-align:center"><a href="#_Toc1265" rel="nofollow">2.4 将SVN导入到Eclipse中 12</a></p> 
<p style="text-align:center"><a href="#_Toc27" rel="nofollow">二、 SSH框架实例 14</a></p> 
<p style="text-align:center"><a href="#_Toc18627" rel="nofollow">1.SSH基本原理 14</a></p> 
<p style="text-align:center"><a href="#_Toc3908" rel="nofollow">2.例程简介 15</a></p> 
<p style="text-align:center"><a href="#_Toc11650" rel="nofollow">3.创建工程搭建框架 17</a></p> 
<p style="text-align:center"><a href="#_Toc17403" rel="nofollow">3.1 新建一个工程 17</a></p> 
<p style="text-align:center"><a href="#_Toc6565" rel="nofollow">3.2 在Eclipse中配置数据源 18</a></p> 
<p style="text-align:center"><a href="#_Toc18263" rel="nofollow">3.3 SSH框架搭建 25</a></p> 
<p style="text-align:center"><a href="#_Toc1123" rel="nofollow">3.3.1 映射数据库 25</a></p> 
<p style="text-align:center"><a href="#_Toc17477" rel="nofollow">3.3.2 建立Dao接口和接口的应用文件 26</a></p> 
<p style="text-align:center"><a href="#_Toc832" rel="nofollow">3.3.3 业务逻辑层配置 30</a></p> 
<p style="text-align:center"><a href="#_Toc24413" rel="nofollow">3.3.4 struts层配置 31</a></p> 
<p style="text-align:center"><a href="#_Toc265" rel="nofollow">3.3.6 测试文件 37</a></p> 
<p style="text-align:center"><a href="#_Toc13929" rel="nofollow">3.3.7 登陆测试 38</a></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<h2><a name="_Toc16893"></a>一、概述</h2> 
<h3><a name="_Toc25764"></a>1.资源下载</h3> 
<p>所需安装文件下载列表</p> 
<p>l jdk-7u5-windows-i586.exe</p> 
<p>Oracle官方网站：<span style="color:rgb(0,51,204)">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html</span></p> 
<p>l eclipse-jee-indigo-SR1-win32.zip</p> 
<p>Eclipse官方网站：<a href="http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR1/eclipse-jee-indigo-SR1-win32.zip" rel="nofollow"><span style="color:rgb(0,0,255)">http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR1/eclipse-jee-indigo-SR1-win32.zip</span></a></p> 
<p>l apache-tomcat-7.0.29-windows-x86.zip（点击“32-bit Windows zip (pgp, md5)”下载）</p> 
<p>Apache官方网站：<span style="color:rgb(0,51,204)">http://tomcat.apache.org/download-70.cgi#7.0.2</span><span style="color:rgb(0,51,204)">9</span></p> 
<p>l Tomcat插件tomcatPluginV33.zip</p> 
<p><span style="color:rgb(0,51,204)">http://www.eclipsetotale.com/tomcatPlugin.html</span><span style="color:rgb(0,51,204)"> </span></p> 
<p>l SVN插件site-1.0.6.zip</p> 
<p><a href="http://subclipse.tigris.org/servlets/ProjectDocumentList?folderID=2240" rel="nofollow"><span style="color:rgb(0,51,204)">http://subclipse.tigris.org/servlets/ProjectDocumentList?folderID=2240</span></a></p> 
<p>l MySQL5.5.25</p> 
<p><a name="_Toc10746"></a><a href="http://www.mysql.com/downloads/mysql/5.5.html" rel="nofollow"><span style="color:rgb(0,0,255)">http://www.mysql.com/downloads/mysql/5.5.html</span></a></p> 
<p>l Spring3.1.0：</p> 
<p>直接下载jar包，然后在工程中引入spring的jar包，下载地址：<a href="http://www.springsource.org/download" rel="nofollow"><span style="color:rgb(0,51,204)">http://www.springsource.org/download</span></a></p> 
<p>l Struts2.2.1:</p> 
<p><a href="http://struts.apache.org/downloads.html" rel="nofollow"><span style="color:rgb(0,0,255)">http://struts.apache.org/downloads.html</span></a></p> 
<p>l Hibernate：</p> 
<p>hibernate-distribution-3.6.0.Final-dist.zip</p> 
<p><span style="color:rgb(0,51,204)">http://sourceforge.net/projects/hibernate/files/hibernate3/3.6.0.Fin</span><span style="color:rgb(0,51,204)">al/</span></p> 
<p></p> 
<p>注：以上安装文件在</p> 
<p><span style="color:rgb(0,0,255)">\\10.96.92.89\htdocs\software\SSH<span style="font-family:宋体">框架搭建</span><span style="font-family:Times New Roman">\</span><span style="font-family:宋体">开发工具软件</span></span></p> 
<p>示例代码</p> 
<p><a href="" rel="nofollow"><span style="color:rgb(0,0,255)">\\10.96.92.89\htdocs\software\SSH<span style="font-family:宋体">框架搭建</span><span style="font-family:Times New Roman">\Login</span></span></a></p> 
<p><a href="" rel="nofollow"><span style="color:rgb(0,0,255)">\\10.96.92.89\htdocs\software\SSH<span style="font-family:宋体">框架搭建</span><span style="font-family:Times New Roman">\sql</span></span></a></p> 
<h3><a name="_Toc6319"></a>2.开发环境安装</h3> 
<p><span style="color:rgb(0,0,255)">JDK的安装目录统一为 </span><span style="color:rgb(255,0,0)">C:\Program Files\Java\jdk1.7.0_01</span></p> 
<p><span style="color:rgb(0,0,255)">eclipse的安装目录统一为 </span><span style="color:rgb(255,0,0)">D:\eclipse</span></p> 
<p><span style="color:rgb(0,0,255)">tomcat的安装目录统一为 </span><span style="color:rgb(255,0,0)">D</span><span style="color:rgb(255,0,0)">:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29</span></p> 
<h4><a name="_Toc6536"></a>2.1 JDK的安装</h4> 
<p>直接双击JDK的安装文件安装即可。</p> 
<p>安装完JDK以后，需要配置一下环境变量，在我的电脑-&gt;属性-&gt;高级-&gt;环境变量-&gt;系统变量中添加以下环境变量：</p> 
<p><span style="color:rgb(255,0,0)">JAVA_HOME</span>= C:\Program Files\Java\jdk1.7.0_01<span style="color:rgb(102,1,153)"> </span><span style="color:rgb(255,0,0)">classpath</span>=.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;</p> 
<p>（.;一定不能少，因为它代表当前路径) </p> 
<p><span style="color:rgb(255,0,0)">path</span>=%JAVA_HOME%\bin</p> 
<p>然后在命令行输入javac，java，java -version如果出现如PIC1，PIC2和PIC3所示，就说明JDK安装成功。</p> 
<p></p> 
<p>PIC1<img src="https://images2.imgbox.com/76/15/2WXE7CVb_o.jpg" alt=""></p> 
<p></p> 
<p>PIC2<img src="https://images2.imgbox.com/14/bd/hhIFNyQD_o.jpg" alt=""></p> 
<p></p> 
<p>PIC3<img src="https://images2.imgbox.com/8a/81/3NLckP8T_o.jpg" alt=""></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<h4><a name="_Toc30176"></a>2.2 Eclipse的安装</h4> 
<p>将下载的<span style="font-family:Times New Roman">Eclipse</span><span style="font-family:宋体">放在桌面上，然后解压到</span>D:\eclipse。</p> 
<p>双击eclipse会出现PIC4，PIC4显示的是我们设置的默认工作区的路径。</p> 
<p></p> 
<p>PIC4<img src="https://images2.imgbox.com/ed/6a/vZKkQuJ4_o.jpg" alt=""></p> 
<p>我们默认工作区域，点击<span style="font-family:Times New Roman">OK</span><span style="font-family:宋体">，出现如</span><span style="font-family:Times New Roman">PIC5</span><span style="font-family:宋体">的界面说明安装成功。</span></p> 
<p></p> 
<p>PIC5<img src="https://images2.imgbox.com/fa/25/qpEYqLwy_o.jpg" alt=""></p> 
<h4><a name="_Toc25276"></a>2.3 Tomcat的安装</h4> 
<p>1) <span style="font-family:宋体">将下载好的</span>apache-tomcat-7.0.29-windows-x86解压到 </p> 
<p>D:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29</p> 
<p>2) <span style="font-family:宋体">在我的电脑</span>-&gt;属性-&gt;高级-&gt;环境变量-&gt;系统变量中添加以下环境变量（上述<span style="font-family:Times New Roman">Tomcat</span><span style="font-family:宋体">的</span><a name="OLE_LINK1"></a><a name="OLE_LINK2">安装目录：<span style="font-family:Times New Roman">D</span></a>:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29）：</p> 
<p>CATALINA_HOME:D:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.2 9</p> 
<p>CATALINA_BASE: D:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29</p> 
<p>TOMCAT_HOME: D:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29</p> 
<p>3) <span style="font-family:宋体">修改环境变量中的</span><span style="font-family:Times New Roman">classpath</span><span style="font-family:宋体">，把</span><span style="font-family:Times New Roman">D</span>:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29\lib\servlet-api.jar<span style="font-family:宋体">追加到</span><span style="font-family:Times New Roman">classpath</span><span style="font-family:宋体">中去。</span></p> 
<p>4) <span style="font-family:宋体">双击</span><span style="font-family:Times New Roman">D</span>:\apache-tomcat-7.0.29-windows-x86\apache-tomcat-7.0.29\bin\startup.<span style="font-family:宋体">启动</span><span style="font-family:Times New Roman">Tomcat,</span><span style="font-family:宋体">在浏览器中输入：</span><a href="http://localhost:8080/" rel="nofollow"><span style="color:rgb(0,0,255)">http://localhost:8080</span></a>，如果看到如<span style="font-family:Times New Roman">PIC6</span><span style="font-family:宋体">的</span><span style="font-family:Times New Roman">Tomcat</span><span style="font-family:宋体">的欢迎界面，说明安装成功。</span></p> 
<p></p> 
<p>PIC6<img src="https://images2.imgbox.com/47/89/lwsScRPt_o.jpg" alt=""></p> 
<p>5) 修改Tomcat启动最大允许时间</p> 
<p>当启动tomcat时候出现 Server Tomcat v6.0 Server at localhost was unable to start within 45 seconds. If the server requires more time, try increasing the timeout in the server editor. 的错误，那表示你的tomcat启动超时了，有时候你重新启动下就好了，但有时需要重新启动很多次，如果你不想这样的话，你只需修改下tomcat的启动时间就行了，步骤如下：</p> 
<p>修改 workspace\.metadata\.plugins\org.eclipse.wst.server.core\servers.xml文件。</p> 
<p></p> 
<p>&lt;servers&gt;</p> 
<p>&lt;server hostname="localhost" id="JBoss v5.0 at localhost" name="JBoss v5.0 at localhost" runtime-id="JBoss v5.0" server-type="org.eclipse.jst.server.generic.jboss5" server-type-id="org.eclipse.jst.server.generic.jboss5" start-timeout="1000" stop- timeout="15" timestamp="0"&gt;</p> 
<p>&lt;map jndiPort="1099" key="generic_server_instance_properties" port="8090" serverAddress="127.0.0.1" serverConfig="default"/&gt;</p> 
<p>&lt;/server&gt;</p> 
<p>&lt;/servers&gt;</p> 
<p>把 start-timeout="45" 改为 start-timeout="1000" 或者更长 重启eclipse就可以了。</p> 
<h4><a name="_Toc19885"></a>2.4 将Tomcat导入到Eclipse中</h4> 
<p>方法一：</p> 
<p>将Tomcat配置到Eclipse中，采用插件的方式：</p> 
<p>1）将解压后的tomcatPlugin文件夹放到D:\eclipse\plugins目录 下。</p> 
<p>2）重新启动 Eclipse，可在菜单栏看到 Tomcat 选项如图PIC5。如果没有看到Tomcat选项，需要改配置文件D:\eclipse\configuration\config.ini,将org.eclipse.update.reconcile=<span style="color:rgb(0,0,255)">false</span> 改为org.eclipse.update.reconcile=<span style="color:rgb(0,0,255)">true</span>.</p> 
<p>3）重新启动 Eclipse，可在菜单栏看到 Tomcat 选项如图PIC7，此时还需 对其进行配置，在Window&gt;Preferences&gt;Tomcat 中，选择 Tomcat 版本 Version7.x，在Tomcat home中输入tomcat7所在的文件夹的路径即可；Context Declaration mode选择Context files模式，Contexts directory中也输入tomcat7所在的文件夹的路径；如PIC8：</p> 
<p></p> 
<p>PIC7<img src="https://images2.imgbox.com/a2/52/XRM7smMI_o.jpg" alt=""></p> 
<p></p> 
<p>PIC8<img src="https://images2.imgbox.com/b5/cc/VKWcQcdn_o.jpg" alt=""></p> 
<p></p> 
<p>4）通过eclipse菜单栏的tomcat按钮启动tomcat：在浏览器上输入：  <a href="http://localhost:8080/" rel="nofollow">http://localhost:8080/</a></p> 
<p>若出现如图PIC9，则说明配置成功：</p> 
<p></p> 
<p>PIC9<img src="https://images2.imgbox.com/a4/79/ea6x2wzY_o.jpg" alt=""></p> 
<p>方法二：</p> 
<p>1）打开Eclipse，在下方的工作区找到servers，在servers空白区域右键-&gt;new-&gt;Server出现如PIC10的界面，选择Apache-&gt;Tomcat v7.0 Server-&gt;Next出现图PIC11界面，设置Tomcat安装目录。</p> 
<p>2）重新打开eclipse，此时还需对其进行配置，在Window&gt;Preferences&gt;Tomcat 中，选择 Tomcat 版本 Version7.x，在Tomcat home中输入tomcat7所在的文件夹的路径即可；Context Declaration mode选择Context files模式，  Contexts directory中也输入tomcat7所在的文件夹的路径。</p> 
<p><span style="color:rgb(255,0,0)">注：用此方法配置服务器，在<span style="font-family:Times New Roman">Eclipse</span><span style="font-family:宋体">菜单栏不会出现</span><span style="font-family:Times New Roman">Tomcat</span><span style="font-family:宋体">图标，每次运行项目时要选中项目右键</span><span style="font-family:Times New Roman">-&gt;Run as-&gt;Run on Server-&gt;</span><span style="font-family:宋体">选择这个服务器。</span></span></p> 
<p>PIC10<img src="https://images2.imgbox.com/f1/64/1Pgls5Me_o.jpg" alt=""></p> 
<p>PIC11<img src="https://images2.imgbox.com/83/b7/AhxzUzS7_o.jpg" alt=""></p> 
<p>3）在浏览器上输入：<a href="http://localhost:8080/" rel="nofollow">http://localhost:8080/</a></p> 
<p>如果不成功，双击新建的server，更改两项内容，如下图所示。Deploy path 为D:\apache-tomcat-7.0.29-windows-x64\apache-tomcat-7.0.29\webapps</p> 
<p></p> 
<p>PIC12<img src="https://images2.imgbox.com/dd/72/uLSt8511_o.jpg" alt=""></p> 
<h4><a name="_Toc4797"></a>2.4 将SVN导入到Eclipse中</h4> 
<p>1） 在eclipse根目录下新建文件夹links，这样就得到了eclipse\links</p> 
<p>2）新建3个文件夹，myplugins,svn,eclipse,目录结构为：   D:\eclipse\myplugins\svn\eclipse</p> 
<p>3） 将svn 解压缩之后的文件放到D:\eclipse\myplugins\svn\eclipse</p> 
<p>4） 在eclipse\links下新建一个link文件（需要为每个插件建一个.link文件），比如svn.link，在这里我们svn插件安装目录结构为D:\eclipse\myplugins\svn\eclipse，所以link文件名命名为svn.link</p> 
<p>5） 在svn.link中写入如下一句话<a name="OLE_LINK3"></a><a name="OLE_LINK4">path=D:\\eclipse\\myplugins\\svn</a>即path=你的插件安装目录（代表eclipse 去哪个路径加载查件）注：svn.link 写路径的时候不能有汉字，否则失败。</p> 
<p>6） 重新启动eclipse（如果你的eclipse安装SVN插件之前启动过需要先把eclipse关掉）</p> 
<p><span style="color:rgb(255,0,0)">注：path路径的写法使用"/"或"\\"而不是用"\"取代。此处容易出错。</span></p> 
<p><span style="color:rgb(255,0,0)">重要：如果发现插件没有安装成功，则删除eclipse目录下configuration目录中的</span><span style="color:rgb(255,0,0)">文</span><span style="color:rgb(255,0,0)">件夹org.eclipse.update(这是一个记录插件更新情况的文件夹)，删除掉这个文件</span><span style="color:rgb(255,0,0)">夹</span><span style="color:rgb(255,0,0)">后，eclipse会重新扫描所有插件，此时重启eclipse，可能会比较缓慢。如果仍然</span><span style="color:rgb(255,0,0)">不</span><span style="color:rgb(255,0,0)">能发现插件，则打开eclipse\configuration\config.ini,做如下图所示的修改。</span></p> 
<p></p> 
<p>PIC13<img src="https://images2.imgbox.com/c3/8a/KhshAyJq_o.jpg" alt=""></p> 
<p>7）重启eclipse，点击Open Perspective-&gt;Other如出现如图PIC13，则说明发现了插件，将上述的true重新改为false，否则每次启动eclipse速度都很缓慢。</p> 
<p></p> 
<p>PIC13<img src="https://images2.imgbox.com/fc/c1/sNWWefh6_o.jpg" alt=""></p> 
<p></p> 
<p></p> 
<p>PIC14<img src="https://images2.imgbox.com/97/cb/6K4Hy6pP_o.jpg" alt=""></p> 
<h2><a name="_Toc8848"></a>二、SSH框架实例</h2> 
<h3><a name="_Toc17408"></a>1.SSH基本原理</h3> 
<p>SSH框架四个主要配置文件及关联关系的介绍：</p> 
<p>    SSH是struts，spring和hibernate的简称，简单来说，struts是控制用的，hibernate是操作数据库的，spring是用来解耦的。</p> 
<p>具体来说：</p> 
<p>1）struts 负责 web 层 .ActionFormBean 接收网页中表单提交的数据，然后通过 Action 进行处理，再 Forward 到对应的网页。在 struts.xml 中定义 &lt;action-mapping&gt;, ActionServlet 会加载。</p> 
<p>2) spring 负责业务层管理，即 Service （或 Manager).service 为 action 提供统计的调用接口，封装持久层的 DAO.也可以写一 些自己的业务方 法。统一的 javabean 管理方法，声明式事务管理，集成 Hiberante等。</p> 
<p>3）Hibernate，负责持久化层，完成数据库的增删改查操作，hibernate为 持久层，提供 OR/Mapping。它有一组 .hbm.xml 文件和 POJO, 是跟数据 库中的表相对应的。然后定义 DAO ，这些是跟数据库打交道的类，它们会 使用 PO 。</p> 
<p>在 struts+spring+hibernate 的系统中，对象的调用流程是： jsp-&gt; Action － &gt; Service -&gt;DAO -&gt;Hibernate 。数据的流向是 ActionFormBean 接受用户的数据， Action 将数据从 ActionFromBean 中取出，封装成 VO （value object值对象）或 PO（持久 化对象）,再调用业务层的 Bean 类，完成各种业务处理后再 forward 。而 业务层 Bean 收到这个 PO 对象之后，会调用 DAO 接口方法，进行持久化操作。</p> 
<p>spring:Aop管理事务控制,IoC管理各个组件的耦合,DaoTemplate作为常规 持久层的快速开发模板</p> 
<p>struts:控制层Action,页面标签和Model数据,调用业务层</p> 
<p>Hibernate:负责数据库和对象的映射,负责DAO层(Data Access Object:数 据访问)</p> 
<p>spring整合hibernate和struts，只要在配好了applicationContext.xml,在struts的action中直接调用就可以了。hibernate访问数据库的操作都在spring中实现了，spring的调用又在stuts的action中实现了。通过以上思路这个ssh框架就连到了一起。</p> 
<p>一般来说SSH框架主要包括四类配置文件web.xml,applicationcontext.xml(Spring),struts.xml(Struts),cfg.xml(Hibernate)。</p> 
<h3><a name="_Toc25385"></a>2.例程简介</h3> 
<p>    实现简单用户登录操作（用户名和密码均为admin），用户将看到一个登录页面，要求用户输入用户名以及密码。如果用户名以及密码都是admin，提示登录成功。否则提示登录失败。</p> 
<p>首先需要导入框架所需要的jar包。导入jar包的方法是将所需要的jar包复制到所建工程目录/WebContent/WEB-INF/lib文件夹下。</p> 
<p><span style="color:rgb(255,0,0)">注：SSH所需jar包可在</span><span style="color:rgb(0,0,255)">\\10.96.92.84\ShareFolder\项目\SSH框架搭建\ssh所需JAR包</span><span style="color:rgb(255,0,0)">文件夹下找到。</span></p> 
<p>所需要的包如下图PIC15所示：</p> 
<p></p> 
<p>PIC15<img src="https://images2.imgbox.com/99/72/7CVvtB0J_o.jpg" alt=""></p> 
<p></p> 
<p>最后得到的工程结构图如下所示:</p> 
<p></p> 
<p>PIC16<img src="https://images2.imgbox.com/1d/4b/aOpViAFS_o.jpg" alt=""></p> 
<p></p> 
<h3><a name="_Toc22708"></a>3.创建工程搭建框架</h3> 
<h4><a name="_Toc9903"></a>3.1 新建一个工程</h4> 
<p>打开eclipse，进入eclipse开发页面，新建一个动态的web工程：</p> 
<p></p> 
<p>PIC17<img src="https://images2.imgbox.com/4e/2f/Nam7h8YX_o.jpg" alt=""></p> 
<p></p> 
<p></p> 
<p>PIC18<img src="https://images2.imgbox.com/db/e9/QvsCZtf3_o.jpg" alt=""></p> 
<p>建好的工程如下图所示名为test的工程：</p> 
<p></p> 
<p>PIC19<img src="https://images2.imgbox.com/ef/1e/9tCYjfFe_o.jpg" alt=""></p> 
<h4><a name="_Toc31191"></a>3.2 在Eclipse中配置数据源</h4> 
<p>3.2.1在Window选项中选择Show view选项中的Data Source Explorer，将其显示在控制台区域，如图所示：</p> 
<p></p> 
<p>PIC20<img src="https://images2.imgbox.com/6d/12/KcasBBCv_o.png" alt=""></p> 
<p></p> 
<p>3.2.2 右键单击，选择new，弹出对话框，选择MySQL：如图所示</p> 
<p></p> 
<p>PIC21<img src="https://images2.imgbox.com/5f/84/JPNX6cjy_o.png" alt=""></p> 
<p></p> 
<p>PIC22<img src="https://images2.imgbox.com/b0/f1/JV8qLdkr_o.jpg" alt=""></p> 
<p></p> 
<p>PIC23<img src="https://images2.imgbox.com/33/ce/hRXxCGa7_o.jpg" alt=""></p> 
<p>在工程的lib文件夹下选择数据库驱动jar。</p> 
<p></p> 
<p>PIC24<img src="https://images2.imgbox.com/b3/1c/GyRrsjU7_o.jpg" alt=""></p> 
<p></p> 
<p>PIC25<img src="https://images2.imgbox.com/12/67/0BhEa0Bj_o.jpg" alt=""></p> 
<p></p> 
<p>PIC26<img src="https://images2.imgbox.com/87/09/Dbzg9sR2_o.jpg" alt=""></p> 
<p></p> 
<p>PIC27<img src="https://images2.imgbox.com/8b/ad/sbmYfGvp_o.jpg" alt=""></p> 
<p><span style="color:rgb(255,0,0)">注：驱动版本和jar包版本要一样。</span></p> 
<p>点击右下角，Test Connection，如果出现以下对话框，说明数据源配置成功：</p> 
<p></p> 
<p>PIC28<img src="https://images2.imgbox.com/a6/25/19X3ypcP_o.png" alt=""></p> 
<h4><a name="_Toc11848"></a>3.3 SSH框架搭建</h4> 
<h4><a name="_Toc1123"></a>3.3.1 映射数据库</h4> 
<p>首先是用到Hibernate层将数据库映射对象，以后的我们操作数据库时只需要对对象进行操作，不需要再进入数据库操作。这部分主要用到两个文件，一个是将数据库建模，另一个是配置数据库的映射文件(.xml)。</p> 
<p>在src文件夹下面，建立一个java包com.hitachi.riskmanagement.model,在这个包里建立一个User.java文件用来建模数据，语句如下：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement.model;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public class User {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private int id;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public int getId() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return id;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setId(int id) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.id = id;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private String name;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private String pass;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public String getName() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return name;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setName(String name) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.name = name;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public String getPass() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return pass;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setPass(String pass) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.pass = pass;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p>数据库中id为主键，name和pass分别为用户名和密码。</p> 
<p>接下来配置映射文件User.hbm.xml具体语句如下：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;?xml version="1.0" encoding="GBK"?&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 指定Hibernate映射文件的DTD信息 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!DOCTYPE hibernate-mapping PUBLIC </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- Hibernate映射文件的根元素 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;hibernate-mapping package="</span><span style="color:rgb(51,102,255)">com.hitachi.riskmanagement.model</span><span style="color:rgb(127,0,85)">"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;class name="</span><span style="color:rgb(0,0,255)">User</span><span style="color:rgb(127,0,85)">" table="</span><span style="color:rgb(0,0,255)">loginuser</span><span style="color:rgb(127,0,85)">"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 映射标识属性 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;id</span><span style="color:rgb(127,0,85)">name="</span><span style="color:rgb(0,0,255)">id</span><span style="color:rgb(127,0,85)">" type="integer" column="</span><span style="color:rgb(0,0,255)">user_id</span><span style="color:rgb(127,0,85)">"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 指定使用identity主键生成策略 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;generator class="</span><span style="color:rgb(0,0,255)">identity</span><span style="color:rgb(127,0,85)">"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/id&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 映射普通属性 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="</span><span style="color:rgb(0,0,255)">name</span><span style="color:rgb(127,0,85)">" column="</span><span style="color:rgb(0,0,255)">user_name</span><span style="color:rgb(127,0,85)">"</span><span style="color:rgb(127,0,85)">type="string"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">not-null="true" length="50" unique="true"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="</span><span style="color:rgb(0,0,255)">pass</span><span style="color:rgb(127,0,85)">" column="</span><span style="color:rgb(0,0,255)">user_password</span><span style="color:rgb(127,0,85)">"</span><span style="color:rgb(127,0,85)">type="string"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">not-null="true" length="50"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/class&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/hibernate-mapping&gt;</span></p> 
<h4><a name="_Toc17477"></a>3.3.2 建立Dao接口和接口的应用文件</h4> 
<p>把<span style="font-family:Consolas">dao</span><span style="font-family:宋体">接口放在文件夹</span><span style="font-family:Consolas">com.hitachi.riskmanagement.dao</span><span style="font-family:宋体">，在这个文件夹下面建立</span><span style="font-family:Consolas">UserDao.java</span><span style="font-family:宋体">文件，具体内容如下：</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement.dao;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.model.User;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public interface UserDao {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public User getUser(String name,String pass);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p>在文件夹<span style="font-family:Consolas">com.hitachi.riskmanagement.dao.impl</span><span style="font-family:宋体">文件夹下建立继承实现接口的文件</span><span style="font-family:Consolas">UserDaoImpl.java</span><span style="font-family:宋体">文件。具体内容如下：</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement.dao.impl;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import java.util.List;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import org.springframework.orm.hibernate3.support.HibernateDaoSupport;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.dao.UserDao;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.model.User;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public class UserDaoImpl extends HibernateDaoSupport implements UserDao {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public User getUser(String name, String pass) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">List&lt;User&gt; list=getHibernateTemplate().find("from User");</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">if (list.size()==0)</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return null;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">for(int i=0;i&lt;list.size();i++){<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">User u=list.get(i);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">if(u.getName().equals(name)&amp;&amp;u.getPass().endsWith(pass)){<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return u;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return null;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public static void main(String[] args){<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">User u=new UserDaoImpl().getUser("admin","admin");</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">if(u!=null){<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">System.out.println(u.toString());</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p><span style="color:rgb(0,0,255)">创建Session工厂,对数据进行持久化操作</span>，对数据的每个操作都通过Session工厂来完成。</p> 
<p> ·SessionFactory接口:SessionFactory接口负责初始化Hibernate。它充当数据存储源的代理，并负责创建Session对象。这里用到了工厂模式。需要注意的是SessionFactory并不是轻量级的，因为一般情况下，一个项目通常只需要一个SessionFactory就够，当需要操作多个数据库时，可以为每个数据库指定一个SessionFactory。 　　·Configuration接口:Configuration接口负责配置并启动Hibernate，创建SessionFactory对象。在Hibernate的启动的过程中，Configuration类的实例首先定位映射文档位置、读取配置，然后创建SessionFactory对象。 </p> 
<p>在文件夹<span style="font-family:Consolas">com.hitachi.riskmanagement</span><span style="font-family:宋体">目录下建立文件</span><span style="font-family:Consolas">HibernateSessionFactory.java</span><span style="font-family:宋体">具体内容如下：</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import org.hibernate.HibernateException;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import org.hibernate.Session;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import org.hibernate.cfg.Configuration;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import org.hibernate.cfg.AnnotationConfiguration;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)"> * Configures and provides access to Hibernate sessions, tied to the</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)"> * current thread of execution.  Follows the Thread Local Session</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)"> * pattern, see {@link http://hibernate.org/42.html }.</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)"> */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public class HibernateSessionFactory {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    /** </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * Location of hibernate.cfg.xml file.</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * Location should be on the classpath as Hibernate uses  </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * #resourceAsStream style lookup for its configuration file. </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * The default classpath location of the hibernate config file is </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * in the default package. Use #setConfigFile() to update </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * the location of the configuration file for the current session.   </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    private static String CONFIG_FILE_LOCATION = "/hibernate.cfg.xml";</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private static final ThreadLocal&lt;Session&gt; threadLocal = new ThreadLocal&lt;Session&gt;();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    private  static Configuration configuration = new AnnotationConfiguration();    </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    private static org.hibernate.SessionFactory sessionFactory;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    private static String configFile = CONFIG_FILE_LOCATION;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">static {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    </span><span style="color:rgb(127,0,85)">try {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">configuration.configure(configFile);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">sessionFactory = configuration.buildSessionFactory();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">} catch (Exception e) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">System.err</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">.println("%%%% Error Creating SessionFactory %%%%");</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">e.printStackTrace();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    }</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    private HibernateSessionFactory() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    }</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * Returns the ThreadLocal Session instance.  Lazy initialize</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     * the &lt;code&gt;SessionFactory&lt;/code&gt; if needed.</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  @return Session</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  @throws HibernateException</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    public static Session getSession() throws HibernateException {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">        Session session = (Session) threadLocal.get();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">if (session == null || !session.isOpen()) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">if (sessionFactory == null) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">rebuildSessionFactory();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">session = (sessionFactory != null) ? sessionFactory.openSession()</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">: null;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">threadLocal.set(session);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">        return session;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    }</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  Rebuild hibernate session factory</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public static void rebuildSessionFactory() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">try {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">configuration.configure(configFile);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">sessionFactory = configuration.buildSessionFactory();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">} catch (Exception e) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">System.err</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">.println("%%%% Error Creating SessionFactory %%%%");</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">e.printStackTrace();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  Close the single hibernate session instance.</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  @throws HibernateException</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    public static void closeSession() throws HibernateException {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">        Session session = (Session) threadLocal.get();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">        threadLocal.set(null);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">        if (session != null) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">            session.close();</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">        }</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    }</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  return session factory</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public static org.hibernate.SessionFactory getSessionFactory() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return sessionFactory;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  return session factory</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span><span style="color:rgb(127,0,85)">session factory will be rebuilded in the next call</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public static void setConfigFile(String configFile) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">HibernateSessionFactory.configFile = configFile;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">sessionFactory = null;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *  return hibernate configuration</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     *</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">     */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public static Configuration getConfiguration() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return configuration;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<h4><a name="_Toc832"></a>3.3.3 业务逻辑层配置</h4> 
<p>以上主要涉及到Hibernate层的设置，接下来讨论spring层的文件配置：</p> 
<p>主要包括业务逻辑接口和业务逻辑继承和实现的对象。具体service接口放在文件夹com.hitachi.riskmanagement.service目录下，名称为UserService.java，具体内容为：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement.service;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.model.User;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public interface UserService {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public User getUser(String name,String pass);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p>在文件夹com.hitachi.riskmanagement.service.impl目录下有UserServiceImpl.java文件具体内容为：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement.service.impl;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.dao.UserDao;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.model.User;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.service.UserService;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public class UserServiceImpl implements UserService {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private UserDao userDao;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public UserDao getUserDao() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return userDao;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setUserDao(UserDao userDao) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.userDao = userDao;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public User getUser(String name, String pass) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return userDao.getUser(name, pass);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<h4><a name="_Toc24413"></a>3.3.4 struts层配置</h4> 
<p>下面是struts层文件，主要涉及到action的创建，在文件夹com.hitachi.riskmanagement.action目录下有UserAction.java文件，具体内容为：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">package com.hitachi.riskmanagement.action;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.model.User;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.hitachi.riskmanagement.service.UserService;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">import com.opensymphony.xwork2.ActionSupport;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public class UserAction extends ActionSupport{<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">/**</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)"> * </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)"> */</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private static final long serialVersionUID = 1L;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private UserService userService;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public UserService getUserService() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return userService;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setUserService(UserService userService) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.userService = userService;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private String name;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public String getName() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return name;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setName(String name) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.name = name;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public String getPwd() {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return pwd;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public void setPwd(String pwd) {<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">this.pwd = pwd;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">private String pwd;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">public String execute(){<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">System.out.println("name:"+name+",pwd:"+pwd);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">User u=userService.getUser(name, pwd);</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">if(u==null){<!-- --></span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return "error";</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">return "success";</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">}</span></p> 
<p>3.3.5 .xml文件配置 </p> 
<p>配置好各层文件后下面配置.xml文件，将上述各个不同层次的文件连接起来。主要涉及到首先配置Hibernate与数据库相连接的文件hibernate.cfg.xml将其直接放在src文件夹下面，具体内容如下：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- Generated by MyEclipse Hibernate Tools.                   --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;hibernate-configuration&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;session-factory&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="dialect"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">org.hibernate.dialect.MySQLDialect</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="connection.url"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">jdbc:mysql://localhost:3306/mysql</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="connection.username"&gt;root&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="connection.password"&gt;123qwe&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="connection.driver_class"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">com.mysql.jdbc.Driver</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 格式化得输出SQL语句  --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="show_sql"&gt;true&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="format_sql"&gt;true&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 在不设置此项的时候不能使用getCurrentSession()方法 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="current_session_context_class"&gt;thread&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 在此设置映射关系 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;mapping resource="com/hitachi/riskmanagement/model/User.hbm.xml" class="com.hitachi.riskmanagement.model.User"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/session-factory&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/hibernate-configuration&gt;</span></p> 
<p>其次是struts配置文件，其主要内容是有不同的action组成，由于本实例比较简单，只涉及到一个action。将structs.xml文件直接放在src文件夹中。</p> 
<p>structs.xml文件内容如下：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 指定Struts2配置文件的DTD信息 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!DOCTYPE struts PUBLIC</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">"-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">"http://struts.apache.org/dtds/struts-2.1.7.dtd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- Struts2配置文件的根元素 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;struts&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 配置了系列常量 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;constant name="struts.custom.i18n.resources" value="resource"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;constant name="struts.i18n.encoding" value="UTF-8"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;constant name="struts.devMode" value="true"/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;constant name="struts.objectFactory" value="spring" /&gt; </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;package name="default" namespace="/" extends="struts-default"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 定义处理登录系统的的Action --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;action name="processLogin"</span><span style="color:rgb(127,0,85)">class="com.hitachi.riskmanagement.action.UserAction" method="execute"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;result name="success"&gt;/success.jsp&lt;/result&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;result name="error"&gt;/error.jsp&lt;/result&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/action&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/package&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/struts&gt;</span></p> 
<p>接下来配置Spring配置文件applicationContext.xml，将这个文件放在WebContent\WEB-INF文件夹下面。具体内容如下：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;?xml version="1.0" encoding="GBK"?&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- </span><span style="color:rgb(127,0,85)">指定</span><span style="color:rgb(127,0,85)">Spring</span><span style="color:rgb(127,0,85)">配置文件的</span><span style="color:rgb(127,0,85)">Schema</span><span style="color:rgb(127,0,85)">信息</span><span style="color:rgb(127,0,85)"> --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;beans xmlns="http://www.springframework.org/schema/beans"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">xsi:schemaLocation="http://www.springframework.org/schema/beans </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">http://www.springframework.org/schema/tx </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">http://www.springframework.org/schema/aop </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 定义数据源Bean，使用C3P0数据源实现 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 设置连接数据库的驱动、URL、用户名、密码 连接池最大连接数、最小连接数、初始连接数等参数 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">destroy-method="close" p:driverClass="com.mysql.jdbc.Driver"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">p:jdbcUrl="jdbc:mysql://localhost:3306/mysql" p:user="root"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">p:password="123qwe" p:maxPoolSize="40" p:minPoolSize="1"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">p:initialPoolSize="1" p:maxIdleTime="20" /&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 定义Hibernate的SessionFactory --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 依赖注入数据源，注入正是上面定义的dataSource --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;bean id="sessionFactory"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">p:dataSource-ref="dataSource"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- mappingResouces属性用来列出全部映射文件 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="mappingResources"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;list&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 以下用来列出Hibernate映射文件 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;value&gt;com/hitachi/riskmanagement/model/User.hbm.xml&lt;/value&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/list&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 定义Hibernate的SessionFactory的属性 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="hibernateProperties"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 指定数据库方言、是否自动建表 是否生成SQL语句等 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;value&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">hibernate.dialect=org.hibernate.dialect.MySQLInnoDBDialect</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">hibernate.hbm2ddl.auto=update</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">hibernate.show_sql=true</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">hibernate.format_sql=true</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">#开启二级缓存</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">hibernate.cache.use_second_level_cache=true</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">#设置二级缓存的提供者</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/value&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/bean&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 配置Hibernate的局部事务管理器，使用HibernateTransactionManager类 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 该类实现PlatformTransactionManager接口，是针对Hibernate的特定实现 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 并注入SessionFactory的引用 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;bean id="transactionManager"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">class="org.springframework.orm.hibernate3.HibernateTransactionManager"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">p:sessionFactory-ref="sessionFactory" /&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 配置事务增强处理Bean,指定事务管理器 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;tx:advice id="txAdvice" transaction-manager="transactionManager"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 用于配置详细的事务语义 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;tx:attributes&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 所有以'get'开头的方法是read-only的 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;tx:method name="get*" read-only="true" /&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 其他方法使用默认的事务设置 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;tx:method name="*" /&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/tx:attributes&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/tx:advice&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;aop:config&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 配置一个切入点，匹配empManager和mgrManager 两个Bean的所有方法的执行 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;aop:pointcut id="leePointcut"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">expression="execution(* com.hitachi.riskmanagement.service.impl.*.*(..))" /&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!-- 指定在leePointcut切入点应用txAdvice事务增强处理 --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;aop:advisor advice-ref="txAdvice" pointcut-ref="leePointcut" /&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/aop:config&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;bean id="userDao" class="com.hitachi.riskmanagement.dao.impl.UserDaoImpl"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="sessionFactory" ref="sessionFactory"&gt;&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/bean&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;bean id="userService" class="com.hitachi.riskmanagement.service.impl.UserServiceImpl"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="userDao" ref="userDao"&gt;&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/bean&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;bean id="userAction" class="com.hitachi.riskmanagement.action.UserAction"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;property name="userService" ref="userService"&gt;&lt;/property&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/bean&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/beans&gt;</span></p> 
<p>最后配置Web.xml文件，其内容如下：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;display-name&gt;login&lt;/display-name&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;welcome-file-list&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    &lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;/welcome-file-list&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">   </span><span style="color:rgb(127,0,85)">&lt;context-param&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/context-param&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;listener&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/listener-class&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/listener&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;filter&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    </span><span style="color:rgb(127,0,85)">&lt;filter-class&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  </span><span style="color:rgb(127,0,85)">&lt;/filter&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;filter-mapping&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    &lt;url-pattern&gt;*&lt;/url-pattern&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;/filter-mapping&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">  &lt;!--</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">   --&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/web-app&gt;</span></p> 
<h4><a name="_Toc265"></a>3.3.6 测试文件</h4> 
<p>编辑三个jsp文件作为测试用，具体如下：</p> 
<p>Login.jsp主要用来登陆内容为：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    pageEncoding="UTF-8"%&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;html&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;head&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;title&gt;Insert title here&lt;/title&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/head&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;body&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;form action="processLogin" method="post"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">用户名：&lt;input name="name" type="text"&gt;&lt;br/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">密码：&lt;input name="pwd" type="password"&gt;&lt;br/&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;input type="submit" value="提交"&gt; &lt;input type="reset" value="重置"&gt; </span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/form&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/body&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/html&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">Error.jsp登陆错误时跳转到此页面，内容为：</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    pageEncoding="UTF-8"%&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;html&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;head&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;title&gt;Insert title here&lt;/title&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/head&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;body&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">登录失败!</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/body&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/html&gt;</span></p> 
<p>Success.jsp当登陆成功时，跳转到此页面，具体内容为：</p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">    pageEncoding="UTF-8"%&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;html&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;head&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;title&gt;Insert title here&lt;/title&gt;&lt;/head&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;body&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">登陆成功!</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/body&gt;</span></p> 
<p style="background:rgb(204,204,204)"><span style="color:rgb(127,0,85)">&lt;/html&gt;</span></p> 
<h4><a name="_Toc13929"></a>3.3.7 登陆测试</h4> 
<p>完成以上各步骤后，运行此项目，出现PIC29界面后，输入用户名admin密码admin得到PIC30。说明框架搭建成功。</p> 
<p></p> 
<p>PIC29</p> 
<p></p> 
<p>PIC30</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/060473789dec6d44e7982ef59c623901/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">构建WCF单一到多服务器之路</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/171d2f186191cad22f3b899be1bb1549/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">单链表的逆置-C&#43;&#43;实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>