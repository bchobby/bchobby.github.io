<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle-查询篇（简单查询、多表联查、子查询、分组聚合、字符串函数、单行函数、日期函数） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Oracle-查询篇（简单查询、多表联查、子查询、分组聚合、字符串函数、单行函数、日期函数）" />
<meta property="og:description" content="文章目录 准备工作一、业主类型表（t_onwnertype）二、价格表（t_pricetable）三、区域表（t_area）四、收费员表（t_operator）五、地址表（t_address）六、业主表（t_owners）七、收费台账（t_account） 一、简单查询（单表）1.精确查询2.模糊查询3.and运算符4.or运算符5. and 与 or 运算符混合使用6. 范围查询7. 空值查询 二、去掉重复记录三、排序查询1.升序查询2.降序排序 四、基于伪列的查询1.rowid2.rownum 五、聚合统计1.聚合函数2.分组聚合 Group by3.分组后条件查询 having 二、连接查询（一）多表内连接查询（二）左外连接查询（三）右外连接查询 三、子查询（一）where 子句中的子查询1. 单行子查询2. 多行子查询in运算符 （二）from 子句中的子查询（三）select 子句中的子查询 四、分页查询（一）简单分页（二）基于排序的分页 五、单行函数（一）字符函数（二）数值函数（三）日期函数（四）转换函数（五）其它函数（六）行列转换（七）分析函数八、集合运算（一）什么是集合运算（二）并集运算（三）交集运算（四）差集运算 准备工作 以黑马程序员Oracle教程为例，需要准备七张表，表结构及关系如下（Oracle数据库不区分大小写，最终都会转换为大写）：
一、业主类型表（t_onwnertype） 字段名类型（位数）是否必填说明idnumber是主键namevarchar2(30)是类型名称 二、价格表（t_pricetable） 字段名类型（位数）是否必填说明idnumber是主键pricenumber(10,2)是价格ownertypeidnumber是业主类型idminnumnumber(10,2)是区间数开始值maxnumnumber(10,2)是区间数截止值 三、区域表（t_area） 字段名类型（位数）是否必填说明IDnumber是主键namevarchar2（30）是区域名称 四、收费员表（t_operator） 字段名类型（位数）是否必填说明idnumber是主键namevarchar2(30)是操作员名称 五、地址表（t_address） 字段名类型（位数）是否必填说明idnumber是主键namevarchar2(30)是地址名称areaidnumber是区域idoperatoridnumber是操作员id 六、业主表（t_owners） 字段名类型（位数）是否必填说明idnumber是主键namevarchar2（30）是业主名称addressidnumber是地址idhousenumbernumber是门牌号watermetervarchar2（30）是水表编号adddatedate是登记日期ownertypeidnumber是业主类型id 七、收费台账（t_account） 字段名类型（位数）是否必填说明IDnumber是主键owneridnumber是业主编号ownertypeidnumber是业主类型areaidnumber是所在区域yearchar（4）是账务年份monthchar（2）是账务月份num0number上月累计数num1number本月累计数usenumnumber本月使用数meteruseridnumber抄表员metedatadate抄表日期moneynumber（10,2）应缴金额isfeechar（1）是否缴费feedatedate缴费日期feeuseridnumber收费员 七张表的关系如下：
大家自己可以使用DDL语言自己按照表结构创建表，或者使用下面代码创建，同时插入数据:
注意：大家在创建表之前，要先创建表空间、在表空间中创建用户、给用户赋予权限、然后登录用户，在用户中创建表。
--建立价格区间表 create table t_pricetable ( id number primary key, price number(10,2), ownertypeid number, minnum number, maxnum number ); --业主类型 create table t_ownertype ( id number primary key, name varchar2(30) ); --业主表 create table t_owners ( id number primary key, name varchar2(30), addressid number, housenumber varchar2(30), watermeter varchar2(30), adddate date, ownertypeid number ); --区域表 create table t_area ( id number, name varchar2(30) ); --收费员表 create table t_operator ( id number, name varchar2(30) ); --地址表 create table t_address ( id number primary key, name varchar2(100), areaid number, operatorid number ); --账务表-- create table t_account ( id number primary key, owneruuid number, ownertype number, areaid number, year char(4), month char(2), num0 number, num1 number, usenum number, meteruser number, meterdate date, money number(10,2), isfee char(1), feedate date, feeuser number ); create sequence seq_account; --业主类型 insert into t_ownertype values(1,&#39;居民&#39;); insert into t_ownertype values(2,&#39;行政事业单位&#39;); insert into t_ownertype values(3,&#39;商业&#39;); --地址信息-- insert into t_address values( 1,&#39;明兴花园&#39;,1,1); insert into t_address values( 2,&#39;鑫源秋墅&#39;,1,1); insert into t_address values( 3,&#39;华龙苑南里小区&#39;,2,2); insert into t_address values( 4,&#39;河畔花园&#39;,2,2); insert into t_address values( 5,&#39;霍营&#39;,2,2); insert into t_address values( 6,&#39;回龙观东大街&#39;,3,2); insert into t_address values( 7,&#39;西二旗&#39;,3,2); --业主信息 insert into t_owners values(1,&#39;范冰&#39;,1,&#39;1-1&#39;,&#39;30406&#39;,to_date(&#39;2015-04-12&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(2,&#39;王强&#39;,1,&#39;1-2&#39;,&#39;30407&#39;,to_date(&#39;2015-02-14&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(3,&#39;马腾&#39;,1,&#39;1-3&#39;,&#39;30408&#39;,to_date(&#39;2015-03-18&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(4,&#39;林小玲&#39;,2,&#39;2-4&#39;,&#39;30409&#39;,to_date(&#39;2015-06-15&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(5,&#39;刘华&#39;,2,&#39;2-5&#39;,&#39;30410&#39;,to_date(&#39;2013-09-11&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(6,&#39;刘东&#39;,2,&#39;2-2&#39;,&#39;30411&#39;,to_date(&#39;2014-09-11&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(7,&#39;周健&#39;,3,&#39;2-5&#39;,&#39;30433&#39;,to_date(&#39;2016-09-11&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(8,&#39;张哲&#39;,4,&#39;2-2&#39;,&#39;30455&#39;,to_date(&#39;2016-09-11&#39;,&#39;yyyy-MM-dd&#39;),1 ); insert into t_owners values(9,&#39;昌平区中西医结合医院&#39;,5,&#39;2-2&#39;,&#39;30422&#39;,to_date(&#39;2016-10-11&#39;,&#39;yyyy-MM-dd&#39;),2 ); insert into t_owners values(10,&#39;美廉美超市&#39;,5,&#39;4-2&#39;,&#39;30423&#39;,to_date(&#39;2016-10-12&#39;,&#39;yyyy-MM-dd&#39;),3 ); --操作员 insert into t_operator values(1,&#39;马小云&#39;); insert into t_operator values(2,&#39;李翠花&#39;); --地区-- insert into t_area values(1,&#39;海淀&#39;); insert into t_area values(2,&#39;昌平&#39;); insert into t_area values(3,&#39;西城&#39;); insert into t_area values(4,&#39;东城&#39;); insert into t_area values(5,&#39;朝阳&#39;); insert into t_area values(6,&#39;玄武&#39;); --价格表-- insert into t_pricetable values(1,2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/e6b4b5f8ae5775bf5f9bcd59a7665338/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-14T11:52:38+08:00" />
<meta property="article:modified_time" content="2023-07-14T11:52:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle-查询篇（简单查询、多表联查、子查询、分组聚合、字符串函数、单行函数、日期函数）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">准备工作</a></li><li><ul><li><a href="#t_onwnertype_3" rel="nofollow">一、业主类型表（t_onwnertype）</a></li><li><a href="#t_pricetable_8" rel="nofollow">二、价格表（t_pricetable）</a></li><li><a href="#t_area_17" rel="nofollow">三、区域表（t_area）</a></li><li><a href="#t_operator_23" rel="nofollow">四、收费员表（t_operator）</a></li><li><a href="#t_address_29" rel="nofollow">五、地址表（t_address）</a></li><li><a href="#t_owners_37" rel="nofollow">六、业主表（t_owners）</a></li><li><a href="#t_account_48" rel="nofollow">七、收费台账（t_account）</a></li></ul> 
    </li></ul> 
    </li><li><a href="#_244" rel="nofollow">一、简单查询（单表）</a></li><li><ul><li><ul><li><ul><li><a href="#1_245" rel="nofollow">1.精确查询</a></li><li><a href="#2_251" rel="nofollow">2.模糊查询</a></li><li><a href="#3and_257" rel="nofollow">3.and运算符</a></li><li><a href="#4or_263" rel="nofollow">4.or运算符</a></li><li><a href="#5_and__or__269" rel="nofollow">5. and 与 or 运算符混合使用</a></li><li><a href="#6__276" rel="nofollow">6. 范围查询</a></li><li><a href="#7__287" rel="nofollow">7. 空值查询</a></li></ul> 
      </li><li><a href="#_298" rel="nofollow">二、去掉重复记录</a></li><li><a href="#_304" rel="nofollow">三、排序查询</a></li><li><ul><li><a href="#1_305" rel="nofollow">1.升序查询</a></li><li><a href="#2_311" rel="nofollow">2.降序排序</a></li></ul> 
      </li><li><a href="#_317" rel="nofollow">四、基于伪列的查询</a></li><li><ul><li><a href="#1rowid_319" rel="nofollow">1.rowid</a></li><li><a href="#2rownum_330" rel="nofollow">2.rownum</a></li></ul> 
      </li><li><a href="#_337" rel="nofollow">五、聚合统计</a></li><li><ul><li><a href="#1_338" rel="nofollow">1.聚合函数</a></li><li><a href="#2_Group_by_370" rel="nofollow">2.分组聚合 Group by</a></li><li><a href="#3_having_376" rel="nofollow">3.分组后条件查询 having</a></li></ul> 
     </li></ul> 
    </li></ul> 
    </li><li><a href="#_383" rel="nofollow">二、连接查询</a></li><li><ul><li><ul><li><a href="#_384" rel="nofollow">（一）多表内连接查询</a></li><li><a href="#_400" rel="nofollow">（二）左外连接查询</a></li><li><a href="#_417" rel="nofollow">（三）右外连接查询</a></li></ul> 
    </li></ul> 
    </li><li><a href="#_433" rel="nofollow">三、子查询</a></li><li><ul><li><a href="#where__434" rel="nofollow">（一）where 子句中的子查询</a></li><li><ul><li><ul><li><a href="#1__435" rel="nofollow">1. 单行子查询</a></li><li><a href="#2__446" rel="nofollow">2. 多行子查询</a></li><li><a href="#in_455" rel="nofollow">in运算符</a></li></ul> 
     </li></ul> 
     </li><li><a href="#from__476" rel="nofollow">（二）from 子句中的子查询</a></li><li><a href="#select__487" rel="nofollow">（三）select 子句中的子查询</a></li></ul> 
    </li><li><a href="#_503" rel="nofollow">四、分页查询</a></li><li><ul><li><a href="#_504" rel="nofollow">（一）简单分页</a></li><li><a href="#_526" rel="nofollow">（二）基于排序的分页</a></li></ul> 
    </li><li><a href="#_564" rel="nofollow">五、单行函数</a></li><li><ul><li><a href="#_565" rel="nofollow">（一）字符函数</a></li><li><a href="#_610" rel="nofollow">（二）数值函数</a></li><li><a href="#_658" rel="nofollow">（三）日期函数</a></li><li><a href="#_691" rel="nofollow">（四）转换函数</a></li><li><a href="#_726" rel="nofollow">（五）其它函数</a></li><li><a href="#_764" rel="nofollow">（六）行列转换</a></li><li><a href="#_799" rel="nofollow">（七）分析函数</a></li><li><a href="#_821" rel="nofollow">八、集合运算</a></li><li><ul><li><a href="#_822" rel="nofollow">（一）什么是集合运算</a></li><li><a href="#_829" rel="nofollow">（二）并集运算</a></li><li><a href="#_846" rel="nofollow">（三）交集运算</a></li><li><a href="#_854" rel="nofollow">（四）差集运算</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h5><a id="_1"></a>准备工作</h5> 
<p>以黑马程序员Oracle教程为例，需要准备七张表，表结构及关系如下（Oracle数据库不区分大小写，最终都会转换为大写）：</p> 
<h6><a id="t_onwnertype_3"></a>一、业主类型表（t_onwnertype）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">name</td><td align="center">varchar2(30)</td><td align="center">是</td><td align="center">类型名称</td></tr></tbody></table> 
<h6><a id="t_pricetable_8"></a>二、价格表（t_pricetable）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">price</td><td align="center">number(10,2)</td><td align="center">是</td><td align="center">价格</td></tr><tr><td align="center">ownertypeid</td><td align="center">number</td><td align="center">是</td><td align="center">业主类型id</td></tr><tr><td align="center">minnum</td><td align="center">number(10,2)</td><td align="center">是</td><td align="center">区间数开始值</td></tr><tr><td align="center">maxnum</td><td align="center">number(10,2)</td><td align="center">是</td><td align="center">区间数截止值</td></tr></tbody></table> 
<h6><a id="t_area_17"></a>三、区域表（t_area）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ID</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">name</td><td align="center">varchar2（30）</td><td align="center">是</td><td align="center">区域名称</td></tr></tbody></table> 
<h6><a id="t_operator_23"></a>四、收费员表（t_operator）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">name</td><td align="center">varchar2(30)</td><td align="center">是</td><td align="center">操作员名称</td></tr></tbody></table> 
<h6><a id="t_address_29"></a>五、地址表（t_address）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">name</td><td align="center">varchar2(30)</td><td align="center">是</td><td align="center">地址名称</td></tr><tr><td align="center">areaid</td><td align="center">number</td><td align="center">是</td><td align="center">区域id</td></tr><tr><td align="center">operatorid</td><td align="center">number</td><td align="center">是</td><td align="center">操作员id</td></tr></tbody></table> 
<h6><a id="t_owners_37"></a>六、业主表（t_owners）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">name</td><td align="center">varchar2（30）</td><td align="center">是</td><td align="center">业主名称</td></tr><tr><td align="center">addressid</td><td align="center">number</td><td align="center">是</td><td align="center">地址id</td></tr><tr><td align="center">housenumber</td><td align="center">number</td><td align="center">是</td><td align="center">门牌号</td></tr><tr><td align="center">watermeter</td><td align="center">varchar2（30）</td><td align="center">是</td><td align="center">水表编号</td></tr><tr><td align="center">adddate</td><td align="center">date</td><td align="center">是</td><td align="center">登记日期</td></tr><tr><td align="center">ownertypeid</td><td align="center">number</td><td align="center">是</td><td align="center">业主类型id</td></tr></tbody></table> 
<h6><a id="t_account_48"></a>七、收费台账（t_account）</h6> 
<table><thead><tr><th align="center">字段名</th><th align="center">类型（位数）</th><th align="center">是否必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ID</td><td align="center">number</td><td align="center">是</td><td align="center">主键</td></tr><tr><td align="center">ownerid</td><td align="center">number</td><td align="center">是</td><td align="center">业主编号</td></tr><tr><td align="center">ownertypeid</td><td align="center">number</td><td align="center">是</td><td align="center">业主类型</td></tr><tr><td align="center">areaid</td><td align="center">number</td><td align="center">是</td><td align="center">所在区域</td></tr><tr><td align="center">year</td><td align="center">char（4）</td><td align="center">是</td><td align="center">账务年份</td></tr><tr><td align="center">month</td><td align="center">char（2）</td><td align="center">是</td><td align="center">账务月份</td></tr><tr><td align="center">num0</td><td align="center">number</td><td align="center"></td><td align="center">上月累计数</td></tr><tr><td align="center">num1</td><td align="center">number</td><td align="center"></td><td align="center">本月累计数</td></tr><tr><td align="center">usenum</td><td align="center">number</td><td align="center"></td><td align="center">本月使用数</td></tr><tr><td align="center">meteruserid</td><td align="center">number</td><td align="center"></td><td align="center">抄表员</td></tr><tr><td align="center">metedata</td><td align="center">date</td><td align="center"></td><td align="center">抄表日期</td></tr><tr><td align="center">money</td><td align="center">number（10,2）</td><td align="center"></td><td align="center">应缴金额</td></tr><tr><td align="center">isfee</td><td align="center">char（1）</td><td align="center"></td><td align="center">是否缴费</td></tr><tr><td align="center">feedate</td><td align="center">date</td><td align="center"></td><td align="center">缴费日期</td></tr><tr><td align="center">feeuserid</td><td align="center">number</td><td align="center"></td><td align="center">收费员</td></tr></tbody></table> 
<p>七张表的关系如下：<br> <img src="https://images2.imgbox.com/1b/c9/R0I9DZ9U_o.png" alt="在这里插入图片描述"><br> 大家自己可以使用DDL语言自己按照表结构创建表，或者使用下面代码创建，同时插入数据:<br> 注意：大家在创建表之前，要先创建表空间、在表空间中创建用户、给用户赋予权限、然后登录用户，在用户中创建表。</p> 
<pre><code class="prism language-SQL">
--建立价格区间表
create  table t_pricetable
(
id number primary key,
price number(10,2),
ownertypeid number,
minnum number,
maxnum number
);


--业主类型
create table t_ownertype
(
id number primary key,
name varchar2(30)
);

--业主表
create table t_owners
(
id number primary key,
name varchar2(30),
addressid number,
housenumber varchar2(30),
watermeter varchar2(30),
adddate date,
ownertypeid number
);



--区域表
create table t_area
(
id number,
name varchar2(30)
);

--收费员表
create table t_operator
(
id number,
name varchar2(30)
);


--地址表
create table t_address
(
id number primary key,
name varchar2(100),
areaid number,
operatorid number
);


--账务表--
create table t_account 
(
id number primary key,
owneruuid number,
ownertype number,
areaid number,
year char(4),
month char(2),
num0 number,
num1 number,
usenum number,
meteruser number,
meterdate date,
money number(10,2),
isfee char(1),
feedate date,
feeuser number
);


create sequence seq_account;

--业主类型
insert into t_ownertype values(1,'居民');
insert into t_ownertype values(2,'行政事业单位');
insert into t_ownertype values(3,'商业');

--地址信息--
insert into t_address values( 1,'明兴花园',1,1);
insert into t_address values( 2,'鑫源秋墅',1,1);
insert into t_address values( 3,'华龙苑南里小区',2,2);
insert into t_address values( 4,'河畔花园',2,2);
insert into t_address values( 5,'霍营',2,2);
insert into t_address values( 6,'回龙观东大街',3,2);
insert into t_address values( 7,'西二旗',3,2);

--业主信息
insert into t_owners values(1,'范冰',1,'1-1','30406',to_date('2015-04-12','yyyy-MM-dd'),1 );
insert into t_owners values(2,'王强',1,'1-2','30407',to_date('2015-02-14','yyyy-MM-dd'),1 );
insert into t_owners values(3,'马腾',1,'1-3','30408',to_date('2015-03-18','yyyy-MM-dd'),1 );
insert into t_owners values(4,'林小玲',2,'2-4','30409',to_date('2015-06-15','yyyy-MM-dd'),1 );
insert into t_owners values(5,'刘华',2,'2-5','30410',to_date('2013-09-11','yyyy-MM-dd'),1 );
insert into t_owners values(6,'刘东',2,'2-2','30411',to_date('2014-09-11','yyyy-MM-dd'),1 );
insert into t_owners values(7,'周健',3,'2-5','30433',to_date('2016-09-11','yyyy-MM-dd'),1 );
insert into t_owners values(8,'张哲',4,'2-2','30455',to_date('2016-09-11','yyyy-MM-dd'),1 );
insert into t_owners values(9,'昌平区中西医结合医院',5,'2-2','30422',to_date('2016-10-11','yyyy-MM-dd'),2 );
insert into t_owners values(10,'美廉美超市',5,'4-2','30423',to_date('2016-10-12','yyyy-MM-dd'),3 );


--操作员
insert into t_operator values(1,'马小云');
insert into t_operator values(2,'李翠花');



--地区--
insert into t_area values(1,'海淀');
insert into t_area values(2,'昌平');
insert into t_area values(3,'西城');
insert into t_area values(4,'东城');
insert into t_area values(5,'朝阳');
insert into t_area values(6,'玄武');


--价格表--

insert into t_pricetable values(1,2.45,1,0,5);
insert into t_pricetable values(2,3.45,1,5,10);
insert into t_pricetable values(3,4.45,1,10,null);

insert into t_pricetable values(4,3.87,2,0,5);
insert into t_pricetable values(5,4.87,2,5,10);
insert into t_pricetable values(6,5.87,2,10,null);

insert into t_pricetable values(7,4.36,3,0,5);
insert into t_pricetable values(8,5.36,3,5,10);
insert into t_pricetable values(9,6.36,3,10,null);

--账务表--
insert into t_account values( seq_account.nextval,1,1,1,'2012','01',30203,50123,0,1,sysdate,34.51,'1',to_date('2012-02-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','02',50123,60303,0,1,sysdate,23.43,'1',to_date('2012-03-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','03',60303,74111,0,1,sysdate,45.34,'1',to_date('2012-04-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','04',74111,77012,0,1,sysdate,52.54,'1',to_date('2012-05-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','05',77012,79031,0,1,sysdate,54.66,'1',to_date('2012-06-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','06',79031,80201,0,1,sysdate,76.45,'1',to_date('2012-07-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','07',80201,88331,0,1,sysdate,65.65,'1',to_date('2012-08-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','08',88331,89123,0,1,sysdate,55.67,'1',to_date('2012-09-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','09',89123,90122,0,1,sysdate,112.54,'1',to_date('2012-10-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','10',90122,93911,0,1,sysdate,76.21,'1',to_date('2012-11-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','11',93911,95012,0,1,sysdate,76.25,'1',to_date('2012-12-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,1,1,1,'2012','12',95012,99081,0,1,sysdate,44.51,'1',to_date('2013-01-14','yyyy-MM-dd'),2 );

insert into t_account values( seq_account.nextval,2,1,3,'2012','01',30334,50433,0,1,sysdate,34.51,'1',to_date('2013-02-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','02',50433,60765,0,1,sysdate,23.43,'1',to_date('2013-03-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','03',60765,74155,0,1,sysdate,45.34,'1',to_date('2013-04-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','04',74155,77099,0,1,sysdate,52.54,'1',to_date('2013-05-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','05',77099,79076,0,1,sysdate,54.66,'1',to_date('2013-06-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','06',79076,80287,0,1,sysdate,76.45,'1',to_date('2013-07-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','07',80287,88432,0,1,sysdate,65.65,'1',to_date('2013-08-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','08',88432,89765,0,1,sysdate,55.67,'1',to_date('2013-09-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','09',89765,90567,0,1,sysdate,112.54,'1',to_date('2013-10-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','10',90567,93932,0,1,sysdate,76.21,'1',to_date('2013-11-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','11',93932,95076,0,1,sysdate,76.25,'1',to_date('2013-12-14','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,2,1,3,'2012','12',95076,99324,0,1,sysdate,44.51,'1',to_date('2014-01-14','yyyy-MM-dd'),2 );

insert into t_account values( seq_account.nextval,100,1,3,'2012','12',95076,99324,0,1,sysdate,44.51,'1',to_date('2014-01-01','yyyy-MM-dd'),2 );
insert into t_account values( seq_account.nextval,101,1,3,'2012','12',95076,99324,0,1,sysdate,44.51,'1',to_date('2015-01-01','yyyy-MM-dd'),2 );

update t_account set usenum=num1-num0;
update t_account set money=usenum*2.45;
commit;
</code></pre> 
<p>到此准备工作就算完成了，下面开始讲解相关的查询。</p> 
<h4><a id="_244"></a>一、简单查询（单表）</h4> 
<h6><a id="1_245"></a>1.精确查询</h6> 
<p>查询水表编号为30408的业主记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> watermeter<span class="token operator">=</span><span class="token string">'30408'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c1/0d/ZmJAYpR3_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2_251"></a>2.模糊查询</h6> 
<p>需求：查询业主名称包含“刘”的业主记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%刘%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/ac/ny3u0ilL_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="3and_257"></a>3.and运算符</h6> 
<p>需求：查询业主名称包含“刘”的并且门牌号包含 5 的业主记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%刘%'</span> <span class="token operator">and</span> housenumber <span class="token operator">like</span> <span class="token string">'%5%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/51/31/47NCs3nb_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="4or_263"></a>4.or运算符</h6> 
<p>需求：查询业主名称包含“刘”的或者门牌号包含 5 的业主记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%刘%'</span> <span class="token operator">or</span> housenumber <span class="token operator">like</span> <span class="token string">'%5%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/07/4f/PssBYo3s_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="5_and__or__269"></a>5. and 与 or 运算符混合使用</h6> 
<p>需求：查询业主名称包含“刘”的或者门牌号包含 5 的业主记录，并且地址编号为 3 的记录。<br> 注意： and优先级大于or，当and和or同时出现，建议加上括号</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> <span class="token punctuation">(</span> name <span class="token operator">like</span> <span class="token string">'%刘%'</span> <span class="token operator">or</span> housenumber <span class="token operator">like</span> <span class="token string">'%5%'</span><span class="token punctuation">)</span> <span class="token operator">and</span> addressid <span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/e5/wFKM0DcK_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="6__276"></a>6. 范围查询</h6> 
<p>需求：查询台账记录中用水字数大于等于 10000，并且小于等于 20000 的记录<br> 使用&lt;= ,&gt;=实现</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_account <span class="token keyword">where</span> usenum<span class="token operator">&gt;=</span><span class="token number">10000</span> <span class="token operator">and</span> usenum <span class="token operator">&lt;=</span><span class="token number">20000</span><span class="token punctuation">;</span>
</code></pre> 
<p>使用 between…and…（从…开始到…结束）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_account <span class="token keyword">where</span> usenum <span class="token operator">between</span> <span class="token number">10000</span> <span class="token operator">and</span> <span class="token number">20000</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/2a/8izhSFSW_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="7__287"></a>7. 空值查询</h6> 
<p>需求：查询 T_PRICETABLE 表中 MAXNUM 为空的记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_pricetable <span class="token keyword">where</span> maxnum <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7b/05/MgKm2aRu_o.png" alt="在这里插入图片描述"><br> 需求：查询 T_PRICETABLE 表中 MAXNUM 不为空的记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_pricetable <span class="token keyword">where</span> maxnum <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d3/6b/wxI8Mhvm_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_298"></a>二、去掉重复记录</h6> 
<p>需求：查询业主表中的地址 ID,不重复显示</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">distinct</span> addressid <span class="token keyword">from</span> t_owners <span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8d/ec/UKRRzFqD_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_304"></a>三、排序查询</h6> 
<h6><a id="1_305"></a>1.升序查询</h6> 
<p>需求：对 T_ACCOUNT 表按使用量进行升序排序</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>  <span class="token keyword">from</span> t_account <span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/06/be/VnFfTYpy_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2_311"></a>2.降序排序</h6> 
<p>需求：对 T_ACCOUNT 表按使用量进行降序排序</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>  <span class="token keyword">from</span> t_account <span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/63/20/WmYvTEaM_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_317"></a>四、基于伪列的查询</h6> 
<p>Oracle中的表存在两个伪列<strong>rowid</strong> 和<strong>rownum</strong>，它就像表中的列一样，但是没有存储在表中，这也是我们在表中看不见它的原因。伪列只能查询，不能进行DML(增删改)操作。</p> 
<h6><a id="1rowid_319"></a>1.rowid</h6> 
<p>rowid可以理解为表中每一条数据的物理地址，rwoid可以唯一标识一行数据</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rowid<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> t_owners t
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/43/LP81L0eh_o.png" alt="在这里插入图片描述"><br> 我们可以指定 rowid来进行查询</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> rowid<span class="token operator">=</span><span class="token string">'AAAM11AAGAAAADPAAA'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/53/ea/sOiYcrJv_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2rownum_330"></a>2.rownum</h6> 
<p>rownum可以理解为查询结果集的行号，从第一行开始，第一行标识为1，第二行为2，一直标识到查询结果集的末尾。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> t_owners t<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5c/51/VtoAUwCB_o.png" alt="在这里插入图片描述"><br> 使用rownum可以进行分页查询。</p> 
<h6><a id="_337"></a>五、聚合统计</h6> 
<h6><a id="1_338"></a>1.聚合函数</h6> 
<p>（1）求和 sum<br> 需求：统计 2012 年所有用户的用水量总和</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>usenum<span class="token punctuation">)</span> <span class="token keyword">from</span> t_account <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9d/ff/ennrMPN2_o.png" alt="
"><br> （2）求平均 avg<br> 需求：统计 2012 年所有用水量（字数）的平均值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>usenum<span class="token punctuation">)</span> <span class="token keyword">from</span> t_account <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/49/6b/SKSNCz4w_o.png" alt="在这里插入图片描述"><br> （3）求最大值 max<br> 需求：统计 2012 年最高用水量（字数）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>usenum<span class="token punctuation">)</span> <span class="token keyword">from</span> t_account <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/58/36/O9a5bI5q_o.png" alt="在这里插入图片描述"><br> （4）求最小值 min<br> 需求：统计 2012 年最低用水量（字数）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>usenum<span class="token punctuation">)</span> <span class="token keyword">from</span> t_account <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/01/ad/0tKFfaOi_o.png" alt="在这里插入图片描述"><br> （5）统计记录个数 count<br> 需求：统计业主类型 ID 为 1 的业主数量</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> ownertypeid<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a3/4d/nDBvzdW0_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2_Group_by_370"></a>2.分组聚合 Group by</h6> 
<p>需求：按区域分组统计水费合计数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span> <span class="token keyword">from</span> t_account <span class="token keyword">group</span> <span class="token keyword">by</span> areaid<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1c/14/cSXcrc9G_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="3_having_376"></a>3.分组后条件查询 having</h6> 
<p>需求：查询水费合计大于 169000 的区域及水费合计</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> areaid<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span> <span class="token keyword">from</span> t_account <span class="token keyword">group</span> <span class="token keyword">by</span> areaid <span class="token keyword">having</span> <span class="token function">sum</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">169000</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/04/e8/l0SmshbK_o.png" alt="
"></p> 
<h4><a id="_383"></a>二、连接查询</h4> 
<h6><a id="_384"></a>（一）多表内连接查询</h6> 
<p>（1）需求：查询显示业主编号，业主名称，业主类型名称，</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> o<span class="token punctuation">.</span>id 业主编号<span class="token punctuation">,</span>o<span class="token punctuation">.</span>name 业主名称<span class="token punctuation">,</span>ot<span class="token punctuation">.</span>name 业主类型
<span class="token keyword">from</span> T_OWNERS o<span class="token punctuation">,</span>T_OWNERTYPE ot 
<span class="token keyword">where</span> o<span class="token punctuation">.</span>ownertypeid<span class="token operator">=</span>ot<span class="token punctuation">.</span>id
</code></pre> 
<p><img src="https://images2.imgbox.com/50/e9/UnsIZEfp_o.png" alt="在这里插入图片描述"><br> （2）需求：查询显示业主编号，业主名称、地址和业主类型。<br> 此查询需要三表关联查询。分别是业主表，业主分类表和地址表</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> o<span class="token punctuation">.</span>id 业主编号<span class="token punctuation">,</span>o<span class="token punctuation">.</span>name 业主名称<span class="token punctuation">,</span>ad<span class="token punctuation">.</span>name 地址<span class="token punctuation">,</span>ot<span class="token punctuation">.</span>name 业主类型
<span class="token keyword">from</span> T_OWNERS o<span class="token punctuation">,</span>T_OWNERTYPE ot<span class="token punctuation">,</span>T_ADDRESS ad
<span class="token keyword">where</span> o<span class="token punctuation">.</span>ownertypeid<span class="token operator">=</span>ot<span class="token punctuation">.</span>id <span class="token operator">and</span>  o<span class="token punctuation">.</span>addressid<span class="token operator">=</span>ad<span class="token punctuation">.</span>id
</code></pre> 
<p><img src="https://images2.imgbox.com/9d/03/aPZ6iCr8_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_400"></a>（二）左外连接查询</h6> 
<p>以左边的表为主，如果右边没有数据与左边对应，则为空。<br> 需求：查询业主的账务记录，显示业主编号、名称、年、月、金额。如果此业主没有账务记录也要列出姓名。<br> SQL1999标准写法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> ow<span class="token punctuation">.</span>id<span class="token punctuation">,</span>ow<span class="token punctuation">.</span>name<span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">year</span> <span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">month</span><span class="token punctuation">,</span>ac<span class="token punctuation">.</span>money
<span class="token keyword">FROM</span> T_OWNERS ow <span class="token keyword">left</span> <span class="token keyword">join</span> T_ACCOUNT ac
<span class="token keyword">on</span> ow<span class="token punctuation">.</span>id<span class="token operator">=</span>ac<span class="token punctuation">.</span>owneruuid
</code></pre> 
<p><img src="https://images2.imgbox.com/dc/08/v2pXZ70V_o.png" alt="在这里插入图片描述"><br> Oracle数据库左外连接的写法（在右表中添加（+））</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> ow<span class="token punctuation">.</span>id<span class="token punctuation">,</span>ow<span class="token punctuation">.</span>name<span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">year</span> <span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">month</span><span class="token punctuation">,</span>ac<span class="token punctuation">.</span>money
<span class="token keyword">FROM</span> T_OWNERS ow <span class="token punctuation">,</span> T_ACCOUNT ac
<span class="token keyword">where</span> ow<span class="token punctuation">.</span>id<span class="token operator">=</span>ac<span class="token punctuation">.</span>owneruuid<span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/05/uQVKQPGB_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_417"></a>（三）右外连接查询</h6> 
<p>需求：查询业主的账务记录，显示业主编号、名称、年、月、金额。如果账务记录没有对应的业主信息，也要列出记录。<br> SQL1999标准写法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> ow<span class="token punctuation">.</span>id<span class="token punctuation">,</span>ow<span class="token punctuation">.</span>name<span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">year</span><span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">month</span><span class="token punctuation">,</span>ac<span class="token punctuation">.</span>money <span class="token keyword">from</span>
T_OWNERS ow <span class="token keyword">right</span> <span class="token keyword">join</span> T_ACCOUNT ac
<span class="token keyword">on</span> ow<span class="token punctuation">.</span>id<span class="token operator">=</span>ac<span class="token punctuation">.</span>owneruuid
</code></pre> 
<p><img src="https://images2.imgbox.com/8a/cd/p56EK0JV_o.png" alt="在这里插入图片描述"><br> Oracle数据库右外连接的写法（在左表中添加（+））</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> ow<span class="token punctuation">.</span>id<span class="token punctuation">,</span>ow<span class="token punctuation">.</span>name<span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">year</span><span class="token punctuation">,</span>ac<span class="token punctuation">.</span><span class="token keyword">month</span><span class="token punctuation">,</span>ac<span class="token punctuation">.</span>money <span class="token keyword">from</span>
T_OWNERS ow <span class="token punctuation">,</span>T_ACCOUNT ac
<span class="token keyword">where</span> ow<span class="token punctuation">.</span>id<span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">=</span>ac<span class="token punctuation">.</span>owneruuid<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/1d/67ugDUbb_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_433"></a>三、子查询</h4> 
<h5><a id="where__434"></a>（一）where 子句中的子查询</h5> 
<h6><a id="1__435"></a>1. 单行子查询</h6> 
<ul><li><strong>字查询只返回一条记录</strong></li><li><strong>单行操作符</strong><br> <img src="https://images2.imgbox.com/22/13/T49oLxmi_o.png" alt="在这里插入图片描述"><br> 需求：查询 2012 年 1 月用水量大于平均值的台账记录</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> T_ACCOUNT
<span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span> <span class="token operator">and</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'01'</span> <span class="token operator">and</span> usenum<span class="token operator">&gt;</span>
<span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>usenum<span class="token punctuation">)</span> <span class="token keyword">from</span> T_ACCOUNT <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span> <span class="token operator">and</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'01'</span> <span class="token punctuation">)</span>
</code></pre> 
<p>![在这里插入图片描述](https://img-blog.csdnimg.cn/c374b6cc03344770b4415355fd4fba07.png</p> 
<h6><a id="2__446"></a>2. 多行子查询</h6> 
<ul><li><strong>子查询返回了多条记录</strong></li><li><strong>使用多行操作符</strong></li></ul> 
<table><thead><tr><th align="center">操作符</th><th align="center">含义</th></tr></thead><tbody><tr><td align="center">in</td><td align="center">等于列表中的任意一个值（相当于将集合中的值用or运算符连接起来）</td></tr><tr><td align="center">any</td><td align="center">和任意一个值比较</td></tr><tr><td align="center">all</td><td align="center">和子查询返回的所有值进行比较</td></tr></tbody></table> 
<h6><a id="in_455"></a>in运算符</h6> 
<p>（1）需求：查询地址编号为 1 、3、4 的业主记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> T_OWNERS
<span class="token keyword">where</span> addressid <span class="token operator">in</span> <span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/59/f9/CtdlMR4w_o.png" alt="在这里插入图片描述"><br> （2）需求：查询地址含有“花园”的业主的信息</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> T_OWNERS <span class="token keyword">where</span> addressid <span class="token operator">in</span><span class="token punctuation">(</span>
                                          <span class="token keyword">select</span> id <span class="token keyword">from</span> t_address <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%花园%'</span>
                                          <span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/0c/bMX3wItt_o.png" alt="在这里插入图片描述"><br> （2）需求：查询地址不含有“花园”的业主的信息（not in）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> T_OWNERS <span class="token keyword">where</span> addressid <span class="token operator">not</span> <span class="token operator">in</span><span class="token punctuation">(</span>
                                          <span class="token keyword">select</span> id <span class="token keyword">from</span> t_address <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%花园%'</span>
                                          <span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/74/0d/dTNzr4xM_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="from__476"></a>（二）from 子句中的子查询</h5> 
<p>子查询可以跟在 from之后（必须要返回多条数据），这样就类似于将子查询的结果看作是一张表。<br> 需求：查询显示业主编号，业主名称，业主类型名称，条件为业主类型为”居民”，使用子查询实现。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> o<span class="token punctuation">.</span>id 业主编号<span class="token punctuation">,</span>o<span class="token punctuation">.</span>name 业主名称<span class="token punctuation">,</span>ot<span class="token punctuation">.</span>name 业主类型
        <span class="token keyword">from</span> T_OWNERS o<span class="token punctuation">,</span>T_OWNERTYPE ot
        <span class="token keyword">where</span> o<span class="token punctuation">.</span>ownertypeid<span class="token operator">=</span>ot<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token keyword">where</span> 业主类型<span class="token operator">=</span><span class="token string">'居民'</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/79/LQzgHCpN_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="select__487"></a>（三）select 子句中的子查询</h5> 
<p>字查询也可以放在select之后，但是必须是单条数据的子查询，只能返回一条数据。<br> （1）需求：列出业主信息，包括 ID，名称，所属地址</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> name <span class="token keyword">from</span> t_address <span class="token keyword">where</span> id<span class="token operator">=</span>addressid<span class="token punctuation">)</span> <span class="token keyword">as</span> addressname
<span class="token keyword">from</span> t_owners
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/f3/yFPytdew_o.png" alt="在这里插入图片描述"><br> （2）需求：列出业主信息，包括 ID，名称，所属地址，所属区域。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>
<span class="token punctuation">(</span> <span class="token keyword">select</span> name <span class="token keyword">from</span> t_address <span class="token keyword">where</span> id<span class="token operator">=</span>addressid <span class="token punctuation">)</span> <span class="token keyword">as</span> addressname<span class="token punctuation">,</span>
<span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name <span class="token keyword">from</span> t_area <span class="token keyword">where</span> id<span class="token operator">=</span>areaid <span class="token punctuation">)</span> <span class="token keyword">from</span> t_address <span class="token keyword">where</span> id<span class="token operator">=</span>addressid <span class="token punctuation">)</span> <span class="token keyword">as</span> adrename
<span class="token keyword">from</span> t_owners<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a3/3f/7HUl2Kng_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_503"></a>四、分页查询</h4> 
<h5><a id="_504"></a>（一）简单分页</h5> 
<p>需求：分页查询台账表 T_ACCOUNT，每页 10 条记录<br> oracle 中的分页查询，需要用到伪列 rownum<br> 我们先显示前10条记录，也就是第一页的数据</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum <span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> t_account t <span class="token keyword">where</span> rownum <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/08/09/2RmTBJ9a_o.png" alt="在这里插入图片描述"><br> 用同样的方法查询第二页的数据，也就是第10 到 20条数据</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum <span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> t_account t <span class="token keyword">where</span> rownum <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">and</span> rownum <span class="token operator">&lt;=</span><span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<p>居然没有结果了，这是因为rownum它不是一瞬间就给所有的行生成行号，而是从第一条数据开始，依次生成，所以rownum伪列不能使用&gt; 、&gt;=、=等运算符，只能使用&lt;,&lt;=运算符。<br> <img src="https://images2.imgbox.com/63/ed/Iwvhaviu_o.png" alt="在这里插入图片描述"><br> 所以我们应该如何得到第二页的数据呢?我们可以使用子查询先查询出前20条数据，在 通过where截取10以上的</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span>
                <span class="token keyword">select</span>  rownum <span class="token keyword">as</span> r <span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> t_account t <span class="token keyword">where</span> rownum <span class="token operator">&lt;=</span><span class="token number">20</span>
               <span class="token punctuation">)</span> 
<span class="token keyword">where</span> r <span class="token operator">&gt;</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/61/kfB73CO1_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_526"></a>（二）基于排序的分页</h5> 
<p>需求：分页查询台账表 T_ACCOUNT，每页 10 条记录，按使用字数降序排序。<br> 查询第一页的数据</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> t_account t  <span class="token keyword">where</span> rownum <span class="token operator">&lt;=</span> <span class="token number">10</span> <span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/22/bf/S57cIbwD_o.png" alt="在这里插入图片描述"><br> 看这个结果是不是发现问题了，为什么rownum是乱的？<br> 因为rownum在结果查询出来之后就生成了，而排序order by则是在生成rownum之后执行，所以一排序rownum就是乱的，那应该怎么解决这个问题？让order by在生成rownum之前执行？<br> 通过子查询先查询出 order by 的数据，然后再生成rownum即可。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> 
                        <span class="token punctuation">(</span>
                         <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_account 
                         <span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span>
                         <span class="token punctuation">)</span> t
<span class="token keyword">where</span> rownum <span class="token operator">&lt;=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/94/cd/FyomKepN_o.png" alt="在这里插入图片描述"><br> 用同样 的方法查询第二页，不过第二页要稍微复杂一点，需要嵌套三层子查询，首先肯定是先查询出前20条order by的数据，然后通过这个order by的数据生成 rownum，然后在取数据即可（当存在子查询时，建议先编写子查询中的sql语句，由内到外），<br> 先拿到前20条数据</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum <span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span>
                         <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_account <span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span>
                         <span class="token punctuation">)</span> t 
<span class="token keyword">where</span> rownum <span class="token operator">&lt;=</span> <span class="token number">20</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/c8/oGXcWTRo_o.png" alt="在这里插入图片描述"><br> 然后在将这个结果在作为子查询，截取10以上的数据（记得rownum加别名）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span>
            <span class="token punctuation">(</span><span class="token keyword">select</span> rownum r <span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span>
                                     <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_account <span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span>
                                     <span class="token punctuation">)</span> t 
            <span class="token keyword">where</span> rownum <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">where</span> r<span class="token operator">&gt;</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/61/67/HPVbtzvd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_564"></a>五、单行函数</h4> 
<h5><a id="_565"></a>（一）字符函数</h5> 
<table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ascii</td><td align="center">返回对应字符的十进制值</td></tr><tr><td align="center">chr</td><td align="center">给出十进制返回字段</td></tr><tr><td align="center">concat</td><td align="center">拼接两个字符，和 <code>||</code> 相同</td></tr><tr><td align="center">initcat</td><td align="center">将字符串的第一个字母变为大写</td></tr><tr><td align="center">instr</td><td align="center">找出某个字符串的位置</td></tr><tr><td align="center">instrb</td><td align="center">找出某个字符串的位置和字节数</td></tr><tr><td align="center">length</td><td align="center">以字符给出字符串的长度</td></tr><tr><td align="center">lengthb</td><td align="center">以字节给出字符串的长度</td></tr><tr><td align="center">lower</td><td align="center">将字符串转换成小写</td></tr><tr><td align="center">upper</td><td align="center">将字符串变为大写</td></tr><tr><td align="center">lpad</td><td align="center">使用指定的字符在字符的左边填充</td></tr><tr><td align="center">rpad</td><td align="center">使用指定的字符在字符的右边填充</td></tr><tr><td align="center">ltrim</td><td align="center">在左边裁剪掉指定的字符</td></tr><tr><td align="center">rtrim</td><td align="center">在右边裁剪掉指定的字符</td></tr><tr><td align="center">replace</td><td align="center">执行字符串搜索和替换</td></tr><tr><td align="center">substr</td><td align="center">取字符串的子串</td></tr><tr><td align="center">substrb</td><td align="center">取字符串的子串（以字节）</td></tr><tr><td align="center">soundex</td><td align="center">返回一个同音字符串</td></tr><tr><td align="center">translate</td><td align="center">执行字符串搜索和替换</td></tr><tr><td align="center">trim</td><td align="center">裁剪掉前面或后面的字符串</td></tr></tbody></table> 
<p>常用字符函数讲解：<br> （1）求字符串长度 LENGTH</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/29/KaI0U6qG_o.png" alt="在这里插入图片描述"><br> （2）求字符串的子串 SUBSTR</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'ABCD'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f1/84/7vVaahVq_o.png" alt="在这里插入图片描述"><br> （3）字符串拼接 CONCAT</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">,</span><span class="token string">'Oracle!'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cb/df/XzDUh7zx_o.png" alt="在这里插入图片描述"><br> 或者使用 || 实现字符串拼接</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token string">'Hello '</span> <span class="token operator">||</span> <span class="token string">'SQL'</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/df/e0/xahc50v6_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_610"></a>（二）数值函数</h5> 
<table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ABS（value）</td><td align="center">绝对值</td></tr><tr><td align="center">celi（value）</td><td align="center">大于或等于value的最小整数(向上取余)</td></tr><tr><td align="center">floor（value）</td><td align="center">小于或等于value的最大整数（向下取余）</td></tr><tr><td align="center">cos（value）</td><td align="center">余弦</td></tr><tr><td align="center">cosh</td><td align="center">反余弦</td></tr><tr><td align="center">exp（value）</td><td align="center">e的value次幂</td></tr><tr><td align="center">ln（value）</td><td align="center">value的自然对数</td></tr><tr><td align="center">log（value）</td><td align="center">value以10为底的对数</td></tr><tr><td align="center">mod（value,divisor）</td><td align="center">求模</td></tr><tr><td align="center">power（value，exponent）</td><td align="center">value 的 exponent 次幂</td></tr><tr><td align="center">pound（value,precision）</td><td align="center">按 precision 精度 4 舍 5 入</td></tr><tr><td align="center">sign（value）</td><td align="center">value 为正返回 1;为负返回-1;为 0 返回 0</td></tr><tr><td align="center">sin（value)</td><td align="center">余弦</td></tr><tr><td align="center">sinh（value）</td><td align="center">反余弦</td></tr><tr><td align="center">sqrrt（value）</td><td align="center">value的平方根</td></tr><tr><td align="center">tan（value）</td><td align="center">正切</td></tr><tr><td align="center">tanh（value）</td><td align="center">反正切</td></tr><tr><td align="center">trunc（value,按 precision)</td><td align="center">按照 precision 截取 value</td></tr><tr><td align="center">vsize（value）</td><td align="center">返回 value 在 ORACLE 的存储空间大小</td></tr></tbody></table> 
<p>（1）四舍五入函数 round</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">12.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">12.4</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fe/37/f2pvbrkr_o.png" alt="在这里插入图片描述"><br> （2）截取函数 trunc</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> trunc<span class="token punctuation">(</span><span class="token number">100.234</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>trunc<span class="token punctuation">(</span><span class="token number">100.234</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>trunc<span class="token punctuation">(</span><span class="token number">100.276</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/39/ca/m9fn0XK0_o.png" alt="在这里插入图片描述"><br> （3）取模 mod</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/70/e2/S7V9Jo3m_o.png" alt="在这里插入图片描述"><br> （4）向上取余ceil</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> ceil<span class="token punctuation">(</span><span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ceil<span class="token punctuation">(</span><span class="token number">12.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ceil<span class="token punctuation">(</span><span class="token number">12.1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a2/81/VjEz8sQs_o.png" alt="在这里插入图片描述"><br> （5）向下取余floor</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">12.9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> floor<span class="token punctuation">(</span><span class="token number">12.5</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">12.1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/46/28/8dwezb7w_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_658"></a>（三）日期函数</h5> 
<table><thead><tr><th align="center">函数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">add_months</td><td align="center">在日期date上增加count个月</td></tr><tr><td align="center">greatest（date1,date2,…）</td><td align="center">从日期列表中选出最晚的日期</td></tr><tr><td align="center">last_day(date)</td><td align="center">返回日期所在月的最后一天</td></tr><tr><td align="center">months_between（date2，date1）</td><td align="center">给出 Date2 - date1 的月数(可以是小数)</td></tr><tr><td align="center">next_day(date,‘day’)</td><td align="center">给出日期 date 之后下一天的日期，这里的 day 为星期，如： MONDAY,Tuesday 等。</td></tr><tr><td align="center">new_time(date ,‘this’,‘other’)</td><td align="center">给出在 this 时区=Other 时区的日期和时间</td></tr><tr><td align="center">round(date,‘format’)</td><td align="center">未指定 format 时，如果日期中的时间在中午之前，则将日期中的时间截断为 12 A.M.(午夜，一天的开始),否则进到第二天。时间截断为 12 A.M.(午夜，一天的开始), 否则进到第二天。</td></tr><tr><td align="center">trunc(date,‘format’)</td><td align="center">未指定 format 时，将日期截为 12 A.M.( 午夜，一天的开始)</td></tr></tbody></table> 
<p>我们用 sysdate 这个系统变量来获取当前日期和时间</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sysdate <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ef/c1/GnMyvPCm_o.png" alt="在这里插入图片描述"><br> （1）加月函数 ADD_MONTHS ：在当前日期基础上加指定的月</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> add_months<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e2/46/DEECg6Aq_o.png" alt="在这里插入图片描述"><br> （2）求所在月最后一天 LAST_DAY</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> last_day<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a9/f7/ftYExhfq_o.png" alt="在这里插入图片描述"><br> （3）日期截取 TRUNC</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/33/07/slj8C1K9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c1/58/dW7WnlWQ_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_691"></a>（四）转换函数</h5> 
<table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">chartorowid</td><td align="center">将 字符转换到 rowid 类型</td></tr><tr><td align="center">convert</td><td align="center">转换一个字符节到另外一个字符节</td></tr><tr><td align="center">hextoraw</td><td align="center">转换十六进制到 raw 类型</td></tr><tr><td align="center">rawtohex</td><td align="center">转换 raw 到十六进制</td></tr><tr><td align="center">rowidtochar</td><td align="center">转换 ROWID 到字符</td></tr><tr><td align="center">to_cahr</td><td align="center">转换日期格式到字符串</td></tr><tr><td align="center">to_date</td><td align="center">按照指定的格式将字符串转换到日期型</td></tr><tr><td align="center">to_multibyte</td><td align="center">把单字节字符转换到多字节</td></tr><tr><td align="center">to_number</td><td align="center">将数字字串转换到数字</td></tr><tr><td align="center">to_single_byte</td><td align="center">转换多字节到单字节</td></tr></tbody></table> 
<p>（1）数字转字符串 TO_CHAR</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/30/53/8aiCW5iE_o.png" alt="在这里插入图片描述"><br> （2）日期转字符串 TO_CHAR</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">'yyyy-mm-dd'</span> <span class="token punctuation">)</span> <span class="token punctuation">,</span>
to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">'yyyy-mm-dd hh:mm:ss'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/26/8c/42b273LL_o.png" alt="在这里插入图片描述"><br> （3）字符串转日期 TO_DATE</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">'2023-12-13'</span><span class="token punctuation">,</span><span class="token string">'yyyy-mm-dd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e8/66/OBMQzsxI_o.png" alt="在这里插入图片描述"><br> （4）字符串转数字 TO_NUMBER</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> to_char<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span> to_number<span class="token punctuation">(</span><span class="token string">'1024'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fb/19/puyWL2Yo_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_726"></a>（五）其它函数</h5> 
<p>（1）空值处理函数 NVL<br> 用法：NVL（检测的值，如果为 null 的值）；</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> nvl<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f3/cc/A8SWSAW1_o.png" alt="在这里插入图片描述"><br> 需求：显示价格表中业主类型 ID 为 1 的价格记录，如果上限值为 NULL,则显示 9999999</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> PRICE<span class="token punctuation">,</span>MINNUM<span class="token punctuation">,</span>NVL<span class="token punctuation">(</span>MAXNUM<span class="token punctuation">,</span><span class="token number">9999999</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> T_PRICETABLE <span class="token keyword">where</span> OWNERTYPEID<span class="token operator">=</span><span class="token number">1</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/02/ea/EjT6xKl4_o.png" alt="在这里插入图片描述"><br> （2）空值处理函数 NVL2<br> 用法：NVL2（检测的值，如果不为 null 的值，如果为 null 的值）<br> 需求：显示价格表中业主类型 ID 为 1 的价格记录，如果上限值为 NULL,显示“不限”.</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token punctuation">,</span>nvl2<span class="token punctuation">(</span>maxnum<span class="token punctuation">,</span>to_char<span class="token punctuation">(</span>maxnum<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'不限'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> T_PRICETABLE t <span class="token keyword">where</span> OWNERTYPEID<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/18/ab/YP3yr4h4_o.png" alt="在这里插入图片描述"><br> （3）条件取值 decode，类似于case when then</p> 
<pre><code>decode(条件,值 1,翻译值 1,值 2,翻译值 2,...值 n,翻译值 n,缺省值)
【功能】根据条件返回相应值
</code></pre> 
<p>需求：显示下列信息（不要关联查询业主类型表，直接判断 1 2 3 的值）<br> <img src="https://images2.imgbox.com/17/01/dvUY3kSb_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> name<span class="token punctuation">,</span>decode<span class="token punctuation">(</span>ownertypeid <span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'居民'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'行政事业单位'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'商业'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> T_OWNERS
</code></pre> 
<p>也可以使用 case when then实现</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> name <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">case</span> ownertypeid <span class="token keyword">when</span> <span class="token number">1</span> <span class="token keyword">then</span> <span class="token string">'居民'</span>
                              <span class="token keyword">when</span> <span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'行政事业单位'</span>
                              <span class="token keyword">when</span> <span class="token number">3</span> <span class="token keyword">then</span> <span class="token string">'居民'</span>
                              <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">from</span> T_OWNERS
</code></pre> 
<p><img src="https://images2.imgbox.com/32/aa/RqsAHu6P_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_764"></a>（六）行列转换</h5> 
<p>需求：按月份统计 2012 年各个地区的水费，如下图<br> <img src="https://images2.imgbox.com/80/29/Nek9RJqA_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name <span class="token keyword">from</span> T_AREA <span class="token keyword">where</span> id<span class="token operator">=</span> areaid <span class="token punctuation">)</span> 区域<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'01'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 一月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'02'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 二月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'03'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 三月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'04'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 四月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'05'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 五月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'06'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 六月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'07'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 七月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'08'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 八月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'09'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 九月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'10'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 十月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'11'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 十一月<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'12'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 十二月
<span class="token keyword">from</span> T_ACCOUNT <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> areaid
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/97/aVi0jb8G_o.png" alt="在这里插入图片描述"><br> 需求：按季度统计 2012 年各个地区的水费，如下图<br> <img src="https://images2.imgbox.com/55/17/O3iaFQEI_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name <span class="token keyword">from</span> T_AREA <span class="token keyword">where</span> id<span class="token operator">=</span> areaid <span class="token punctuation">)</span> 区域<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">&gt;=</span><span class="token string">'01'</span> <span class="token operator">and</span> <span class="token keyword">month</span><span class="token operator">&lt;=</span><span class="token string">'03'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span>
<span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 第一季度<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">&gt;=</span><span class="token string">'04'</span> <span class="token operator">and</span> <span class="token keyword">month</span><span class="token operator">&lt;=</span><span class="token string">'06'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span>
<span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 第二季度<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">&gt;=</span><span class="token string">'07'</span> <span class="token operator">and</span> <span class="token keyword">month</span><span class="token operator">&lt;=</span><span class="token string">'09'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span>
<span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 第三季度<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token keyword">month</span><span class="token operator">&gt;=</span><span class="token string">'10'</span> <span class="token operator">and</span> <span class="token keyword">month</span><span class="token operator">&lt;=</span><span class="token string">'12'</span> <span class="token keyword">then</span> money <span class="token keyword">else</span>
<span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> 第四季度
<span class="token keyword">from</span> T_ACCOUNT <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2012'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> areaid
</code></pre> 
<p><img src="https://images2.imgbox.com/13/64/7dUNCblz_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_799"></a>（七）分析函数</h5> 
<p>以下三个分析函数可以用于排名使用。<br> 下图为三种排名方式的举例<br> <img src="https://images2.imgbox.com/e4/1e/egw3fPfO_o.png" alt="在这里插入图片描述"><br> （1） RANK 相同的值排名相同，排名跳跃<br> 需求：对 T_ACCOUNT 表的 usenum 字段进行排序，相同的值排名相同，排名跳跃</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rank<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span><span class="token punctuation">)</span><span class="token punctuation">,</span>usenum <span class="token keyword">from</span> t_account <span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ca/9f/o7QIhMpD_o.png" alt="在这里插入图片描述"><br> （2） DENSE_RANK 相同的值排名相同，排名连续<br> 需求：对 T_ACCOUNT 表的 usenum 字段进行排序，相同的值排名相同，排名连续</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> dense_rank<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span><span class="token punctuation">)</span><span class="token punctuation">,</span>usenum <span class="token keyword">from</span> t_account<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/47/4f/vtIi9nv5_o.png" alt="在这里插入图片描述"><br> （3） ROW_NUMBER 返回连续的排名，无论值是否相等<br> 需求：对 T_ACCOUNT 表的 usenum 字段进行排序，返回连续的排名，无论值是否相等</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> row_number<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">order</span> <span class="token keyword">by</span> usenum <span class="token keyword">desc</span><span class="token punctuation">)</span><span class="token punctuation">,</span>usenum <span class="token keyword">from</span> t_account<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/23/45/Cwk0Mrd2_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_821"></a>八、集合运算</h5> 
<h6><a id="_822"></a>（一）什么是集合运算</h6> 
<p>集合运算，集合运算就是将两个或者多个结果集组合成为一个结果集。集合运算包括：</p> 
<ul><li>union all(并集)，返回各个查询的所有记录，包括重复记录</li><li>union（并集），返回各个查询的所有记录，不包括重复记录。</li><li>intersect（交集），返回两个查询共有的记录。</li><li>minus（差集），返回第一个查询检索出的记录减去第二个查询检索出的记录之后剩余的记录<br> <img src="https://images2.imgbox.com/48/3d/6Hm6tHei_o.png" alt="在这里插入图片描述"></li></ul> 
<h6><a id="_829"></a>（二）并集运算</h6> 
<p><img src="https://images2.imgbox.com/27/0c/H7OEkFFk_o.png" alt="在这里插入图片描述"></p> 
<p>UNION ALL 不去掉重复记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&lt;=</span><span class="token number">7</span>
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&gt;=</span><span class="token number">5</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bd/ba/lPOvRdVY_o.png" alt="在这里插入图片描述"><br> UNION 去掉重复记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&lt;=</span><span class="token number">7</span>
<span class="token keyword">union</span> 
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&gt;=</span><span class="token number">5</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/83/e2/VFVW7r6w_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_846"></a>（三）交集运算</h6> 
<p><img src="https://images2.imgbox.com/7a/00/XIxufhkI_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&lt;=</span><span class="token number">7</span>
<span class="token keyword">intersect</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&gt;=</span><span class="token number">5</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/98/af/Si8MEJXo_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_854"></a>（四）差集运算</h6> 
<p><img src="https://images2.imgbox.com/8a/05/99j9dskw_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&lt;=</span><span class="token number">7</span>
minus
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_owners <span class="token keyword">where</span> id<span class="token operator">&gt;=</span><span class="token number">5</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7b/fd/3kDbX32S_o.png" alt="在这里插入图片描述"><br> 如果我们用 minus 运算符来实现分页，语句如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rownum<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> T_ACCOUNT t <span class="token keyword">where</span> rownum<span class="token operator">&lt;=</span><span class="token number">20</span>
minus
<span class="token keyword">select</span> rownum<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> T_ACCOUNT
</code></pre> 
<p><img src="https://images2.imgbox.com/71/cf/hiEtB0zI_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a24ff6028818abb06ffa54efaff377c9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LangChain &#43; ChatGLM2-6B 搭建个人专属知识库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e01eb4077faea7ba51ef13025d544b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Flutter可能会凉凉的7个理由</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>