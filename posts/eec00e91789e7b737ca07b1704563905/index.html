<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>第2章 系统信息（System Information） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="第2章 系统信息（System Information）" />
<meta property="og:description" content="小区搜索过程之后，UE已经与小区取得下行同步，得到小区的PCI（Physical Cell ID）以及检测到系统帧的timing（即10ms timing）。接着，UE需要获取到小区的系统信息（System Information），这样才能知道该小区是如何配置的，以便接入该小区并在该小区内正确地工作。小区会不断地广播这些系统信息。
系统信息是小区级别的信息，即对接入该小区的所有UE生效。系统信息可分为MasterInformationBlock（MIB）和多个SystemInformationBlock（SIB），每个系统信息包含了与某个功能相关的一系列参数集合。系统信息类型包括：
表2.1：系统信息类型
并不是所有的SIB都必须存在。例如对于运营商部署的基站而言，就不需要SIB9；如果某小区不提供MBMS，就不需要SIB13。
有3种类型的RRC消息用于传输系统信息：MIB消息、SIB1消息、一个或多个SI消息。
图2.1：3类用于发送系统信息的RRC消息
小区是通过逻辑信道BCCH向该小区内的所有UE发送系统信息的。
从图2.2、图2.3、图2.4可以看出，逻辑信道BCCH会映射到传输信道BCH和DL-SCH。其中，BCH只用于传输MIB信息，并映射到物理信道PBCH；DL-SCH用于传输各种SIB信息，并映射到物理信道PDSCH。
图2.2：下行信道匹配
图2.3：从RRC信令中可以看出：MIB在BCH上传输
图2.4：从RRC信令中可以看出：SIB在DL-SCH上传输
2.1 MIB 对于MIB而言，除了RRC消息（MasterInformationBlock）里所带的信息外，它还有额外一些信息要告诉UE。本节所要介绍的，就是小区会通过MIB告诉UE哪些信息，以及UE是如何检测到这些信息的。
UE通过检测PBCH，能得到以下信息：
（1）通过接收到的MasterInformationBlock可以知道小区的下行系统带宽、PHICH配置（详见《LTE：PHICH（一）》）、系统帧号（System Frame Number，SFN。更确切地说，获取到的是SFN的高8位，最低2位需要在PBCH盲检时得到，这会在后面介绍）。
（2）小区特定的天线端口（cell-specific antenna port）的数目：1或2或4。
（3）用于L1/L2 control signal（包括PCFICH、PHICH、PDCCH）的传输分集模式（transmit-diversity scheme）：PBCH和L1/L2 control signal都只能使用单天线传输或传输分集，如果使用传输分集， PBCH和L1/L2 control signal会使用相同的多天线传输分集模式。
从图2.2可以看出，MIB会在物理信道PBCH上传输。PBCH时域上位于每个系统帧的子帧0的第2个slot的前4个OFDM symbol上，并在频域上占据72个中心子载波（不含DC）。对应RE不能用于发送DL-SCH数据。如图2.5所示。
图2.5：BCH传输信道的资源映射
把BCH传输限制在72个中心的子载波，而不考虑小区的下行系统带宽的原因在于：UE在接收BCH时并不知道小区的下行系统带宽。因此UE在第一次接收BCH时，可以假定小区的下行系统带宽等于可能的最小下行系统带宽（6个RB，对应72个子载波）。在解码了MIB后，UE就能从MIB中得到实际的下行系统带宽。
MIB在40ms周期内重复4次，每一次发送的PBCH都携带相同的coded bit，也就是说，每一次都是可以独自解码的。因此，在信道质量（SIR）足够好的情况下，UE可能只接收这40ms内的其中一个，就能够成功解码出PBCH的内容；如果不行，就与下一个10ms发送的PBCH的内容进行软合并，再进行解码，直到成功解码出PBCH。
图2.6：MIB在时域上的调度
前面已经说过，通过MIB，UE只能获取到SFN的高8位，最低2位（也就是40ms timing）是通过盲检PBCH得到的。40ms内每次发送的PBCH会使用不同scrambling and bit position（即共有4个不同的phase of the PBCH scrambling code），并且每40ms会重置一次。
UE可以通过使用4个可能的phase of the PBCH scrambling code中的每一个去尝试解码PBCH，如果解码成功，也就知道了小区是在40ms内的第几个系统帧发送MIB，即知道了SFN的最低2位。（[2]和[6]中介绍了检测SFN最低2位的几种策略，有兴趣的可以了解一下）
PBCH的多天线传输只能使用传输分集，而且在2天线端口传输时，只能使用SFBC；4天线端口传输时，只能使用combined SFBC/FSTD。UE使用3种不同的CRC mask（见36.212的Table 5.3.1.1-1）来盲检PBCH，可得到天线端口数目，而天线端口数目与传输分集模式一一对应（1天线端口 &lt;-&gt; 单天线端口传输；2天线端口 &lt;-&gt; SFBC；4天线端口 &lt;-&gt; combined SFBC/FSTD），因此当UE成功解码PBCH时，就知道了小区特定的天线端口数以及用于L1/L2 control signal的传输分集模式。（关于SFBC、FSTD的说明，详见[1]的5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/eec00e91789e7b737ca07b1704563905/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-10T14:49:07+08:00" />
<meta property="article:modified_time" content="2022-03-10T14:49:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">第2章 系统信息（System Information）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;">小区搜索过程之后，UE已经与小区取得下行同步，得到小区的PCI（Physical Cell ID）以及检测到系统帧的timing（即10ms timing）。接着，UE需要获取到小区的系统信息（System Information），这样才能知道该小区是如何配置的，以便接入该小区并在该小区内正确地工作。小区会不断地广播这些系统信息。</p> 
<p style="margin-left:.0001pt;">系统信息是小区级别的信息，即对接入该小区的所有UE生效。系统信息可分为<em><em>MasterInformationBlock</em></em>（MIB）和多个<em><em>SystemInformationBlock</em></em>（SIB），每个系统信息包含了与某个功能相关的一系列参数集合。系统信息类型包括：</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;text-align:center;">表2.1：系统信息类型</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="650" src="https://images2.imgbox.com/7d/ae/bpeb87ED_o.png" width="956"></p> 
<p> </p> 
<p style="margin-left:.0001pt;">并不是所有的SIB都必须存在。例如对于运营商部署的基站而言，就不需要SIB9；如果某小区不提供MBMS，就不需要SIB13。</p> 
<p style="margin-left:.0001pt;">      有3种类型的RRC消息用于传输系统信息：MIB消息、SIB1消息、一个或多个SI消息。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="385" src="https://images2.imgbox.com/61/0a/gnLCelTJ_o.png" width="923"></p> 
<p style="margin-left:.0001pt;text-align:center;">图2.1：3类用于发送系统信息的RRC消息</p> 
<p style="margin-left:.0001pt;">小区是通过逻辑信道BCCH向该小区内的所有UE发送系统信息的。</p> 
<p style="margin-left:.0001pt;">      从图2.2、图2.3、图2.4可以看出，逻辑信道BCCH会映射到传输信道BCH和DL-SCH。其中，BCH只用于传输MIB信息，并映射到物理信道PBCH；DL-SCH用于传输各种SIB信息，并映射到物理信道PDSCH。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="477" src="https://images2.imgbox.com/7b/50/vImChCna_o.png" width="1027"></p> 
<p>                                                 图2.2：下行信道匹配</p> 
<p style="margin-left:.0001pt;"><img alt="" height="506" src="https://images2.imgbox.com/65/3f/G9sGvrTn_o.png" width="983"></p> 
<p>                         图2.3：从RRC信令中可以看出：MIB在BCH上传输</p> 
<p><img alt="" height="340" src="https://images2.imgbox.com/72/dc/WxFpcplO_o.png" width="940"></p> 
<p style="margin-left:.0001pt;text-align:center;">图2.4：从RRC信令中可以看出：SIB在DL-SCH上传输</p> 
<h4><strong><strong><strong>2.1 MIB</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;">      对于MIB而言，除了RRC消息（<em><em>MasterInformationBlock</em></em>）里所带的信息外，它还有额外一些信息要告诉UE。本节所要介绍的，就是小区会通过MIB告诉UE哪些信息，以及UE是如何检测到这些信息的。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      UE通过检测PBCH，能得到以下信息：</p> 
<p style="margin-left:.0001pt;">      （1）通过接收到的<em><em>MasterInformationBlock</em></em>可以知道小区的<strong><span style="color:#ff0000;"><strong>下行系统带宽</strong></span></strong>、<strong><span style="color:#ff0000;"><strong>PHICH配置</strong></span></strong>（详见《<a href="http://blog.sina.com.cn/s/blog_927cff010101bhbi.html" rel="nofollow" title="LTE：PHICH（一）">LTE：PHICH（一）</a>》）、系统帧号（System Frame Number，SFN。更确切地说，获取到的是<strong><span style="color:#ff0000;"><strong>SFN的高8位</strong></span></strong>，最低2位需要在PBCH盲检时得到，这会在后面介绍）。</p> 
<p style="margin-left:.0001pt;">      （2）<strong><span style="color:#ff0000;"><strong>小区特定的天线端口（cell-specific antenna port）的数目</strong></span></strong>：1或2或4。</p> 
<p style="margin-left:.0001pt;">      （3）<strong><span style="color:#ff0000;"><strong>用于L1/L2 control signal（包括PCFICH、PHICH、PDCCH）的传输分集模式（transmit-diversity scheme）</strong></span></strong>：PBCH和L1/L2 control signal都只能使用单天线传输或传输分集，如果使用传输分集， PBCH和L1/L2 control signal会使用相同的多天线传输分集模式。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      从图2.2可以看出，MIB会在物理信道PBCH上传输。PBCH时域上位于每个系统帧的子帧0的第2个slot的前4个OFDM symbol上，并在频域上占据72个中心子载波（不含DC）。对应RE不能用于发送DL-SCH数据。如图2.5所示。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="499" src="https://images2.imgbox.com/06/af/vCOxyiZu_o.png" width="1045"></p> 
<p>                         图2.5：BCH传输信道的资源映射</p> 
<p style="margin-left:.0001pt;">    把BCH传输限制在72个中心的子载波，而不考虑小区的下行系统带宽的原因在于：UE在接收BCH时并不知道小区的下行系统带宽。因此UE在第一次接收BCH时，可以假定小区的下行系统带宽等于可能的最小下行系统带宽（6个RB，对应72个子载波）。在解码了MIB后，UE就能从MIB中得到实际的下行系统带宽。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      MIB在40ms周期内重复4次，每一次发送的PBCH都携带相同的coded bit，也就是说，每一次都是可以独自解码的。因此，在信道质量（SIR）足够好的情况下，UE可能只接收这40ms内的其中一个，就能够成功解码出PBCH的内容；如果不行，就与下一个10ms发送的PBCH的内容进行软合并，再进行解码，直到成功解码出PBCH。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="606" src="https://images2.imgbox.com/0c/51/gYUP7gKo_o.png" width="1065"></p> 
<p>                                 图2.6：MIB在时域上的调度</p> 
<p style="margin-left:.0001pt;">前面已经说过，通过MIB，UE只能获取到SFN的高8位，最低2位（也就是40ms timing）是通过盲检PBCH得到的。40ms内每次发送的PBCH会使用不同scrambling and bit position（即共有4个不同的phase of the PBCH scrambling code），并且每40ms会重置一次。</p> 
<p style="margin-left:.0001pt;">      UE可以通过使用<strong><span style="color:#ff0000;"><strong>4</strong></span></strong>个可能的phase of the PBCH scrambling code中的每一个去尝试解码PBCH，如果解码成功，也就知道了小区是在40ms内的第几个系统帧发送MIB，即知道了SFN的最低2位。（[2]和[6]中介绍了检测SFN最低2位的几种策略，有兴趣的可以了解一下）</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      PBCH的多天线传输只能使用传输分集，而且在2天线端口传输时，只能使用SFBC；4天线端口传输时，只能使用combined SFBC/FSTD。UE使用<strong><span style="color:#ff0000;"><strong>3</strong></span></strong>种不同的CRC mask（见36.212的Table 5.3.1.1-1）来盲检PBCH，可得到天线端口数目，而天线端口数目与传输分集模式一一对应（1天线端口 &lt;-&gt; 单天线端口传输；2天线端口 &lt;-&gt; SFBC；4天线端口 &lt;-&gt; combined SFBC/FSTD），因此当UE成功解码PBCH时，就知道了小区特定的天线端口数以及用于L1/L2 control signal的传输分集模式。（关于SFBC、FSTD的说明，详见[1]的5.4.1.4节和10.3.1.2节）</p> 
<p><strong><strong>Table 5.3.1.1-1: CRC mask for PBCH.</strong></strong></p> 
<table align="center" border="1" cellspacing="0" style="width:379.3pt;"><tbody><tr><td style="vertical-align:top;width:202.85pt;"> <p><strong><strong>Number of transmit antenna ports at eNodeB</strong></strong></p> </td><td style="vertical-align:top;width:176.45pt;"> <p><strong><strong>PBCH CRC mask</strong></strong></p> </td></tr><tr><td style="vertical-align:top;width:202.85pt;"> <p>1</p> </td><td style="vertical-align:top;width:176.45pt;"> <p>&lt;0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0&gt;</p> </td></tr><tr><td style="vertical-align:top;width:202.85pt;"> <p>2</p> </td><td style="vertical-align:top;width:176.45pt;"> <p>&lt;1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1&gt;</p> </td></tr><tr><td style="vertical-align:top;width:202.85pt;"> <p>4</p> </td><td style="vertical-align:top;width:176.45pt;"> <p>&lt;0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1&gt;</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      PBCH有3种天线端口组合（1/2/4）和4种不同扰码（phase）组合，所以做盲检PBCH最多有12种可能组合。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      图2.7给出了MIB在物理层的编码处理和映射流程。</p> 
<p> <img alt="" height="813" src="https://images2.imgbox.com/54/12/0XWkDq6M_o.png" width="1040"></p> 
<p>                                                 图2.7：PBCH结构</p> 
<h4><strong><strong><strong>2.</strong></strong><strong><strong>2</strong></strong><strong> </strong><strong><strong>SIB</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;">      在BCH中传输的MIB只包含非常有限的系统信息。而更多的系统信息是通过在DL-SCH中传输的SIB来告诉UE的。</p> 
<p style="margin-left:.0001pt;">      对于各类SIB而言，RRC消息里所带的信息就是其要告诉UE的所有信息。各类SIB的内容可以参见36.331中对应的RRC消息。</p> 
<p style="margin-left:.0001pt;">      与MIB所在的时频位置固定不同，SIB1和SI消息都在PDSCH上传输，且SIB1和SI消息所占的RB（频域上的位置）及其传输格式等是动态调度的，并由SI-RNTI加扰的PDCCH来指示。也就是说，UE需要先在子帧上盲检使用SI-RNTI加扰的PDCCH，才能知道该子帧是否存在SI消息（SIB1在时域上的位置固定）。小区可以根据具体情况灵活地改变SIB1和SI所占的带宽、使用的RB集合以及传输格式等。</p> 
<p style="margin-left:.0001pt;">      SIB1的周期为80ms，且在该周期内SFN % 2 = 0的系统帧的子帧5上重复发送同一SIB1。SIB1在时域上的位置是固定的，但在频域上的位置可能发生变化，并由对应的PDCCH来指示。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="650" src="https://images2.imgbox.com/90/72/A3t3G2MQ_o.png" width="1057"></p> 
<p style="margin-left:.0001pt;text-align:center;">图2.8：SIB1在时域上的调度</p> 
<p style="margin-left:.0001pt;">每个SI消息包含了一个或多个除SIB1外的拥有相同调度需求的SIB（这些SIB有相同的传输周期）。例如：2个传输周期都是160ms的SIB（如图2.10中的SIB2和SIB3）可以放在同一个SI消息中，但传输周期为320ms的其它SIB（如图2.10中的SIB4和SIB5）必须放在不同的SI消息中。</p> 
<p style="margin-left:.0001pt;">      单个SI消息中包含的信息比特不能超过一个TB块所能传输的最大比特数。</p> 
<p style="margin-left:.0001pt;">      物理层限制了1个SIB（<span style="color:#ff0000;">个人觉得更好的描述是SI和SIB1</span>）的最大size。如果使用DCI format 1C，则最大size为1736 bit（217 byte）；如果使用DCI format 1A，则最大size为2216 bit（277 byte）。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      一个SI消息包含哪些SIB是通过SIB1中的<em><span style="color:#ff0000;"><em>schedulingInfoList</em></span></em>指定的。每个SIB只能包含在一个SI消息中，且SIB2总是放在<em><em>schedulingInfoList</em></em>指定的SI列表的第一个SI消息项中，所以<em><em>schedulingInfoList</em></em>中并不指定SIB2所在的SI。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="717" src="https://images2.imgbox.com/67/df/DIX6Wkc7_o.png" width="795"></p> 
<p>                                 图2.9：SIB1信息（包含了SI的调度信息）</p> 
<p style="margin-left:.0001pt;">每个SI消息只在一个SI窗口（SI-windows）中传输：1）一个SI消息跟一个SI窗口相关联，该SI窗口内只能发这个SI消息且可以重复发送多次（发多少次，在哪些子帧上发送等，取决于eNodeB的实现），但不能发送其它SI消息；2）SI窗口之间是紧挨着的（如果相邻的话），既不重叠，也不会有空隙；3）所有SI消息的SI窗口长度都相同；4）不同SI消息的周期是相互独立的。</p> 
<p style="margin-left:.0001pt;">      前面我们已经介绍过MIB和SIB1的时域调度，接下来我们会详细介绍SI消息的时域调度。</p> 
<p style="margin-left:.0001pt;">      首先需要确认每个SI消息对应的SI窗口的起始位置以及SI窗口的长度。</p> 
<p style="margin-left:.0001pt;">      SI窗口的长度由<em><em>SystemInformationBlockType1</em></em>的<em><span style="color:#ff0000;"><em>si-WindowLength</em></span></em>字段指定，其以ms为单位。</p> 
<p style="margin-left:.0001pt;"><em><em>SystemInformationBlockType1</em></em>的<em><em>schedulingInfoList</em></em>指定了SI消息的列表，每个SI消息在该列表中的顺序以n表示（从1开始）。假如<em><em>schedulingInfoList</em></em>中指定了4个SI消息，则会有4个连续的SI窗口用于发送这4个SI消息，而n表明了SI消息在第几个SI窗口。</p> 
<p style="margin-left:.0001pt;">      此时每个SI消息有一个x = (n - 1) * w，其中w为<em><em>si-WindowLength</em></em>。可以看出，x是以ms为单位的。</p> 
<p style="margin-left:.0001pt;">      则SI窗口的起始帧满足SFN % T = FLOOR(x / 10)，其中T为对应SI消息的周期，由<em><em>si-Periodicity</em></em>指定。SFN % T保证了SI的周期，FLOOR(x / 10)确定SI窗口在周期内的起始系统帧（一个系统帧为10ms，所以有x / 10）。</p> 
<p style="margin-left:.0001pt;">      SI窗口的起始子帧为#a，其中a = x % 10。</p> 
<p style="margin-left:.0001pt;">      从公式可以看出，x决定了SI窗口在该SI周期内的起始帧和起始子帧； SFN % T保证了SI窗口在SI周期内只出现一次；而x = (n - 1) * w保证了SI窗口之间紧挨（如果相邻的话），不重叠，没有空隙。<span style="color:#ff0000;">(SI窗口起始帧和起始子帧的的计算，详见36.331的5.2.3节)</span></p> 
<p style="margin-left:.0001pt;">      SI窗口确定了以后，eNodeB会决定在该窗口内调度多少次同一SI，不同厂商的实现可能不同。但某些子帧不能用于调度SI消息：</p> 
<ul><li>SFN % 2 = 0的系统帧内的子帧5</li><li>任一MBSFN子帧</li><li>TDD中的上行子帧</li></ul> 
<p style="margin-left:.0001pt;">      </p> 
<p style="margin-left:.0001pt;">      下图是一个关于SI调度的例子。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="756" src="https://images2.imgbox.com/ac/ae/rVT7uTX8_o.png" width="827"></p> 
<p>                                 图2.10：SI调度的一个例子</p> 
<p style="margin-left:.0001pt;">可以看出，SI不需要在时间窗内的连续子帧上传输。并且某个子帧上是否存在SI消息，是通过SI-RNTI加扰的PDCCH来指示的。</p> 
<p style="margin-left:.0001pt;">      这里计算的是SI窗口的起始帧和起始子帧，并不是计算SI消息具体所在的系统帧和子帧。SI消息是在SI窗口内发送的，UE需要在SI窗口内盲检使用SI-RNTI加扰的PDCCH，才能知道对应子帧上是否有SI消息。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      在SI较小而系统带宽较大的情况下，一个子帧可能足以发送该SI，但在其它情况下，可能需要使用多个子帧来发送一个SI消息。在后一种情况，会将整个SI消息进行信道编码后分成多份，然后放在多个子帧（不要求是连续子帧）上传输。而不是先分割成多份，然后独立地信道编码后传输。</p> 
<p style="margin-left:.0001pt;">      <strong><strong>注意</strong></strong>：对于SIB1和SI消息，其调制阶数固定为2。（见36.213的7.1.7.1节）</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      <strong><span style="color:#ff0000;"><strong>小结</strong></span></strong>：MIB和SIB1在时域上的位置和周期是固定的，而SI消息在时域上的位置和周期是由SIB1指定的。eNodeB 只会通过<em><em>SystemInformationBlockType1</em></em>告诉UE有哪些SI，每个SI包含了哪些SIB，这些SI会在哪个SI窗口发送以及SI窗口的时域位置和长度，但不会告诉UE在 SI窗口的哪些子帧调度了该SI。当UE需要某个SIB时，它就会在该SIB对应的SI消息对应的SI窗口的每个子帧（从SI窗口的起始子帧开始，共持续<em><em>si-WindowLength</em></em>个子帧，但不包含那些不能调度SI的子帧），使用SI-RNTI去尝试解码，直到成功接收到SI消息为止。</p> 
<p style="margin-left:.0001pt;"></p> 
<h4><strong><strong><strong>2.3</strong></strong><strong><strong>系统信息</strong></strong><strong><strong>有效性和变更通知</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;">      系统信息（除了ETWS和CMAS，对应SIB10、SIB11和SIB12）的变更只发生在某些特定的系统帧，这里用到了变更周期的概念。</p> 
<p style="margin-left:.0001pt;">      变更周期（modification period）的起始系统帧必须满足SFN mod <em><em>m</em></em> = 0，其中<em><em>m</em></em>是组成一个变更周期的系统帧数。一个变更周期包含<em><span style="background-color:#c0c0c0;"><em>m</em></span></em><span style="background-color:#c0c0c0;"> = </span><em><span style="background-color:#c0c0c0;"><em>modificationPeriodCoeff</em></span></em>  <span style="background-color:#c0c0c0;">* </span><em><span style="background-color:#c0c0c0;"><em>defaultPagingCycle</em></span></em>个系统帧。这是通过SIB2来设置的。</p> 
<p style="margin-left:.0001pt;">      系统信息可能会在一个变更周期内传输多次，但在同一变更周期内，系统信息的内容不会发生变化。</p> 
<p style="margin-left:.0001pt;">      当小区修改了某些系统信息时，它会先在一个变更周期内通知UE系统信息将发生变化（但并不发送更新后的内容），然后在紧接着的下一个变更周期，小区才会发送更新后的系统信息。如36.331的Figure 5.2.1.3-1所示（不同的颜色表示不同的系统信息）。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="243" src="https://images2.imgbox.com/8c/cd/HLvI4Ywi_o.png" width="855"></p> 
<p> </p> 
<p style="margin-left:.0001pt;"> UE收到了一个系统信息变更通知（change notification）后，会从下一个变更周期的开始处就去接收新的系统信息。UE在收到新的系统信息之前，会继续使用旧的系统信息。如果一个重要的参数发生改变，可能会对通信造成严重影响，但由于任何服务的中断都很短且不会频繁发生，所以认为结果是可以接受的。</p> 
<p style="margin-left:.0001pt;">      小区有2种方式通知UE系统信息发生了变化：</p> 
<ul><li>Paging消息包含了一个<em><em>systemInfoModification</em></em>字段，用于指示SI是否发生了变化；</li><li>SIB1中包含了一个<em><em>systemInfoValueTag</em></em>字段，每当SI消息发生变化时，<em><em>systemInfoValueTag</em></em>的值会加1。</li></ul> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      小区可以使用Paging消息来通知处于RRC_IDLE态和RRC_CONNECTED态的UE系统信息发生了变化。Paging消息中包含了一个<em><em>systemInfoModification</em></em>字段，如果UE接收到的Paging消息包含该字段，则表示系统信息（除SIB10、SIB11和SIB12外）将在下一个变更周期发生变化。</p> 
<p style="margin-left:.0001pt;">      SIB1（<em><em>SystemInformationBlockType1</em></em>）中包含了一个字段<em><em>systemInfoValueTag</em></em>（取值范围0~31），用于指示SI消息是否发生了变化。UE可以使用这个字段来检验之前保存的SI消息是否依然有效（例如从小区覆盖之外回到小区覆盖的范围内）。如果该字段发生了变化，则UE认为所保存的系统信息是无效的，需要重新读取；否则认为保存的系统信息依然有效。另外，UE会认为从接收到SI消息那一刻算起的3个小时之内，如果<em><em>systemInfoValueTag</em></em>未变化，则所保存的系统信息是有效的。即保存的SI消息的有效期为3个小时。</p> 
<p style="margin-left:.0001pt;">      <em><em>systemInfoValueTag</em></em>是除MIB，SIB1，SIB10，SIB11和SIB12之外的所有SIB所共用的。MIB和SIB1的改变是通过UE获取这些消息来检测的。</p> 
<p style="margin-left:.0001pt;">      某些系统信息，如ETWS信息、CMAS信息以及类似CDMA2000系统时间的参数等发生变化时，小区是不会更新SIB1中的<em><em>systemInfoValueTag</em></em>值的，Paging消息中也不会包含<em><em>systemInfoModification</em></em>字段。</p> 
<p style="margin-left:.0001pt;">      UE可以通过以下2种方式来确定保存的系统信息是否依然有效：</p> 
<ul><li>校验SIB1中的<em><em>systemInfoValueTag</em></em>字段是否发生变化；或</li><li>在每个变更周期，如果UE在变更周期内没有收到Paging，则会尝试寻找<em><em>systemInfoModification</em></em>至少<em><em>modificationPeriodCoeff</em></em>次。如果UE在一个变更周期内没有收到Paging消息，则UE认为在接下来的一个变更周期范围不会发生系统信息的改变。如果处于RRC_CONNECTED态的UE在一个变更周期内收到了一个Paging消息，则UE会通过是否存在<em><em>systemInfoModification</em></em>来推断接下来的一个变更周期内，系统信息（除了ETWS和CMAS信息）是否会发生变化。</li></ul> 
<p style="margin-left:.0001pt;">      小区只会通知UE系统信息发生了变化，并不会告诉UE哪些系统信息发生了变化。所以UE收到了系统信息发生变化的指示后，会根据SIB1中的调度信息去重新接收所有SI消息（除SIB10、SIB11、SIB12外）。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">      对于处于RRC_CONNECTED态且支持ETWS和/或CMAS的UE而言，应该在每<em><em>defaultPagingCycle</em></em>个系统帧的时间内至少读取paging消息一次，以确定是否存在ETWS和/或CMAS通知。</p> 
<p style="margin-left:.0001pt;">      Paging消息的<em><em>etws-Indication</em></em>字段用于通知UE开始接收ETWS primary通知（对应SIB10）和/或ETWS secondary通知（对应SIB11）。</p> 
<p style="margin-left:.0001pt;">      Paging消息的<em><em>cmas</em></em><em><em>-Indication</em></em>字段用于通知UE开始接收CMAS通知（对应SIB12）。</p> 
<p style="margin-left:.0001pt;"></p> 
<h4><strong><strong><strong>2.</strong></strong><strong><strong>4</strong></strong><strong><strong>载波聚合对系统信息的影响</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;">      UE只会在PCell上从广播消息中获取系统信息。对于SCell而言，其系统信息是在添加SCell时，通过<em><em>RRCConnectionReconfiguration</em></em>的<em><em>SCellToAddMod-r10</em></em>下发给UE的。如果某个SCell的系统信息发生改变，eNodeB会让UE先释放该SCell，然后重新添加该SCell以通知UE系统信息的变化。这从36.331中的5.3.10.3b中可以看出，在添加SCell（SCell addition）时，是应用<em><em>radioResourceConfigCommonSCell</em></em>的配置的，但在修改SCell（SCell modification）的信息时，是不应用<em><em>radioResourceConfigCommonSCell</em></em>的配置的，所以需要先删除再添加SCell以通知UE该SCell系统信息的变化。</p> 
<p style="margin-left:.0001pt;">      <strong><strong>注意</strong></strong>：eNodeB在<em><em>RRCConnectionReconfiguration</em></em>配置的系统信息可以与该SCell广播的系统信息不同。</p> 
<p style="margin-left:.0001pt;"></p> 
<p><strong><strong>【参考资料】</strong></strong></p> 
<p style="margin-left:.0001pt;">[1]      《4G LTE/LTE-Advanced for Mobile Broadband》的14.2节</p> 
<p style="margin-left:.0001pt;">[2]      《LTE - The UMTS Long Term Evolution, 2nd Edition》的3.2.2节、9.2.1节</p> 
<p style="margin-left:.0001pt;">[3]      TS 36.211的6.6节      </p> 
<p style="margin-left:.0001pt;">[4]      TS 36.212的5.3.1节      </p> 
<p style="margin-left:.0001pt;">[5]      TS 36.331 – 5.2 System Information</p> 
<p style="margin-left:.0001pt;">[6]      《<a href="http://lteuniversity.com/get_trained/expert_opinion1/b/johnmckeague/archive/2010/12/14/pbch.aspx" rel="nofollow" title="PBCH: How quickly can a UE read the MIB?">PBCH: How quickly can a UE read the MIB?</a>》</p> 
<p style="margin-left:.0001pt;">[7]      《<a href="http://lteuniversity.com/get_trained/expert_opinion1/b/johnmckeague/archive/2010/12/17/pbch-does-the-mib-tell-the-ue-how-many-antennas-are-used-in-the-cell.aspx" rel="nofollow" title="PBCH: Does the MIB tell the UE how many antennas are used in the cell?">PBCH: Does the MIB tell the UE how many antennas are used in the cell?</a>》</p> 
<p style="margin-left:.0001pt;">[8]      《<a href="http://blog.sina.com.cn/s/blog_5895eb440100w2fi.html" rel="nofollow" title="SI的调度">SI的调度</a>》</p> 
<p style="margin-left:.0001pt;">[9]      《<a href="http://bbs.c114.net/thread-478467-1-1.html" rel="nofollow" title="LTE系统中UE接收系统消息解析">LTE系统中UE接收系统消息解析</a>》</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;"></p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ffa0fa15e9dd93afc0e511a2e29a4840/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu apt-get安装工具时报错，无法获得dpkg前端锁问题解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ffc924672417e57b66d1e45c3b9f6bf0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一次短暂的淮安、盐城之旅</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>