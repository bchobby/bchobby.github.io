<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>K近邻算法实例 - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="K近邻算法实例" />
<meta property="og:description" content="一、实验目的 1、理解K近邻算法中距离的度量、K值得选取和分类决策规则的确定；
2、掌握用K近邻模型对所给的实例进行正确分类的方法；
3、掌握K近邻相关数据结构并能熟练运用Python编写程序。
二、实验要求 1、读代码，学python。要求能读懂所给代码，能改写代码实现其它类似算法
2、运行结果要截图并对结果做分析；
3、所有内容汇总到本文档，无需提供.py文件；
三、实验内容 阅读代码并进行注释用KNN算法改进约会网站的配对效果
海伦女士一直使用在线约会网站寻找适合自己的约会对象。尽管约会网站会推荐不同的任选，但她并不是喜欢每一个人。经过一番总结，她发现自己交往过的人可以进行如下分类：不喜欢的人、魅力一般的人 、极具魅力的人
海伦收集约会数据已经有了一段时间，她把这些数据存放在文本文件datingTestSet.txt中，每个样本数据占据一行，总共有1000行。
海伦收集的样本数据主要包含以下3种特征：每年获得的飞行常客里程数、玩视频游戏所消耗时间百分比、每周消费的冰淇淋公升数
将数据集的部分当作训练集，其余作为测试集，通过KNN算法进行分类预测，将预测结果输出并与真实结果对比，计算分类错误率。 四、实验过程（原理，源码） KNN算法理解： KNN 算法采用测量不同特征之间的距离方法进行分类，通俗的讲就是：给定一个样本数据集，并且样本集中每个数据都存在标签，即我们知道样本集中每个数据与所属分类的对应关系。对新输入没有标签的实例，在训练数据集中找到与该实例最邻近的 k 个实例，这 k 个实例的多数属于某个类，就把该输入实例分为这个类。
1.阅读并对代码进行注释 要实现手写数字识别，首先需要将二进制图像转化为向量，通过构造一个函数，将3232的01串连接起来，输出11204的向量。然后通过KNN算法，计算训练集元素之间的距离并进行分类。最后是将手写数字识别的训练集和测试集进行导入，将预测结果输出并与真实结果对比，算出分类的错误率。
通过对代码按照上述思路进行分析并添加注释：
首先是构造一个函数将3232转换为11024的向量
&#34;&#34;&#34; img2vector 函数说明：将32*32的二进制图像矩阵转换成1*1024的向量 Parameters: filename - 二进制图像文件名 Returns: returnVect - 1*1024的向量 &#34;&#34;&#34; def img2vector(filename): returnVect = np.zeros((1, 1024)) #zeros(shape, dtype=float, order=&#39;C&#39;) 返回一个给定形状和类型的用0填充的数组； fr = open(filename) #读取二进制图像文件 for i in range(32): #32行 lineStr = fr.readline() for j in range(32): #32列 returnVect[0, 32*i&#43;j] = int(lineStr[j]) return returnVect #返回1*1024的向量 下面是KNN算法函数，通过输入训练集数据、分类标准、和K值，返回分类结果" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/f1b3ad4cec234d4a6e740be0f9373f23/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-04T08:15:00+08:00" />
<meta property="article:modified_time" content="2022-11-04T08:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">K近邻算法实例</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一、实验目的</h2> 
<p>1、理解K近邻算法中距离的度量、K值得选取和分类决策规则的确定；<br> 2、掌握用K近邻模型对所给的实例进行正确分类的方法；<br> 3、掌握K近邻相关数据结构并能熟练运用Python编写程序。</p> 
<h2><a id="_6"></a>二、实验要求</h2> 
<p>1、读代码，学python。要求能读懂所给代码，能改写代码实现其它类似算法<br> 2、运行结果要截图并对结果做分析；<br> 3、所有内容汇总到本文档，无需提供.py文件；</p> 
<h2><a id="_12"></a>三、实验内容</h2> 
<ol><li>阅读代码并进行注释</li><li>用KNN算法改进约会网站的配对效果<br> 海伦女士一直使用在线约会网站寻找适合自己的约会对象。尽管约会网站会推荐不同的任选，但她并不是喜欢每一个人。经过一番总结，她发现自己交往过的人可以进行如下分类：不喜欢的人、魅力一般的人 、极具魅力的人<br> 海伦收集约会数据已经有了一段时间，她把这些数据存放在文本文件datingTestSet.txt中，每个样本数据占据一行，总共有1000行。<br> 海伦收集的样本数据主要包含以下3种特征：每年获得的飞行常客里程数、玩视频游戏所消耗时间百分比、每周消费的冰淇淋公升数<br> 将数据集的部分当作训练集，其余作为测试集，通过KNN算法进行分类预测，将预测结果输出并与真实结果对比，计算分类错误率。</li></ol> 
<h2><a id="_21"></a>四、实验过程（原理，源码）</h2> 
<h3><a id="KNN_23"></a>KNN算法理解：</h3> 
<p>KNN 算法采用测量不同特征之间的距离方法进行分类，通俗的讲就是：给定一个样本数据集，并且样本集中每个数据都存在标签，即我们知道样本集中每个数据与所属分类的对应关系。对新输入没有标签的实例，在训练数据集中找到与该实例最邻近的 k 个实例，这 k 个实例的多数属于某个类，就把该输入实例分为这个类。</p> 
<h3><a id="1_27"></a>1.阅读并对代码进行注释</h3> 
<p>要实现手写数字识别，首先需要将二进制图像转化为向量，通过构造一个函数，将32<em>32的01串连接起来，输出1</em>1204的向量。然后通过KNN算法，计算训练集元素之间的距离并进行分类。最后是将手写数字识别的训练集和测试集进行导入，将预测结果输出并与真实结果对比，算出分类的错误率。<br> 通过对代码按照上述思路进行分析并添加注释：<br> 首先是构造一个函数将32<em>32转换为1</em>1024的向量</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
img2vector 函数说明：将32*32的二进制图像矩阵转换成1*1024的向量
Parameters:
    filename - 二进制图像文件名
Returns:
    returnVect - 1*1024的向量
"""</span>
<span class="token keyword">def</span> <span class="token function">img2vector</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    returnVect <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#zeros(shape, dtype=float, order='C') 返回一个给定形状和类型的用0填充的数组；</span>
    fr <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token comment">#读取二进制图像文件</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#32行</span>
        lineStr <span class="token operator">=</span> fr<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#32列</span>
            returnVect<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token operator">*</span>i<span class="token operator">+</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>lineStr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> returnVect <span class="token comment">#返回1*1024的向量</span>
</code></pre> 
<p>下面是KNN算法函数，通过输入训练集数据、分类标准、和K值，返回分类结果</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
classify0函数说明：knn算法，分类器
Parameters:
    inX - 用于分类的数据（测试集）
    dataSet - 用于训练的数据（训练集）（n*1维列向量）
    labels - 分类标准（n*1维列向量）
    k - kNN算法参数，选择距离最小的k个点
Returns:
    sortedClassCount[0][0] - 分类结果
"""</span>
<span class="token keyword">def</span> <span class="token function">classify0</span><span class="token punctuation">(</span>inX<span class="token punctuation">,</span> dataSet<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
    dataSetSize <span class="token operator">=</span> dataSet<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment"># numpy函数shape[0]返回dataSet的行数</span>
    <span class="token comment"># 测量欧氏距离</span>
    diffMat <span class="token operator">=</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>inX<span class="token punctuation">,</span> <span class="token punctuation">(</span>dataSetSize<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> dataSet <span class="token comment">#将inX重复dataSetSize次并排成一列</span>
    sqDiffMat <span class="token operator">=</span> diffMat<span class="token operator">**</span><span class="token number">2</span> <span class="token comment">#二维特征相减后平方（用diffMat的转置乘diffMat）</span>
    sqDistances <span class="token operator">=</span> sqDiffMat<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">#sum()所有元素相加，sum(0)列相加，sum(1)行相加</span>
    distances <span class="token operator">=</span> sqDistances<span class="token operator">**</span><span class="token number">0.5</span> <span class="token comment">#开方，计算出距离</span>
    sortedDistIndicies <span class="token operator">=</span> distances<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 将距离从小到大进行排序；argsort函数返回的是distances值从小到大的索引值</span>
    classCount <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token comment">#定义一个记录类别次数的字典</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 选取前K个最短距离， 选取这K个中最多的分类类别</span>
        voteIlabel <span class="token operator">=</span> labels<span class="token punctuation">[</span>sortedDistIndicies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">#取出前k个元素的类别</span>
        classCount<span class="token punctuation">[</span>voteIlabel<span class="token punctuation">]</span> <span class="token operator">=</span> classCount<span class="token punctuation">.</span>get<span class="token punctuation">(</span>voteIlabel<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">#字典的get()方法，返回指定键的值，如果值不在字典中返回0；计算类别次数</span>
    sortedClassCount <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>classCount<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                              key<span class="token operator">=</span>operator<span class="token punctuation">.</span>itemgetter<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment">#reverse降序排序字典</span>
    <span class="token keyword">return</span> sortedClassCount<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">#返回次数最多的类别，即所要分类的类别</span>
</code></pre> 
<p>最后是将手写数字识别的训练集导入，并对测试集进行分类，</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
handwritingClassTest函数说明：进行手写数字识别
"""</span>
<span class="token keyword">def</span> <span class="token function">handwritingClassTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    hwLabels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    trainingFileList <span class="token operator">=</span> listdir<span class="token punctuation">(</span><span class="token string">'trainingDigits'</span><span class="token punctuation">)</span>     <span class="token comment">#导入训练集，trainingFileList是训练集各个文件；listdir(path)返回指定路径path下的文件和文件夹列表</span>
    m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>trainingFileList<span class="token punctuation">)</span>  <span class="token comment">#训练集的文件个数</span>
    trainingMat <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#各个文件变成一行之后的整合矩阵</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
        fileNameStr <span class="token operator">=</span> trainingFileList<span class="token punctuation">[</span>i<span class="token punctuation">]</span>   <span class="token comment">#fileNameStr单个文件名，训练集的每个文件</span>
        fileStr <span class="token operator">=</span> fileNameStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token comment">#去除.txt后缀，fileStr取分开后的第一个元素</span>
        classNumStr <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>fileStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">#classNumStr记录这个数字是什么</span>
        hwLabels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>classNumStr<span class="token punctuation">)</span>
        trainingMat<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> img2vector<span class="token punctuation">(</span><span class="token string">'trainingDigits/%s'</span> <span class="token operator">%</span> fileNameStr<span class="token punctuation">)</span>  <span class="token comment">#将训练集的32*32的二进制图像矩阵转换成1*1024的向量</span>
    <span class="token comment"># 导入测试集</span>
    testFileList <span class="token operator">=</span> listdir<span class="token punctuation">(</span><span class="token string">'testDigits'</span><span class="token punctuation">)</span>        <span class="token comment">#iterate through the test set</span>
    errorCount <span class="token operator">=</span> <span class="token number">0.0</span> <span class="token comment">#定义错误数量</span>
    mTest <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>testFileList<span class="token punctuation">)</span> <span class="token comment">#测试集的数量</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>mTest<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#对每个测试集的个体进行识别</span>
        fileNameStr <span class="token operator">=</span> testFileList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">#测试集的每个文件</span>
        fileStr <span class="token operator">=</span> fileNameStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token comment">#去除.txt后缀</span>
        classNumStr <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>fileStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#训练集中正确的结果</span>
        vectorUnderTest <span class="token operator">=</span> img2vector<span class="token punctuation">(</span><span class="token string">'testDigits/%s'</span> <span class="token operator">%</span> fileNameStr<span class="token punctuation">)</span> <span class="token comment">#将测试集的32*32的二进制图像矩阵转换成1*1024的向量</span>
        classifierResult <span class="token operator">=</span> classify0<span class="token punctuation">(</span>vectorUnderTest<span class="token punctuation">,</span> trainingMat<span class="token punctuation">,</span> hwLabels<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># 通过knn算法识别对testdigis数据进行猜测的结果</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"分类的结果: %d, 真实结果: %d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>classifierResult<span class="token punctuation">,</span> classNumStr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出训练集的模拟结果和真实结果</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>classifierResult <span class="token operator">!=</span> classNumStr<span class="token punctuation">)</span><span class="token punctuation">:</span> errorCount <span class="token operator">+=</span> <span class="token number">1.0</span>    <span class="token comment">#当测试结果和训练结果不同时，错误数量+1</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n分类错误数量: %d"</span> <span class="token operator">%</span> errorCount<span class="token punctuation">)</span> <span class="token comment">#输出模拟识别错误的数量</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n分类错误率: %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>errorCount<span class="token operator">/</span><span class="token builtin">float</span><span class="token punctuation">(</span>mTest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出错误率</span>
</code></pre> 
<p>上面最后几行代码是将模拟分类的结果和真实结果进行对比，并计算识别错误的数量和错误率。</p> 
<p>下面是运行的结果(不太习惯英文输出，改成了中文)：<br> <img src="https://images2.imgbox.com/6c/7e/onfNNNZp_o.png" alt="在这里插入图片描述"></p> 
<p>测试集中有946个数据，分类错误的有10个，则错误率为0.10571</p> 
<h3><a id="2KNN_122"></a>2.用KNN算法改进约会网站的配对效果</h3> 
<blockquote> 
 <p>题目背景：<br> 海伦女士一直使用在线约会网站寻找适合自己的约会对象。尽管约会网站会推荐不同的任选，但她并不是喜欢每一个人。经过一番总结，她发现自己交往过的人可以进行如下分类：<br> 不喜欢的人 didntLike、魅力一般的人 smallDoses 、极具魅力的人 largeDoses<br> 海伦收集约会数据已经有了一段时间，她把这些数据存放在文本文件datingTestSet.txt中，每个样本数据占据一行，总共有1000行。<br> 海伦收集的样本数据主要包含以下3种特征：<br> 每年获得的飞行常客里程数、玩视频游戏所消耗时间百分比、每周消费的冰淇淋公升数<br> 将数据集的部分当作训练集，其余作为测试集，通过KNN算法进行分类预测，将预测结果输出并与真实结果对比，计算分类错误率。</p> 
</blockquote> 
<p>首先第一个函数是KNN算法，与上面代码的KNN算法函数代码相同这里就略去了</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
函数说明：kNN算法，分类器
Parameters:
    inX - 用于分类的数据（测试集）
    dataSet - 用于训练的数据（训练集）（n*1维列向量）
    labels - 分类标准（n*1维列向量）
    k - kNN算法参数，选择距离最小的k个点
Returns:
    sortedClassCount[0][0] - 分类结果
"""</span>
</code></pre> 
<p>然后需要有一个函数将数据集文件进行解读并进行分类</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
函数说明：打开解析文件，对数据进行分类，1代表不喜欢，2代表魅力一般，3代表极具魅力
Parameters:
    filename - 文件名
Returns:
    returnMat - 特征矩阵
    classLabelVector - 分类label向量
"""</span>
<span class="token keyword">def</span> <span class="token function">file2matrix</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    fr <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>  <span class="token comment">#打开文件</span>
    arrayOlines <span class="token operator">=</span> fr<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#读取文件所有内容</span>
    numberOfLines <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arrayOlines<span class="token punctuation">)</span>  <span class="token comment">#文件行数</span>
    returnMat <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>numberOfLines<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#返回的NumPy矩阵numberOfLines行，3列</span>
    classLabelVector <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#创建分类标签向量</span>
    index <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment">#行的索引值</span>
    <span class="token comment"># 读取每一行</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> arrayOlines<span class="token punctuation">:</span>
        <span class="token comment"># 去掉每一行首尾的空白符，例如'\n','\r','\t',' '</span>
        line <span class="token operator">=</span> line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
        listFromLine <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span>  <span class="token comment">#将每一行内容根据'\t'符进行切片,本例中一共有4列</span>
        returnMat<span class="token punctuation">[</span>index<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> listFromLine<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>  <span class="token comment">#将数据的前3列进行提取保存在returnMat矩阵中，也就是特征矩阵</span>
        <span class="token comment"># 根据文本内容进行分类1：不喜欢；2：一般；3：喜欢</span>
        <span class="token keyword">if</span> listFromLine<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'didntLike'</span><span class="token punctuation">:</span>
            classLabelVector<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> listFromLine<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'smallDoses'</span><span class="token punctuation">:</span>
            classLabelVector<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> listFromLine<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'largeDoses'</span><span class="token punctuation">:</span>
            classLabelVector<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
        index <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> returnMat<span class="token punctuation">,</span> classLabelVector <span class="token comment">#返回标签列向量以及特征矩阵</span>
</code></pre> 
<p>由于三个特征值的数量级不同，飞行公里数几万公里，冰激凌数量只有零点几公升。为了让这些数据具备可比性，需要采用标准化方法来消除这些差异。这里采用的是min-max标准化归一方法。对原始数据的线性变换，使结果落到[0,1]区间，转换函数如下:其中max为样本数据的最大值，min为样本数据的最小值，令x = (x−min)/(max−min)</p> 
<p>下面为归一化函数</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
函数说明：对数据进行归一化 min-max标准化
Parameters:
    dataSet - 特征矩阵
Returns:
    normDataSet - 归一化后的特征矩阵
    ranges - 数据范围
    minVals - 数据最小值
"""</span>
<span class="token keyword">def</span> <span class="token function">autoNorm</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    minVals <span class="token operator">=</span> dataSet<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">#获取数据的最小值</span>
    maxVals <span class="token operator">=</span> dataSet<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">#获取数据的最大值</span>
    ranges <span class="token operator">=</span> maxVals <span class="token operator">-</span> minVals  <span class="token comment">#最大值和最小值的范围</span>
    normDataSet <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#shape(dataSet)返回dataSet的矩阵行列数</span>
    m <span class="token operator">=</span> dataSet<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">#numpy函数shape[0]返回dataSet的行数</span>
    normDataSet <span class="token operator">=</span> dataSet <span class="token operator">-</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>minVals<span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#原始值减去最小值（x-xmin）</span>
    normDataSet <span class="token operator">=</span> normDataSet <span class="token operator">/</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>ranges<span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#差值处以最大值和最小值的差值（x-xmin）/（xmax-xmin）</span>
    <span class="token keyword">return</span> normDataSet<span class="token punctuation">,</span> ranges<span class="token punctuation">,</span> minVals  <span class="token comment">#归一化数据结果，数据范围，最小值</span>

</code></pre> 
<p>最后是导入数据集进行分类测试，这里是采取的使用数据集中的后90%为训练集进行分类训练，剩余数据为测试集进行测试。将模拟分类的结果和真实结果进行对比，并计算识别错误的数量和错误率。</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
函数说明：分类器测试函数
Returns:
    normDataSet - 归一化后的特征矩阵
    ranges - 数据范围
    minVals - 数据最小值
"""</span>
<span class="token keyword">def</span> <span class="token function">datingClassTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    filename <span class="token operator">=</span> <span class="token string">"datingTestSet.txt"</span>  <span class="token comment">#打开数据集文件</span>
    datingDataMat<span class="token punctuation">,</span> datingLabels <span class="token operator">=</span> file2matrix<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>  <span class="token comment">#将返回的特征矩阵和分类向量分别存储到datingDataMat和datingLabels中</span>
    hoRatio <span class="token operator">=</span> <span class="token number">0.10</span>  <span class="token comment">#取所有数据的10% hoRatio越小，错误率越低</span>
    normMat<span class="token punctuation">,</span> ranges<span class="token punctuation">,</span> minVals <span class="token operator">=</span> autoNorm<span class="token punctuation">(</span>datingDataMat<span class="token punctuation">)</span>  <span class="token comment">#数据归一化，返回归一化数据结果，数据范围，最小值</span>
    m <span class="token operator">=</span> normMat<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">#获取normMat的行数</span>
    numTestVecs <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>m <span class="token operator">*</span> hoRatio<span class="token punctuation">)</span>  <span class="token comment">#数据集中10%的个数</span>
    errorCount <span class="token operator">=</span> <span class="token number">0.0</span>  <span class="token comment">#分类错误的计数</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>numTestVecs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 前numTestVecs个数据作为测试集，后m-numTestVecs个数据作为训练集</span>
        <span class="token comment"># k选择label数+1（结果比较好）</span>
        classifierResult <span class="token operator">=</span> classify0<span class="token punctuation">(</span>normMat<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> normMat<span class="token punctuation">[</span>numTestVecs<span class="token punctuation">:</span>m<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                     datingLabels<span class="token punctuation">[</span>numTestVecs<span class="token punctuation">:</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"分类结果:%d\t真实类别:%d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>classifierResult<span class="token punctuation">,</span> datingLabels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#输出分类的结果和真实结果</span>
        <span class="token keyword">if</span> classifierResult <span class="token operator">!=</span> datingLabels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment">#分类结果与真实结果不同时，错误计数+1</span>
            errorCount <span class="token operator">+=</span> <span class="token number">1.0</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n分类错误数量: %d"</span> <span class="token operator">%</span> errorCount<span class="token punctuation">)</span>  <span class="token comment"># 输出模拟识别错误的数量</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"错误率:%f%%"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>errorCount <span class="token operator">/</span> <span class="token builtin">float</span><span class="token punctuation">(</span>numTestVecs<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#输出错误率</span>

</code></pre> 
<p>下图为运行结果<br> <img src="https://images2.imgbox.com/a2/f5/24OEpc2C_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_243"></a>参考</h2> 
<p>机器学习算法-KNN代码实现https://blog.csdn.net/weixin_47156261/article/details/122244380<br> 数据归一化方法https://blog.csdn.net/xinghuanmeiying/article/details/91873329<br> 机器学习 | KNN算法详解及代码https://zhuanlan.zhihu.com/p/484029409<br> 机器学习实战 – Task01. K邻近http://www.360doc.com/content/20/0817/17/71178898_930801597.shtml<br> 机器学习实战 手写识别系统https://blog.csdn.net/qq_36895331/article/details/109000266<br> https://blog.csdn.net/xiaoyun5555/article/details/107360933/</p> 
<h2><a id="_255"></a>附录</h2> 
<p>手写数字识别代码及注释：</p> 
<pre><code class="prism language-python"><span class="token number">1.</span>	<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token number">2.</span>	<span class="token keyword">import</span> operator
<span class="token number">3.</span>	<span class="token keyword">from</span> os <span class="token keyword">import</span> listdir
<span class="token number">4.</span>	<span class="token triple-quoted-string string">"""
5.	classify0函数说明：knn算法，分类器
6.	Parameters:
7.	    inX - 用于分类的数据（测试集）
8.	    dataSet - 用于训练的数据（训练集）（n1维列向量）
9.	    labels - 分类标准（n1维列向量）
10.	    k - kNN算法参数，选择距离最小的k个点
11.	Returns:
12.	    sortedClassCount[0][0] - 分类结果
13.	"""</span>
<span class="token number">14.</span>	<span class="token keyword">def</span> <span class="token function">classify0</span><span class="token punctuation">(</span>inX<span class="token punctuation">,</span> dataSet<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">15.</span>	    dataSetSize <span class="token operator">=</span> dataSet<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment"># numpy函数shape[0]返回dataSet的行数</span>
<span class="token number">16.</span>	    <span class="token comment"># 测量欧氏距离</span>
<span class="token number">17.</span>	    diffMat <span class="token operator">=</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>inX<span class="token punctuation">,</span> <span class="token punctuation">(</span>dataSetSize<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> dataSet <span class="token comment">#将inX重复dataSetSize次并排成一列</span>
<span class="token number">18.</span>	    sqDiffMat <span class="token operator">=</span> diffMat2 <span class="token comment">#二维特征相减后平方（用diffMat的转置乘diffMat）</span>
<span class="token number">19.</span>	    sqDistances <span class="token operator">=</span> sqDiffMat<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">#sum()所有元素相加，sum(0)列相加，sum(1)行相加</span>
<span class="token number">20.</span>	    distances <span class="token operator">=</span> sqDistances0<span class="token punctuation">.</span><span class="token number">5</span> <span class="token comment">#开方，计算出距离</span>
<span class="token number">21.</span>	    sortedDistIndicies <span class="token operator">=</span> distances<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 将距离从小到大进行排序；argsort函数返回的是distances值从小到大的索引值</span>
<span class="token number">22.</span>	    classCount <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token comment">#定义一个记录类别次数的字典</span>
<span class="token number">23.</span>	    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 选取前K个最短距离， 选取这K个中最多的分类类别</span>
<span class="token number">24.</span>	        voteIlabel <span class="token operator">=</span> labels<span class="token punctuation">[</span>sortedDistIndicies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">#取出前k个元素的类别</span>
<span class="token number">25.</span>	        classCount<span class="token punctuation">[</span>voteIlabel<span class="token punctuation">]</span> <span class="token operator">=</span> classCount<span class="token punctuation">.</span>get<span class="token punctuation">(</span>voteIlabel<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">#字典的get()方法，返回指定键的值，如果值不在字典中返回0；计算类别次数</span>
<span class="token number">26.</span>	    sortedClassCount <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>classCount<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">27.</span>	                              key<span class="token operator">=</span>operator<span class="token punctuation">.</span>itemgetter<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment">#reverse降序排序字典</span>
<span class="token number">28.</span>	    <span class="token keyword">return</span> sortedClassCount<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">#返回次数最多的类别，即所要分类的类别</span>
<span class="token number">29.</span>	<span class="token triple-quoted-string string">"""
30.	img2vector 函数说明：将3232的二进制图像矩阵转换成11024的向量
31.	Parameters:
32.	    filename - 二进制图像文件名
33.	Returns:
34.	    returnVect - 11024的向量
35.	"""</span>
<span class="token number">36.</span>	<span class="token keyword">def</span> <span class="token function">img2vector</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">37.</span>	    returnVect <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#zeros(shape, dtype=float, order='C') 返回一个给定形状和类型的用0填充的数组；</span>
<span class="token number">38.</span>	    fr <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token comment">#读取二进制图像文件</span>
<span class="token number">39.</span>	    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#32行</span>
<span class="token number">40.</span>	        lineStr <span class="token operator">=</span> fr<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">41.</span>	        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#32列</span>
<span class="token number">42.</span>	            returnVect<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> 32i<span class="token operator">+</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>lineStr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">43.</span>	    <span class="token keyword">return</span> returnVect <span class="token comment">#返回11024的向量</span>
<span class="token number">44.</span>	 
<span class="token number">45.</span>	<span class="token triple-quoted-string string">"""
46.	handwritingClassTest函数说明：进行手写数字识别
47.	"""</span>
<span class="token number">48.</span>	<span class="token keyword">def</span> <span class="token function">handwritingClassTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">49.</span>	    hwLabels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token number">50.</span>	    trainingFileList <span class="token operator">=</span> listdir<span class="token punctuation">(</span><span class="token string">'trainingDigits'</span><span class="token punctuation">)</span>     <span class="token comment">#导入训练集，trainingFileList是训练集各个文件；listdir(path)返回指定路径path下的文件和文件夹列表</span>
<span class="token number">51.</span>	    m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>trainingFileList<span class="token punctuation">)</span>  <span class="token comment">#训练集的文件个数</span>
<span class="token number">52.</span>	    trainingMat <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#各个文件变成一行之后的整合矩阵</span>
<span class="token number">53.</span>	    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">54.</span>	        fileNameStr <span class="token operator">=</span> trainingFileList<span class="token punctuation">[</span>i<span class="token punctuation">]</span>   <span class="token comment">#fileNameStr单个文件名，训练集的每个文件</span>
<span class="token number">55.</span>	        fileStr <span class="token operator">=</span> fileNameStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token comment">#去除.txt后缀，fileStr取分开后的第一个元素</span>
<span class="token number">56.</span>	        classNumStr <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>fileStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">#classNumStr记录这个数字是什么</span>
<span class="token number">57.</span>	        hwLabels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>classNumStr<span class="token punctuation">)</span>
<span class="token number">58.</span>	        trainingMat<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> img2vector<span class="token punctuation">(</span><span class="token string">'trainingDigits/%s'</span> <span class="token operator">%</span> fileNameStr<span class="token punctuation">)</span>  <span class="token comment">#将训练集的3232的二进制图像矩阵转换成11024的向量</span>
<span class="token number">59.</span>	    <span class="token comment"># 导入测试集</span>
<span class="token number">60.</span>	    testFileList <span class="token operator">=</span> listdir<span class="token punctuation">(</span><span class="token string">'testDigits'</span><span class="token punctuation">)</span>        <span class="token comment">#iterate through the test set</span>
<span class="token number">61.</span>	    errorCount <span class="token operator">=</span> <span class="token number">0.0</span> <span class="token comment">#定义错误数量</span>
<span class="token number">62.</span>	    mTest <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>testFileList<span class="token punctuation">)</span> <span class="token comment">#测试集的数量</span>
<span class="token number">63.</span>	    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>mTest<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#对每个测试集的个体进行识别</span>
<span class="token number">64.</span>	        fileNameStr <span class="token operator">=</span> testFileList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">#测试集的每个文件</span>
<span class="token number">65.</span>	        fileStr <span class="token operator">=</span> fileNameStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token comment">#去除.txt后缀</span>
<span class="token number">66.</span>	        classNumStr <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>fileStr<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#训练集中正确的结果</span>
<span class="token number">67.</span>	        vectorUnderTest <span class="token operator">=</span> img2vector<span class="token punctuation">(</span><span class="token string">'testDigits/%s'</span> <span class="token operator">%</span> fileNameStr<span class="token punctuation">)</span> <span class="token comment">#将测试集的3232的二进制图像矩阵转换成11024的向量</span>
<span class="token number">68.</span>	        classifierResult <span class="token operator">=</span> classify0<span class="token punctuation">(</span>vectorUnderTest<span class="token punctuation">,</span> trainingMat<span class="token punctuation">,</span> hwLabels<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># 通过knn算法识别对testdigis数据进行猜测的结果</span>
<span class="token number">69.</span>	        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"分类的结果: %d, 真实结果: %d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>classifierResult<span class="token punctuation">,</span> classNumStr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出训练集的模拟结果和真实结果</span>
<span class="token number">70.</span>	        <span class="token keyword">if</span> <span class="token punctuation">(</span>classifierResult <span class="token operator">!=</span> classNumStr<span class="token punctuation">)</span><span class="token punctuation">:</span> errorCount <span class="token operator">+=</span> <span class="token number">1.0</span>    <span class="token comment">#当测试结果和训练结果不同时，错误数量+1</span>
<span class="token number">71.</span>	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"n分类错误数量: %d"</span> <span class="token operator">%</span> errorCount<span class="token punctuation">)</span> <span class="token comment">#输出模拟识别错误的数量</span>
<span class="token number">72.</span>	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"n分类错误率: %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>errorCount<span class="token operator">/</span><span class="token builtin">float</span><span class="token punctuation">(</span>mTest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出错误率</span>
<span class="token number">73.</span>	    
<span class="token number">74.</span>	<span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">'main'</span><span class="token punctuation">:</span>
<span class="token number">75.</span>	    handwritingClassTest<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>约会网站配对效果代码及注释：</p> 
<pre><code class="prism language-python"><span class="token number">1.</span>	<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>lines <span class="token keyword">as</span> mlines
<span class="token number">2.</span>	<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token number">3.</span>	<span class="token keyword">import</span> time
<span class="token number">4.</span>	<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token number">5.</span>	<span class="token keyword">import</span> operator
<span class="token number">6.</span>	 
<span class="token number">7.</span>	<span class="token triple-quoted-string string">"""
8.	函数说明：kNN算法，分类器
9.	Parameters:
10.	    inX - 用于分类的数据（测试集）
11.	    dataSet - 用于训练的数据（训练集）（n1维列向量）
12.	    labels - 分类标准（n1维列向量）
13.	    k - kNN算法参数，选择距离最小的k个点
14.	Returns:
15.	    sortedClassCount[0][0] - 分类结果
16.	"""</span>
<span class="token number">17.</span>	<span class="token keyword">def</span> <span class="token function">classify0</span><span class="token punctuation">(</span>inX<span class="token punctuation">,</span> dataSet<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">18.</span>	    dataSetSize <span class="token operator">=</span> dataSet<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># numpy函数shape[0]返回dataSet的行数</span>
<span class="token number">19.</span>	    <span class="token comment"># 测量欧氏距离</span>
<span class="token number">20.</span>	    diffMat <span class="token operator">=</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>inX<span class="token punctuation">,</span> <span class="token punctuation">(</span>dataSetSize<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> dataSet  <span class="token comment"># 将inX重复dataSetSize次并排成一列</span>
<span class="token number">21.</span>	    sqDiffMat <span class="token operator">=</span> diffMat  <span class="token number">2</span>  <span class="token comment"># 二维特征相减后平方（用diffMat的转置乘diffMat）</span>
<span class="token number">22.</span>	    sqDistances <span class="token operator">=</span> sqDiffMat<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># sum()所有元素相加，sum(0)列相加，sum(1)行相加</span>
<span class="token number">23.</span>	    distances <span class="token operator">=</span> sqDistances  <span class="token number">0.5</span>  <span class="token comment"># 开方，计算出距离</span>
<span class="token number">24.</span>	    sortedDistIndicies <span class="token operator">=</span> distances<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 将距离从小到大进行排序；argsort函数返回的是distances值从小到大的索引值</span>
<span class="token number">25.</span>	    classCount <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>  <span class="token comment"># 定义一个记录类别次数的字典</span>
<span class="token number">26.</span>	    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 选取前K个最短距离， 选取这K个中最多的分类类别</span>
<span class="token number">27.</span>	        voteIlabel <span class="token operator">=</span> labels<span class="token punctuation">[</span>sortedDistIndicies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment"># 取出前k个元素的类别</span>
<span class="token number">28.</span>	        classCount<span class="token punctuation">[</span>voteIlabel<span class="token punctuation">]</span> <span class="token operator">=</span> classCount<span class="token punctuation">.</span>get<span class="token punctuation">(</span>voteIlabel<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>  <span class="token comment"># 字典的get()方法，返回指定键的值，如果值不在字典中返回0；计算类别次数</span>
<span class="token number">29.</span>	    sortedClassCount <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>classCount<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">30.</span>	                              key<span class="token operator">=</span>operator<span class="token punctuation">.</span>itemgetter<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># reverse降序排序字典</span>
<span class="token number">31.</span>	    <span class="token keyword">return</span> sortedClassCount<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 返回次数最多的类别，即所要分类的类别</span>
<span class="token number">32.</span>	 
<span class="token number">33.</span>	 
<span class="token number">34.</span>	<span class="token triple-quoted-string string">"""
35.	函数说明：打开解析文件，对数据进行分类，1代表不喜欢，2代表魅力一般，3代表极具魅力
36.	Parameters:
37.	    filename - 文件名
38.	Returns:
39.	    returnMat - 特征矩阵
40.	    classLabelVector - 分类label向量
41.	"""</span>
<span class="token number">42.</span>	<span class="token keyword">def</span> <span class="token function">file2matrix</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">43.</span>	    fr <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>  <span class="token comment">#打开文件</span>
<span class="token number">44.</span>	    arrayOlines <span class="token operator">=</span> fr<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#读取文件所有内容</span>
<span class="token number">45.</span>	    numberOfLines <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arrayOlines<span class="token punctuation">)</span>  <span class="token comment">#文件行数</span>
<span class="token number">46.</span>	    returnMat <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>numberOfLines<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#返回的NumPy矩阵numberOfLines行，3列</span>
<span class="token number">47.</span>	    classLabelVector <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#创建分类标签向量</span>
<span class="token number">48.</span>	    index <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment">#行的索引值</span>
<span class="token number">49.</span>	    <span class="token comment"># 读取每一行</span>
<span class="token number">50.</span>	    <span class="token keyword">for</span> line <span class="token keyword">in</span> arrayOlines<span class="token punctuation">:</span>
<span class="token number">51.</span>	        <span class="token comment"># 去掉每一行首尾的空白符，例如'n','r','t',' '</span>
<span class="token number">52.</span>	        line <span class="token operator">=</span> line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">53.</span>	        listFromLine <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'t'</span><span class="token punctuation">)</span>  <span class="token comment">#将每一行内容根据't'符进行切片,本例中一共有4列</span>
<span class="token number">54.</span>	        returnMat<span class="token punctuation">[</span>index<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> listFromLine<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>  <span class="token comment">#将数据的前3列进行提取保存在returnMat矩阵中，也就是特征矩阵</span>
<span class="token number">55.</span>	        <span class="token comment"># 根据文本内容进行分类1：不喜欢；2：一般；3：喜欢</span>
<span class="token number">56.</span>	        <span class="token keyword">if</span> listFromLine<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'didntLike'</span><span class="token punctuation">:</span>
<span class="token number">57.</span>	            classLabelVector<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">58.</span>	        <span class="token keyword">elif</span> listFromLine<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'smallDoses'</span><span class="token punctuation">:</span>
<span class="token number">59.</span>	            classLabelVector<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">60.</span>	        <span class="token keyword">elif</span> listFromLine<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'largeDoses'</span><span class="token punctuation">:</span>
<span class="token number">61.</span>	            classLabelVector<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token number">62.</span>	        index <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token number">63.</span>	    <span class="token keyword">return</span> returnMat<span class="token punctuation">,</span> classLabelVector <span class="token comment">#返回标签列向量以及特征矩阵</span>
<span class="token number">64.</span>	 
<span class="token number">65.</span>	<span class="token triple-quoted-string string">"""
66.	函数说明：对数据进行归一化 min-max标准化
67.	Parameters:
68.	    dataSet - 特征矩阵
69.	Returns:
70.	    normDataSet - 归一化后的特征矩阵
71.	    ranges - 数据范围
72.	    minVals - 数据最小值
73.	"""</span>
<span class="token number">74.</span>	<span class="token keyword">def</span> <span class="token function">autoNorm</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">75.</span>	    minVals <span class="token operator">=</span> dataSet<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">#获取数据的最小值</span>
<span class="token number">76.</span>	    maxVals <span class="token operator">=</span> dataSet<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">#获取数据的最大值</span>
<span class="token number">77.</span>	    ranges <span class="token operator">=</span> maxVals <span class="token operator">-</span> minVals  <span class="token comment">#最大值和最小值的范围</span>
<span class="token number">78.</span>	    normDataSet <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#shape(dataSet)返回dataSet的矩阵行列数</span>
<span class="token number">79.</span>	    m <span class="token operator">=</span> dataSet<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">#numpy函数shape[0]返回dataSet的行数</span>
<span class="token number">80.</span>	    normDataSet <span class="token operator">=</span> dataSet <span class="token operator">-</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>minVals<span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#原始值减去最小值（x-xmin）</span>
<span class="token number">81.</span>	    normDataSet <span class="token operator">=</span> normDataSet <span class="token operator">/</span> np<span class="token punctuation">.</span>tile<span class="token punctuation">(</span>ranges<span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#差值处以最大值和最小值的差值（x-xmin）/（xmax-xmin）</span>
<span class="token number">82.</span>	    <span class="token keyword">return</span> normDataSet<span class="token punctuation">,</span> ranges<span class="token punctuation">,</span> minVals  <span class="token comment">#归一化数据结果，数据范围，最小值</span>
<span class="token number">83.</span>	 
<span class="token number">84.</span>	 
<span class="token number">85.</span>	<span class="token triple-quoted-string string">"""
86.	函数说明：分类器测试函数
87.	Returns:
88.	    normDataSet - 归一化后的特征矩阵
89.	    ranges - 数据范围
90.	    minVals - 数据最小值
91.	"""</span>
<span class="token number">92.</span>	<span class="token keyword">def</span> <span class="token function">datingClassTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">93.</span>	    filename <span class="token operator">=</span> <span class="token string">"datingTestSet.txt"</span>  <span class="token comment">#打开数据集文件</span>
<span class="token number">94.</span>	    datingDataMat<span class="token punctuation">,</span> datingLabels <span class="token operator">=</span> file2matrix<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>  <span class="token comment">#将返回的特征矩阵和分类向量分别存储到datingDataMat和datingLabels中</span>
<span class="token number">95.</span>	    hoRatio <span class="token operator">=</span> <span class="token number">0.10</span>  <span class="token comment">#取所有数据的10% hoRatio越小，错误率越低</span>
<span class="token number">96.</span>	    normMat<span class="token punctuation">,</span> ranges<span class="token punctuation">,</span> minVals <span class="token operator">=</span> autoNorm<span class="token punctuation">(</span>datingDataMat<span class="token punctuation">)</span>  <span class="token comment">#数据归一化，返回归一化数据结果，数据范围，最小值</span>
<span class="token number">97.</span>	    m <span class="token operator">=</span> normMat<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">#获取normMat的行数</span>
<span class="token number">98.</span>	    numTestVecs <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>m  hoRatio<span class="token punctuation">)</span>  <span class="token comment">#数据集中10%的个数</span>
<span class="token number">99.</span>	    errorCount <span class="token operator">=</span> <span class="token number">0.0</span>  <span class="token comment">#分类错误的计数</span>
<span class="token number">100.</span>	    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>numTestVecs<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">101.</span>	        <span class="token comment"># 前numTestVecs个数据作为测试集，后m-numTestVecs个数据作为训练集</span>
<span class="token number">102.</span>	        <span class="token comment"># k选择label数+1（结果比较好）</span>
<span class="token number">103.</span>	        classifierResult <span class="token operator">=</span> classify0<span class="token punctuation">(</span>normMat<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> normMat<span class="token punctuation">[</span>numTestVecs<span class="token punctuation">:</span>m<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token number">104.</span>	                                     datingLabels<span class="token punctuation">[</span>numTestVecs<span class="token punctuation">:</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token number">105.</span>	        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"分类结果:%dt真实类别:%d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>classifierResult<span class="token punctuation">,</span> datingLabels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#输出分类的结果和真实结果</span>
<span class="token number">106.</span>	        <span class="token keyword">if</span> classifierResult <span class="token operator">!=</span> datingLabels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment">#分类结果与真实结果不同时，错误计数+1</span>
<span class="token number">107.</span>	            errorCount <span class="token operator">+=</span> <span class="token number">1.0</span>
<span class="token number">108.</span>	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"n分类错误数量: %d"</span> <span class="token operator">%</span> errorCount<span class="token punctuation">)</span>  <span class="token comment"># 输出模拟识别错误的数量</span>
<span class="token number">109.</span>	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"错误率:%f%%"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>errorCount <span class="token operator">/</span> <span class="token builtin">float</span><span class="token punctuation">(</span>numTestVecs<span class="token punctuation">)</span>  <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#输出错误率</span>
<span class="token number">110.</span>	 
<span class="token number">111.</span>	<span class="token triple-quoted-string string">"""
112.	函数说明：main函数
113.	"""</span>
<span class="token number">114.</span>	<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">115.</span>	    <span class="token comment"># 获取程序运行时间</span>
<span class="token number">116.</span>	    start <span class="token operator">=</span> time<span class="token punctuation">.</span>perfcounter<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">117.</span>	    datingClassTest<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">118.</span>	    <span class="token comment"># 结束时间</span>
<span class="token number">119.</span>	    end <span class="token operator">=</span> time<span class="token punctuation">.</span>perfcounter<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">120.</span>	 
<span class="token number">121.</span>	    <span class="token comment"># 打印程序运行时间</span>
<span class="token number">122.</span>	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Running time: %f Seconds'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">123.</span>	 
<span class="token number">124.</span>	<span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">'main'</span><span class="token punctuation">:</span>
<span class="token number">125.</span>	    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63588c70f60488a84492cd0d39196f27/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">threejs-场景创建（基于react-hooks）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/20b89a687a547da5695abd267c85a0e8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue2和Vue3的响应式原理及区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>