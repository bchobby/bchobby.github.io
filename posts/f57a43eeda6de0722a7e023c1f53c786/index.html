<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hadoop集群环境搭建 HDFS操作基础命令（附hadoop、jdk安装包） - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hadoop集群环境搭建 HDFS操作基础命令（附hadoop、jdk安装包）" />
<meta property="og:description" content="文章目录 CentOS01的安装和配置下载CentOS 7.2镜像 系统安装创建新的虚拟机安装操作系统 环境配置给予 Hadoop用户 root 权限关闭防火墙配置Vmware虚拟网络编辑器的NAT设置给centos01设置固定IP本地 ping 地址 测试修改主机名创建资源目录/opt/modules/、/opt/software/ Java环境配置卸载系统自带的JDK，后查询不到jdk相关文件上传jdk到虚拟机文件目录下将jdk安装包解压到/opt/modules/下配置环境变量检查是否安装成功 由CentOS01克隆出CentOS02、CentOS03，并配置相关环境克隆虚拟机CentOS02，CentOS03配置主机名修改IP配置主机ip映射IP映射测试集群配置无秘钥登录创建密钥发送密钥 Hadoop环境配置上传Hadoop 安装包将hadoop安装包解压到/opt/modules/下配置系统环境变量（centos01）Hadoop添加jdk环境变量配置HDFS配置yarn复制hadoop安装文件到其他节点格式化namenode启动Hadoop 环境测试hdfs命令测试Live Nodes 访问测试(测试mapreduce): Hadoop 命令一些环境配置的建议...按步骤来搭建要学会看log日志文件。要理解整个搭建过程和Hadoop体系权限管理很重要。 资源下载 环境
VMware Workstation Pro 12.0
MobaXtrerm（看自己需要）
需要的安装包
CentOS 7.2 iso镜像
jdk 1.8.0 for Linux
hadoop 2.8.5 for Linux
CentOS01的安装和配置 下载CentOS 7.2镜像 将所需要的镜像文件下载到电脑中
系统安装 创建新的虚拟机 给虚拟机命名为centos01
安装操作系统 安装GNOME桌面
不要忘记创建hadoop用户，并赋给它管理员权限。
环境配置 给予 Hadoop用户 root 权限 打开文件
su vi /etc/profile 添加后，令它立即生效
source /etc/profile 关闭防火墙 配置Vmware虚拟网络编辑器的NAT设置 给centos01设置固定IP 本地 ping 地址 测试 修改主机名 查看主机名" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/f57a43eeda6de0722a7e023c1f53c786/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-17T22:16:13+08:00" />
<meta property="article:modified_time" content="2020-12-17T22:16:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hadoop集群环境搭建 HDFS操作基础命令（附hadoop、jdk安装包）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#CentOS01_10" rel="nofollow">CentOS01的安装和配置</a></li><li><ul><li><ul><li><a href="#CentOS_72_13" rel="nofollow">下载CentOS 7.2镜像</a></li></ul> 
   </li><li><a href="#_15" rel="nofollow">系统安装</a></li><li><ul><li><a href="#_16" rel="nofollow">创建新的虚拟机</a></li><li><a href="#_18" rel="nofollow">安装操作系统</a></li></ul> 
   </li><li><a href="#_21" rel="nofollow">环境配置</a></li><li><ul><li><a href="#_Hadoop_root__22" rel="nofollow">给予 Hadoop用户 root 权限</a></li><li><a href="#_37" rel="nofollow">关闭防火墙</a></li><li><a href="#VmwareNAT_41" rel="nofollow">配置Vmware虚拟网络编辑器的NAT设置</a></li><li><a href="#centos01IP_45" rel="nofollow">给centos01设置固定IP</a></li><li><a href="#_ping___47" rel="nofollow">本地 ping 地址 测试</a></li><li><a href="#_53" rel="nofollow">修改主机名</a></li><li><a href="#optmodulesoptsoftware_64" rel="nofollow">创建资源目录/opt/modules/、/opt/software/</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Java_71" rel="nofollow">Java环境配置</a></li><li><ul><li><a href="#JDKjdk_72" rel="nofollow">卸载系统自带的JDK，后查询不到jdk相关文件</a></li><li><a href="#jdk_79" rel="nofollow">上传jdk到虚拟机文件目录下</a></li><li><a href="#jdkoptmodules_83" rel="nofollow">将jdk安装包解压到/opt/modules/下</a></li><li><a href="#_87" rel="nofollow">配置环境变量</a></li><li><a href="#_104" rel="nofollow">检查是否安装成功</a></li></ul> 
  </li><li><a href="#CentOS01CentOS02CentOS03_108" rel="nofollow">由CentOS01克隆出CentOS02、CentOS03，并配置相关环境</a></li><li><ul><li><a href="#CentOS02CentOS03_109" rel="nofollow">克隆虚拟机CentOS02，CentOS03</a></li><li><a href="#_114" rel="nofollow">配置主机名</a></li><li><a href="#IP_120" rel="nofollow">修改IP</a></li><li><a href="#ip_125" rel="nofollow">配置主机ip映射</a></li><li><a href="#IP_138" rel="nofollow">IP映射测试</a></li><li><a href="#_143" rel="nofollow">集群配置无秘钥登录</a></li><li><ul><li><a href="#_145" rel="nofollow">创建密钥</a></li><li><a href="#_160" rel="nofollow">发送密钥</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Hadoop_182" rel="nofollow">Hadoop环境配置</a></li><li><ul><li><a href="#Hadoop__183" rel="nofollow">上传Hadoop 安装包</a></li><li><a href="#hadoopoptmodules_188" rel="nofollow">将hadoop安装包解压到/opt/modules/下</a></li><li><a href="#centos01_193" rel="nofollow">配置系统环境变量（centos01）</a></li><li><a href="#Hadoopjdk_202" rel="nofollow">Hadoop添加jdk环境变量</a></li><li><a href="#HDFS_207" rel="nofollow">配置HDFS</a></li><li><a href="#yarn_254" rel="nofollow">配置yarn</a></li><li><a href="#hadoop_281" rel="nofollow">复制hadoop安装文件到其他节点</a></li><li><a href="#namenode_288" rel="nofollow">格式化namenode</a></li><li><a href="#Hadoop_299" rel="nofollow">启动Hadoop</a></li></ul> 
  </li><li><a href="#_323" rel="nofollow">环境测试</a></li><li><ul><li><a href="#hdfs_324" rel="nofollow">hdfs命令测试</a></li><li><a href="#Live_Nodes_mapreduce_328" rel="nofollow">Live Nodes 访问测试(测试mapreduce):</a></li></ul> 
  </li><li><a href="#Hadoop__336" rel="nofollow">Hadoop 命令</a></li><li><a href="#_371" rel="nofollow">一些环境配置的建议...</a></li><li><ul><li><a href="#_372" rel="nofollow">按步骤来搭建</a></li><li><a href="#log_374" rel="nofollow">要学会看log日志文件。</a></li><li><a href="#Hadoop_376" rel="nofollow">要理解整个搭建过程和Hadoop体系</a></li><li><a href="#_380" rel="nofollow">权限管理很重要。</a></li><li><a href="#_382" rel="nofollow"></a></li></ul> 
  </li><li><a href="#_384" rel="nofollow">资源下载</a></li></ul> 
</div> 
<p></p> 
<p><strong>环境</strong><br> VMware Workstation Pro 12.0<br> MobaXtrerm（看自己需要）<br> <strong>需要的安装包</strong><br> CentOS 7.2 iso镜像<br> jdk 1.8.0 for Linux<br> hadoop 2.8.5 for Linux</p> 
<h2><a id="CentOS01_10"></a>CentOS01的安装和配置</h2> 
<h4><a id="CentOS_72_13"></a>下载CentOS 7.2镜像</h4> 
<p>将所需要的镜像文件下载到电脑中</p> 
<h3><a id="_15"></a>系统安装</h3> 
<h4><a id="_16"></a>创建新的虚拟机</h4> 
<p>给虚拟机命名为centos01</p> 
<h4><a id="_18"></a>安装操作系统</h4> 
<p>安装GNOME桌面<br> 不要忘记创建hadoop用户，并赋给它管理员权限。</p> 
<h3><a id="_21"></a>环境配置</h3> 
<h4><a id="_Hadoop_root__22"></a>给予 Hadoop用户 root 权限</h4> 
<p>打开文件</p> 
<pre><code>su 
vi /etc/profile
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/36/7QxsfcMv_o.png" alt="在这里插入图片描述"><br> 添加后，令它立即生效</p> 
<pre><code>source /etc/profile
</code></pre> 
<h4><a id="_37"></a>关闭防火墙</h4> 
<p><img src="https://images2.imgbox.com/74/40/ex7swLGK_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="VmwareNAT_41"></a>配置Vmware虚拟网络编辑器的NAT设置</h4> 
<p><img src="https://images2.imgbox.com/ce/d8/RMjdUh4y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="centos01IP_45"></a>给centos01设置固定IP</h4> 
<p><img src="https://images2.imgbox.com/1f/d8/rUOGZupz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_ping___47"></a>本地 ping 地址 测试</h4> 
<p><img src="https://images2.imgbox.com/46/a6/i1FY5rrx_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_53"></a>修改主机名</h4> 
<p>查看主机名<br> 修改主机名为centos01<br> 查看当前主机名<br> <img src="https://images2.imgbox.com/36/73/JSFCgPQp_o.png" alt="在这里插入图片描述"><br> 重启主机名就为centos01<br> <img src="https://images2.imgbox.com/99/ed/BnXk6lgE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="optmodulesoptsoftware_64"></a>创建资源目录/opt/modules/、/opt/software/</h4> 
<p><img src="https://images2.imgbox.com/0b/e9/W5bAtmOt_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Java_71"></a>Java环境配置</h2> 
<h3><a id="JDKjdk_72"></a>卸载系统自带的JDK，后查询不到jdk相关文件</h3> 
<pre><code>rpm -qa|grep java
sudo rpm -e --nodeps **
</code></pre> 
<h3><a id="jdk_79"></a>上传jdk到虚拟机文件目录下</h3> 
<p><img src="https://images2.imgbox.com/a6/53/kG9jcYQb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="jdkoptmodules_83"></a>将jdk安装包解压到/opt/modules/下</h3> 
<p><img src="https://images2.imgbox.com/4d/c0/7g5ZfkD7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_87"></a>配置环境变量</h3> 
<p>打开 /opt/profile文件，在最下面添加下面的内容<br> 打开的命令是：</p> 
<pre><code>sudo vi /etc/profile
</code></pre> 
<p><strong>修改后不要忘记保存</strong><br> <img src="https://images2.imgbox.com/e4/79/TZgFOB0t_o.png" alt="在这里插入图片描述"><br> 修改后为了快速令环境变量生效</p> 
<p>应该使用命令：</p> 
<pre><code>source /etc/profile
</code></pre> 
<h3><a id="_104"></a>检查是否安装成功</h3> 
<p>出现下面的java的版本号即为安装成功<br> <img src="https://images2.imgbox.com/e3/cd/GSnZFDDN_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="CentOS01CentOS02CentOS03_108"></a>由CentOS01克隆出CentOS02、CentOS03，并配置相关环境</h2> 
<h3><a id="CentOS02CentOS03_109"></a>克隆虚拟机CentOS02，CentOS03</h3> 
<p>克隆选项在Vm-虚拟机-管理，我们选择的是完整克隆。</p> 
<p><img src="https://images2.imgbox.com/2b/29/ioycT0i4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_114"></a>配置主机名</h3> 
<p>同centos01(除最后的数字不同，2写02，3写03)</p> 
<p>centos02<br> centos03</p> 
<h3><a id="IP_120"></a>修改IP</h3> 
<p>同centos01（除了IP都写成不一样的，尽量是相连的数字）<br> centos02:192.168.74.131<br> centos03:192.168.74.132</p> 
<h3><a id="ip_125"></a>配置主机ip映射</h3> 
<p><strong>三台虚拟机分别打开/etc/hosts,追加三个ip和主机名</strong></p> 
<p><img src="https://images2.imgbox.com/47/f8/ahOZYpX6_o.png" alt="在这里插入图片描述"><br> <strong>配置本地windows主机的ip映射</strong></p> 
<p>文件目录</p> 
<pre><code>C:\Windows\System32\drivers\etc\hosts
</code></pre> 
<p><img src="https://images2.imgbox.com/73/22/kY8AHNa0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="IP_138"></a>IP映射测试</h3> 
<p><strong>在各个节点上进行测试</strong><br> <img src="https://images2.imgbox.com/bf/47/4XbnSOJ8_o.png" alt="在这里插入图片描述"><br> 在cmd下分别测试三台虚拟机<br> <img src="https://images2.imgbox.com/2b/f4/bq1mGbiR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_143"></a>集群配置无秘钥登录</h3> 
<p><strong>无秘钥分两步！！！</strong></p> 
<h4><a id="_145"></a>创建密钥</h4> 
<p>分别在三个节点中执行以下命令</p> 
<p>这里让你输入直接回车就OK。（除了输入虚拟机密码和yes）</p> 
<pre><code>ssh localhost
cd  ~/.ssh/
ssh-keygen –t rsa 
</code></pre> 
<p><img src="https://images2.imgbox.com/db/c0/jNkO75Nk_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="_160"></a>发送密钥</h4> 
<p>分别在三个节点中执行以下命令<br> 可能需要输入密码</p> 
<pre><code>ssh-copy-id centos01
ssh-copy-id centos02
ssh-copy-id centos03
</code></pre> 
<p><strong>然后三台虚拟机就可以随便互相访问</strong><br> 进入命令为：</p> 
<pre><code>ssh 主机名
</code></pre> 
<p>退出命令</p> 
<pre><code>exit
</code></pre> 
<h2><a id="Hadoop_182"></a>Hadoop环境配置</h2> 
<h3><a id="Hadoop__183"></a>上传Hadoop 安装包</h3> 
<p><img src="https://images2.imgbox.com/1c/63/a72e4NqZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="hadoopoptmodules_188"></a>将hadoop安装包解压到/opt/modules/下</h3> 
<p><img src="https://images2.imgbox.com/74/c2/L910h0EY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="centos01_193"></a>配置系统环境变量（centos01）</h3> 
<p>同jdk环境变量的文件目录<br> <img src="https://images2.imgbox.com/1a/bc/KgHXKf6K_o.png" alt="在这里插入图片描述"><br> 保存后，不要忘记令它立即生效</p> 
<pre><code>source /etc/profile
</code></pre> 
<h3><a id="Hadoopjdk_202"></a>Hadoop添加jdk环境变量</h3> 
<p>向hadoop安装目录etc/hadoop下的hadoop-env.sh,mapred-env.sh,yarn-env.sh加入JAVA_HOME环境变量</p> 
<p><img src="https://images2.imgbox.com/b4/17/XASOhFnm_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="HDFS_207"></a>配置HDFS</h3> 
<p>修改配置文件core-site.xml，加入以下内容：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
         	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
             	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
             	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://centos01:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file: /opt/modules/hadoop-2.8.5/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>修改配置文件hdfs-site.xml，加入以下内容：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--不检查用户权限--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.permissions.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:/opt/modules/hadoop-2.8.5/tmp/dfs/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.datanode.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:/opt/modules/hadoop-2.8.5/tmp/dfs/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>修改slaves文件：</p> 
<pre><code>centos01
centos02
centos03
</code></pre> 
<h3><a id="yarn_254"></a>配置yarn</h3> 
<p>首先给文件更名</p> 
<pre><code>mv mapped-site.xml.template  mapred-site.xml
</code></pre> 
<p>向mapred-site.xml文件加入下面的内容：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>向yarn-site.xml文件加入下面的内容：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="hadoop_281"></a>复制hadoop安装文件到其他节点</h3> 
<p>这一步没成功的多数都是无秘钥登录没有配置好</p> 
<pre><code>scp -r hadoop-2.8.5/ hadoopacentos02: /opt/modules/
scp -r hadoop-2.8.5/ hadoopacentos03: /opt/modules/
</code></pre> 
<h3><a id="namenode_288"></a>格式化namenode</h3> 
<pre><code>hadoop namenode-format
</code></pre> 
<p>若能输出以下信息,说明格式化成功:<br> Storage directory /opt/modules/hadoop-2.8. 5/tmp/dfs/name has been successfully formatted</p> 
<p><img src="https://images2.imgbox.com/06/a2/swPV8AS8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Hadoop_299"></a>启动Hadoop</h3> 
<pre><code>start-all.sh
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/e6/OaHHgLhx_o.png" alt="在这里插入图片描述"></p> 
<p>使用jps命令，如果有下面的进程名代表启动成功：<br> 命令：</p> 
<pre><code>jps
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/7f/CoRssfDr_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_323"></a>环境测试</h2> 
<h3><a id="hdfs_324"></a>hdfs命令测试</h3> 
<p><img src="https://images2.imgbox.com/e0/7f/latX4gE2_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Live_Nodes_mapreduce_328"></a>Live Nodes 访问测试(测试mapreduce):</h3> 
<p>打开浏览器，访问下面的网页：<br> http://centos01:50070</p> 
<p>centos01也可以环境其ip，打开后，找到Live Nodes<br> <img src="https://images2.imgbox.com/f6/13/9MHaX90B_o.png" alt="在这里插入图片描述"><br> 进入链接后，发现有三个节点，如下图，即为测试成功！<br> <img src="https://images2.imgbox.com/20/eb/L9Oqjy1p_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Hadoop__336"></a>Hadoop 命令</h2> 
<p>HDFS命令和Linux命令差不多，不同的地方是前面加上了hadoop fs，并且命令前都加上了“-”符号。</p> 
<p>hdfs常见命令：</p> 
<p>hadoop fs -ls /<br> 以全路径的方式展示当前目录下及当前目录下所有子目录的全部文件,与linux系统下tree命令类似</p> 
<p>hadoop fs -lsr /<br> 显示目录下所有子目录或文件占用空间（逻辑空间）</p> 
<p>hadoop fs -du /<br> 显示该目录所占用的实际空间</p> 
<p>hadoop fs -count -q /</p> 
<p>hadoop fs -mv</p> 
<p>hadoop fs -cp</p> 
<p>hadoop fs -rm</p> 
<p>hadoop fs -rm -skipTrash<br> 不进入回收站直接删除</p> 
<p>hadoop fs -rmr /<br> 递归删除文件夹所有文件</p> 
<p>hadoop fs -expunge<br> 清空回收站</p> 
<p>hadoop fs -put<br> 被上传文件 /上传文件</p> 
<h2><a id="_371"></a>一些环境配置的建议…</h2> 
<h3><a id="_372"></a>按步骤来搭建</h3> 
<p>无秘钥登录一定要三台虚拟机都生成密钥后，再传输密钥</p> 
<h3><a id="log_374"></a>要学会看log日志文件。</h3> 
<p>log文件很重要，有报错看才该高兴，报错都会记录在log文件内，不看log文件都不知道具体哪里出错。</p> 
<h3><a id="Hadoop_376"></a>要理解整个搭建过程和Hadoop体系</h3> 
<p>理解后，再进行搭建会比较简单。很多步骤都是前后有条理性的。<br> 可以看看这篇文章：<a href="https://www.cnblogs.com/sdifens/articles/9700276.html" rel="nofollow">hadoop体系架构</a></p> 
<h3><a id="_380"></a>权限管理很重要。</h3> 
<p><strong>尽量不要使用root用户创建目录</strong>，不然权限管理很麻烦，当然，如果你只用root用户当我没说，但是以后工作可不一定给你root用户。</p> 
<h3><a id="_382"></a></h3> 
<h2><a id="_384"></a>资源下载</h2> 
<p>CentOS镜像文件大大了，上传不了，只有这两个了。<br> <a href="https://pan.baidu.com/s/1l6C8BwoNdwOR2O5ek-AjFQ" rel="nofollow">Hadoop 、 jdk安装包</a><br> 提取码: hhmr</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41182ea9bfaf7e0c5cb7dc05650394c0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">torch.nn.CrossEntropyLoss()用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d93d05116d72d35d0599de2c0eba3380/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CMS和G1的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>