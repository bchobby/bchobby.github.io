<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OGRE与Qt的结合（一）----使用OGRE渲染QWidget - 编程爱好者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OGRE与Qt的结合（一）----使用OGRE渲染QWidget" />
<meta property="og:description" content="最近几天开始重新学习Ogre，这次从源码编译了Ogre2.1，编译过程基本跟Ogre1.8.1类似，连第三方依赖库都是用的官网推荐的以前版本的，此处不多说了，网上有很多教程，现在给出下载连接。
Ogre2.1的源码： https://bitbucket.org/sinbad/ogre/branch/v2-1
Dependencies： https://bitbucket.org/cabalistic/ogredeps
编译好Ogre后开始尝试将其嵌入到Qt中，发现网上的指导教程非常的少，而且含糊不清，对于想上手的人来说非常困难。发现Ogre的Wiki有现成的结合Qt配置方案，给出网址 http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Setting&#43;Up&#43;An&#43;Application&#43;-&#43;QtCreator 参考。具体来说，主要是在Qt项目的pro文件中配置。以下是个人结合参考做出的Ogre渲染QWidget的例子。
1、新建一个Qt Widgets Application，在pro文件中添加配置信息如下
OGRE_HOME = D:/OGRE/Ogre2.1 LIBS *= user32.lib LIBS &#43;= -L$${OGRE_HOME}/boost/lib debug: LIBS &#43;= -L$${OGRE_HOME}/lib/debug release: LIBS &#43;= -L$${OGRE_HOME}/lib/release INCLUDEPATH &#43;= $${OGRE_HOME}/include INCLUDEPATH &#43;= $${OGRE_HOME}/include/OGRE INCLUDEPATH &#43;= $${OGRE_HOME}/include/OIS INCLUDEPATH &#43;= $${OGRE_HOME}/boost CONFIG(debug, debug|release){ LIBS *= -lOgreMain_d -lOIS_d -lOgreTerrain_d DESTDIR = $${OGRE_HOME}/bin/debug } else{ LIBS *= -lOgreMain -lOIS -OgreTerrain DESTDIR = $${OGRE_HOME}/bin/release } 2、新建类 TestOgre，并继承自QWidget。在TestOgre这个类中，实现创建Ogre的Root对象，定义资源，设置渲染引擎，创建渲染窗口，初始化资源，创建场景， 设置第三方库和插件库，创建帧监听器，启动渲染循环等工作。主要参考了Ogre Wiki的教程6
http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Basic&#43;Tutorial&#43;6&amp;structure=Tutorials
TestOgre.h
#ifndef TESTOGRE_H #define TESTOGRE_H #include &lt;QtGui&gt; #include &lt;Ogre." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bchobby.github.io/posts/f5d5ef7497e9d051c43f360d07a86ad0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-03-23T20:58:59+08:00" />
<meta property="article:modified_time" content="2015-03-23T20:58:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程爱好者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程爱好者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OGRE与Qt的结合（一）----使用OGRE渲染QWidget</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>         最近几天开始重新学习Ogre，这次从源码编译了Ogre2.1，编译过程基本跟Ogre1.8.1类似，连第三方依赖库都是用的官网推荐的以前版本的，此处不多说了，网上有很多教程，现在给出下载连接。</p> 
<p>         Ogre2.1的源码：  <a target="_blank" href="https://bitbucket.org/sinbad/ogre/branch/v2-1" rel="nofollow noopener noreferrer">https://bitbucket.org/sinbad/ogre/branch/v2-1</a></p> 
<p>         Dependencies： <a target="_blank" href="https://bitbucket.org/cabalistic/ogredeps" rel="nofollow noopener noreferrer">https://bitbucket.org/cabalistic/ogredeps</a></p> 
<p>         编译好Ogre后开始尝试将其嵌入到Qt中，发现网上的指导教程非常的少，而且含糊不清，对于想上手的人来说非常困难。发现Ogre的Wiki有现成的结合Qt配置方案，给出网址 <a target="_blank" href="http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Setting+Up+An+Application+-+QtCreator" rel="nofollow noopener noreferrer">http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Setting+Up+An+Application+-+QtCreator</a>  参考。具体来说，主要是在Qt项目的pro文件中配置。以下是个人结合参考做出的Ogre渲染QWidget的例子。</p> 
<p>        1、新建一个Qt Widgets Application，在pro文件中添加配置信息如下</p> 
<p></p> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px">OGRE_HOME<span style="color:rgb(192,192,192)">  </span>=<span style="color:rgb(192,192,192)">  </span>D:/OGRE/Ogre2.1</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">LIBS</span><span style="color:rgb(192,192,192)"> </span>*=<span style="color:rgb(192,192,192)"> </span>user32.lib</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">LIBS</span><span style="color:rgb(192,192,192)"> </span>+=<span style="color:rgb(192,192,192)"> </span>-L$${OGRE_HOME}/boost/lib</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px">debug:<span style="color:rgb(192,192,192)">   </span><span style="color:rgb(128,0,128)">LIBS</span><span style="color:rgb(192,192,192)">   </span>+=<span style="color:rgb(192,192,192)"> </span>-L$${OGRE_HOME}/lib/debug</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px">release:<span style="color:rgb(192,192,192)"> </span><span style="color:rgb(128,0,128)">LIBS</span><span style="color:rgb(192,192,192)">   </span>+=<span style="color:rgb(192,192,192)"> </span>-L$${OGRE_HOME}/lib/release</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">INCLUDEPATH</span><span style="color:rgb(192,192,192)">   </span>+=<span style="color:rgb(192,192,192)">  </span>$${OGRE_HOME}/<span style="color:rgb(128,128,0)">include</span></pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">INCLUDEPATH</span><span style="color:rgb(192,192,192)">   </span>+=<span style="color:rgb(192,192,192)">  </span>$${OGRE_HOME}/<span style="color:rgb(128,128,0)">include</span>/OGRE</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">INCLUDEPATH</span><span style="color:rgb(192,192,192)">   </span>+=<span style="color:rgb(192,192,192)">  </span>$${OGRE_HOME}/<span style="color:rgb(128,128,0)">include</span>/OIS</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">INCLUDEPATH</span><span style="color:rgb(192,192,192)">   </span>+=<span style="color:rgb(192,192,192)">  </span>$${OGRE_HOME}/boost</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(128,0,128)">CONFIG</span>(debug,<span style="color:rgb(192,192,192)"> </span>debug|release){<!-- --></pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(192,192,192)">    </span><span style="color:rgb(128,0,128)">LIBS</span><span style="color:rgb(192,192,192)"> </span>*=<span style="color:rgb(192,192,192)"> </span>-lOgreMain_d<span style="color:rgb(192,192,192)"> </span>-lOIS_d<span style="color:rgb(192,192,192)"> </span>-lOgreTerrain_d</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(192,192,192)">    </span><span style="color:rgb(128,0,128)">DESTDIR</span><span style="color:rgb(192,192,192)"> </span>=<span style="color:rgb(192,192,192)"> </span>$${OGRE_HOME}/bin/debug</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px">}</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px">else{<!-- --></pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(192,192,192)">    </span><span style="color:rgb(128,0,128)">LIBS</span><span style="color:rgb(192,192,192)"> </span>*=<span style="color:rgb(192,192,192)"> </span>-lOgreMain<span style="color:rgb(192,192,192)"> </span>-lOIS<span style="color:rgb(192,192,192)"> </span>-OgreTerrain</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px"><span style="color:rgb(192,192,192)">    </span><span style="color:rgb(128,0,128)">DESTDIR</span><span style="color:rgb(192,192,192)"> </span>=<span style="color:rgb(192,192,192)"> </span>$${OGRE_HOME}/bin/release</pre> 
<pre style="text-align:left; margin-top:0px; margin-bottom:0px">}</pre>      2、新建类 TestOgre，并继承自QWidget。在TestOgre这个类中，实现创建Ogre的Root对象，定义资源，设置渲染引擎，创建渲染窗口，初始化资源，创建场景， 
<p></p> 
<p>设置第三方库和插件库，创建帧监听器，启动渲染循环等工作。主要参考了Ogre Wiki的教程6</p> 
<p><a target="_blank" href="http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Basic+Tutorial+6&amp;structure=Tutorials" rel="nofollow noopener noreferrer">http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Basic+Tutorial+6&amp;structure=Tutorials</a><br> </p> 
<p>TestOgre.h</p> 
<p></p> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#ifndef</span><span style="color:#c0c0c0"> </span>TESTOGRE_H</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#define</span><span style="color:#c0c0c0"> </span><span style="color:#000080">TESTOGRE_H</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">&lt;QtGui&gt;</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">&lt;Ogre.h&gt;</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">class</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span><span style="color:#c0c0c0"> </span>:<span style="color:#c0c0c0"> </span><span style="color:#808000">public</span><span style="color:#c0c0c0"> </span><span style="color:#800080">QWidget</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#000080">Q_OBJECT</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">public</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">TestOgre</span>(<span style="color:#800080">QWidget</span><span style="color:#c0c0c0"> </span>*parent<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>);</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>~<span style="font-style:italic">TestOgre</span>();</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Override</span><span style="color:#c0c0c0"> </span><span style="color:#008000">QWidget::paintEngine</span><span style="color:#c0c0c0"> </span><span style="color:#008000">to</span><span style="color:#c0c0c0"> </span><span style="color:#008000">return</span><span style="color:#c0c0c0"> </span><span style="color:#008000">NULL</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">QPaintEngine</span>*<span style="color:#c0c0c0"> </span><span style="font-style:italic">paintEngine</span>()<span style="color:#c0c0c0"> </span><span style="color:#808000">const</span>;<span style="color:#c0c0c0"> </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Turn</span><span style="color:#c0c0c0"> </span><span style="color:#008000">off</span><span style="color:#c0c0c0"> </span><span style="color:#008000">QTs</span><span style="color:#c0c0c0"> </span><span style="color:#008000">paint</span><span style="color:#c0c0c0"> </span><span style="color:#008000">engine</span><span style="color:#c0c0c0"> </span><span style="color:#008000">for</span><span style="color:#c0c0c0"> </span><span style="color:#008000">the</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Ogre</span><span style="color:#c0c0c0"> </span><span style="color:#008000">widget.</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0"> </span><span style="color:#808000">protected</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#808000">virtual</span><span style="color:#c0c0c0"> </span><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="font-style:italic">paintEvent</span>(<span style="color:#800080">QPaintEvent</span><span style="color:#c0c0c0"> </span>*e);</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#808000">virtual</span><span style="color:#c0c0c0"> </span><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="font-style:italic">resizeEvent</span>(<span style="color:#800080">QResizeEvent</span><span style="color:#c0c0c0"> </span>*e);</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#808000">virtual</span><span style="color:#c0c0c0"> </span><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="font-style:italic">showEvent</span>(<span style="color:#800080">QShowEvent</span><span style="color:#c0c0c0"> </span>*e);</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0"> </span><span style="color:#808000">private</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#808000">void</span><span style="color:#c0c0c0">                               </span>InitOgreSystem();</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#808000">void</span><span style="color:#c0c0c0">                               </span>SetupAndLoadResources();</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#808000">void</span><span style="color:#c0c0c0">                               </span>CreateScene();</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0"> </span><span style="color:#808000">private</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Root</span>*<span style="color:#c0c0c0">                        </span><span style="color:#800000">m_Root</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">SceneManager</span>*<span style="color:#c0c0c0">                </span><span style="color:#800000">m_SceneManager</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">RenderWindow</span>*<span style="color:#c0c0c0">                </span><span style="color:#800000">m_RenderWindow</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Viewport</span>*<span style="color:#c0c0c0">                    </span><span style="color:#800000">m_Viewport</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Camera</span>*<span style="color:#c0c0c0">                      </span><span style="color:#800000">m_Camera</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">String</span><span style="color:#c0c0c0">                       </span><span style="color:#800000">mPluginsCfg</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">     </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">String</span><span style="color:#c0c0c0">                       </span><span style="color:#800000">mResourcesCfg</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px">};</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#endif</span><span style="color:#c0c0c0"> </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">TESTOGRE_H</span></pre> 
<p></p> 
<p><br> </p> 
<p>TestOgre.cpp<br> </p> 
<p></p> 
<pre style="margin-top:0px; margin-bottom:0px"><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">"TestOgre.h"</span></pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#800080">TestOgre</span>::TestOgre(<span style="color:#800080">QWidget</span><span style="color:#c0c0c0"> </span>*parent)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>:<span style="color:#800080">QWidget</span>(parent)</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Root</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_SceneManager</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_RenderWindow</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Viewport</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Camera</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">mPluginsCfg</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800000">BLANK</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">mResourcesCfg</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800000">BLANK</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>setAttribute(<span style="color:#800080">Qt</span>::<span style="color:#800080">WA_OpaquePaintEvent</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>setAttribute(<span style="color:#800080">Qt</span>::<span style="color:#800080">WA_PaintOnScreen</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>setFocusPolicy(<span style="color:#800080">Qt</span>::<span style="color:#800080">ClickFocus</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#800080">TestOgre</span>::~<span style="font-style:italic">TestOgre</span>()</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">if</span>(<span style="color:#800000">m_RenderWindow</span>)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#800000">m_RenderWindow</span>-&gt;<span style="font-style:italic">removeAllViewports</span>();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">if</span>(<span style="color:#800000">m_Root</span>)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#800000">m_Root</span>-&gt;detachRenderTarget(<span style="color:#800000">m_RenderWindow</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#808000">if</span>(<span style="color:#800000">m_SceneManager</span>)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#800000">m_Root</span>-&gt;destroySceneManager(<span style="color:#800000">m_SceneManager</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">delete</span><span style="color:#c0c0c0"> </span><span style="color:#800000">m_Root</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#800080">QPaintEngine</span>*<span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::<span style="font-style:italic">paintEngine</span>()<span style="color:#c0c0c0"> </span><span style="color:#808000">const</span></pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">return</span><span style="color:#c0c0c0"> </span><span style="color:#000080">NULL</span>;</pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::<span style="font-style:italic">paintEvent</span>(<span style="color:#800080">QPaintEvent</span><span style="color:#c0c0c0"> </span>*e)</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Root</span>-&gt;_fireFrameStarted();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#800000">m_RenderWindow</span>-&gt;<span style="font-style:italic">update</span>();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Root</span>-&gt;_fireFrameEnded();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>e-&gt;accept();</pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::<span style="font-style:italic">resizeEvent</span>(<span style="color:#800080">QResizeEvent</span><span style="color:#c0c0c0"> </span>*e)</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">QWidget</span>::<span style="font-style:italic">resizeEvent</span>(e);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">if</span>(e-&gt;isAccepted())</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#808000">const</span><span style="color:#c0c0c0"> </span><span style="color:#800080">QSize</span><span style="color:#c0c0c0"> </span>&amp;newSize<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>e-&gt;size();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#808000">if</span>(<span style="color:#800000">m_RenderWindow</span>)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#800000">m_RenderWindow</span>-&gt;<span style="font-style:italic">resize</span>(newSize.width(),<span style="color:#c0c0c0"> </span>newSize.height());</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#800000">m_RenderWindow</span>-&gt;<span style="font-style:italic">windowMovedOrResized</span>();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#808000">if</span>(<span style="color:#800000">m_Camera</span>)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Real</span><span style="color:#c0c0c0"> </span>aspectRatio<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Real</span>(newSize.width())<span style="color:#c0c0c0"> </span>/<span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Real</span>(newSize.height());</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#800000">m_Camera</span>-&gt;<span style="font-style:italic">setAspectRatio</span>(aspectRatio);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>}</pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::<span style="font-style:italic">showEvent</span>(<span style="color:#800080">QShowEvent</span><span style="color:#c0c0c0"> </span>*e)</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">if</span>(!<span style="color:#800000">m_Root</span>)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>InitOgreSystem();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">QWidget</span>::<span style="font-style:italic">showEvent</span>(e);</pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::InitOgreSystem()</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --><span style="color:#c0c0c0"> </span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>SetupAndLoadResources();</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">RenderSystem</span><span style="color:#c0c0c0"> </span>*renderSystem<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_Root</span>-&gt;getRenderSystemByName(<span style="color:#008000">"OpenGL</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Rendering</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Subsystem"</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Root</span>-&gt;setRenderSystem(renderSystem);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Root</span>-&gt;initialise(<span style="color:#808000">false</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">String</span><span style="color:#c0c0c0"> </span>widgetHandle;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#ifdef</span><span style="color:#c0c0c0"> </span><span style="color:#000080">Q_WS_WIN</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>widgetHandle<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">StringConverter</span>::toString((<span style="color:#800080">size_t</span>)((<span style="color:#800080">HWND</span>)winId()));</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#else</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>QWidget<span style="color:#c0c0c0"> </span>*q_parent<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#808000">dynamic_cast</span><span style="color:#c0c0c0"> </span>&lt;QWidget<span style="color:#c0c0c0"> </span>*&gt;<span style="color:#c0c0c0"> </span>(parent());</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>QX11Info<span style="color:#c0c0c0"> </span>xInfo<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>x11Info();</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>widgetHandle<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>Ogre::StringConverter::toString<span style="color:#c0c0c0"> </span>((<span style="color:#808000">unsigned</span><span style="color:#c0c0c0"> </span><span style="color:#808000">long</span>)xInfo.display())<span style="color:#c0c0c0"> </span>+</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#008000">":"</span><span style="color:#c0c0c0"> </span>+<span style="color:#c0c0c0"> </span>Ogre::StringConverter::toString<span style="color:#c0c0c0"> </span>((<span style="color:#808000">unsigned</span><span style="color:#c0c0c0"> </span><span style="color:#808000">int</span>)xInfo.screen())<span style="color:#c0c0c0"> </span>+</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#008000">":"</span><span style="color:#c0c0c0"> </span>+<span style="color:#c0c0c0"> </span>Ogre::StringConverter::toString<span style="color:#c0c0c0"> </span>((<span style="color:#808000">unsigned</span><span style="color:#c0c0c0"> </span><span style="color:#808000">long</span>)q_parent-&gt;winId());</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#endif</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">NameValuePairList</span><span style="color:#c0c0c0"> </span>misc;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>misc[<span style="color:#008000">"externalWindowHandle"</span>]<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>widgetHandle;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_RenderWindow</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_Root</span>-&gt;createRenderWindow(<span style="color:#008000">"Ogre</span><span style="color:#c0c0c0"> </span><span style="color:#008000">rendering</span><span style="color:#c0c0c0"> </span><span style="color:#008000">window"</span>,</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">                                                </span>width(),<span style="color:#c0c0c0"> </span>height(),<span style="color:#c0c0c0"> </span><span style="color:#808000">false</span>,<span style="color:#c0c0c0"> </span>&amp;misc);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Set</span><span style="color:#c0c0c0"> </span><span style="color:#008000">default</span><span style="color:#c0c0c0"> </span><span style="color:#008000">mipmap</span><span style="color:#c0c0c0"> </span><span style="color:#008000">level</span><span style="color:#c0c0c0"> </span><span style="color:#008000">(note:</span><span style="color:#c0c0c0"> </span><span style="color:#008000">some</span><span style="color:#c0c0c0"> </span><span style="color:#008000">APIs</span><span style="color:#c0c0c0"> </span><span style="color:#008000">ignore</span><span style="color:#c0c0c0"> </span><span style="color:#008000">this)</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">TextureManager</span>::getSingleton().<span style="font-style:italic">setDefaultNumMipmaps</span>(<span style="color:#000080">5</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">initialise</span><span style="color:#c0c0c0"> </span><span style="color:#008000">all</span><span style="color:#c0c0c0"> </span><span style="color:#008000">resource</span><span style="color:#c0c0c0"> </span><span style="color:#008000">groups</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">ResourceGroupManager</span>::getSingleton().initialiseAllResourceGroups();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Create</span><span style="color:#c0c0c0"> </span><span style="color:#008000">the</span><span style="color:#c0c0c0"> </span><span style="color:#008000">SceneManager,</span><span style="color:#c0c0c0"> </span><span style="color:#008000">in</span><span style="color:#c0c0c0"> </span><span style="color:#008000">this</span><span style="color:#c0c0c0"> </span><span style="color:#008000">case</span><span style="color:#c0c0c0"> </span><span style="color:#008000">a</span><span style="color:#c0c0c0"> </span><span style="color:#008000">generic</span><span style="color:#c0c0c0"> </span><span style="color:#008000">one</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_SceneManager</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_Root</span>-&gt;createSceneManager(<span style="color:#800080">Ogre</span>::<span style="color:#800080">ST_GENERIC</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Create</span><span style="color:#c0c0c0"> </span><span style="color:#008000">the</span><span style="color:#c0c0c0"> </span><span style="color:#008000">camera</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Camera</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_SceneManager</span>-&gt;<span style="font-style:italic">createCamera</span>(<span style="color:#008000">"myCamera"</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Position</span><span style="color:#c0c0c0"> </span><span style="color:#008000">it</span><span style="color:#c0c0c0"> </span><span style="color:#008000">at</span><span style="color:#c0c0c0"> </span><span style="color:#008000">80</span><span style="color:#c0c0c0"> </span><span style="color:#008000">in</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Z</span><span style="color:#c0c0c0"> </span><span style="color:#008000">direction</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Camera</span>-&gt;setPosition(<span style="color:#800080">Ogre</span>::<span style="color:#800080">Vector3</span>(<span style="color:#000080">0</span>,<span style="color:#000080">0</span>,<span style="color:#000080">80</span>));</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Look</span><span style="color:#c0c0c0"> </span><span style="color:#008000">back</span><span style="color:#c0c0c0"> </span><span style="color:#008000">along</span><span style="color:#c0c0c0"> </span><span style="color:#008000">-Z</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Camera</span>-&gt;lookAt(<span style="color:#800080">Ogre</span>::<span style="color:#800080">Vector3</span>(<span style="color:#000080">0</span>,<span style="color:#000080">0</span>,-<span style="color:#000080">300</span>));</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Camera</span>-&gt;<span style="font-style:italic">setNearClipDistance</span>(<span style="color:#000080">5</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Create</span><span style="color:#c0c0c0"> </span><span style="color:#008000">one</span><span style="color:#c0c0c0"> </span><span style="color:#008000">viewport,</span><span style="color:#c0c0c0"> </span><span style="color:#008000">entire</span><span style="color:#c0c0c0"> </span><span style="color:#008000">window</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Viewport</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_RenderWindow</span>-&gt;<span style="font-style:italic">addViewport</span>(<span style="color:#800000">m_Camera</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Viewport</span>-&gt;setBackgroundColour(<span style="color:#800080">Ogre</span>::<span style="color:#800080">ColourValue</span>(<span style="color:#000080">0</span>,<span style="color:#000080">0</span>,<span style="color:#000080">0</span>));</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Alter</span><span style="color:#c0c0c0"> </span><span style="color:#008000">the</span><span style="color:#c0c0c0"> </span><span style="color:#008000">camera</span><span style="color:#c0c0c0"> </span><span style="color:#008000">aspect</span><span style="color:#c0c0c0"> </span><span style="color:#008000">ratio</span><span style="color:#c0c0c0"> </span><span style="color:#008000">to</span><span style="color:#c0c0c0"> </span><span style="color:#008000">match</span><span style="color:#c0c0c0"> </span><span style="color:#008000">the</span><span style="color:#c0c0c0"> </span><span style="color:#008000">viewport</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Camera</span>-&gt;<span style="font-style:italic">setAspectRatio</span>(<span style="color:#800080">Ogre</span>::<span style="color:#800080">Real</span>(width())<span style="color:#c0c0c0"> </span>/<span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Real</span>(height()));</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>CreateScene();</pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::SetupAndLoadResources()</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#ifdef</span><span style="color:#c0c0c0"> </span><span style="color:#000080">_DEBUG</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">mResourcesCfg</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#008000">"resources_d.cfg"</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">mPluginsCfg</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#008000">"plugins_d.cfg"</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#else</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>mResourcesCfg<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#008000">"resources.cfg"</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>mPluginsCfg<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#008000">"plugins.cfg"</span>;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#endif</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">set</span><span style="color:#c0c0c0"> </span><span style="color:#008000">up</span><span style="color:#c0c0c0"> </span><span style="color:#008000">resources</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Load</span><span style="color:#c0c0c0"> </span><span style="color:#008000">resource</span><span style="color:#c0c0c0"> </span><span style="color:#008000">paths</span><span style="color:#c0c0c0"> </span><span style="color:#008000">from</span><span style="color:#c0c0c0"> </span><span style="color:#008000">config</span><span style="color:#c0c0c0"> </span><span style="color:#008000">file</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">ConfigFile</span><span style="color:#c0c0c0"> </span>cf;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>cf.load(<span style="color:#800000">mResourcesCfg</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_Root</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#808000">new</span><span style="color:#c0c0c0"> </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Root</span>(<span style="color:#800000">mPluginsCfg</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Go</span><span style="color:#c0c0c0"> </span><span style="color:#008000">through</span><span style="color:#c0c0c0"> </span><span style="color:#008000">all</span><span style="color:#c0c0c0"> </span><span style="color:#008000">sections</span><span style="color:#c0c0c0"> </span><span style="color:#008000">&amp;</span><span style="color:#c0c0c0"> </span><span style="color:#008000">settings</span><span style="color:#c0c0c0"> </span><span style="color:#008000">in</span><span style="color:#c0c0c0"> </span><span style="color:#008000">the</span><span style="color:#c0c0c0"> </span><span style="color:#008000">file</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">ConfigFile</span>::<span style="color:#800080">SectionIterator</span><span style="color:#c0c0c0"> </span>seci<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>cf.getSectionIterator();</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">String</span><span style="color:#c0c0c0"> </span>secName,<span style="color:#c0c0c0"> </span>typeName,<span style="color:#c0c0c0"> </span>archName;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">while</span><span style="color:#c0c0c0"> </span>(seci.hasMoreElements())</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>secName<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>seci.peekNextKey();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">ConfigFile</span>::<span style="color:#800080">SettingsMultiMap</span><span style="color:#c0c0c0"> </span>*settings<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>seci.getNext();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">ConfigFile</span>::<span style="color:#800080">SettingsMultiMap</span>::<span style="color:#800080">iterator</span><span style="color:#c0c0c0"> </span>i;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span><span style="color:#808000">for</span><span style="color:#c0c0c0"> </span>(i<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>settings-&gt;begin();<span style="color:#c0c0c0"> </span>i<span style="color:#c0c0c0"> </span>!=<span style="color:#c0c0c0"> </span>settings-&gt;end();<span style="color:#c0c0c0"> </span>++i)</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span>typeName<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>i-&gt;first;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span>archName<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span>i-&gt;second;</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">            </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">ResourceGroupManager</span>::getSingleton().addResourceLocation(</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">                        </span>archName,<span style="color:#c0c0c0"> </span>typeName,<span style="color:#c0c0c0"> </span>secName);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">        </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">void</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>::CreateScene()</pre><pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Entity</span>*<span style="color:#c0c0c0"> </span>ogreHead<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_SceneManager</span>-&gt;<span style="font-style:italic">createEntity</span>(<span style="color:#008000">"Head"</span>,<span style="color:#c0c0c0"> </span><span style="color:#008000">"ogrehead.mesh"</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">SceneNode</span>*<span style="color:#c0c0c0"> </span>headNode<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_SceneManager</span>-&gt;<span style="font-style:italic">getRootSceneNode</span>()-&gt;<span style="font-style:italic">createChildSceneNode</span>();</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>headNode-&gt;<span style="font-style:italic">attachObject</span>(ogreHead);</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Set</span><span style="color:#c0c0c0"> </span><span style="color:#008000">ambient</span><span style="color:#c0c0c0"> </span><span style="color:#008000">light</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">m_SceneManager</span>-&gt;setAmbientLight(<span style="color:#800080">Ogre</span>::<span style="color:#800080">ColourValue</span>(<span style="color:#000080">0.5</span>,<span style="color:#c0c0c0"> </span><span style="color:#000080">0.5</span>,<span style="color:#c0c0c0"> </span><span style="color:#000080">0.5</span>));</pre><pre style="margin-top:0px; margin-bottom:0px"></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">Create</span><span style="color:#c0c0c0"> </span><span style="color:#008000">a</span><span style="color:#c0c0c0"> </span><span style="color:#008000">light</span></pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ogre</span>::<span style="color:#800080">Light</span>*<span style="color:#c0c0c0"> </span>l<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#800000">m_SceneManager</span>-&gt;<span style="font-style:italic">createLight</span>(<span style="color:#008000">"MainLight"</span>);</pre><pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>l-&gt;setPosition(<span style="color:#000080">20</span>,<span style="color:#000080">80</span>,<span style="color:#000080">50</span>);</pre><pre style="margin-top:0px; margin-bottom:0px">}</pre><pre style="margin-top:0px; margin-bottom:0px"></pre></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<p></p> 
<p>     3、在MainWindow类中声明一个TestOgre类指针，用以渲染主窗口的Widget</p> 
<p>mainwindow.h</p> 
<p></p> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#ifndef</span><span style="color:#c0c0c0"> </span>MAINWINDOW_H</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#define</span><span style="color:#c0c0c0"> </span><span style="color:#000080">MAINWINDOW_H</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">&lt;QMainWindow&gt;</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">"TestOgre.h"</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">namespace</span><span style="color:#c0c0c0"> </span><span style="color:#800080">Ui</span><span style="color:#c0c0c0"> </span>{<!-- --></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">class</span><span style="color:#c0c0c0"> </span><span style="color:#800080">MainWindow</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px">}</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">class</span><span style="color:#c0c0c0"> </span><span style="color:#800080">MainWindow</span><span style="color:#c0c0c0"> </span>:<span style="color:#c0c0c0"> </span><span style="color:#808000">public</span><span style="color:#c0c0c0"> </span><span style="color:#800080">QMainWindow</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#000080">Q_OBJECT</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">public</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">explicit</span><span style="color:#c0c0c0"> </span><span style="color:#800080">MainWindow</span>(<span style="color:#800080">QWidget</span><span style="color:#c0c0c0"> </span>*parent<span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#000080">0</span>);</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>~<span style="font-style:italic">MainWindow</span>();</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">private</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">TestOgre</span>*<span style="color:#c0c0c0">                         </span><span style="color:#800000">ogreWidget</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#808000">private</span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">Ui</span>::<span style="color:#800080">MainWindow</span><span style="color:#c0c0c0"> </span>*<span style="color:#800000">ui</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px">};</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#endif</span><span style="color:#c0c0c0"> </span><span style="color:#008000">//</span><span style="color:#c0c0c0"> </span><span style="color:#008000">MAINWINDOW_H</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<p></p> 
<p>mainwindow.cpp</p> 
<p></p> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">"mainwindow.h"</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#000080">#include</span><span style="color:#c0c0c0"> </span><span style="color:#008000">"ui_mainwindow.h"</span></pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#800080">MainWindow</span>::MainWindow(<span style="color:#800080">QWidget</span><span style="color:#c0c0c0"> </span>*parent)<span style="color:#c0c0c0"> </span>:</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800080">QMainWindow</span>(parent),</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">ui</span>(<span style="color:#808000">new</span><span style="color:#c0c0c0"> </span><span style="color:#800080">Ui</span>::<span style="color:#800080">MainWindow</span>)</pre> 
<pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">ui</span>-&gt;setupUi(<span style="color:#808000">this</span>);</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#800000">ogreWidget</span><span style="color:#c0c0c0"> </span>=<span style="color:#c0c0c0"> </span><span style="color:#808000">new</span><span style="color:#c0c0c0"> </span><span style="color:#800080">TestOgre</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span>setCentralWidget(<span style="color:#800000">ogreWidget</span>);</pre> 
<pre style="margin-top:0px; margin-bottom:0px">}</pre> 
<pre style="margin-top:0px; margin-bottom:0px"></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#800080">MainWindow</span>::~<span style="font-style:italic">MainWindow</span>()</pre> 
<pre style="margin-top:0px; margin-bottom:0px">{<!-- --></pre> 
<pre style="margin-top:0px; margin-bottom:0px"><span style="color:#c0c0c0">    </span><span style="color:#808000">delete</span><span style="color:#c0c0c0"> </span><span style="color:#800000">ui</span>;</pre> 
<pre style="margin-top:0px; margin-bottom:0px">}</pre> 
<br> 
<p></p> 
<p>                        编译运行即可看到Ogre！</p> 
<p><br> </p> 
<p><img src="https://images2.imgbox.com/97/a6/WmPNyI8v_o.jpg" alt=""><br> </p> 
<p><br> </p> 
<p>      哈哈，这样以后就可以更进一步的学习Ogre了。下一步打算，添加帧监听器，加载地形，通过COM组件来调用Ogre。继续加油吧！</p> 
<p><br> </p> 
<p><br> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/547444fb14e6abd51ffaa3a4fa103716/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">转移矩阵</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c1d84e279a24590113de3e9fb940d5b2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用二进制权限控制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程爱好者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>

<script src="https://www.w3counter.com/tracker.js?id=151260"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>